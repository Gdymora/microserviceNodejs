// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles
parcelRequire = (function (modules, cache, entry, globalName) {
  // Save the require from previous bundle to this closure if any
  var previousRequire = typeof parcelRequire === 'function' && parcelRequire;
  var nodeRequire = typeof require === 'function' && require;

  function newRequire(name, jumped) {
    if (!cache[name]) {
      if (!modules[name]) {
        // if we cannot find the module within our internal map or
        // cache jump to the current global require ie. the last bundle
        // that was added to the page.
        var currentRequire = typeof parcelRequire === 'function' && parcelRequire;
        if (!jumped && currentRequire) {
          return currentRequire(name, true);
        }

        // If there are other bundles on this page the require from the
        // previous one is saved to 'previousRequire'. Repeat this as
        // many times as there are bundles until the module is found or
        // we exhaust the require chain.
        if (previousRequire) {
          return previousRequire(name, true);
        }

        // Try the node require function if it exists.
        if (nodeRequire && typeof name === 'string') {
          return nodeRequire(name);
        }

        var err = new Error('Cannot find module \'' + name + '\'');
        err.code = 'MODULE_NOT_FOUND';
        throw err;
      }

      localRequire.resolve = resolve;
      localRequire.cache = {};

      var module = cache[name] = new newRequire.Module(name);

      modules[name][0].call(module.exports, localRequire, module, module.exports, this);
    }

    return cache[name].exports;

    function localRequire(x){
      return newRequire(localRequire.resolve(x));
    }

    function resolve(x){
      return modules[name][1][x] || x;
    }
  }

  function Module(moduleName) {
    this.id = moduleName;
    this.bundle = newRequire;
    this.exports = {};
  }

  newRequire.isParcelRequire = true;
  newRequire.Module = Module;
  newRequire.modules = modules;
  newRequire.cache = cache;
  newRequire.parent = previousRequire;
  newRequire.register = function (id, exports) {
    modules[id] = [function (require, module) {
      module.exports = exports;
    }, {}];
  };

  var error;
  for (var i = 0; i < entry.length; i++) {
    try {
      newRequire(entry[i]);
    } catch (e) {
      // Save first error but execute all entries
      if (!error) {
        error = e;
      }
    }
  }

  if (entry.length) {
    // Expose entry point to Node, AMD or browser globals
    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
    var mainExports = newRequire(entry[entry.length - 1]);

    // CommonJS
    if (typeof exports === "object" && typeof module !== "undefined") {
      module.exports = mainExports;

    // RequireJS
    } else if (typeof define === "function" && define.amd) {
     define(function () {
       return mainExports;
     });

    // <script>
    } else if (globalName) {
      this[globalName] = mainExports;
    }
  }

  // Override the current require with this new one
  parcelRequire = newRequire;

  if (error) {
    // throw error from earlier, _after updating parcelRequire_
    throw error;
  }

  return newRequire;
})({"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/node_modules/process/browser.js":[function(require,module,exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;
function defaultSetTimout() {
  throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout() {
  throw new Error('clearTimeout has not been defined');
}
(function () {
  try {
    if (typeof setTimeout === 'function') {
      cachedSetTimeout = setTimeout;
    } else {
      cachedSetTimeout = defaultSetTimout;
    }
  } catch (e) {
    cachedSetTimeout = defaultSetTimout;
  }
  try {
    if (typeof clearTimeout === 'function') {
      cachedClearTimeout = clearTimeout;
    } else {
      cachedClearTimeout = defaultClearTimeout;
    }
  } catch (e) {
    cachedClearTimeout = defaultClearTimeout;
  }
})();
function runTimeout(fun) {
  if (cachedSetTimeout === setTimeout) {
    //normal enviroments in sane situations
    return setTimeout(fun, 0);
  }
  // if setTimeout wasn't available but was latter defined
  if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
    cachedSetTimeout = setTimeout;
    return setTimeout(fun, 0);
  }
  try {
    // when when somebody has screwed with setTimeout but no I.E. maddness
    return cachedSetTimeout(fun, 0);
  } catch (e) {
    try {
      // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
      return cachedSetTimeout.call(null, fun, 0);
    } catch (e) {
      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
      return cachedSetTimeout.call(this, fun, 0);
    }
  }
}
function runClearTimeout(marker) {
  if (cachedClearTimeout === clearTimeout) {
    //normal enviroments in sane situations
    return clearTimeout(marker);
  }
  // if clearTimeout wasn't available but was latter defined
  if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
    cachedClearTimeout = clearTimeout;
    return clearTimeout(marker);
  }
  try {
    // when when somebody has screwed with setTimeout but no I.E. maddness
    return cachedClearTimeout(marker);
  } catch (e) {
    try {
      // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
      return cachedClearTimeout.call(null, marker);
    } catch (e) {
      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
      // Some versions of I.E. have different rules for clearTimeout vs setTimeout
      return cachedClearTimeout.call(this, marker);
    }
  }
}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;
function cleanUpNextTick() {
  if (!draining || !currentQueue) {
    return;
  }
  draining = false;
  if (currentQueue.length) {
    queue = currentQueue.concat(queue);
  } else {
    queueIndex = -1;
  }
  if (queue.length) {
    drainQueue();
  }
}
function drainQueue() {
  if (draining) {
    return;
  }
  var timeout = runTimeout(cleanUpNextTick);
  draining = true;
  var len = queue.length;
  while (len) {
    currentQueue = queue;
    queue = [];
    while (++queueIndex < len) {
      if (currentQueue) {
        currentQueue[queueIndex].run();
      }
    }
    queueIndex = -1;
    len = queue.length;
  }
  currentQueue = null;
  draining = false;
  runClearTimeout(timeout);
}
process.nextTick = function (fun) {
  var args = new Array(arguments.length - 1);
  if (arguments.length > 1) {
    for (var i = 1; i < arguments.length; i++) {
      args[i - 1] = arguments[i];
    }
  }
  queue.push(new Item(fun, args));
  if (queue.length === 1 && !draining) {
    runTimeout(drainQueue);
  }
};

// v8 likes predictible objects
function Item(fun, array) {
  this.fun = fun;
  this.array = array;
}
Item.prototype.run = function () {
  this.fun.apply(null, this.array);
};
process.title = 'browser';
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};
function noop() {}
process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;
process.listeners = function (name) {
  return [];
};
process.binding = function (name) {
  throw new Error('process.binding is not supported');
};
process.cwd = function () {
  return '/';
};
process.chdir = function (dir) {
  throw new Error('process.chdir is not supported');
};
process.umask = function () {
  return 0;
};
},{}],"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/node_modules/base64-js/index.js":[function(require,module,exports) {
'use strict'

exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function getLens (b64) {
  var len = b64.length

  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42
  var validLen = b64.indexOf('=')
  if (validLen === -1) validLen = len

  var placeHoldersLen = validLen === len
    ? 0
    : 4 - (validLen % 4)

  return [validLen, placeHoldersLen]
}

// base64 is 4/3 + up to two characters of the original data
function byteLength (b64) {
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function _byteLength (b64, validLen, placeHoldersLen) {
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function toByteArray (b64) {
  var tmp
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]

  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))

  var curByte = 0

  // if there are placeholders, only get up to the last complete 4 chars
  var len = placeHoldersLen > 0
    ? validLen - 4
    : validLen

  var i
  for (i = 0; i < len; i += 4) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 18) |
      (revLookup[b64.charCodeAt(i + 1)] << 12) |
      (revLookup[b64.charCodeAt(i + 2)] << 6) |
      revLookup[b64.charCodeAt(i + 3)]
    arr[curByte++] = (tmp >> 16) & 0xFF
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 2) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 2) |
      (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 1) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 10) |
      (revLookup[b64.charCodeAt(i + 1)] << 4) |
      (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] +
    lookup[num >> 12 & 0x3F] +
    lookup[num >> 6 & 0x3F] +
    lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp =
      ((uint8[i] << 16) & 0xFF0000) +
      ((uint8[i + 1] << 8) & 0xFF00) +
      (uint8[i + 2] & 0xFF)
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    parts.push(
      lookup[tmp >> 2] +
      lookup[(tmp << 4) & 0x3F] +
      '=='
    )
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1]
    parts.push(
      lookup[tmp >> 10] +
      lookup[(tmp >> 4) & 0x3F] +
      lookup[(tmp << 2) & 0x3F] +
      '='
    )
  }

  return parts.join('')
}

},{}],"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/node_modules/ieee754/index.js":[function(require,module,exports) {
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = ((value * c) - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}

},{}],"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/node_modules/isarray/index.js":[function(require,module,exports) {
var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};

},{}],"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/node_modules/buffer/index.js":[function(require,module,exports) {

var global = arguments[3];
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */

'use strict'

var base64 = require('base64-js')
var ieee754 = require('ieee754')
var isArray = require('isarray')

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

},{"base64-js":"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/node_modules/base64-js/index.js","ieee754":"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/node_modules/ieee754/index.js","isarray":"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/node_modules/isarray/index.js","buffer":"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/node_modules/buffer/index.js"}],"dist/main.js":[function(require,module,exports) {
var define;
var process = require("process");
var Buffer = require("buffer").Buffer;
function _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }
function _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError("Cannot initialize the same private elements twice on an object"); } }
function _classPrivateFieldSet(receiver, privateMap, value) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, "set"); _classApplyDescriptorSet(receiver, descriptor, value); return value; }
function _classApplyDescriptorSet(receiver, descriptor, value) { if (descriptor.set) { descriptor.set.call(receiver, value); } else { if (!descriptor.writable) { throw new TypeError("attempted to set read only private field"); } descriptor.value = value; } }
function _classPrivateFieldGet(receiver, privateMap) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, "get"); return _classApplyDescriptorGet(receiver, descriptor); }
function _classExtractFieldDescriptor(receiver, privateMap, action) { if (!privateMap.has(receiver)) { throw new TypeError("attempted to " + action + " private field on non-instance"); } return privateMap.get(receiver); }
function _classApplyDescriptorGet(receiver, descriptor) { if (descriptor.get) { return descriptor.get.call(receiver); } return descriptor.value; }
function _defineAccessor(type, obj, key, fn) { var desc = { configurable: !0, enumerable: !0 }; return desc[type] = fn, Object.defineProperty(obj, key, desc); }
function _get2() { if (typeof Reflect !== "undefined" && Reflect.get) { _get2 = Reflect.get.bind(); } else { _get2 = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get2.apply(this, arguments); }
function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = "function" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || "@@iterator", asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator", toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, ""); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, "_invoke", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: "normal", arg: fn.call(obj, arg) }; } catch (err) { return { type: "throw", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { ["next", "throw", "return"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if ("throw" !== record.type) { var result = record.arg, value = result.value; return value && "object" == _typeof(value) && hasOwn.call(value, "__await") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke("next", value, resolve, reject); }, function (err) { invoke("throw", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke("throw", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, "_invoke", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = "suspendedStart"; return function (method, arg) { if ("executing" === state) throw new Error("Generator is already running"); if ("completed" === state) { if ("throw" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if ("next" === context.method) context.sent = context._sent = context.arg;else if ("throw" === context.method) { if ("suspendedStart" === state) throw state = "completed", context.arg; context.dispatchException(context.arg); } else "return" === context.method && context.abrupt("return", context.arg); state = "executing"; var record = tryCatch(innerFn, self, context); if ("normal" === record.type) { if (state = context.done ? "completed" : "suspendedYield", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } "throw" === record.type && (state = "completed", context.method = "throw", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, "throw" === methodName && delegate.iterator.return && (context.method = "return", context.arg = undefined, maybeInvokeDelegate(delegate, context), "throw" === context.method) || "return" !== methodName && (context.method = "throw", context.arg = new TypeError("The iterator does not provide a '" + methodName + "' method")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if ("throw" === record.type) return context.method = "throw", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, "return" !== context.method && (context.method = "next", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = "throw", context.arg = new TypeError("iterator result is not an object"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = "normal", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: "root" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if ("function" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, "GeneratorFunction"), exports.isGeneratorFunction = function (genFun) { var ctor = "function" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || "GeneratorFunction" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, "GeneratorFunction")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, "Generator"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, "toString", function () { return "[object Generator]"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = "next", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) "t" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if ("throw" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = "throw", record.arg = exception, context.next = loc, caught && (context.method = "next", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if ("root" === entry.tryLoc) return handle("end"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, "catchLoc"), hasFinally = hasOwn.call(entry, "finallyLoc"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error("try statement without catch or finally"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && ("break" === type || "continue" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = "next", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if ("throw" === record.type) throw record.arg; return "break" === record.type || "continue" === record.type ? this.next = record.arg : "return" === record.type ? (this.rval = this.arg = record.arg, this.method = "return", this.next = "end") : "normal" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if ("throw" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, "next" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _wrapNativeSuper(Class) { var _cache = typeof Map === "function" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== "function") { throw new TypeError("Super expression must either be null or a function"); } if (typeof _cache !== "undefined") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }
function _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }
function _isNativeFunction(fn) { return Function.toString.call(fn).indexOf("[native code]") !== -1; }
function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }
function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }
function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e158) { throw _e158; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e159) { didErr = true; err = _e159; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _asyncGeneratorDelegate(inner) { var iter = {}, waiting = !1; function pump(key, value) { return waiting = !0, value = new Promise(function (resolve) { resolve(inner[key](value)); }), { done: !1, value: new _OverloadYield(value, 1) }; } return iter["undefined" != typeof Symbol && Symbol.iterator || "@@iterator"] = function () { return this; }, iter.next = function (value) { return waiting ? (waiting = !1, value) : pump("next", value); }, "function" == typeof inner.throw && (iter.throw = function (value) { if (waiting) throw waiting = !1, value; return pump("throw", value); }), "function" == typeof inner.return && (iter.return = function (value) { return waiting ? (waiting = !1, value) : pump("return", value); }), iter; }
function _asyncIterator(iterable) { var method, async, sync, retry = 2; for ("undefined" != typeof Symbol && (async = Symbol.asyncIterator, sync = Symbol.iterator); retry--;) { if (async && null != (method = iterable[async])) return method.call(iterable); if (sync && null != (method = iterable[sync])) return new AsyncFromSyncIterator(method.call(iterable)); async = "@@asyncIterator", sync = "@@iterator"; } throw new TypeError("Object is not async iterable"); }
function AsyncFromSyncIterator(s) { function AsyncFromSyncIteratorContinuation(r) { if (Object(r) !== r) return Promise.reject(new TypeError(r + " is not an object.")); var done = r.done; return Promise.resolve(r.value).then(function (value) { return { value: value, done: done }; }); } return AsyncFromSyncIterator = function AsyncFromSyncIterator(s) { this.s = s, this.n = s.next; }, AsyncFromSyncIterator.prototype = { s: null, n: null, next: function next() { return AsyncFromSyncIteratorContinuation(this.n.apply(this.s, arguments)); }, return: function _return(value) { var ret = this.s.return; return void 0 === ret ? Promise.resolve({ value: value, done: !0 }) : AsyncFromSyncIteratorContinuation(ret.apply(this.s, arguments)); }, throw: function _throw(value) { var thr = this.s.return; return void 0 === thr ? Promise.reject(value) : AsyncFromSyncIteratorContinuation(thr.apply(this.s, arguments)); } }, new AsyncFromSyncIterator(s); }
function _awaitAsyncGenerator(value) { return new _OverloadYield(value, 0); }
function _wrapAsyncGenerator(fn) { return function () { return new _AsyncGenerator(fn.apply(this, arguments)); }; }
function _AsyncGenerator(gen) { var front, back; function resume(key, arg) { try { var result = gen[key](arg), value = result.value, overloaded = value instanceof _OverloadYield; Promise.resolve(overloaded ? value.v : value).then(function (arg) { if (overloaded) { var nextKey = "return" === key ? "return" : "next"; if (!value.k || arg.done) return resume(nextKey, arg); arg = gen[nextKey](arg).value; } settle(result.done ? "return" : "normal", arg); }, function (err) { resume("throw", err); }); } catch (err) { settle("throw", err); } } function settle(type, value) { switch (type) { case "return": front.resolve({ value: value, done: !0 }); break; case "throw": front.reject(value); break; default: front.resolve({ value: value, done: !1 }); } (front = front.next) ? resume(front.key, front.arg) : back = null; } this._invoke = function (key, arg) { return new Promise(function (resolve, reject) { var request = { key: key, arg: arg, resolve: resolve, reject: reject, next: null }; back ? back = back.next = request : (front = back = request, resume(key, arg)); }); }, "function" != typeof gen.return && (this.return = void 0); }
_AsyncGenerator.prototype["function" == typeof Symbol && Symbol.asyncIterator || "@@asyncIterator"] = function () { return this; }, _AsyncGenerator.prototype.next = function (arg) { return this._invoke("next", arg); }, _AsyncGenerator.prototype.throw = function (arg) { return this._invoke("throw", arg); }, _AsyncGenerator.prototype.return = function (arg) { return this._invoke("return", arg); };
function _OverloadYield(value, kind) { this.v = value, this.k = kind; }
/*! For license information please see main.js.LICENSE.txt */
(function () {
  var __webpack_modules__ = {
      4537: function _(e) {
        "use strict";

        e.exports = function (e, t) {
          for (var r = new Array(arguments.length - 1), n = 0, i = 2, s = !0; i < arguments.length;) r[n++] = arguments[i++];
          return new Promise(function (i, o) {
            r[n] = function (e) {
              if (s) if (s = !1, e) o(e);else {
                for (var t = new Array(arguments.length - 1), r = 0; r < t.length;) t[r++] = arguments[r];
                i.apply(null, t);
              }
            };
            try {
              e.apply(t || null, r);
            } catch (e) {
              s && (s = !1, o(e));
            }
          });
        };
      },
      7419: function _(e, t) {
        "use strict";

        var r = t;
        r.length = function (e) {
          var t = e.length;
          if (!t) return 0;
          for (var r = 0; --t % 4 > 1 && "=" === e.charAt(t);) ++r;
          return Math.ceil(3 * e.length) / 4 - r;
        };
        for (var n = new Array(64), i = new Array(123), s = 0; s < 64;) i[n[s] = s < 26 ? s + 65 : s < 52 ? s + 71 : s < 62 ? s - 4 : s - 59 | 43] = s++;
        r.encode = function (e, t, r) {
          for (var i, s = null, o = [], a = 0, c = 0; t < r;) {
            var l = e[t++];
            switch (c) {
              case 0:
                o[a++] = n[l >> 2], i = (3 & l) << 4, c = 1;
                break;
              case 1:
                o[a++] = n[i | l >> 4], i = (15 & l) << 2, c = 2;
                break;
              case 2:
                o[a++] = n[i | l >> 6], o[a++] = n[63 & l], c = 0;
            }
            a > 8191 && ((s || (s = [])).push(String.fromCharCode.apply(String, o)), a = 0);
          }
          return c && (o[a++] = n[i], o[a++] = 61, 1 === c && (o[a++] = 61)), s ? (a && s.push(String.fromCharCode.apply(String, o.slice(0, a))), s.join("")) : String.fromCharCode.apply(String, o.slice(0, a));
        };
        var o = "invalid encoding";
        r.decode = function (e, t, r) {
          for (var n, s = r, a = 0, c = 0; c < e.length;) {
            var l = e.charCodeAt(c++);
            if (61 === l && a > 1) break;
            if (void 0 === (l = i[l])) throw Error(o);
            switch (a) {
              case 0:
                n = l, a = 1;
                break;
              case 1:
                t[r++] = n << 2 | (48 & l) >> 4, n = l, a = 2;
                break;
              case 2:
                t[r++] = (15 & n) << 4 | (60 & l) >> 2, n = l, a = 3;
                break;
              case 3:
                t[r++] = (3 & n) << 6 | l, a = 0;
            }
          }
          if (1 === a) throw Error(o);
          return r - s;
        }, r.test = function (e) {
          return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e);
        };
      },
      9211: function _(e) {
        "use strict";

        function t() {
          this._listeners = {};
        }
        e.exports = t, t.prototype.on = function (e, t, r) {
          return (this._listeners[e] || (this._listeners[e] = [])).push({
            fn: t,
            ctx: r || this
          }), this;
        }, t.prototype.off = function (e, t) {
          if (void 0 === e) this._listeners = {};else if (void 0 === t) this._listeners[e] = [];else for (var r = this._listeners[e], n = 0; n < r.length;) r[n].fn === t ? r.splice(n, 1) : ++n;
          return this;
        }, t.prototype.emit = function (e) {
          var t = this._listeners[e];
          if (t) {
            for (var r = [], n = 1; n < arguments.length;) r.push(arguments[n++]);
            for (n = 0; n < t.length;) t[n].fn.apply(t[n++].ctx, r);
          }
          return this;
        };
      },
      945: function _(e) {
        "use strict";

        function t(e) {
          return "undefined" != typeof Float32Array ? function () {
            var t = new Float32Array([-0]),
              r = new Uint8Array(t.buffer),
              n = 128 === r[3];
            function i(e, n, i) {
              t[0] = e, n[i] = r[0], n[i + 1] = r[1], n[i + 2] = r[2], n[i + 3] = r[3];
            }
            function s(e, n, i) {
              t[0] = e, n[i] = r[3], n[i + 1] = r[2], n[i + 2] = r[1], n[i + 3] = r[0];
            }
            function o(e, n) {
              return r[0] = e[n], r[1] = e[n + 1], r[2] = e[n + 2], r[3] = e[n + 3], t[0];
            }
            function a(e, n) {
              return r[3] = e[n], r[2] = e[n + 1], r[1] = e[n + 2], r[0] = e[n + 3], t[0];
            }
            e.writeFloatLE = n ? i : s, e.writeFloatBE = n ? s : i, e.readFloatLE = n ? o : a, e.readFloatBE = n ? a : o;
          }() : function () {
            function t(e, t, r, n) {
              var i = t < 0 ? 1 : 0;
              if (i && (t = -t), 0 === t) e(1 / t > 0 ? 0 : 2147483648, r, n);else if (isNaN(t)) e(2143289344, r, n);else if (t > 34028234663852886e22) e((i << 31 | 2139095040) >>> 0, r, n);else if (t < 11754943508222875e-54) e((i << 31 | Math.round(t / 1401298464324817e-60)) >>> 0, r, n);else {
                var s = Math.floor(Math.log(t) / Math.LN2);
                e((i << 31 | s + 127 << 23 | 8388607 & Math.round(t * Math.pow(2, -s) * 8388608)) >>> 0, r, n);
              }
            }
            function o(e, t, r) {
              var n = e(t, r),
                i = 2 * (n >> 31) + 1,
                s = n >>> 23 & 255,
                o = 8388607 & n;
              return 255 === s ? o ? NaN : i * (1 / 0) : 0 === s ? 1401298464324817e-60 * i * o : i * Math.pow(2, s - 150) * (o + 8388608);
            }
            e.writeFloatLE = t.bind(null, r), e.writeFloatBE = t.bind(null, n), e.readFloatLE = o.bind(null, i), e.readFloatBE = o.bind(null, s);
          }(), "undefined" != typeof Float64Array ? function () {
            var t = new Float64Array([-0]),
              r = new Uint8Array(t.buffer),
              n = 128 === r[7];
            function i(e, n, i) {
              t[0] = e, n[i] = r[0], n[i + 1] = r[1], n[i + 2] = r[2], n[i + 3] = r[3], n[i + 4] = r[4], n[i + 5] = r[5], n[i + 6] = r[6], n[i + 7] = r[7];
            }
            function s(e, n, i) {
              t[0] = e, n[i] = r[7], n[i + 1] = r[6], n[i + 2] = r[5], n[i + 3] = r[4], n[i + 4] = r[3], n[i + 5] = r[2], n[i + 6] = r[1], n[i + 7] = r[0];
            }
            function o(e, n) {
              return r[0] = e[n], r[1] = e[n + 1], r[2] = e[n + 2], r[3] = e[n + 3], r[4] = e[n + 4], r[5] = e[n + 5], r[6] = e[n + 6], r[7] = e[n + 7], t[0];
            }
            function a(e, n) {
              return r[7] = e[n], r[6] = e[n + 1], r[5] = e[n + 2], r[4] = e[n + 3], r[3] = e[n + 4], r[2] = e[n + 5], r[1] = e[n + 6], r[0] = e[n + 7], t[0];
            }
            e.writeDoubleLE = n ? i : s, e.writeDoubleBE = n ? s : i, e.readDoubleLE = n ? o : a, e.readDoubleBE = n ? a : o;
          }() : function () {
            function t(e, t, r, n, i, s) {
              var o = n < 0 ? 1 : 0;
              if (o && (n = -n), 0 === n) e(0, i, s + t), e(1 / n > 0 ? 0 : 2147483648, i, s + r);else if (isNaN(n)) e(0, i, s + t), e(2146959360, i, s + r);else if (n > 17976931348623157e292) e(0, i, s + t), e((o << 31 | 2146435072) >>> 0, i, s + r);else {
                var a;
                if (n < 22250738585072014e-324) e((a = n / 5e-324) >>> 0, i, s + t), e((o << 31 | a / 4294967296) >>> 0, i, s + r);else {
                  var c = Math.floor(Math.log(n) / Math.LN2);
                  1024 === c && (c = 1023), e(4503599627370496 * (a = n * Math.pow(2, -c)) >>> 0, i, s + t), e((o << 31 | c + 1023 << 20 | 1048576 * a & 1048575) >>> 0, i, s + r);
                }
              }
            }
            function o(e, t, r, n, i) {
              var s = e(n, i + t),
                o = e(n, i + r),
                a = 2 * (o >> 31) + 1,
                c = o >>> 20 & 2047,
                l = 4294967296 * (1048575 & o) + s;
              return 2047 === c ? l ? NaN : a * (1 / 0) : 0 === c ? 5e-324 * a * l : a * Math.pow(2, c - 1075) * (l + 4503599627370496);
            }
            e.writeDoubleLE = t.bind(null, r, 0, 4), e.writeDoubleBE = t.bind(null, n, 4, 0), e.readDoubleLE = o.bind(null, i, 0, 4), e.readDoubleBE = o.bind(null, s, 4, 0);
          }(), e;
        }
        function r(e, t, r) {
          t[r] = 255 & e, t[r + 1] = e >>> 8 & 255, t[r + 2] = e >>> 16 & 255, t[r + 3] = e >>> 24;
        }
        function n(e, t, r) {
          t[r] = e >>> 24, t[r + 1] = e >>> 16 & 255, t[r + 2] = e >>> 8 & 255, t[r + 3] = 255 & e;
        }
        function i(e, t) {
          return (e[t] | e[t + 1] << 8 | e[t + 2] << 16 | e[t + 3] << 24) >>> 0;
        }
        function s(e, t) {
          return (e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3]) >>> 0;
        }
        e.exports = t(t);
      },
      7199: function _(module) {
        "use strict";

        function inquire(moduleName) {
          try {
            var mod = eval("quire".replace(/^/, "re"))(moduleName);
            if (mod && (mod.length || Object.keys(mod).length)) return mod;
          } catch (e) {}
          return null;
        }
        module.exports = inquire;
      },
      6662: function _(e) {
        "use strict";

        e.exports = function (e, t, r) {
          var n = r || 8192,
            i = n >>> 1,
            s = null,
            o = n;
          return function (r) {
            if (r < 1 || r > i) return e(r);
            o + r > n && (s = e(n), o = 0);
            var a = t.call(s, o, o += r);
            return 7 & o && (o = 1 + (7 | o)), a;
          };
        };
      },
      4997: function _(e, t) {
        "use strict";

        var r = t;
        r.length = function (e) {
          for (var t = 0, r = 0, n = 0; n < e.length; ++n) (r = e.charCodeAt(n)) < 128 ? t += 1 : r < 2048 ? t += 2 : 55296 == (64512 & r) && 56320 == (64512 & e.charCodeAt(n + 1)) ? (++n, t += 4) : t += 3;
          return t;
        }, r.read = function (e, t, r) {
          if (r - t < 1) return "";
          for (var n, i = null, s = [], o = 0; t < r;) (n = e[t++]) < 128 ? s[o++] = n : n > 191 && n < 224 ? s[o++] = (31 & n) << 6 | 63 & e[t++] : n > 239 && n < 365 ? (n = ((7 & n) << 18 | (63 & e[t++]) << 12 | (63 & e[t++]) << 6 | 63 & e[t++]) - 65536, s[o++] = 55296 + (n >> 10), s[o++] = 56320 + (1023 & n)) : s[o++] = (15 & n) << 12 | (63 & e[t++]) << 6 | 63 & e[t++], o > 8191 && ((i || (i = [])).push(String.fromCharCode.apply(String, s)), o = 0);
          return i ? (o && i.push(String.fromCharCode.apply(String, s.slice(0, o))), i.join("")) : String.fromCharCode.apply(String, s.slice(0, o));
        }, r.write = function (e, t, r) {
          for (var n, i, s = r, o = 0; o < e.length; ++o) (n = e.charCodeAt(o)) < 128 ? t[r++] = n : n < 2048 ? (t[r++] = n >> 6 | 192, t[r++] = 63 & n | 128) : 55296 == (64512 & n) && 56320 == (64512 & (i = e.charCodeAt(o + 1))) ? (n = 65536 + ((1023 & n) << 10) + (1023 & i), ++o, t[r++] = n >> 18 | 240, t[r++] = n >> 12 & 63 | 128, t[r++] = n >> 6 & 63 | 128, t[r++] = 63 & n | 128) : (t[r++] = n >> 12 | 224, t[r++] = n >> 6 & 63 | 128, t[r++] = 63 & n | 128);
          return r - s;
        };
      },
      8099: function _(e, t, r) {
        "use strict";

        Object.defineProperty(t, "__esModule", {
          value: !0
        });
        var n = r(7117);
        function i(e, t, r) {
          return void 0 === t && (t = new Uint8Array(2)), void 0 === r && (r = 0), t[r + 0] = e >>> 8, t[r + 1] = e >>> 0, t;
        }
        function s(e, t, r) {
          return void 0 === t && (t = new Uint8Array(2)), void 0 === r && (r = 0), t[r + 0] = e >>> 0, t[r + 1] = e >>> 8, t;
        }
        function o(e, t) {
          return void 0 === t && (t = 0), e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3];
        }
        function a(e, t) {
          return void 0 === t && (t = 0), (e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3]) >>> 0;
        }
        function c(e, t) {
          return void 0 === t && (t = 0), e[t + 3] << 24 | e[t + 2] << 16 | e[t + 1] << 8 | e[t];
        }
        function l(e, t) {
          return void 0 === t && (t = 0), (e[t + 3] << 24 | e[t + 2] << 16 | e[t + 1] << 8 | e[t]) >>> 0;
        }
        function u(e, t, r) {
          return void 0 === t && (t = new Uint8Array(4)), void 0 === r && (r = 0), t[r + 0] = e >>> 24, t[r + 1] = e >>> 16, t[r + 2] = e >>> 8, t[r + 3] = e >>> 0, t;
        }
        function h(e, t, r) {
          return void 0 === t && (t = new Uint8Array(4)), void 0 === r && (r = 0), t[r + 0] = e >>> 0, t[r + 1] = e >>> 8, t[r + 2] = e >>> 16, t[r + 3] = e >>> 24, t;
        }
        function d(e, t, r) {
          return void 0 === t && (t = new Uint8Array(8)), void 0 === r && (r = 0), u(e / 4294967296 >>> 0, t, r), u(e >>> 0, t, r + 4), t;
        }
        function p(e, t, r) {
          return void 0 === t && (t = new Uint8Array(8)), void 0 === r && (r = 0), h(e >>> 0, t, r), h(e / 4294967296 >>> 0, t, r + 4), t;
        }
        t.readInt16BE = function (e, t) {
          return void 0 === t && (t = 0), (e[t + 0] << 8 | e[t + 1]) << 16 >> 16;
        }, t.readUint16BE = function (e, t) {
          return void 0 === t && (t = 0), (e[t + 0] << 8 | e[t + 1]) >>> 0;
        }, t.readInt16LE = function (e, t) {
          return void 0 === t && (t = 0), (e[t + 1] << 8 | e[t]) << 16 >> 16;
        }, t.readUint16LE = function (e, t) {
          return void 0 === t && (t = 0), (e[t + 1] << 8 | e[t]) >>> 0;
        }, t.writeUint16BE = i, t.writeInt16BE = i, t.writeUint16LE = s, t.writeInt16LE = s, t.readInt32BE = o, t.readUint32BE = a, t.readInt32LE = c, t.readUint32LE = l, t.writeUint32BE = u, t.writeInt32BE = u, t.writeUint32LE = h, t.writeInt32LE = h, t.readInt64BE = function (e, t) {
          void 0 === t && (t = 0);
          var r = o(e, t),
            n = o(e, t + 4);
          return 4294967296 * r + n - 4294967296 * (n >> 31);
        }, t.readUint64BE = function (e, t) {
          return void 0 === t && (t = 0), 4294967296 * a(e, t) + a(e, t + 4);
        }, t.readInt64LE = function (e, t) {
          void 0 === t && (t = 0);
          var r = c(e, t);
          return 4294967296 * c(e, t + 4) + r - 4294967296 * (r >> 31);
        }, t.readUint64LE = function (e, t) {
          void 0 === t && (t = 0);
          var r = l(e, t);
          return 4294967296 * l(e, t + 4) + r;
        }, t.writeUint64BE = d, t.writeInt64BE = d, t.writeUint64LE = p, t.writeInt64LE = p, t.readUintBE = function (e, t, r) {
          if (void 0 === r && (r = 0), e % 8 != 0) throw new Error("readUintBE supports only bitLengths divisible by 8");
          if (e / 8 > t.length - r) throw new Error("readUintBE: array is too short for the given bitLength");
          for (var n = 0, i = 1, s = e / 8 + r - 1; s >= r; s--) n += t[s] * i, i *= 256;
          return n;
        }, t.readUintLE = function (e, t, r) {
          if (void 0 === r && (r = 0), e % 8 != 0) throw new Error("readUintLE supports only bitLengths divisible by 8");
          if (e / 8 > t.length - r) throw new Error("readUintLE: array is too short for the given bitLength");
          for (var n = 0, i = 1, s = r; s < r + e / 8; s++) n += t[s] * i, i *= 256;
          return n;
        }, t.writeUintBE = function (e, t, r, i) {
          if (void 0 === r && (r = new Uint8Array(e / 8)), void 0 === i && (i = 0), e % 8 != 0) throw new Error("writeUintBE supports only bitLengths divisible by 8");
          if (!n.isSafeInteger(t)) throw new Error("writeUintBE value must be an integer");
          for (var s = 1, o = e / 8 + i - 1; o >= i; o--) r[o] = t / s & 255, s *= 256;
          return r;
        }, t.writeUintLE = function (e, t, r, i) {
          if (void 0 === r && (r = new Uint8Array(e / 8)), void 0 === i && (i = 0), e % 8 != 0) throw new Error("writeUintLE supports only bitLengths divisible by 8");
          if (!n.isSafeInteger(t)) throw new Error("writeUintLE value must be an integer");
          for (var s = 1, o = i; o < i + e / 8; o++) r[o] = t / s & 255, s *= 256;
          return r;
        }, t.readFloat32BE = function (e, t) {
          return void 0 === t && (t = 0), new DataView(e.buffer, e.byteOffset, e.byteLength).getFloat32(t);
        }, t.readFloat32LE = function (e, t) {
          return void 0 === t && (t = 0), new DataView(e.buffer, e.byteOffset, e.byteLength).getFloat32(t, !0);
        }, t.readFloat64BE = function (e, t) {
          return void 0 === t && (t = 0), new DataView(e.buffer, e.byteOffset, e.byteLength).getFloat64(t);
        }, t.readFloat64LE = function (e, t) {
          return void 0 === t && (t = 0), new DataView(e.buffer, e.byteOffset, e.byteLength).getFloat64(t, !0);
        }, t.writeFloat32BE = function (e, t, r) {
          return void 0 === t && (t = new Uint8Array(4)), void 0 === r && (r = 0), new DataView(t.buffer, t.byteOffset, t.byteLength).setFloat32(r, e), t;
        }, t.writeFloat32LE = function (e, t, r) {
          return void 0 === t && (t = new Uint8Array(4)), void 0 === r && (r = 0), new DataView(t.buffer, t.byteOffset, t.byteLength).setFloat32(r, e, !0), t;
        }, t.writeFloat64BE = function (e, t, r) {
          return void 0 === t && (t = new Uint8Array(8)), void 0 === r && (r = 0), new DataView(t.buffer, t.byteOffset, t.byteLength).setFloat64(r, e), t;
        }, t.writeFloat64LE = function (e, t, r) {
          return void 0 === t && (t = new Uint8Array(8)), void 0 === r && (r = 0), new DataView(t.buffer, t.byteOffset, t.byteLength).setFloat64(r, e, !0), t;
        };
      },
      5439: function _(e, t, r) {
        "use strict";

        Object.defineProperty(t, "__esModule", {
          value: !0
        });
        var n = r(8099),
          i = r(7309),
          s = 20;
        function o(e, t, r) {
          for (var i = 1634760805, o = 857760878, a = 2036477234, c = 1797285236, l = r[3] << 24 | r[2] << 16 | r[1] << 8 | r[0], u = r[7] << 24 | r[6] << 16 | r[5] << 8 | r[4], h = r[11] << 24 | r[10] << 16 | r[9] << 8 | r[8], d = r[15] << 24 | r[14] << 16 | r[13] << 8 | r[12], p = r[19] << 24 | r[18] << 16 | r[17] << 8 | r[16], f = r[23] << 24 | r[22] << 16 | r[21] << 8 | r[20], y = r[27] << 24 | r[26] << 16 | r[25] << 8 | r[24], g = r[31] << 24 | r[30] << 16 | r[29] << 8 | r[28], m = t[3] << 24 | t[2] << 16 | t[1] << 8 | t[0], w = t[7] << 24 | t[6] << 16 | t[5] << 8 | t[4], E = t[11] << 24 | t[10] << 16 | t[9] << 8 | t[8], b = t[15] << 24 | t[14] << 16 | t[13] << 8 | t[12], v = i, _ = o, S = a, C = c, A = l, I = u, T = h, R = d, k = p, N = f, L = y, D = g, P = m, B = w, O = E, x = b, U = 0; U < s; U += 2) A = (A ^= k = k + (P = (P ^= v = v + A | 0) >>> 16 | P << 16) | 0) >>> 20 | A << 12, I = (I ^= N = N + (B = (B ^= _ = _ + I | 0) >>> 16 | B << 16) | 0) >>> 20 | I << 12, T = (T ^= L = L + (O = (O ^= S = S + T | 0) >>> 16 | O << 16) | 0) >>> 20 | T << 12, R = (R ^= D = D + (x = (x ^= C = C + R | 0) >>> 16 | x << 16) | 0) >>> 20 | R << 12, T = (T ^= L = L + (O = (O ^= S = S + T | 0) >>> 24 | O << 8) | 0) >>> 25 | T << 7, R = (R ^= D = D + (x = (x ^= C = C + R | 0) >>> 24 | x << 8) | 0) >>> 25 | R << 7, I = (I ^= N = N + (B = (B ^= _ = _ + I | 0) >>> 24 | B << 8) | 0) >>> 25 | I << 7, A = (A ^= k = k + (P = (P ^= v = v + A | 0) >>> 24 | P << 8) | 0) >>> 25 | A << 7, I = (I ^= L = L + (x = (x ^= v = v + I | 0) >>> 16 | x << 16) | 0) >>> 20 | I << 12, T = (T ^= D = D + (P = (P ^= _ = _ + T | 0) >>> 16 | P << 16) | 0) >>> 20 | T << 12, R = (R ^= k = k + (B = (B ^= S = S + R | 0) >>> 16 | B << 16) | 0) >>> 20 | R << 12, A = (A ^= N = N + (O = (O ^= C = C + A | 0) >>> 16 | O << 16) | 0) >>> 20 | A << 12, R = (R ^= k = k + (B = (B ^= S = S + R | 0) >>> 24 | B << 8) | 0) >>> 25 | R << 7, A = (A ^= N = N + (O = (O ^= C = C + A | 0) >>> 24 | O << 8) | 0) >>> 25 | A << 7, T = (T ^= D = D + (P = (P ^= _ = _ + T | 0) >>> 24 | P << 8) | 0) >>> 25 | T << 7, I = (I ^= L = L + (x = (x ^= v = v + I | 0) >>> 24 | x << 8) | 0) >>> 25 | I << 7;
          n.writeUint32LE(v + i | 0, e, 0), n.writeUint32LE(_ + o | 0, e, 4), n.writeUint32LE(S + a | 0, e, 8), n.writeUint32LE(C + c | 0, e, 12), n.writeUint32LE(A + l | 0, e, 16), n.writeUint32LE(I + u | 0, e, 20), n.writeUint32LE(T + h | 0, e, 24), n.writeUint32LE(R + d | 0, e, 28), n.writeUint32LE(k + p | 0, e, 32), n.writeUint32LE(N + f | 0, e, 36), n.writeUint32LE(L + y | 0, e, 40), n.writeUint32LE(D + g | 0, e, 44), n.writeUint32LE(P + m | 0, e, 48), n.writeUint32LE(B + w | 0, e, 52), n.writeUint32LE(O + E | 0, e, 56), n.writeUint32LE(x + b | 0, e, 60);
        }
        function a(e, t, r, n, s) {
          if (void 0 === s && (s = 0), 32 !== e.length) throw new Error("ChaCha: key size must be 32 bytes");
          if (n.length < r.length) throw new Error("ChaCha: destination is shorter than source");
          var a, l;
          if (0 === s) {
            if (8 !== t.length && 12 !== t.length) throw new Error("ChaCha nonce must be 8 or 12 bytes");
            l = (a = new Uint8Array(16)).length - t.length, a.set(t, l);
          } else {
            if (16 !== t.length) throw new Error("ChaCha nonce with counter must be 16 bytes");
            a = t, l = s;
          }
          for (var u = new Uint8Array(64), h = 0; h < r.length; h += 64) {
            o(u, a, e);
            for (var d = h; d < h + 64 && d < r.length; d++) n[d] = r[d] ^ u[d - h];
            c(a, 0, l);
          }
          return i.wipe(u), 0 === s && i.wipe(a), n;
        }
        function c(e, t, r) {
          for (var n = 1; r--;) n = n + (255 & e[t]) | 0, e[t] = 255 & n, n >>>= 8, t++;
          if (n > 0) throw new Error("ChaCha: counter overflow");
        }
        t.streamXOR = a, t.stream = function (e, t, r, n) {
          return void 0 === n && (n = 0), i.wipe(r), a(e, t, r, r, n);
        };
      },
      5501: function _(e, t, r) {
        "use strict";

        var n = r(5439),
          i = r(3027),
          s = r(7309),
          o = r(8099),
          a = r(4153);
        t.Cv = 32, t.WH = 12, t.pg = 16;
        var c = new Uint8Array(16),
          l = function () {
            function e(e) {
              if (this.nonceLength = t.WH, this.tagLength = t.pg, e.length !== t.Cv) throw new Error("ChaCha20Poly1305 needs 32-byte key");
              this._key = new Uint8Array(e);
            }
            return e.prototype.seal = function (e, t, r, i) {
              if (e.length > 16) throw new Error("ChaCha20Poly1305: incorrect nonce length");
              var o = new Uint8Array(16);
              o.set(e, o.length - e.length);
              var a = new Uint8Array(32);
              n.stream(this._key, o, a, 4);
              var c,
                l = t.length + this.tagLength;
              if (i) {
                if (i.length !== l) throw new Error("ChaCha20Poly1305: incorrect destination length");
                c = i;
              } else c = new Uint8Array(l);
              return n.streamXOR(this._key, o, t, c, 4), this._authenticate(c.subarray(c.length - this.tagLength, c.length), a, c.subarray(0, c.length - this.tagLength), r), s.wipe(o), c;
            }, e.prototype.open = function (e, t, r, i) {
              if (e.length > 16) throw new Error("ChaCha20Poly1305: incorrect nonce length");
              if (t.length < this.tagLength) return null;
              var o = new Uint8Array(16);
              o.set(e, o.length - e.length);
              var c = new Uint8Array(32);
              n.stream(this._key, o, c, 4);
              var l = new Uint8Array(this.tagLength);
              if (this._authenticate(l, c, t.subarray(0, t.length - this.tagLength), r), !a.equal(l, t.subarray(t.length - this.tagLength, t.length))) return null;
              var u,
                h = t.length - this.tagLength;
              if (i) {
                if (i.length !== h) throw new Error("ChaCha20Poly1305: incorrect destination length");
                u = i;
              } else u = new Uint8Array(h);
              return n.streamXOR(this._key, o, t.subarray(0, t.length - this.tagLength), u, 4), s.wipe(o), u;
            }, e.prototype.clean = function () {
              return s.wipe(this._key), this;
            }, e.prototype._authenticate = function (e, t, r, n) {
              var a = new i.Poly1305(t);
              n && (a.update(n), n.length % 16 > 0 && a.update(c.subarray(n.length % 16))), a.update(r), r.length % 16 > 0 && a.update(c.subarray(r.length % 16));
              var l = new Uint8Array(8);
              n && o.writeUint64LE(n.length, l), a.update(l), o.writeUint64LE(r.length, l), a.update(l);
              for (var u = a.digest(), h = 0; h < u.length; h++) e[h] = u[h];
              a.clean(), s.wipe(u), s.wipe(l);
            }, e;
          }();
        t.OK = l;
      },
      4153: function _(e, t) {
        "use strict";

        function r(e, t) {
          if (e.length !== t.length) return 0;
          for (var r = 0, n = 0; n < e.length; n++) r |= e[n] ^ t[n];
          return 1 & r - 1 >>> 8;
        }
        Object.defineProperty(t, "__esModule", {
          value: !0
        }), t.select = function (e, t, r) {
          return ~(e - 1) & t | e - 1 & r;
        }, t.lessOrEqual = function (e, t) {
          return (0 | e) - (0 | t) - 1 >>> 31 & 1;
        }, t.compare = r, t.equal = function (e, t) {
          return 0 !== e.length && 0 !== t.length && 0 !== r(e, t);
        };
      },
      9984: function _(e, t) {
        "use strict";

        Object.defineProperty(t, "__esModule", {
          value: !0
        }), t.isSerializableHash = function (e) {
          return void 0 !== e.saveState && void 0 !== e.restoreState && void 0 !== e.cleanSavedState;
        };
      },
      512: function _(e, t, r) {
        "use strict";

        var n = r(5629),
          i = r(7309),
          s = function () {
            function e(e, t, r, i) {
              void 0 === r && (r = new Uint8Array(0)), this._counter = new Uint8Array(1), this._hash = e, this._info = i;
              var s = n.hmac(this._hash, r, t);
              this._hmac = new n.HMAC(e, s), this._buffer = new Uint8Array(this._hmac.digestLength), this._bufpos = this._buffer.length;
            }
            return e.prototype._fillBuffer = function () {
              this._counter[0]++;
              var e = this._counter[0];
              if (0 === e) throw new Error("hkdf: cannot expand more");
              this._hmac.reset(), e > 1 && this._hmac.update(this._buffer), this._info && this._hmac.update(this._info), this._hmac.update(this._counter), this._hmac.finish(this._buffer), this._bufpos = 0;
            }, e.prototype.expand = function (e) {
              for (var t = new Uint8Array(e), r = 0; r < t.length; r++) this._bufpos === this._buffer.length && this._fillBuffer(), t[r] = this._buffer[this._bufpos++];
              return t;
            }, e.prototype.clean = function () {
              this._hmac.clean(), i.wipe(this._buffer), i.wipe(this._counter), this._bufpos = 0;
            }, e;
          }();
        t.t = s;
      },
      5629: function _(e, t, r) {
        "use strict";

        Object.defineProperty(t, "__esModule", {
          value: !0
        });
        var n = r(9984),
          i = r(4153),
          s = r(7309),
          o = function () {
            function e(e, t) {
              this._finished = !1, this._inner = new e(), this._outer = new e(), this.blockSize = this._outer.blockSize, this.digestLength = this._outer.digestLength;
              var r = new Uint8Array(this.blockSize);
              t.length > this.blockSize ? this._inner.update(t).finish(r).clean() : r.set(t);
              for (var i = 0; i < r.length; i++) r[i] ^= 54;
              for (this._inner.update(r), i = 0; i < r.length; i++) r[i] ^= 106;
              this._outer.update(r), n.isSerializableHash(this._inner) && n.isSerializableHash(this._outer) && (this._innerKeyedState = this._inner.saveState(), this._outerKeyedState = this._outer.saveState()), s.wipe(r);
            }
            return e.prototype.reset = function () {
              if (!n.isSerializableHash(this._inner) || !n.isSerializableHash(this._outer)) throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");
              return this._inner.restoreState(this._innerKeyedState), this._outer.restoreState(this._outerKeyedState), this._finished = !1, this;
            }, e.prototype.clean = function () {
              n.isSerializableHash(this._inner) && this._inner.cleanSavedState(this._innerKeyedState), n.isSerializableHash(this._outer) && this._outer.cleanSavedState(this._outerKeyedState), this._inner.clean(), this._outer.clean();
            }, e.prototype.update = function (e) {
              return this._inner.update(e), this;
            }, e.prototype.finish = function (e) {
              return this._finished ? (this._outer.finish(e), this) : (this._inner.finish(e), this._outer.update(e.subarray(0, this.digestLength)).finish(e), this._finished = !0, this);
            }, e.prototype.digest = function () {
              var e = new Uint8Array(this.digestLength);
              return this.finish(e), e;
            }, e.prototype.saveState = function () {
              if (!n.isSerializableHash(this._inner)) throw new Error("hmac: can't saveState() because hash doesn't implement it");
              return this._inner.saveState();
            }, e.prototype.restoreState = function (e) {
              if (!n.isSerializableHash(this._inner) || !n.isSerializableHash(this._outer)) throw new Error("hmac: can't restoreState() because hash doesn't implement it");
              return this._inner.restoreState(e), this._outer.restoreState(this._outerKeyedState), this._finished = !1, this;
            }, e.prototype.cleanSavedState = function (e) {
              if (!n.isSerializableHash(this._inner)) throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");
              this._inner.cleanSavedState(e);
            }, e;
          }();
        t.HMAC = o, t.hmac = function (e, t, r) {
          var n = new o(e, t);
          n.update(r);
          var i = n.digest();
          return n.clean(), i;
        }, t.equal = i.equal;
      },
      7117: function _(e, t) {
        "use strict";

        Object.defineProperty(t, "__esModule", {
          value: !0
        }), t.mul = Math.imul || function (e, t) {
          var r = 65535 & e,
            n = 65535 & t;
          return r * n + ((e >>> 16 & 65535) * n + r * (t >>> 16 & 65535) << 16 >>> 0) | 0;
        }, t.add = function (e, t) {
          return e + t | 0;
        }, t.sub = function (e, t) {
          return e - t | 0;
        }, t.rotl = function (e, t) {
          return e << t | e >>> 32 - t;
        }, t.rotr = function (e, t) {
          return e << 32 - t | e >>> t;
        }, t.isInteger = Number.isInteger || function (e) {
          return "number" == typeof e && isFinite(e) && Math.floor(e) === e;
        }, t.MAX_SAFE_INTEGER = 9007199254740991, t.isSafeInteger = function (e) {
          return t.isInteger(e) && e >= -t.MAX_SAFE_INTEGER && e <= t.MAX_SAFE_INTEGER;
        };
      },
      3027: function _(e, t, r) {
        "use strict";

        Object.defineProperty(t, "__esModule", {
          value: !0
        });
        var n = r(4153),
          i = r(7309);
        t.DIGEST_LENGTH = 16;
        var s = function () {
          function e(e) {
            this.digestLength = t.DIGEST_LENGTH, this._buffer = new Uint8Array(16), this._r = new Uint16Array(10), this._h = new Uint16Array(10), this._pad = new Uint16Array(8), this._leftover = 0, this._fin = 0, this._finished = !1;
            var r = e[0] | e[1] << 8;
            this._r[0] = 8191 & r;
            var n = e[2] | e[3] << 8;
            this._r[1] = 8191 & (r >>> 13 | n << 3);
            var i = e[4] | e[5] << 8;
            this._r[2] = 7939 & (n >>> 10 | i << 6);
            var s = e[6] | e[7] << 8;
            this._r[3] = 8191 & (i >>> 7 | s << 9);
            var o = e[8] | e[9] << 8;
            this._r[4] = 255 & (s >>> 4 | o << 12), this._r[5] = o >>> 1 & 8190;
            var a = e[10] | e[11] << 8;
            this._r[6] = 8191 & (o >>> 14 | a << 2);
            var c = e[12] | e[13] << 8;
            this._r[7] = 8065 & (a >>> 11 | c << 5);
            var l = e[14] | e[15] << 8;
            this._r[8] = 8191 & (c >>> 8 | l << 8), this._r[9] = l >>> 5 & 127, this._pad[0] = e[16] | e[17] << 8, this._pad[1] = e[18] | e[19] << 8, this._pad[2] = e[20] | e[21] << 8, this._pad[3] = e[22] | e[23] << 8, this._pad[4] = e[24] | e[25] << 8, this._pad[5] = e[26] | e[27] << 8, this._pad[6] = e[28] | e[29] << 8, this._pad[7] = e[30] | e[31] << 8;
          }
          return e.prototype._blocks = function (e, t, r) {
            for (var n = this._fin ? 0 : 2048, i = this._h[0], s = this._h[1], o = this._h[2], a = this._h[3], c = this._h[4], l = this._h[5], u = this._h[6], h = this._h[7], d = this._h[8], p = this._h[9], f = this._r[0], y = this._r[1], g = this._r[2], m = this._r[3], w = this._r[4], E = this._r[5], b = this._r[6], v = this._r[7], _ = this._r[8], S = this._r[9]; r >= 16;) {
              var C = e[t + 0] | e[t + 1] << 8;
              i += 8191 & C;
              var A = e[t + 2] | e[t + 3] << 8;
              s += 8191 & (C >>> 13 | A << 3);
              var I = e[t + 4] | e[t + 5] << 8;
              o += 8191 & (A >>> 10 | I << 6);
              var T = e[t + 6] | e[t + 7] << 8;
              a += 8191 & (I >>> 7 | T << 9);
              var R = e[t + 8] | e[t + 9] << 8;
              c += 8191 & (T >>> 4 | R << 12), l += R >>> 1 & 8191;
              var k = e[t + 10] | e[t + 11] << 8;
              u += 8191 & (R >>> 14 | k << 2);
              var N = e[t + 12] | e[t + 13] << 8;
              h += 8191 & (k >>> 11 | N << 5);
              var L = e[t + 14] | e[t + 15] << 8,
                D = 0,
                P = D;
              P += i * f, P += s * (5 * S), P += o * (5 * _), P += a * (5 * v), D = (P += c * (5 * b)) >>> 13, P &= 8191, P += l * (5 * E), P += u * (5 * w), P += h * (5 * m), P += (d += 8191 & (N >>> 8 | L << 8)) * (5 * g);
              var B = D += (P += (p += L >>> 5 | n) * (5 * y)) >>> 13;
              B += i * y, B += s * f, B += o * (5 * S), B += a * (5 * _), D = (B += c * (5 * v)) >>> 13, B &= 8191, B += l * (5 * b), B += u * (5 * E), B += h * (5 * w), B += d * (5 * m), D += (B += p * (5 * g)) >>> 13, B &= 8191;
              var O = D;
              O += i * g, O += s * y, O += o * f, O += a * (5 * S), D = (O += c * (5 * _)) >>> 13, O &= 8191, O += l * (5 * v), O += u * (5 * b), O += h * (5 * E), O += d * (5 * w);
              var x = D += (O += p * (5 * m)) >>> 13;
              x += i * m, x += s * g, x += o * y, x += a * f, D = (x += c * (5 * S)) >>> 13, x &= 8191, x += l * (5 * _), x += u * (5 * v), x += h * (5 * b), x += d * (5 * E);
              var U = D += (x += p * (5 * w)) >>> 13;
              U += i * w, U += s * m, U += o * g, U += a * y, D = (U += c * f) >>> 13, U &= 8191, U += l * (5 * S), U += u * (5 * _), U += h * (5 * v), U += d * (5 * b);
              var M = D += (U += p * (5 * E)) >>> 13;
              M += i * E, M += s * w, M += o * m, M += a * g, D = (M += c * y) >>> 13, M &= 8191, M += l * f, M += u * (5 * S), M += h * (5 * _), M += d * (5 * v);
              var V = D += (M += p * (5 * b)) >>> 13;
              V += i * b, V += s * E, V += o * w, V += a * m, D = (V += c * g) >>> 13, V &= 8191, V += l * y, V += u * f, V += h * (5 * S), V += d * (5 * _);
              var K = D += (V += p * (5 * v)) >>> 13;
              K += i * v, K += s * b, K += o * E, K += a * w, D = (K += c * m) >>> 13, K &= 8191, K += l * g, K += u * y, K += h * f, K += d * (5 * S);
              var F = D += (K += p * (5 * _)) >>> 13;
              F += i * _, F += s * v, F += o * b, F += a * E, D = (F += c * w) >>> 13, F &= 8191, F += l * m, F += u * g, F += h * y, F += d * f;
              var q = D += (F += p * (5 * S)) >>> 13;
              q += i * S, q += s * _, q += o * v, q += a * b, D = (q += c * E) >>> 13, q &= 8191, q += l * w, q += u * m, q += h * g, q += d * y, i = P = 8191 & (D = (D = ((D += (q += p * f) >>> 13) << 2) + D | 0) + (P &= 8191) | 0), s = B += D >>>= 13, o = O &= 8191, a = x &= 8191, c = U &= 8191, l = M &= 8191, u = V &= 8191, h = K &= 8191, d = F &= 8191, p = q &= 8191, t += 16, r -= 16;
            }
            this._h[0] = i, this._h[1] = s, this._h[2] = o, this._h[3] = a, this._h[4] = c, this._h[5] = l, this._h[6] = u, this._h[7] = h, this._h[8] = d, this._h[9] = p;
          }, e.prototype.finish = function (e, t) {
            void 0 === t && (t = 0);
            var r,
              n,
              i,
              s,
              o = new Uint16Array(10);
            if (this._leftover) {
              for (s = this._leftover, this._buffer[s++] = 1; s < 16; s++) this._buffer[s] = 0;
              this._fin = 1, this._blocks(this._buffer, 0, 16);
            }
            for (r = this._h[1] >>> 13, this._h[1] &= 8191, s = 2; s < 10; s++) this._h[s] += r, r = this._h[s] >>> 13, this._h[s] &= 8191;
            for (this._h[0] += 5 * r, r = this._h[0] >>> 13, this._h[0] &= 8191, this._h[1] += r, r = this._h[1] >>> 13, this._h[1] &= 8191, this._h[2] += r, o[0] = this._h[0] + 5, r = o[0] >>> 13, o[0] &= 8191, s = 1; s < 10; s++) o[s] = this._h[s] + r, r = o[s] >>> 13, o[s] &= 8191;
            for (o[9] -= 8192, n = (1 ^ r) - 1, s = 0; s < 10; s++) o[s] &= n;
            for (n = ~n, s = 0; s < 10; s++) this._h[s] = this._h[s] & n | o[s];
            for (this._h[0] = 65535 & (this._h[0] | this._h[1] << 13), this._h[1] = 65535 & (this._h[1] >>> 3 | this._h[2] << 10), this._h[2] = 65535 & (this._h[2] >>> 6 | this._h[3] << 7), this._h[3] = 65535 & (this._h[3] >>> 9 | this._h[4] << 4), this._h[4] = 65535 & (this._h[4] >>> 12 | this._h[5] << 1 | this._h[6] << 14), this._h[5] = 65535 & (this._h[6] >>> 2 | this._h[7] << 11), this._h[6] = 65535 & (this._h[7] >>> 5 | this._h[8] << 8), this._h[7] = 65535 & (this._h[8] >>> 8 | this._h[9] << 5), i = this._h[0] + this._pad[0], this._h[0] = 65535 & i, s = 1; s < 8; s++) i = (this._h[s] + this._pad[s] | 0) + (i >>> 16) | 0, this._h[s] = 65535 & i;
            return e[t + 0] = this._h[0] >>> 0, e[t + 1] = this._h[0] >>> 8, e[t + 2] = this._h[1] >>> 0, e[t + 3] = this._h[1] >>> 8, e[t + 4] = this._h[2] >>> 0, e[t + 5] = this._h[2] >>> 8, e[t + 6] = this._h[3] >>> 0, e[t + 7] = this._h[3] >>> 8, e[t + 8] = this._h[4] >>> 0, e[t + 9] = this._h[4] >>> 8, e[t + 10] = this._h[5] >>> 0, e[t + 11] = this._h[5] >>> 8, e[t + 12] = this._h[6] >>> 0, e[t + 13] = this._h[6] >>> 8, e[t + 14] = this._h[7] >>> 0, e[t + 15] = this._h[7] >>> 8, this._finished = !0, this;
          }, e.prototype.update = function (e) {
            var t,
              r = 0,
              n = e.length;
            if (this._leftover) {
              (t = 16 - this._leftover) > n && (t = n);
              for (var i = 0; i < t; i++) this._buffer[this._leftover + i] = e[r + i];
              if (n -= t, r += t, this._leftover += t, this._leftover < 16) return this;
              this._blocks(this._buffer, 0, 16), this._leftover = 0;
            }
            if (n >= 16 && (t = n - n % 16, this._blocks(e, r, t), r += t, n -= t), n) {
              for (i = 0; i < n; i++) this._buffer[this._leftover + i] = e[r + i];
              this._leftover += n;
            }
            return this;
          }, e.prototype.digest = function () {
            if (this._finished) throw new Error("Poly1305 was finished");
            var e = new Uint8Array(16);
            return this.finish(e), e;
          }, e.prototype.clean = function () {
            return i.wipe(this._buffer), i.wipe(this._r), i.wipe(this._h), i.wipe(this._pad), this._leftover = 0, this._fin = 0, this._finished = !0, this;
          }, e;
        }();
        t.Poly1305 = s, t.oneTimeAuth = function (e, t) {
          var r = new s(e);
          r.update(t);
          var n = r.digest();
          return r.clean(), n;
        }, t.equal = function (e, r) {
          return e.length === t.DIGEST_LENGTH && r.length === t.DIGEST_LENGTH && n.equal(e, r);
        };
      },
      1416: function _(e, t, r) {
        "use strict";

        Object.defineProperty(t, "__esModule", {
          value: !0
        }), t.randomStringForEntropy = t.randomString = t.randomUint32 = t.randomBytes = t.defaultRandomSource = void 0;
        var n = r(6008),
          i = r(8099),
          s = r(7309);
        function o(e) {
          var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t.defaultRandomSource;
          return r.randomBytes(e);
        }
        t.defaultRandomSource = new n.SystemRandomSource(), t.randomBytes = o, t.randomUint32 = function () {
          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : t.defaultRandomSource;
          var r = o(4, e),
            n = (0, i.readUint32LE)(r);
          return (0, s.wipe)(r), n;
        };
        var a = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
        function c(e) {
          var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : a;
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : t.defaultRandomSource;
          if (r.length < 2) throw new Error("randomString charset is too short");
          if (r.length > 256) throw new Error("randomString charset is too long");
          var i = "";
          var c = r.length,
            l = 256 - 256 % c;
          for (; e > 0;) {
            var _t2 = o(Math.ceil(256 * e / l), n);
            for (var _n2 = 0; _n2 < _t2.length && e > 0; _n2++) {
              var _s2 = _t2[_n2];
              _s2 < l && (i += r.charAt(_s2 % c), e--);
            }
            (0, s.wipe)(_t2);
          }
          return i;
        }
        t.randomString = c, t.randomStringForEntropy = function (e) {
          var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : a;
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : t.defaultRandomSource;
          return c(Math.ceil(e / (Math.log(r.length) / Math.LN2)), r, n);
        };
      },
      5455: function _(e, t) {
        "use strict";

        Object.defineProperty(t, "__esModule", {
          value: !0
        }), t.BrowserRandomSource = void 0, t.BrowserRandomSource = /*#__PURE__*/function () {
          function _class() {
            _classCallCheck(this, _class);
            this.isAvailable = !1, this.isInstantiated = !1;
            var e = "undefined" != typeof self ? self.crypto || self.msCrypto : null;
            e && void 0 !== e.getRandomValues && (this._crypto = e, this.isAvailable = !0, this.isInstantiated = !0);
          }
          _createClass(_class, [{
            key: "randomBytes",
            value: function randomBytes(e) {
              if (!this.isAvailable || !this._crypto) throw new Error("Browser random byte generator is not available.");
              var t = new Uint8Array(e);
              for (var _e2 = 0; _e2 < t.length; _e2 += 65536) this._crypto.getRandomValues(t.subarray(_e2, _e2 + Math.min(t.length - _e2, 65536)));
              return t;
            }
          }]);
          return _class;
        }();
      },
      8871: function _(e, t, r) {
        "use strict";

        Object.defineProperty(t, "__esModule", {
          value: !0
        }), t.NodeRandomSource = void 0;
        var n = r(7309);
        t.NodeRandomSource = /*#__PURE__*/function () {
          function _class2() {
            _classCallCheck(this, _class2);
            this.isAvailable = !1, this.isInstantiated = !1;
            {
              var _e3 = r(5883);
              _e3 && _e3.randomBytes && (this._crypto = _e3, this.isAvailable = !0, this.isInstantiated = !0);
            }
          }
          _createClass(_class2, [{
            key: "randomBytes",
            value: function randomBytes(e) {
              if (!this.isAvailable || !this._crypto) throw new Error("Node.js random byte generator is not available.");
              var t = this._crypto.randomBytes(e);
              if (t.length !== e) throw new Error("NodeRandomSource: got fewer bytes than requested");
              var r = new Uint8Array(e);
              for (var _e4 = 0; _e4 < r.length; _e4++) r[_e4] = t[_e4];
              return (0, n.wipe)(t), r;
            }
          }]);
          return _class2;
        }();
      },
      6008: function _(e, t, r) {
        "use strict";

        Object.defineProperty(t, "__esModule", {
          value: !0
        }), t.SystemRandomSource = void 0;
        var n = r(5455),
          i = r(8871);
        t.SystemRandomSource = /*#__PURE__*/function () {
          function _class3() {
            _classCallCheck(this, _class3);
            return this.isAvailable = !1, this.name = "", this._source = new n.BrowserRandomSource(), this._source.isAvailable ? (this.isAvailable = !0, void (this.name = "Browser")) : (this._source = new i.NodeRandomSource(), this._source.isAvailable ? (this.isAvailable = !0, void (this.name = "Node")) : void 0);
          }
          _createClass(_class3, [{
            key: "randomBytes",
            value: function randomBytes(e) {
              if (!this.isAvailable) throw new Error("System random byte generator is not available.");
              return this._source.randomBytes(e);
            }
          }]);
          return _class3;
        }();
      },
      3294: function _(e, t, r) {
        "use strict";

        var n = r(8099),
          i = r(7309);
        t.k = 32, t.cn = 64;
        var s = function () {
          function e() {
            this.digestLength = t.k, this.blockSize = t.cn, this._state = new Int32Array(8), this._temp = new Int32Array(64), this._buffer = new Uint8Array(128), this._bufferLength = 0, this._bytesHashed = 0, this._finished = !1, this.reset();
          }
          return e.prototype._initState = function () {
            this._state[0] = 1779033703, this._state[1] = 3144134277, this._state[2] = 1013904242, this._state[3] = 2773480762, this._state[4] = 1359893119, this._state[5] = 2600822924, this._state[6] = 528734635, this._state[7] = 1541459225;
          }, e.prototype.reset = function () {
            return this._initState(), this._bufferLength = 0, this._bytesHashed = 0, this._finished = !1, this;
          }, e.prototype.clean = function () {
            i.wipe(this._buffer), i.wipe(this._temp), this.reset();
          }, e.prototype.update = function (e, t) {
            if (void 0 === t && (t = e.length), this._finished) throw new Error("SHA256: can't update because hash was finished.");
            var r = 0;
            if (this._bytesHashed += t, this._bufferLength > 0) {
              for (; this._bufferLength < this.blockSize && t > 0;) this._buffer[this._bufferLength++] = e[r++], t--;
              this._bufferLength === this.blockSize && (a(this._temp, this._state, this._buffer, 0, this.blockSize), this._bufferLength = 0);
            }
            for (t >= this.blockSize && (r = a(this._temp, this._state, e, r, t), t %= this.blockSize); t > 0;) this._buffer[this._bufferLength++] = e[r++], t--;
            return this;
          }, e.prototype.finish = function (e) {
            if (!this._finished) {
              var t = this._bytesHashed,
                r = this._bufferLength,
                i = t / 536870912 | 0,
                s = t << 3,
                o = t % 64 < 56 ? 64 : 128;
              this._buffer[r] = 128;
              for (var c = r + 1; c < o - 8; c++) this._buffer[c] = 0;
              n.writeUint32BE(i, this._buffer, o - 8), n.writeUint32BE(s, this._buffer, o - 4), a(this._temp, this._state, this._buffer, 0, o), this._finished = !0;
            }
            for (c = 0; c < this.digestLength / 4; c++) n.writeUint32BE(this._state[c], e, 4 * c);
            return this;
          }, e.prototype.digest = function () {
            var e = new Uint8Array(this.digestLength);
            return this.finish(e), e;
          }, e.prototype.saveState = function () {
            if (this._finished) throw new Error("SHA256: cannot save finished state");
            return {
              state: new Int32Array(this._state),
              buffer: this._bufferLength > 0 ? new Uint8Array(this._buffer) : void 0,
              bufferLength: this._bufferLength,
              bytesHashed: this._bytesHashed
            };
          }, e.prototype.restoreState = function (e) {
            return this._state.set(e.state), this._bufferLength = e.bufferLength, e.buffer && this._buffer.set(e.buffer), this._bytesHashed = e.bytesHashed, this._finished = !1, this;
          }, e.prototype.cleanSavedState = function (e) {
            i.wipe(e.state), e.buffer && i.wipe(e.buffer), e.bufferLength = 0, e.bytesHashed = 0;
          }, e;
        }();
        t.mE = s;
        var o = new Int32Array([1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298]);
        function a(e, t, r, i, s) {
          for (; s >= 64;) {
            for (var a = t[0], c = t[1], l = t[2], u = t[3], h = t[4], d = t[5], p = t[6], f = t[7], y = 0; y < 16; y++) {
              var g = i + 4 * y;
              e[y] = n.readUint32BE(r, g);
            }
            for (y = 16; y < 64; y++) {
              var m = e[y - 2],
                w = (m >>> 17 | m << 15) ^ (m >>> 19 | m << 13) ^ m >>> 10,
                E = ((m = e[y - 15]) >>> 7 | m << 25) ^ (m >>> 18 | m << 14) ^ m >>> 3;
              e[y] = (w + e[y - 7] | 0) + (E + e[y - 16] | 0);
            }
            for (y = 0; y < 64; y++) w = (((h >>> 6 | h << 26) ^ (h >>> 11 | h << 21) ^ (h >>> 25 | h << 7)) + (h & d ^ ~h & p) | 0) + (f + (o[y] + e[y] | 0) | 0) | 0, E = ((a >>> 2 | a << 30) ^ (a >>> 13 | a << 19) ^ (a >>> 22 | a << 10)) + (a & c ^ a & l ^ c & l) | 0, f = p, p = d, d = h, h = u + w | 0, u = l, l = c, c = a, a = w + E | 0;
            t[0] += a, t[1] += c, t[2] += l, t[3] += u, t[4] += h, t[5] += d, t[6] += p, t[7] += f, i += 64, s -= 64;
          }
          return i;
        }
        t.vp = function (e) {
          var t = new s();
          t.update(e);
          var r = t.digest();
          return t.clean(), r;
        };
      },
      7309: function _(e, t) {
        "use strict";

        Object.defineProperty(t, "__esModule", {
          value: !0
        }), t.wipe = function (e) {
          for (var t = 0; t < e.length; t++) e[t] = 0;
          return e;
        };
      },
      7664: function _(e, t, r) {
        "use strict";

        t.gi = t.Au = t._w = t.KS = t.kz = void 0;
        var n = r(1416),
          i = r(7309);
        function s(e) {
          var t = new Float64Array(16);
          if (e) for (var _r2 = 0; _r2 < e.length; _r2++) t[_r2] = e[_r2];
          return t;
        }
        t.kz = 32, t.KS = 32;
        var o = new Uint8Array(32);
        o[0] = 9;
        var a = s([56129, 1]);
        function c(e) {
          var t = 1;
          for (var _r3 = 0; _r3 < 16; _r3++) {
            var _n3 = e[_r3] + t + 65535;
            t = Math.floor(_n3 / 65536), e[_r3] = _n3 - 65536 * t;
          }
          e[0] += t - 1 + 37 * (t - 1);
        }
        function l(e, t, r) {
          var n = ~(r - 1);
          for (var _r4 = 0; _r4 < 16; _r4++) {
            var _i2 = n & (e[_r4] ^ t[_r4]);
            e[_r4] ^= _i2, t[_r4] ^= _i2;
          }
        }
        function u(e, t, r) {
          for (var _n4 = 0; _n4 < 16; _n4++) e[_n4] = t[_n4] + r[_n4];
        }
        function h(e, t, r) {
          for (var _n5 = 0; _n5 < 16; _n5++) e[_n5] = t[_n5] - r[_n5];
        }
        function d(e, t, r) {
          var n,
            i,
            s = 0,
            o = 0,
            a = 0,
            c = 0,
            l = 0,
            u = 0,
            h = 0,
            d = 0,
            p = 0,
            f = 0,
            y = 0,
            g = 0,
            m = 0,
            w = 0,
            E = 0,
            b = 0,
            v = 0,
            _ = 0,
            S = 0,
            C = 0,
            A = 0,
            I = 0,
            T = 0,
            R = 0,
            k = 0,
            N = 0,
            L = 0,
            D = 0,
            P = 0,
            B = 0,
            O = 0,
            x = r[0],
            U = r[1],
            M = r[2],
            V = r[3],
            K = r[4],
            F = r[5],
            q = r[6],
            j = r[7],
            H = r[8],
            z = r[9],
            $ = r[10],
            G = r[11],
            W = r[12],
            Y = r[13],
            Q = r[14],
            X = r[15];
          n = t[0], s += n * x, o += n * U, a += n * M, c += n * V, l += n * K, u += n * F, h += n * q, d += n * j, p += n * H, f += n * z, y += n * $, g += n * G, m += n * W, w += n * Y, E += n * Q, b += n * X, n = t[1], o += n * x, a += n * U, c += n * M, l += n * V, u += n * K, h += n * F, d += n * q, p += n * j, f += n * H, y += n * z, g += n * $, m += n * G, w += n * W, E += n * Y, b += n * Q, v += n * X, n = t[2], a += n * x, c += n * U, l += n * M, u += n * V, h += n * K, d += n * F, p += n * q, f += n * j, y += n * H, g += n * z, m += n * $, w += n * G, E += n * W, b += n * Y, v += n * Q, _ += n * X, n = t[3], c += n * x, l += n * U, u += n * M, h += n * V, d += n * K, p += n * F, f += n * q, y += n * j, g += n * H, m += n * z, w += n * $, E += n * G, b += n * W, v += n * Y, _ += n * Q, S += n * X, n = t[4], l += n * x, u += n * U, h += n * M, d += n * V, p += n * K, f += n * F, y += n * q, g += n * j, m += n * H, w += n * z, E += n * $, b += n * G, v += n * W, _ += n * Y, S += n * Q, C += n * X, n = t[5], u += n * x, h += n * U, d += n * M, p += n * V, f += n * K, y += n * F, g += n * q, m += n * j, w += n * H, E += n * z, b += n * $, v += n * G, _ += n * W, S += n * Y, C += n * Q, A += n * X, n = t[6], h += n * x, d += n * U, p += n * M, f += n * V, y += n * K, g += n * F, m += n * q, w += n * j, E += n * H, b += n * z, v += n * $, _ += n * G, S += n * W, C += n * Y, A += n * Q, I += n * X, n = t[7], d += n * x, p += n * U, f += n * M, y += n * V, g += n * K, m += n * F, w += n * q, E += n * j, b += n * H, v += n * z, _ += n * $, S += n * G, C += n * W, A += n * Y, I += n * Q, T += n * X, n = t[8], p += n * x, f += n * U, y += n * M, g += n * V, m += n * K, w += n * F, E += n * q, b += n * j, v += n * H, _ += n * z, S += n * $, C += n * G, A += n * W, I += n * Y, T += n * Q, R += n * X, n = t[9], f += n * x, y += n * U, g += n * M, m += n * V, w += n * K, E += n * F, b += n * q, v += n * j, _ += n * H, S += n * z, C += n * $, A += n * G, I += n * W, T += n * Y, R += n * Q, k += n * X, n = t[10], y += n * x, g += n * U, m += n * M, w += n * V, E += n * K, b += n * F, v += n * q, _ += n * j, S += n * H, C += n * z, A += n * $, I += n * G, T += n * W, R += n * Y, k += n * Q, N += n * X, n = t[11], g += n * x, m += n * U, w += n * M, E += n * V, b += n * K, v += n * F, _ += n * q, S += n * j, C += n * H, A += n * z, I += n * $, T += n * G, R += n * W, k += n * Y, N += n * Q, L += n * X, n = t[12], m += n * x, w += n * U, E += n * M, b += n * V, v += n * K, _ += n * F, S += n * q, C += n * j, A += n * H, I += n * z, T += n * $, R += n * G, k += n * W, N += n * Y, L += n * Q, D += n * X, n = t[13], w += n * x, E += n * U, b += n * M, v += n * V, _ += n * K, S += n * F, C += n * q, A += n * j, I += n * H, T += n * z, R += n * $, k += n * G, N += n * W, L += n * Y, D += n * Q, P += n * X, n = t[14], E += n * x, b += n * U, v += n * M, _ += n * V, S += n * K, C += n * F, A += n * q, I += n * j, T += n * H, R += n * z, k += n * $, N += n * G, L += n * W, D += n * Y, P += n * Q, B += n * X, n = t[15], b += n * x, v += n * U, _ += n * M, S += n * V, C += n * K, A += n * F, I += n * q, T += n * j, R += n * H, k += n * z, N += n * $, L += n * G, D += n * W, P += n * Y, B += n * Q, O += n * X, s += 38 * v, o += 38 * _, a += 38 * S, c += 38 * C, l += 38 * A, u += 38 * I, h += 38 * T, d += 38 * R, p += 38 * k, f += 38 * N, y += 38 * L, g += 38 * D, m += 38 * P, w += 38 * B, E += 38 * O, i = 1, n = s + i + 65535, i = Math.floor(n / 65536), s = n - 65536 * i, n = o + i + 65535, i = Math.floor(n / 65536), o = n - 65536 * i, n = a + i + 65535, i = Math.floor(n / 65536), a = n - 65536 * i, n = c + i + 65535, i = Math.floor(n / 65536), c = n - 65536 * i, n = l + i + 65535, i = Math.floor(n / 65536), l = n - 65536 * i, n = u + i + 65535, i = Math.floor(n / 65536), u = n - 65536 * i, n = h + i + 65535, i = Math.floor(n / 65536), h = n - 65536 * i, n = d + i + 65535, i = Math.floor(n / 65536), d = n - 65536 * i, n = p + i + 65535, i = Math.floor(n / 65536), p = n - 65536 * i, n = f + i + 65535, i = Math.floor(n / 65536), f = n - 65536 * i, n = y + i + 65535, i = Math.floor(n / 65536), y = n - 65536 * i, n = g + i + 65535, i = Math.floor(n / 65536), g = n - 65536 * i, n = m + i + 65535, i = Math.floor(n / 65536), m = n - 65536 * i, n = w + i + 65535, i = Math.floor(n / 65536), w = n - 65536 * i, n = E + i + 65535, i = Math.floor(n / 65536), E = n - 65536 * i, n = b + i + 65535, i = Math.floor(n / 65536), b = n - 65536 * i, s += i - 1 + 37 * (i - 1), i = 1, n = s + i + 65535, i = Math.floor(n / 65536), s = n - 65536 * i, n = o + i + 65535, i = Math.floor(n / 65536), o = n - 65536 * i, n = a + i + 65535, i = Math.floor(n / 65536), a = n - 65536 * i, n = c + i + 65535, i = Math.floor(n / 65536), c = n - 65536 * i, n = l + i + 65535, i = Math.floor(n / 65536), l = n - 65536 * i, n = u + i + 65535, i = Math.floor(n / 65536), u = n - 65536 * i, n = h + i + 65535, i = Math.floor(n / 65536), h = n - 65536 * i, n = d + i + 65535, i = Math.floor(n / 65536), d = n - 65536 * i, n = p + i + 65535, i = Math.floor(n / 65536), p = n - 65536 * i, n = f + i + 65535, i = Math.floor(n / 65536), f = n - 65536 * i, n = y + i + 65535, i = Math.floor(n / 65536), y = n - 65536 * i, n = g + i + 65535, i = Math.floor(n / 65536), g = n - 65536 * i, n = m + i + 65535, i = Math.floor(n / 65536), m = n - 65536 * i, n = w + i + 65535, i = Math.floor(n / 65536), w = n - 65536 * i, n = E + i + 65535, i = Math.floor(n / 65536), E = n - 65536 * i, n = b + i + 65535, i = Math.floor(n / 65536), b = n - 65536 * i, s += i - 1 + 37 * (i - 1), e[0] = s, e[1] = o, e[2] = a, e[3] = c, e[4] = l, e[5] = u, e[6] = h, e[7] = d, e[8] = p, e[9] = f, e[10] = y, e[11] = g, e[12] = m, e[13] = w, e[14] = E, e[15] = b;
        }
        function p(e, t) {
          d(e, t, t);
        }
        function f(e, t) {
          var r = new Uint8Array(32),
            n = new Float64Array(80),
            i = s(),
            o = s(),
            f = s(),
            y = s(),
            g = s(),
            m = s();
          for (var _t3 = 0; _t3 < 31; _t3++) r[_t3] = e[_t3];
          r[31] = 127 & e[31] | 64, r[0] &= 248, function (e, t) {
            for (var _r5 = 0; _r5 < 16; _r5++) e[_r5] = t[2 * _r5] + (t[2 * _r5 + 1] << 8);
            e[15] &= 32767;
          }(n, t);
          for (var _e5 = 0; _e5 < 16; _e5++) o[_e5] = n[_e5];
          i[0] = y[0] = 1;
          for (var _e6 = 254; _e6 >= 0; --_e6) {
            var _t4 = r[_e6 >>> 3] >>> (7 & _e6) & 1;
            l(i, o, _t4), l(f, y, _t4), u(g, i, f), h(i, i, f), u(f, o, y), h(o, o, y), p(y, g), p(m, i), d(i, f, i), d(f, o, g), u(g, i, f), h(i, i, f), p(o, i), h(f, y, m), d(i, f, a), u(i, i, y), d(f, f, i), d(i, y, m), d(y, o, n), p(o, g), l(i, o, _t4), l(f, y, _t4);
          }
          for (var _e7 = 0; _e7 < 16; _e7++) n[_e7 + 16] = i[_e7], n[_e7 + 32] = f[_e7], n[_e7 + 48] = o[_e7], n[_e7 + 64] = y[_e7];
          var w = n.subarray(32),
            E = n.subarray(16);
          !function (e, t) {
            var r = s();
            for (var _e8 = 0; _e8 < 16; _e8++) r[_e8] = t[_e8];
            for (var _e9 = 253; _e9 >= 0; _e9--) p(r, r), 2 !== _e9 && 4 !== _e9 && d(r, r, t);
            for (var _t5 = 0; _t5 < 16; _t5++) e[_t5] = r[_t5];
          }(w, w), d(E, E, w);
          var b = new Uint8Array(32);
          return function (e, t) {
            var r = s(),
              n = s();
            for (var _e10 = 0; _e10 < 16; _e10++) n[_e10] = t[_e10];
            c(n), c(n), c(n);
            for (var _e11 = 0; _e11 < 2; _e11++) {
              r[0] = n[0] - 65517;
              for (var _e12 = 1; _e12 < 15; _e12++) r[_e12] = n[_e12] - 65535 - (r[_e12 - 1] >> 16 & 1), r[_e12 - 1] &= 65535;
              r[15] = n[15] - 32767 - (r[14] >> 16 & 1);
              var _e13 = r[15] >> 16 & 1;
              r[14] &= 65535, l(n, r, 1 - _e13);
            }
            for (var _t6 = 0; _t6 < 16; _t6++) e[2 * _t6] = 255 & n[_t6], e[2 * _t6 + 1] = n[_t6] >> 8;
          }(b, E), b;
        }
        function y(e) {
          if (e.length !== t.KS) throw new Error("x25519: seed must be ".concat(t.KS, " bytes"));
          var r = new Uint8Array(e);
          return {
            publicKey: (n = r, f(n, o)),
            secretKey: r
          };
          var n;
        }
        t._w = y, t.Au = function (e) {
          var t = (0, n.randomBytes)(32, e),
            r = y(t);
          return (0, i.wipe)(t), r;
        }, t.gi = function (e, r) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
          if (e.length !== t.kz) throw new Error("X25519: incorrect secret key length");
          if (r.length !== t.kz) throw new Error("X25519: incorrect public key length");
          var i = f(e, r);
          if (n) {
            var _e14 = 0;
            for (var _t7 = 0; _t7 < i.length; _t7++) _e14 |= i[_t7];
            if (0 === _e14) throw new Error("X25519: invalid shared key");
          }
          return i;
        };
      },
      2044: function _(e) {
        function t(e) {
          var t = new globalThis.AbortController();
          function r() {
            t.abort();
            var _iterator34 = _createForOfIteratorHelper(e),
              _step34;
            try {
              for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {
                var _t8 = _step34.value;
                _t8 && _t8.removeEventListener && _t8.removeEventListener("abort", r);
              }
            } catch (err) {
              _iterator34.e(err);
            } finally {
              _iterator34.f();
            }
          }
          var _iterator35 = _createForOfIteratorHelper(e),
            _step35;
          try {
            for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {
              var _t9 = _step35.value;
              if (_t9 && _t9.addEventListener) {
                if (_t9.aborted) {
                  r();
                  break;
                }
                _t9.addEventListener("abort", r);
              }
            }
          } catch (err) {
            _iterator35.e(err);
          } finally {
            _iterator35.f();
          }
          return t.signal;
        }
        e.exports = t, e.exports.anySignal = t;
      },
      1227: function _(e, t, r) {
        t.formatArgs = function (t) {
          if (t[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + t[0] + (this.useColors ? "%c " : " ") + "+" + e.exports.humanize(this.diff), !this.useColors) return;
          var r = "color: " + this.color;
          t.splice(1, 0, r, "color: inherit");
          var n = 0,
            i = 0;
          t[0].replace(/%[a-zA-Z%]/g, function (e) {
            "%%" !== e && (n++, "%c" === e && (i = n));
          }), t.splice(i, 0, r);
        }, t.save = function (e) {
          try {
            e ? t.storage.setItem("debug", e) : t.storage.removeItem("debug");
          } catch (e) {}
        }, t.load = function () {
          var e;
          try {
            e = t.storage.getItem("debug");
          } catch (e) {}
          return !e && "undefined" != typeof process && "env" in process && (e = undefined), e;
        }, t.useColors = function () {
          return !("undefined" == typeof window || !window.process || "renderer" !== window.process.type && !window.process.__nwjs) || ("undefined" == typeof navigator || !navigator.userAgent || !navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) && ("undefined" != typeof document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || "undefined" != typeof window && window.console && (window.console.firebug || window.console.exception && window.console.table) || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
        }, t.storage = function () {
          try {
            return localStorage;
          } catch (e) {}
        }(), t.destroy = function () {
          var e = !1;
          return function () {
            e || (e = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
          };
        }(), t.colors = ["#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC", "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99", "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC", "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99", "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00", "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33", "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300", "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633", "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066", "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399", "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00", "#FFCC33"], t.log = console.debug || console.log || function () {}, e.exports = r(2447)(t);
        var n = e.exports.formatters;
        n.j = function (e) {
          try {
            return JSON.stringify(e);
          } catch (e) {
            return "[UnexpectedJSONParseError]: " + e.message;
          }
        };
      },
      2447: function _(e, t, r) {
        e.exports = function (e) {
          function t(e) {
            var r,
              i,
              s,
              o = null;
            function a() {
              for (var _len = arguments.length, e = new Array(_len), _key = 0; _key < _len; _key++) {
                e[_key] = arguments[_key];
              }
              if (!a.enabled) return;
              var n = a,
                i = Number(new Date()),
                s = i - (r || i);
              n.diff = s, n.prev = r, n.curr = i, r = i, e[0] = t.coerce(e[0]), "string" != typeof e[0] && e.unshift("%O");
              var o = 0;
              e[0] = e[0].replace(/%([a-zA-Z%])/g, function (r, i) {
                if ("%%" === r) return "%";
                o++;
                var s = t.formatters[i];
                if ("function" == typeof s) {
                  var _t10 = e[o];
                  r = s.call(n, _t10), e.splice(o, 1), o--;
                }
                return r;
              }), t.formatArgs.call(n, e), (n.log || t.log).apply(n, e);
            }
            return a.namespace = e, a.useColors = t.useColors(), a.color = t.selectColor(e), a.extend = n, a.destroy = t.destroy, Object.defineProperty(a, "enabled", {
              enumerable: !0,
              configurable: !1,
              get: function get() {
                return null !== o ? o : (i !== t.namespaces && (i = t.namespaces, s = t.enabled(e)), s);
              },
              set: function set(e) {
                o = e;
              }
            }), "function" == typeof t.init && t.init(a), a;
          }
          function n(e, r) {
            var n = t(this.namespace + (void 0 === r ? ":" : r) + e);
            return n.log = this.log, n;
          }
          function i(e) {
            return e.toString().substring(2, e.toString().length - 2).replace(/\.\*\?$/, "*");
          }
          return t.debug = t, t.default = t, t.coerce = function (e) {
            return e instanceof Error ? e.stack || e.message : e;
          }, t.disable = function () {
            var e = [].concat(_toConsumableArray(t.names.map(i)), _toConsumableArray(t.skips.map(i).map(function (e) {
              return "-" + e;
            }))).join(",");
            return t.enable(""), e;
          }, t.enable = function (e) {
            var r;
            t.save(e), t.namespaces = e, t.names = [], t.skips = [];
            var n = ("string" == typeof e ? e : "").split(/[\s,]+/),
              i = n.length;
            for (r = 0; r < i; r++) n[r] && ("-" === (e = n[r].replace(/\*/g, ".*?"))[0] ? t.skips.push(new RegExp("^" + e.slice(1) + "$")) : t.names.push(new RegExp("^" + e + "$")));
          }, t.enabled = function (e) {
            if ("*" === e[e.length - 1]) return !0;
            var r, n;
            for (r = 0, n = t.skips.length; r < n; r++) if (t.skips[r].test(e)) return !1;
            for (r = 0, n = t.names.length; r < n; r++) if (t.names[r].test(e)) return !0;
            return !1;
          }, t.humanize = r(7824), t.destroy = function () {
            console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
          }, Object.keys(e).forEach(function (r) {
            t[r] = e[r];
          }), t.names = [], t.skips = [], t.formatters = {}, t.selectColor = function (e) {
            var r = 0;
            for (var _t11 = 0; _t11 < e.length; _t11++) r = (r << 5) - r + e.charCodeAt(_t11), r |= 0;
            return t.colors[Math.abs(r) % t.colors.length];
          }, t.enable(t.load()), t;
        };
      },
      5780: function _(e) {
        "use strict";

        var t = function t() {
            var e = new Error("Delay aborted");
            return e.name = "AbortError", e;
          },
          r = function r(_ref19) {
            var e = _ref19.clearTimeout,
              r = _ref19.setTimeout,
              n = _ref19.willResolve;
            return function (i) {
              var _ref20 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
                s = _ref20.value,
                o = _ref20.signal;
              if (o && o.aborted) return Promise.reject(t());
              var a, c, l;
              var u = e || clearTimeout,
                h = function h() {
                  u(a), l(t());
                },
                d = new Promise(function (e, t) {
                  c = function c() {
                    o && o.removeEventListener("abort", h), n ? e(s) : t(s);
                  }, l = t, a = (r || setTimeout)(c, i);
                });
              return o && o.addEventListener("abort", h, {
                once: !0
              }), d.clear = function () {
                u(a), a = null, c();
              }, d;
            };
          },
          n = function n(e) {
            var t = r(_objectSpread(_objectSpread({}, e), {}, {
              willResolve: !0
            }));
            return t.reject = r(_objectSpread(_objectSpread({}, e), {}, {
              willResolve: !1
            })), t.range = function (e, r, n) {
              return t(function (e, t) {
                return Math.floor(Math.random() * (t - e + 1) + e);
              }(e, r), n);
            }, t;
          },
          i = n();
        i.createWithTimers = n, e.exports = i, e.exports.default = i;
      },
      2114: function _(e) {
        "use strict";

        function t(e, t) {
          for (var r in t) Object.defineProperty(e, r, {
            value: t[r],
            enumerable: !0,
            configurable: !0
          });
          return e;
        }
        e.exports = function (e, r, n) {
          if (!e || "string" == typeof e) throw new TypeError("Please pass an Error to err-code");
          n || (n = {}), "object" == _typeof(r) && (n = r, r = ""), r && (n.code = r);
          try {
            return t(e, n);
          } catch (r) {
            n.message = e.message, n.stack = e.stack;
            var i = function i() {};
            return i.prototype = Object.create(Object.getPrototypeOf(e)), t(new i(), n);
          }
        };
      },
      6729: function _(e) {
        "use strict";

        var t = Object.prototype.hasOwnProperty,
          r = "~";
        function n() {}
        function i(e, t, r) {
          this.fn = e, this.context = t, this.once = r || !1;
        }
        function s(e, t, n, s, o) {
          if ("function" != typeof n) throw new TypeError("The listener must be a function");
          var a = new i(n, s || e, o),
            c = r ? r + t : t;
          return e._events[c] ? e._events[c].fn ? e._events[c] = [e._events[c], a] : e._events[c].push(a) : (e._events[c] = a, e._eventsCount++), e;
        }
        function o(e, t) {
          0 == --e._eventsCount ? e._events = new n() : delete e._events[t];
        }
        function a() {
          this._events = new n(), this._eventsCount = 0;
        }
        Object.create && (n.prototype = Object.create(null), new n().__proto__ || (r = !1)), a.prototype.eventNames = function () {
          var e,
            n,
            i = [];
          if (0 === this._eventsCount) return i;
          for (n in e = this._events) t.call(e, n) && i.push(r ? n.slice(1) : n);
          return Object.getOwnPropertySymbols ? i.concat(Object.getOwnPropertySymbols(e)) : i;
        }, a.prototype.listeners = function (e) {
          var t = r ? r + e : e,
            n = this._events[t];
          if (!n) return [];
          if (n.fn) return [n.fn];
          for (var i = 0, s = n.length, o = new Array(s); i < s; i++) o[i] = n[i].fn;
          return o;
        }, a.prototype.listenerCount = function (e) {
          var t = r ? r + e : e,
            n = this._events[t];
          return n ? n.fn ? 1 : n.length : 0;
        }, a.prototype.emit = function (e, t, n, i, s, o) {
          var a = r ? r + e : e;
          if (!this._events[a]) return !1;
          var c,
            l,
            u = this._events[a],
            h = arguments.length;
          if (u.fn) {
            switch (u.once && this.removeListener(e, u.fn, void 0, !0), h) {
              case 1:
                return u.fn.call(u.context), !0;
              case 2:
                return u.fn.call(u.context, t), !0;
              case 3:
                return u.fn.call(u.context, t, n), !0;
              case 4:
                return u.fn.call(u.context, t, n, i), !0;
              case 5:
                return u.fn.call(u.context, t, n, i, s), !0;
              case 6:
                return u.fn.call(u.context, t, n, i, s, o), !0;
            }
            for (l = 1, c = new Array(h - 1); l < h; l++) c[l - 1] = arguments[l];
            u.fn.apply(u.context, c);
          } else {
            var d,
              p = u.length;
            for (l = 0; l < p; l++) switch (u[l].once && this.removeListener(e, u[l].fn, void 0, !0), h) {
              case 1:
                u[l].fn.call(u[l].context);
                break;
              case 2:
                u[l].fn.call(u[l].context, t);
                break;
              case 3:
                u[l].fn.call(u[l].context, t, n);
                break;
              case 4:
                u[l].fn.call(u[l].context, t, n, i);
                break;
              default:
                if (!c) for (d = 1, c = new Array(h - 1); d < h; d++) c[d - 1] = arguments[d];
                u[l].fn.apply(u[l].context, c);
            }
          }
          return !0;
        }, a.prototype.on = function (e, t, r) {
          return s(this, e, t, r, !1);
        }, a.prototype.once = function (e, t, r) {
          return s(this, e, t, r, !0);
        }, a.prototype.removeListener = function (e, t, n, i) {
          var s = r ? r + e : e;
          if (!this._events[s]) return this;
          if (!t) return o(this, s), this;
          var a = this._events[s];
          if (a.fn) a.fn !== t || i && !a.once || n && a.context !== n || o(this, s);else {
            for (var c = 0, l = [], u = a.length; c < u; c++) (a[c].fn !== t || i && !a[c].once || n && a[c].context !== n) && l.push(a[c]);
            l.length ? this._events[s] = 1 === l.length ? l[0] : l : o(this, s);
          }
          return this;
        }, a.prototype.removeAllListeners = function (e) {
          var t;
          return e ? (t = r ? r + e : e, this._events[t] && o(this, t)) : (this._events = new n(), this._eventsCount = 0), this;
        }, a.prototype.off = a.prototype.removeListener, a.prototype.addListener = a.prototype.on, a.prefixed = r, a.EventEmitter = a, e.exports = a;
      },
      7187: function _(e) {
        "use strict";

        var t,
          r = "object" == (typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) ? Reflect : null,
          n = r && "function" == typeof r.apply ? r.apply : function (e, t, r) {
            return Function.prototype.apply.call(e, t, r);
          };
        t = r && "function" == typeof r.ownKeys ? r.ownKeys : Object.getOwnPropertySymbols ? function (e) {
          return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e));
        } : function (e) {
          return Object.getOwnPropertyNames(e);
        };
        var i = Number.isNaN || function (e) {
          return e != e;
        };
        function s() {
          s.init.call(this);
        }
        e.exports = s, e.exports.once = function (e, t) {
          return new Promise(function (r, n) {
            function i(r) {
              e.removeListener(t, s), n(r);
            }
            function s() {
              "function" == typeof e.removeListener && e.removeListener("error", i), r([].slice.call(arguments));
            }
            y(e, t, s, {
              once: !0
            }), "error" !== t && function (e, t, r) {
              "function" == typeof e.on && y(e, "error", t, {
                once: !0
              });
            }(e, i);
          });
        }, s.EventEmitter = s, s.prototype._events = void 0, s.prototype._eventsCount = 0, s.prototype._maxListeners = void 0;
        var o = 10;
        function a(e) {
          if ("function" != typeof e) throw new TypeError('The "listener" argument must be of type Function. Received type ' + _typeof(e));
        }
        function c(e) {
          return void 0 === e._maxListeners ? s.defaultMaxListeners : e._maxListeners;
        }
        function l(e, t, r, n) {
          var i, s, o, l;
          if (a(r), void 0 === (s = e._events) ? (s = e._events = Object.create(null), e._eventsCount = 0) : (void 0 !== s.newListener && (e.emit("newListener", t, r.listener ? r.listener : r), s = e._events), o = s[t]), void 0 === o) o = s[t] = r, ++e._eventsCount;else if ("function" == typeof o ? o = s[t] = n ? [r, o] : [o, r] : n ? o.unshift(r) : o.push(r), (i = c(e)) > 0 && o.length > i && !o.warned) {
            o.warned = !0;
            var u = new Error("Possible EventEmitter memory leak detected. " + o.length + " " + String(t) + " listeners added. Use emitter.setMaxListeners() to increase limit");
            u.name = "MaxListenersExceededWarning", u.emitter = e, u.type = t, u.count = o.length, l = u, console && console.warn && console.warn(l);
          }
          return e;
        }
        function u() {
          if (!this.fired) return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, 0 === arguments.length ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
        }
        function h(e, t, r) {
          var n = {
              fired: !1,
              wrapFn: void 0,
              target: e,
              type: t,
              listener: r
            },
            i = u.bind(n);
          return i.listener = r, n.wrapFn = i, i;
        }
        function d(e, t, r) {
          var n = e._events;
          if (void 0 === n) return [];
          var i = n[t];
          return void 0 === i ? [] : "function" == typeof i ? r ? [i.listener || i] : [i] : r ? function (e) {
            for (var t = new Array(e.length), r = 0; r < t.length; ++r) t[r] = e[r].listener || e[r];
            return t;
          }(i) : f(i, i.length);
        }
        function p(e) {
          var t = this._events;
          if (void 0 !== t) {
            var r = t[e];
            if ("function" == typeof r) return 1;
            if (void 0 !== r) return r.length;
          }
          return 0;
        }
        function f(e, t) {
          for (var r = new Array(t), n = 0; n < t; ++n) r[n] = e[n];
          return r;
        }
        function y(e, t, r, n) {
          if ("function" == typeof e.on) n.once ? e.once(t, r) : e.on(t, r);else {
            if ("function" != typeof e.addEventListener) throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + _typeof(e));
            e.addEventListener(t, function i(s) {
              n.once && e.removeEventListener(t, i), r(s);
            });
          }
        }
        Object.defineProperty(s, "defaultMaxListeners", {
          enumerable: !0,
          get: function get() {
            return o;
          },
          set: function set(e) {
            if ("number" != typeof e || e < 0 || i(e)) throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + e + ".");
            o = e;
          }
        }), s.init = function () {
          void 0 !== this._events && this._events !== Object.getPrototypeOf(this)._events || (this._events = Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
        }, s.prototype.setMaxListeners = function (e) {
          if ("number" != typeof e || e < 0 || i(e)) throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + e + ".");
          return this._maxListeners = e, this;
        }, s.prototype.getMaxListeners = function () {
          return c(this);
        }, s.prototype.emit = function (e) {
          for (var t = [], r = 1; r < arguments.length; r++) t.push(arguments[r]);
          var i = "error" === e,
            s = this._events;
          if (void 0 !== s) i = i && void 0 === s.error;else if (!i) return !1;
          if (i) {
            var o;
            if (t.length > 0 && (o = t[0]), o instanceof Error) throw o;
            var a = new Error("Unhandled error." + (o ? " (" + o.message + ")" : ""));
            throw a.context = o, a;
          }
          var c = s[e];
          if (void 0 === c) return !1;
          if ("function" == typeof c) n(c, this, t);else {
            var l = c.length,
              u = f(c, l);
            for (r = 0; r < l; ++r) n(u[r], this, t);
          }
          return !0;
        }, s.prototype.addListener = function (e, t) {
          return l(this, e, t, !1);
        }, s.prototype.on = s.prototype.addListener, s.prototype.prependListener = function (e, t) {
          return l(this, e, t, !0);
        }, s.prototype.once = function (e, t) {
          return a(t), this.on(e, h(this, e, t)), this;
        }, s.prototype.prependOnceListener = function (e, t) {
          return a(t), this.prependListener(e, h(this, e, t)), this;
        }, s.prototype.removeListener = function (e, t) {
          var r, n, i, s, o;
          if (a(t), void 0 === (n = this._events)) return this;
          if (void 0 === (r = n[e])) return this;
          if (r === t || r.listener === t) 0 == --this._eventsCount ? this._events = Object.create(null) : (delete n[e], n.removeListener && this.emit("removeListener", e, r.listener || t));else if ("function" != typeof r) {
            for (i = -1, s = r.length - 1; s >= 0; s--) if (r[s] === t || r[s].listener === t) {
              o = r[s].listener, i = s;
              break;
            }
            if (i < 0) return this;
            0 === i ? r.shift() : function (e, t) {
              for (; t + 1 < e.length; t++) e[t] = e[t + 1];
              e.pop();
            }(r, i), 1 === r.length && (n[e] = r[0]), void 0 !== n.removeListener && this.emit("removeListener", e, o || t);
          }
          return this;
        }, s.prototype.off = s.prototype.removeListener, s.prototype.removeAllListeners = function (e) {
          var t, r, n;
          if (void 0 === (r = this._events)) return this;
          if (void 0 === r.removeListener) return 0 === arguments.length ? (this._events = Object.create(null), this._eventsCount = 0) : void 0 !== r[e] && (0 == --this._eventsCount ? this._events = Object.create(null) : delete r[e]), this;
          if (0 === arguments.length) {
            var i,
              s = Object.keys(r);
            for (n = 0; n < s.length; ++n) "removeListener" !== (i = s[n]) && this.removeAllListeners(i);
            return this.removeAllListeners("removeListener"), this._events = Object.create(null), this._eventsCount = 0, this;
          }
          if ("function" == typeof (t = r[e])) this.removeListener(e, t);else if (void 0 !== t) for (n = t.length - 1; n >= 0; n--) this.removeListener(e, t[n]);
          return this;
        }, s.prototype.listeners = function (e) {
          return d(this, e, !0);
        }, s.prototype.rawListeners = function (e) {
          return d(this, e, !1);
        }, s.listenerCount = function (e, t) {
          return "function" == typeof e.listenerCount ? e.listenerCount(t) : p.call(e, t);
        }, s.prototype.listenerCount = p, s.prototype.eventNames = function () {
          return this._eventsCount > 0 ? t(this._events) : [];
        };
      },
      3975: function _(e) {
        e.exports = /*#__PURE__*/function () {
          function _class4(e) {
            _classCallCheck(this, _class4);
            if (!(e > 0) || 0 != (e - 1 & e)) throw new Error("Max size for a FixedFIFO should be a power of two");
            this.buffer = new Array(e), this.mask = e - 1, this.top = 0, this.btm = 0, this.next = null;
          }
          _createClass(_class4, [{
            key: "push",
            value: function push(e) {
              return void 0 === this.buffer[this.top] && (this.buffer[this.top] = e, this.top = this.top + 1 & this.mask, !0);
            }
          }, {
            key: "shift",
            value: function shift() {
              var e = this.buffer[this.btm];
              if (void 0 !== e) return this.buffer[this.btm] = void 0, this.btm = this.btm + 1 & this.mask, e;
            }
          }, {
            key: "peek",
            value: function peek() {
              return this.buffer[this.btm];
            }
          }, {
            key: "isEmpty",
            value: function isEmpty() {
              return void 0 === this.buffer[this.btm];
            }
          }]);
          return _class4;
        }();
      },
      1607: function _(e, t, r) {
        var n = r(3975);
        e.exports = /*#__PURE__*/function () {
          function _class5(e) {
            _classCallCheck(this, _class5);
            this.hwm = e || 16, this.head = new n(this.hwm), this.tail = this.head;
          }
          _createClass(_class5, [{
            key: "push",
            value: function push(e) {
              if (!this.head.push(e)) {
                var _t12 = this.head;
                this.head = _t12.next = new n(2 * this.head.buffer.length), this.head.push(e);
              }
            }
          }, {
            key: "shift",
            value: function shift() {
              var e = this.tail.shift();
              if (void 0 === e && this.tail.next) {
                var _e15 = this.tail.next;
                return this.tail.next = null, this.tail = _e15, this.tail.shift();
              }
              return e;
            }
          }, {
            key: "peek",
            value: function peek() {
              return this.tail.peek();
            }
          }, {
            key: "isEmpty",
            value: function isEmpty() {
              return this.head.isEmpty();
            }
          }]);
          return _class5;
        }();
      },
      6512: function _(e) {
        !function (t) {
          "use strict";

          var r = "(0?\\d+|0x[a-f0-9]+)",
            n = {
              fourOctet: new RegExp("^".concat(r, "\\.").concat(r, "\\.").concat(r, "\\.").concat(r, "$"), "i"),
              threeOctet: new RegExp("^".concat(r, "\\.").concat(r, "\\.").concat(r, "$"), "i"),
              twoOctet: new RegExp("^".concat(r, "\\.").concat(r, "$"), "i"),
              longValue: new RegExp("^".concat(r, "$"), "i")
            },
            i = new RegExp("^0[0-7]+$", "i"),
            s = new RegExp("^0x[a-f0-9]+$", "i"),
            o = "%[0-9a-z]{1,}",
            a = "(?:[0-9a-f]+::?)+",
            c = {
              zoneIndex: new RegExp(o, "i"),
              native: new RegExp("^(::)?(".concat(a, ")?([0-9a-f]+)?(::)?(").concat(o, ")?$"), "i"),
              deprecatedTransitional: new RegExp("^(?:::)(".concat(r, "\\.").concat(r, "\\.").concat(r, "\\.").concat(r, "(").concat(o, ")?)$"), "i"),
              transitional: new RegExp("^((?:".concat(a, ")|(?:::)(?:").concat(a, ")?)").concat(r, "\\.").concat(r, "\\.").concat(r, "\\.").concat(r, "(").concat(o, ")?$"), "i")
            };
          function l(e, t) {
            if (e.indexOf("::") !== e.lastIndexOf("::")) return null;
            var r,
              n,
              i = 0,
              s = -1,
              o = (e.match(c.zoneIndex) || [])[0];
            for (o && (o = o.substring(1), e = e.replace(/%.+$/, "")); (s = e.indexOf(":", s + 1)) >= 0;) i++;
            if ("::" === e.substr(0, 2) && i--, "::" === e.substr(-2, 2) && i--, i > t) return null;
            for (n = t - i, r = ":"; n--;) r += "0:";
            return ":" === (e = e.replace("::", r))[0] && (e = e.slice(1)), ":" === e[e.length - 1] && (e = e.slice(0, -1)), {
              parts: t = function () {
                var t = e.split(":"),
                  r = [];
                for (var _e16 = 0; _e16 < t.length; _e16++) r.push(parseInt(t[_e16], 16));
                return r;
              }(),
              zoneId: o
            };
          }
          function u(e, t, r, n) {
            if (e.length !== t.length) throw new Error("ipaddr: cannot match CIDR for objects with different lengths");
            var i,
              s = 0;
            for (; n > 0;) {
              if (i = r - n, i < 0 && (i = 0), e[s] >> i != t[s] >> i) return !1;
              n -= r, s += 1;
            }
            return !0;
          }
          function h(e) {
            if (s.test(e)) return parseInt(e, 16);
            if ("0" === e[0] && !isNaN(parseInt(e[1], 10))) {
              if (i.test(e)) return parseInt(e, 8);
              throw new Error("ipaddr: cannot parse ".concat(e, " as octal"));
            }
            return parseInt(e, 10);
          }
          function d(e, t) {
            for (; e.length < t;) e = "0".concat(e);
            return e;
          }
          var p = {};
          p.IPv4 = function () {
            function e(e) {
              if (4 !== e.length) throw new Error("ipaddr: ipv4 octet count should be 4");
              var t, r;
              for (t = 0; t < e.length; t++) if (r = e[t], !(0 <= r && r <= 255)) throw new Error("ipaddr: ipv4 octet should fit in 8 bits");
              this.octets = e;
            }
            return e.prototype.SpecialRanges = {
              unspecified: [[new e([0, 0, 0, 0]), 8]],
              broadcast: [[new e([255, 255, 255, 255]), 32]],
              multicast: [[new e([224, 0, 0, 0]), 4]],
              linkLocal: [[new e([169, 254, 0, 0]), 16]],
              loopback: [[new e([127, 0, 0, 0]), 8]],
              carrierGradeNat: [[new e([100, 64, 0, 0]), 10]],
              private: [[new e([10, 0, 0, 0]), 8], [new e([172, 16, 0, 0]), 12], [new e([192, 168, 0, 0]), 16]],
              reserved: [[new e([192, 0, 0, 0]), 24], [new e([192, 0, 2, 0]), 24], [new e([192, 88, 99, 0]), 24], [new e([198, 51, 100, 0]), 24], [new e([203, 0, 113, 0]), 24], [new e([240, 0, 0, 0]), 4]]
            }, e.prototype.kind = function () {
              return "ipv4";
            }, e.prototype.match = function (e, t) {
              var r;
              if (void 0 === t && (r = e, e = r[0], t = r[1]), "ipv4" !== e.kind()) throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");
              return u(this.octets, e.octets, 8, t);
            }, e.prototype.prefixLengthFromSubnetMask = function () {
              var e = 0,
                t = !1;
              var r = {
                0: 8,
                128: 7,
                192: 6,
                224: 5,
                240: 4,
                248: 3,
                252: 2,
                254: 1,
                255: 0
              };
              var n, i, s;
              for (n = 3; n >= 0; n -= 1) {
                if (i = this.octets[n], !(i in r)) return null;
                if (s = r[i], t && 0 !== s) return null;
                8 !== s && (t = !0), e += s;
              }
              return 32 - e;
            }, e.prototype.range = function () {
              return p.subnetMatch(this, this.SpecialRanges);
            }, e.prototype.toByteArray = function () {
              return this.octets.slice(0);
            }, e.prototype.toIPv4MappedAddress = function () {
              return p.IPv6.parse("::ffff:".concat(this.toString()));
            }, e.prototype.toNormalizedString = function () {
              return this.toString();
            }, e.prototype.toString = function () {
              return this.octets.join(".");
            }, e;
          }(), p.IPv4.broadcastAddressFromCIDR = function (e) {
            try {
              var _t13 = this.parseCIDR(e),
                _r6 = _t13[0].toByteArray(),
                _n6 = this.subnetMaskFromPrefixLength(_t13[1]).toByteArray(),
                _i3 = [];
              var _s3 = 0;
              for (; _s3 < 4;) _i3.push(parseInt(_r6[_s3], 10) | 255 ^ parseInt(_n6[_s3], 10)), _s3++;
              return new this(_i3);
            } catch (e) {
              throw new Error("ipaddr: the address does not have IPv4 CIDR format");
            }
          }, p.IPv4.isIPv4 = function (e) {
            return null !== this.parser(e);
          }, p.IPv4.isValid = function (e) {
            try {
              return new this(this.parser(e)), !0;
            } catch (e) {
              return !1;
            }
          }, p.IPv4.isValidFourPartDecimal = function (e) {
            return !(!p.IPv4.isValid(e) || !e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/));
          }, p.IPv4.networkAddressFromCIDR = function (e) {
            var t, r, n, i, s;
            try {
              for (t = this.parseCIDR(e), n = t[0].toByteArray(), s = this.subnetMaskFromPrefixLength(t[1]).toByteArray(), i = [], r = 0; r < 4;) i.push(parseInt(n[r], 10) & parseInt(s[r], 10)), r++;
              return new this(i);
            } catch (e) {
              throw new Error("ipaddr: the address does not have IPv4 CIDR format");
            }
          }, p.IPv4.parse = function (e) {
            var t = this.parser(e);
            if (null === t) throw new Error("ipaddr: string is not formatted like an IPv4 Address");
            return new this(t);
          }, p.IPv4.parseCIDR = function (e) {
            var t;
            if (t = e.match(/^(.+)\/(\d+)$/)) {
              var _e17 = parseInt(t[2]);
              if (_e17 >= 0 && _e17 <= 32) {
                var _r7 = [this.parse(t[1]), _e17];
                return Object.defineProperty(_r7, "toString", {
                  value: function value() {
                    return this.join("/");
                  }
                }), _r7;
              }
            }
            throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range");
          }, p.IPv4.parser = function (e) {
            var t, r, i;
            if (t = e.match(n.fourOctet)) return function () {
              var e = t.slice(1, 6),
                n = [];
              for (var _t14 = 0; _t14 < e.length; _t14++) r = e[_t14], n.push(h(r));
              return n;
            }();
            if (t = e.match(n.longValue)) {
              if (i = h(t[1]), i > 4294967295 || i < 0) throw new Error("ipaddr: address outside defined range");
              return function () {
                var e = [];
                var t;
                for (t = 0; t <= 24; t += 8) e.push(i >> t & 255);
                return e;
              }().reverse();
            }
            return (t = e.match(n.twoOctet)) ? function () {
              var e = t.slice(1, 4),
                r = [];
              if (i = h(e[1]), i > 16777215 || i < 0) throw new Error("ipaddr: address outside defined range");
              return r.push(h(e[0])), r.push(i >> 16 & 255), r.push(i >> 8 & 255), r.push(255 & i), r;
            }() : (t = e.match(n.threeOctet)) ? function () {
              var e = t.slice(1, 5),
                r = [];
              if (i = h(e[2]), i > 65535 || i < 0) throw new Error("ipaddr: address outside defined range");
              return r.push(h(e[0])), r.push(h(e[1])), r.push(i >> 8 & 255), r.push(255 & i), r;
            }() : null;
          }, p.IPv4.subnetMaskFromPrefixLength = function (e) {
            if ((e = parseInt(e)) < 0 || e > 32) throw new Error("ipaddr: invalid IPv4 prefix length");
            var t = [0, 0, 0, 0];
            var r = 0;
            var n = Math.floor(e / 8);
            for (; r < n;) t[r] = 255, r++;
            return n < 4 && (t[n] = Math.pow(2, e % 8) - 1 << 8 - e % 8), new this(t);
          }, p.IPv6 = function () {
            function e(e, t) {
              var r, n;
              if (16 === e.length) for (this.parts = [], r = 0; r <= 14; r += 2) this.parts.push(e[r] << 8 | e[r + 1]);else {
                if (8 !== e.length) throw new Error("ipaddr: ipv6 part count should be 8 or 16");
                this.parts = e;
              }
              for (r = 0; r < this.parts.length; r++) if (n = this.parts[r], !(0 <= n && n <= 65535)) throw new Error("ipaddr: ipv6 part should fit in 16 bits");
              t && (this.zoneId = t);
            }
            return e.prototype.SpecialRanges = {
              unspecified: [new e([0, 0, 0, 0, 0, 0, 0, 0]), 128],
              linkLocal: [new e([65152, 0, 0, 0, 0, 0, 0, 0]), 10],
              multicast: [new e([65280, 0, 0, 0, 0, 0, 0, 0]), 8],
              loopback: [new e([0, 0, 0, 0, 0, 0, 0, 1]), 128],
              uniqueLocal: [new e([64512, 0, 0, 0, 0, 0, 0, 0]), 7],
              ipv4Mapped: [new e([0, 0, 0, 0, 0, 65535, 0, 0]), 96],
              rfc6145: [new e([0, 0, 0, 0, 65535, 0, 0, 0]), 96],
              rfc6052: [new e([100, 65435, 0, 0, 0, 0, 0, 0]), 96],
              "6to4": [new e([8194, 0, 0, 0, 0, 0, 0, 0]), 16],
              teredo: [new e([8193, 0, 0, 0, 0, 0, 0, 0]), 32],
              reserved: [[new e([8193, 3512, 0, 0, 0, 0, 0, 0]), 32]]
            }, e.prototype.isIPv4MappedAddress = function () {
              return "ipv4Mapped" === this.range();
            }, e.prototype.kind = function () {
              return "ipv6";
            }, e.prototype.match = function (e, t) {
              var r;
              if (void 0 === t && (r = e, e = r[0], t = r[1]), "ipv6" !== e.kind()) throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");
              return u(this.parts, e.parts, 16, t);
            }, e.prototype.prefixLengthFromSubnetMask = function () {
              var e = 0,
                t = !1;
              var r = {
                0: 16,
                32768: 15,
                49152: 14,
                57344: 13,
                61440: 12,
                63488: 11,
                64512: 10,
                65024: 9,
                65280: 8,
                65408: 7,
                65472: 6,
                65504: 5,
                65520: 4,
                65528: 3,
                65532: 2,
                65534: 1,
                65535: 0
              };
              var n, i;
              for (var _s4 = 7; _s4 >= 0; _s4 -= 1) {
                if (n = this.parts[_s4], !(n in r)) return null;
                if (i = r[n], t && 0 !== i) return null;
                16 !== i && (t = !0), e += i;
              }
              return 128 - e;
            }, e.prototype.range = function () {
              return p.subnetMatch(this, this.SpecialRanges);
            }, e.prototype.toByteArray = function () {
              var e;
              var t = [],
                r = this.parts;
              for (var _n7 = 0; _n7 < r.length; _n7++) e = r[_n7], t.push(e >> 8), t.push(255 & e);
              return t;
            }, e.prototype.toFixedLengthString = function () {
              var e = function () {
                var e = [];
                for (var _t15 = 0; _t15 < this.parts.length; _t15++) e.push(d(this.parts[_t15].toString(16), 4));
                return e;
              }.call(this).join(":");
              var t = "";
              return this.zoneId && (t = "%".concat(this.zoneId)), e + t;
            }, e.prototype.toIPv4Address = function () {
              if (!this.isIPv4MappedAddress()) throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");
              var e = this.parts.slice(-2),
                t = e[0],
                r = e[1];
              return new p.IPv4([t >> 8, 255 & t, r >> 8, 255 & r]);
            }, e.prototype.toNormalizedString = function () {
              var e = function () {
                var e = [];
                for (var _t16 = 0; _t16 < this.parts.length; _t16++) e.push(this.parts[_t16].toString(16));
                return e;
              }.call(this).join(":");
              var t = "";
              return this.zoneId && (t = "%".concat(this.zoneId)), e + t;
            }, e.prototype.toRFC5952String = function () {
              var e = /((^|:)(0(:|$)){2,})/g,
                t = this.toNormalizedString();
              var r,
                n = 0,
                i = -1;
              for (; r = e.exec(t);) r[0].length > i && (n = r.index, i = r[0].length);
              return i < 0 ? t : "".concat(t.substring(0, n), "::").concat(t.substring(n + i));
            }, e.prototype.toString = function () {
              return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/, "::");
            }, e;
          }(), p.IPv6.broadcastAddressFromCIDR = function (e) {
            try {
              var _t17 = this.parseCIDR(e),
                _r8 = _t17[0].toByteArray(),
                _n8 = this.subnetMaskFromPrefixLength(_t17[1]).toByteArray(),
                _i4 = [];
              var _s5 = 0;
              for (; _s5 < 16;) _i4.push(parseInt(_r8[_s5], 10) | 255 ^ parseInt(_n8[_s5], 10)), _s5++;
              return new this(_i4);
            } catch (e) {
              throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(e, ")"));
            }
          }, p.IPv6.isIPv6 = function (e) {
            return null !== this.parser(e);
          }, p.IPv6.isValid = function (e) {
            if ("string" == typeof e && -1 === e.indexOf(":")) return !1;
            try {
              var _t18 = this.parser(e);
              return new this(_t18.parts, _t18.zoneId), !0;
            } catch (e) {
              return !1;
            }
          }, p.IPv6.networkAddressFromCIDR = function (e) {
            var t, r, n, i, s;
            try {
              for (t = this.parseCIDR(e), n = t[0].toByteArray(), s = this.subnetMaskFromPrefixLength(t[1]).toByteArray(), i = [], r = 0; r < 16;) i.push(parseInt(n[r], 10) & parseInt(s[r], 10)), r++;
              return new this(i);
            } catch (e) {
              throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(e, ")"));
            }
          }, p.IPv6.parse = function (e) {
            var t = this.parser(e);
            if (null === t.parts) throw new Error("ipaddr: string is not formatted like an IPv6 Address");
            return new this(t.parts, t.zoneId);
          }, p.IPv6.parseCIDR = function (e) {
            var t, r, n;
            if ((r = e.match(/^(.+)\/(\d+)$/)) && (t = parseInt(r[2]), t >= 0 && t <= 128)) return n = [this.parse(r[1]), t], Object.defineProperty(n, "toString", {
              value: function value() {
                return this.join("/");
              }
            }), n;
            throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range");
          }, p.IPv6.parser = function (e) {
            var t, r, n, i, s, o;
            if (n = e.match(c.deprecatedTransitional)) return this.parser("::ffff:".concat(n[1]));
            if (c.native.test(e)) return l(e, 8);
            if ((n = e.match(c.transitional)) && (o = n[6] || "", t = l(n[1].slice(0, -1) + o, 6), t.parts)) {
              for (s = [parseInt(n[2]), parseInt(n[3]), parseInt(n[4]), parseInt(n[5])], r = 0; r < s.length; r++) if (i = s[r], !(0 <= i && i <= 255)) return null;
              return t.parts.push(s[0] << 8 | s[1]), t.parts.push(s[2] << 8 | s[3]), {
                parts: t.parts,
                zoneId: t.zoneId
              };
            }
            return null;
          }, p.IPv6.subnetMaskFromPrefixLength = function (e) {
            if ((e = parseInt(e)) < 0 || e > 128) throw new Error("ipaddr: invalid IPv6 prefix length");
            var t = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            var r = 0;
            var n = Math.floor(e / 8);
            for (; r < n;) t[r] = 255, r++;
            return n < 16 && (t[n] = Math.pow(2, e % 8) - 1 << 8 - e % 8), new this(t);
          }, p.fromByteArray = function (e) {
            var t = e.length;
            if (4 === t) return new p.IPv4(e);
            if (16 === t) return new p.IPv6(e);
            throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address");
          }, p.isValid = function (e) {
            return p.IPv6.isValid(e) || p.IPv4.isValid(e);
          }, p.parse = function (e) {
            if (p.IPv6.isValid(e)) return p.IPv6.parse(e);
            if (p.IPv4.isValid(e)) return p.IPv4.parse(e);
            throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format");
          }, p.parseCIDR = function (e) {
            try {
              return p.IPv6.parseCIDR(e);
            } catch (t) {
              try {
                return p.IPv4.parseCIDR(e);
              } catch (e) {
                throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format");
              }
            }
          }, p.process = function (e) {
            var t = this.parse(e);
            return "ipv6" === t.kind() && t.isIPv4MappedAddress() ? t.toIPv4Address() : t;
          }, p.subnetMatch = function (e, t, r) {
            var n, i, s, o;
            for (i in null == r && (r = "unicast"), t) if (Object.prototype.hasOwnProperty.call(t, i)) for (s = t[i], !s[0] || s[0] instanceof Array || (s = [s]), n = 0; n < s.length; n++) if (o = s[n], e.kind() === o[0].kind() && e.match.apply(e, o)) return i;
            return r;
          }, e.exports ? e.exports = p : t.ipaddr = p;
        }(this);
      },
      9134: function _(e) {
        e.exports = function () {
          return "undefined" != typeof window && "object" == _typeof(window.process) && "renderer" === window.process.type || !("undefined" == typeof process || "object" != _typeof(process.versions) || !process.versions.electron) || "object" == (typeof navigator === "undefined" ? "undefined" : _typeof(navigator)) && "string" == typeof navigator.userAgent && navigator.userAgent.indexOf("Electron") >= 0;
        };
      },
      3310: function _(e) {
        "use strict";

        e.exports = function (e) {
          if ("[object Object]" !== Object.prototype.toString.call(e)) return !1;
          var t = Object.getPrototypeOf(e);
          return null === t || t === Object.prototype;
        };
      },
      1914: function _(e) {
        "use strict";

        var t = 65536;
        e.exports = function (e) {
          var r = new Uint8Array(e);
          var n = 0;
          if (e > 0) if (e > t) for (; n < e;) n + t > e ? (crypto.getRandomValues(r.subarray(n, n + (e - n))), n += e - n) : (crypto.getRandomValues(r.subarray(n, n + t)), n += t);else crypto.getRandomValues(r);
          return r;
        };
      },
      942: function _(e, t, r) {
        "use strict";

        var n = r(3310),
          i = Object.prototype.hasOwnProperty,
          s = Object.propertyIsEnumerable,
          o = function o(e, t, r) {
            return Object.defineProperty(e, t, {
              value: r,
              writable: !0,
              enumerable: !0,
              configurable: !0
            });
          },
          a = this,
          c = {
            concatArrays: !1,
            ignoreUndefined: !1
          },
          l = function l(e) {
            var t = [];
            for (var _r9 in e) i.call(e, _r9) && t.push(_r9);
            if (Object.getOwnPropertySymbols) {
              var _r10 = Object.getOwnPropertySymbols(e);
              var _iterator36 = _createForOfIteratorHelper(_r10),
                _step36;
              try {
                for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {
                  var _n9 = _step36.value;
                  s.call(e, _n9) && t.push(_n9);
                }
              } catch (err) {
                _iterator36.e(err);
              } finally {
                _iterator36.f();
              }
            }
            return t;
          };
        function u(e) {
          return Array.isArray(e) ? function (e) {
            var t = e.slice(0, 0);
            return l(e).forEach(function (r) {
              o(t, r, u(e[r]));
            }), t;
          }(e) : n(e) ? function (e) {
            var t = null === Object.getPrototypeOf(e) ? Object.create(null) : {};
            return l(e).forEach(function (r) {
              o(t, r, u(e[r]));
            }), t;
          }(e) : e;
        }
        var h = function h(e, t, r, n) {
            return r.forEach(function (r) {
              void 0 === t[r] && n.ignoreUndefined || (r in e && e[r] !== Object.getPrototypeOf(e) ? o(e, r, p(e[r], t[r], n)) : o(e, r, u(t[r])));
            }), e;
          },
          d = function d(e, t, r) {
            var n = e.slice(0, 0),
              s = 0;
            return [e, t].forEach(function (t) {
              var a = [];
              for (var _r11 = 0; _r11 < t.length; _r11++) i.call(t, _r11) && (a.push(String(_r11)), o(n, s++, t === e ? t[_r11] : u(t[_r11])));
              n = h(n, t, l(t).filter(function (e) {
                return !a.includes(e);
              }), r);
            }), n;
          };
        function p(e, t, r) {
          return r.concatArrays && Array.isArray(e) && Array.isArray(t) ? d(e, t, r) : n(t) && n(e) ? h(e, t, l(t), r) : u(t);
        }
        e.exports = function () {
          var t = p(u(c), this !== a && this || {}, c);
          var r = {
            _: {}
          };
          for (var _len2 = arguments.length, e = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
            e[_key2] = arguments[_key2];
          }
          for (var _i5 = 0, _e18 = e; _i5 < _e18.length; _i5++) {
            var _i6 = _e18[_i5];
            if (void 0 !== _i6) {
              if (!n(_i6)) throw new TypeError("`" + _i6 + "` is not an Option Object");
              r = p(r, {
                _: _i6
              }, t);
            }
          }
          return r._;
        };
      },
      7824: function _(e) {
        var t = 1e3,
          r = 60 * t,
          n = 60 * r,
          i = 24 * n;
        function s(e, t, r, n) {
          var i = t >= 1.5 * r;
          return Math.round(e / r) + " " + n + (i ? "s" : "");
        }
        e.exports = function (e, o) {
          o = o || {};
          var a,
            c,
            l = _typeof(e);
          if ("string" === l && e.length > 0) return function (e) {
            if (!((e = String(e)).length > 100)) {
              var s = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);
              if (s) {
                var o = parseFloat(s[1]);
                switch ((s[2] || "ms").toLowerCase()) {
                  case "years":
                  case "year":
                  case "yrs":
                  case "yr":
                  case "y":
                    return 315576e5 * o;
                  case "weeks":
                  case "week":
                  case "w":
                    return 6048e5 * o;
                  case "days":
                  case "day":
                  case "d":
                    return o * i;
                  case "hours":
                  case "hour":
                  case "hrs":
                  case "hr":
                  case "h":
                    return o * n;
                  case "minutes":
                  case "minute":
                  case "mins":
                  case "min":
                  case "m":
                    return o * r;
                  case "seconds":
                  case "second":
                  case "secs":
                  case "sec":
                  case "s":
                    return o * t;
                  case "milliseconds":
                  case "millisecond":
                  case "msecs":
                  case "msec":
                  case "ms":
                    return o;
                  default:
                    return;
                }
              }
            }
          }(e);
          if ("number" === l && isFinite(e)) return o.long ? (a = e, (c = Math.abs(a)) >= i ? s(a, c, i, "day") : c >= n ? s(a, c, n, "hour") : c >= r ? s(a, c, r, "minute") : c >= t ? s(a, c, t, "second") : a + " ms") : function (e) {
            var s = Math.abs(e);
            return s >= i ? Math.round(e / i) + "d" : s >= n ? Math.round(e / n) + "h" : s >= r ? Math.round(e / r) + "m" : s >= t ? Math.round(e / t) + "s" : e + "ms";
          }(e);
          throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(e));
        };
      },
      8951: function _(e, t) {
        (function () {
          var e, r, n, i, s, o, a, c;
          c = function c(e) {
            return [(e & 255 << 24) >>> 24, (e & 255 << 16) >>> 16, (65280 & e) >>> 8, 255 & e].join(".");
          }, a = function a(e) {
            var t, n, i, s, o, a;
            for (t = [], i = s = 0; s <= 3 && 0 !== e.length; i = ++s) {
              if (i > 0) {
                if ("." !== e[0]) throw new Error("Invalid IP");
                e = e.substring(1);
              }
              o = (a = r(e))[0], n = a[1], e = e.substring(n), t.push(o);
            }
            if (0 !== e.length) throw new Error("Invalid IP");
            switch (t.length) {
              case 1:
                if (t[0] > 4294967295) throw new Error("Invalid IP");
                return t[0] >>> 0;
              case 2:
                if (t[0] > 255 || t[1] > 16777215) throw new Error("Invalid IP");
                return (t[0] << 24 | t[1]) >>> 0;
              case 3:
                if (t[0] > 255 || t[1] > 255 || t[2] > 65535) throw new Error("Invalid IP");
                return (t[0] << 24 | t[1] << 16 | t[2]) >>> 0;
              case 4:
                if (t[0] > 255 || t[1] > 255 || t[2] > 255 || t[3] > 255) throw new Error("Invalid IP");
                return (t[0] << 24 | t[1] << 16 | t[2] << 8 | t[3]) >>> 0;
              default:
                throw new Error("Invalid IP");
            }
          }, i = (n = function n(e) {
            return e.charCodeAt(0);
          })("0"), o = n("a"), s = n("A"), r = function r(e) {
            var t, r, a, c, l;
            for (c = 0, t = 10, r = "9", a = 0, e.length > 1 && "0" === e[a] && ("x" === e[a + 1] || "X" === e[a + 1] ? (a += 2, t = 16) : "0" <= e[a + 1] && e[a + 1] <= "9" && (a++, t = 8, r = "7")), l = a; a < e.length;) {
              if ("0" <= e[a] && e[a] <= r) c = c * t + (n(e[a]) - i) >>> 0;else {
                if (16 !== t) break;
                if ("a" <= e[a] && e[a] <= "f") c = c * t + (10 + n(e[a]) - o) >>> 0;else {
                  if (!("A" <= e[a] && e[a] <= "F")) break;
                  c = c * t + (10 + n(e[a]) - s) >>> 0;
                }
              }
              if (c > 4294967295) throw new Error("too large");
              a++;
            }
            if (a === l) throw new Error("empty octet");
            return [c, a];
          }, e = function () {
            function e(e, t) {
              var r, n, i;
              if ("string" != typeof e) throw new Error("Missing `net' parameter");
              if (t || (i = e.split("/", 2), e = i[0], t = i[1]), t || (t = 32), "string" == typeof t && t.indexOf(".") > -1) {
                try {
                  this.maskLong = a(t);
                } catch (e) {
                  throw new Error("Invalid mask: " + t);
                }
                for (r = n = 32; n >= 0; r = --n) if (this.maskLong === 4294967295 << 32 - r >>> 0) {
                  this.bitmask = r;
                  break;
                }
              } else {
                if (!t && 0 !== t) throw new Error("Invalid mask: empty");
                this.bitmask = parseInt(t, 10), this.maskLong = 0, this.bitmask > 0 && (this.maskLong = 4294967295 << 32 - this.bitmask >>> 0);
              }
              try {
                this.netLong = (a(e) & this.maskLong) >>> 0;
              } catch (t) {
                throw new Error("Invalid net address: " + e);
              }
              if (!(this.bitmask <= 32)) throw new Error("Invalid mask for ip4: " + t);
              this.size = Math.pow(2, 32 - this.bitmask), this.base = c(this.netLong), this.mask = c(this.maskLong), this.hostmask = c(~this.maskLong), this.first = this.bitmask <= 30 ? c(this.netLong + 1) : this.base, this.last = this.bitmask <= 30 ? c(this.netLong + this.size - 2) : c(this.netLong + this.size - 1), this.broadcast = this.bitmask <= 30 ? c(this.netLong + this.size - 1) : void 0;
            }
            return e.prototype.contains = function (t) {
              return "string" == typeof t && (t.indexOf("/") > 0 || 4 !== t.split(".").length) && (t = new e(t)), t instanceof e ? this.contains(t.base) && this.contains(t.broadcast || t.last) : (a(t) & this.maskLong) >>> 0 == (this.netLong & this.maskLong) >>> 0;
            }, e.prototype.next = function (t) {
              return null == t && (t = 1), new e(c(this.netLong + this.size * t), this.mask);
            }, e.prototype.forEach = function (e) {
              var t, r, n;
              for (n = a(this.first), r = a(this.last), t = 0; n <= r;) e(c(n), n, t), t++, n++;
            }, e.prototype.toString = function () {
              return this.base + "/" + this.bitmask;
            }, e;
          }(), t.ip2long = a, t.long2ip = c, t.Netmask = e;
        }).call(this);
      },
      8925: function _(e, t, r) {
        var n = r(3832);
        function i(e, t) {
          n.cipher.registerAlgorithm(e, function () {
            return new n.aes.Algorithm(e, t);
          });
        }
        r(5649), r(1967), r(7116), e.exports = n.aes = n.aes || {}, n.aes.startEncrypting = function (e, t, r, n) {
          var i = y({
            key: e,
            output: r,
            decrypt: !1,
            mode: n
          });
          return i.start(t), i;
        }, n.aes.createEncryptionCipher = function (e, t) {
          return y({
            key: e,
            output: null,
            decrypt: !1,
            mode: t
          });
        }, n.aes.startDecrypting = function (e, t, r, n) {
          var i = y({
            key: e,
            output: r,
            decrypt: !0,
            mode: n
          });
          return i.start(t), i;
        }, n.aes.createDecryptionCipher = function (e, t) {
          return y({
            key: e,
            output: null,
            decrypt: !0,
            mode: t
          });
        }, n.aes.Algorithm = function (e, t) {
          u || d();
          var r = this;
          r.name = e, r.mode = new t({
            blockSize: 16,
            cipher: {
              encrypt: function encrypt(e, t) {
                return f(r._w, e, t, !1);
              },
              decrypt: function decrypt(e, t) {
                return f(r._w, e, t, !0);
              }
            }
          }), r._init = !1;
        }, n.aes.Algorithm.prototype.initialize = function (e) {
          if (!this._init) {
            var t,
              r = e.key;
            if ("string" != typeof r || 16 !== r.length && 24 !== r.length && 32 !== r.length) {
              if (n.util.isArray(r) && (16 === r.length || 24 === r.length || 32 === r.length)) {
                t = r, r = n.util.createBuffer();
                for (var i = 0; i < t.length; ++i) r.putByte(t[i]);
              }
            } else r = n.util.createBuffer(r);
            if (!n.util.isArray(r)) {
              t = r, r = [];
              var s = t.length();
              if (16 === s || 24 === s || 32 === s) for (s >>>= 2, i = 0; i < s; ++i) r.push(t.getInt32());
            }
            if (!n.util.isArray(r) || 4 !== r.length && 6 !== r.length && 8 !== r.length) throw new Error("Invalid key parameter.");
            var o = this.mode.name,
              a = -1 !== ["CFB", "OFB", "CTR", "GCM"].indexOf(o);
            this._w = p(r, e.decrypt && !a), this._init = !0;
          }
        }, n.aes._expandKey = function (e, t) {
          return u || d(), p(e, t);
        }, n.aes._updateBlock = f, i("AES-ECB", n.cipher.modes.ecb), i("AES-CBC", n.cipher.modes.cbc), i("AES-CFB", n.cipher.modes.cfb), i("AES-OFB", n.cipher.modes.ofb), i("AES-CTR", n.cipher.modes.ctr), i("AES-GCM", n.cipher.modes.gcm);
        var s,
          o,
          a,
          c,
          l,
          u = !1,
          h = 4;
        function d() {
          u = !0, a = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];
          for (var e = new Array(256), t = 0; t < 128; ++t) e[t] = t << 1, e[t + 128] = t + 128 << 1 ^ 283;
          for (s = new Array(256), o = new Array(256), c = new Array(4), l = new Array(4), t = 0; t < 4; ++t) c[t] = new Array(256), l[t] = new Array(256);
          var r,
            n,
            i,
            h,
            d,
            p,
            f,
            y = 0,
            g = 0;
          for (t = 0; t < 256; ++t) {
            h = (h = g ^ g << 1 ^ g << 2 ^ g << 3 ^ g << 4) >> 8 ^ 255 & h ^ 99, s[y] = h, o[h] = y, p = (d = e[h]) << 24 ^ h << 16 ^ h << 8 ^ h ^ d, f = ((r = e[y]) ^ (n = e[r]) ^ (i = e[n])) << 24 ^ (y ^ i) << 16 ^ (y ^ n ^ i) << 8 ^ y ^ r ^ i;
            for (var m = 0; m < 4; ++m) c[m][y] = p, l[m][h] = f, p = p << 24 | p >>> 8, f = f << 24 | f >>> 8;
            0 === y ? y = g = 1 : (y = r ^ e[e[e[r ^ i]]], g ^= e[e[g]]);
          }
        }
        function p(e, t) {
          for (var r, n = e.slice(0), i = 1, o = n.length, c = h * (o + 6 + 1), u = o; u < c; ++u) r = n[u - 1], u % o == 0 ? (r = s[r >>> 16 & 255] << 24 ^ s[r >>> 8 & 255] << 16 ^ s[255 & r] << 8 ^ s[r >>> 24] ^ a[i] << 24, i++) : o > 6 && u % o == 4 && (r = s[r >>> 24] << 24 ^ s[r >>> 16 & 255] << 16 ^ s[r >>> 8 & 255] << 8 ^ s[255 & r]), n[u] = n[u - o] ^ r;
          if (t) {
            for (var d, p = l[0], f = l[1], y = l[2], g = l[3], m = n.slice(0), w = (u = 0, (c = n.length) - h); u < c; u += h, w -= h) if (0 === u || u === c - h) m[u] = n[w], m[u + 1] = n[w + 3], m[u + 2] = n[w + 2], m[u + 3] = n[w + 1];else for (var E = 0; E < h; ++E) d = n[w + E], m[u + (3 & -E)] = p[s[d >>> 24]] ^ f[s[d >>> 16 & 255]] ^ y[s[d >>> 8 & 255]] ^ g[s[255 & d]];
            n = m;
          }
          return n;
        }
        function f(e, t, r, n) {
          var i,
            a,
            u,
            h,
            d,
            p,
            f,
            y,
            g,
            m,
            w,
            E,
            b = e.length / 4 - 1;
          n ? (i = l[0], a = l[1], u = l[2], h = l[3], d = o) : (i = c[0], a = c[1], u = c[2], h = c[3], d = s), p = t[0] ^ e[0], f = t[n ? 3 : 1] ^ e[1], y = t[2] ^ e[2], g = t[n ? 1 : 3] ^ e[3];
          for (var v = 3, _ = 1; _ < b; ++_) m = i[p >>> 24] ^ a[f >>> 16 & 255] ^ u[y >>> 8 & 255] ^ h[255 & g] ^ e[++v], w = i[f >>> 24] ^ a[y >>> 16 & 255] ^ u[g >>> 8 & 255] ^ h[255 & p] ^ e[++v], E = i[y >>> 24] ^ a[g >>> 16 & 255] ^ u[p >>> 8 & 255] ^ h[255 & f] ^ e[++v], g = i[g >>> 24] ^ a[p >>> 16 & 255] ^ u[f >>> 8 & 255] ^ h[255 & y] ^ e[++v], p = m, f = w, y = E;
          r[0] = d[p >>> 24] << 24 ^ d[f >>> 16 & 255] << 16 ^ d[y >>> 8 & 255] << 8 ^ d[255 & g] ^ e[++v], r[n ? 3 : 1] = d[f >>> 24] << 24 ^ d[y >>> 16 & 255] << 16 ^ d[g >>> 8 & 255] << 8 ^ d[255 & p] ^ e[++v], r[2] = d[y >>> 24] << 24 ^ d[g >>> 16 & 255] << 16 ^ d[p >>> 8 & 255] << 8 ^ d[255 & f] ^ e[++v], r[n ? 1 : 3] = d[g >>> 24] << 24 ^ d[p >>> 16 & 255] << 16 ^ d[f >>> 8 & 255] << 8 ^ d[255 & y] ^ e[++v];
        }
        function y(e) {
          var t,
            r = "AES-" + ((e = e || {}).mode || "CBC").toUpperCase(),
            i = (t = e.decrypt ? n.cipher.createDecipher(r, e.key) : n.cipher.createCipher(r, e.key)).start;
          return t.start = function (e, r) {
            var s = null;
            r instanceof n.util.ByteBuffer && (s = r, r = {}), (r = r || {}).output = s, r.iv = e, i.call(t, r);
          }, t;
        }
      },
      3068: function _(e, t, r) {
        var n = r(3832);
        r(7116), r(6270);
        var i = e.exports = n.asn1 = n.asn1 || {};
        function s(e, t, r) {
          if (r > t) {
            var n = new Error("Too few bytes to parse DER.");
            throw n.available = e.length(), n.remaining = t, n.requested = r, n;
          }
        }
        i.Class = {
          UNIVERSAL: 0,
          APPLICATION: 64,
          CONTEXT_SPECIFIC: 128,
          PRIVATE: 192
        }, i.Type = {
          NONE: 0,
          BOOLEAN: 1,
          INTEGER: 2,
          BITSTRING: 3,
          OCTETSTRING: 4,
          NULL: 5,
          OID: 6,
          ODESC: 7,
          EXTERNAL: 8,
          REAL: 9,
          ENUMERATED: 10,
          EMBEDDED: 11,
          UTF8: 12,
          ROID: 13,
          SEQUENCE: 16,
          SET: 17,
          PRINTABLESTRING: 19,
          IA5STRING: 22,
          UTCTIME: 23,
          GENERALIZEDTIME: 24,
          BMPSTRING: 30
        }, i.create = function (e, t, r, s, o) {
          if (n.util.isArray(s)) {
            for (var a = [], c = 0; c < s.length; ++c) void 0 !== s[c] && a.push(s[c]);
            s = a;
          }
          var l = {
            tagClass: e,
            type: t,
            constructed: r,
            composed: r || n.util.isArray(s),
            value: s
          };
          return o && "bitStringContents" in o && (l.bitStringContents = o.bitStringContents, l.original = i.copy(l)), l;
        }, i.copy = function (e, t) {
          var r;
          if (n.util.isArray(e)) {
            r = [];
            for (var s = 0; s < e.length; ++s) r.push(i.copy(e[s], t));
            return r;
          }
          return "string" == typeof e ? e : (r = {
            tagClass: e.tagClass,
            type: e.type,
            constructed: e.constructed,
            composed: e.composed,
            value: i.copy(e.value, t)
          }, t && !t.excludeBitStringContents && (r.bitStringContents = e.bitStringContents), r);
        }, i.equals = function (e, t, r) {
          if (n.util.isArray(e)) {
            if (!n.util.isArray(t)) return !1;
            if (e.length !== t.length) return !1;
            for (var s = 0; s < e.length; ++s) if (!i.equals(e[s], t[s])) return !1;
            return !0;
          }
          if (_typeof(e) != _typeof(t)) return !1;
          if ("string" == typeof e) return e === t;
          var o = e.tagClass === t.tagClass && e.type === t.type && e.constructed === t.constructed && e.composed === t.composed && i.equals(e.value, t.value);
          return r && r.includeBitStringContents && (o = o && e.bitStringContents === t.bitStringContents), o;
        }, i.getBerValueLength = function (e) {
          var t = e.getByte();
          if (128 !== t) return 128 & t ? e.getInt((127 & t) << 3) : t;
        };
        var o = function o(e, t) {
          var r = e.getByte();
          if (t--, 128 !== r) {
            var n;
            if (128 & r) {
              var i = 127 & r;
              s(e, t, i), n = e.getInt(i << 3);
            } else n = r;
            if (n < 0) throw new Error("Negative length: " + n);
            return n;
          }
        };
        function a(e, t, r, n) {
          var c;
          s(e, t, 2);
          var l = e.getByte();
          t--;
          var u = 192 & l,
            h = 31 & l;
          c = e.length();
          var d,
            p,
            f = o(e, t);
          if (t -= c - e.length(), void 0 !== f && f > t) {
            if (n.strict) {
              var y = new Error("Too few bytes to read ASN.1 value.");
              throw y.available = e.length(), y.remaining = t, y.requested = f, y;
            }
            f = t;
          }
          var g = 32 == (32 & l);
          if (g) if (d = [], void 0 === f) for (;;) {
            if (s(e, t, 2), e.bytes(2) === String.fromCharCode(0, 0)) {
              e.getBytes(2), t -= 2;
              break;
            }
            c = e.length(), d.push(a(e, t, r + 1, n)), t -= c - e.length();
          } else for (; f > 0;) c = e.length(), d.push(a(e, f, r + 1, n)), t -= c - e.length(), f -= c - e.length();
          if (void 0 === d && u === i.Class.UNIVERSAL && h === i.Type.BITSTRING && (p = e.bytes(f)), void 0 === d && n.decodeBitStrings && u === i.Class.UNIVERSAL && h === i.Type.BITSTRING && f > 1) {
            var m = e.read,
              w = t,
              E = 0;
            if (h === i.Type.BITSTRING && (s(e, t, 1), E = e.getByte(), t--), 0 === E) try {
              c = e.length();
              var b = a(e, t, r + 1, {
                  strict: !0,
                  decodeBitStrings: !0
                }),
                v = c - e.length();
              t -= v, h == i.Type.BITSTRING && v++;
              var _ = b.tagClass;
              v !== f || _ !== i.Class.UNIVERSAL && _ !== i.Class.CONTEXT_SPECIFIC || (d = [b]);
            } catch (e) {}
            void 0 === d && (e.read = m, t = w);
          }
          if (void 0 === d) {
            if (void 0 === f) {
              if (n.strict) throw new Error("Non-constructed ASN.1 object of indefinite length.");
              f = t;
            }
            if (h === i.Type.BMPSTRING) for (d = ""; f > 0; f -= 2) s(e, t, 2), d += String.fromCharCode(e.getInt16()), t -= 2;else d = e.getBytes(f), t -= f;
          }
          var S = void 0 === p ? null : {
            bitStringContents: p
          };
          return i.create(u, h, g, d, S);
        }
        i.fromDer = function (e, t) {
          void 0 === t && (t = {
            strict: !0,
            parseAllBytes: !0,
            decodeBitStrings: !0
          }), "boolean" == typeof t && (t = {
            strict: t,
            parseAllBytes: !0,
            decodeBitStrings: !0
          }), "strict" in t || (t.strict = !0), "parseAllBytes" in t || (t.parseAllBytes = !0), "decodeBitStrings" in t || (t.decodeBitStrings = !0), "string" == typeof e && (e = n.util.createBuffer(e));
          var r = e.length(),
            i = a(e, e.length(), 0, t);
          if (t.parseAllBytes && 0 !== e.length()) {
            var s = new Error("Unparsed DER bytes remain after ASN.1 parsing.");
            throw s.byteCount = r, s.remaining = e.length(), s;
          }
          return i;
        }, i.toDer = function (e) {
          var t = n.util.createBuffer(),
            r = e.tagClass | e.type,
            s = n.util.createBuffer(),
            o = !1;
          if ("bitStringContents" in e && (o = !0, e.original && (o = i.equals(e, e.original))), o) s.putBytes(e.bitStringContents);else if (e.composed) {
            e.constructed ? r |= 32 : s.putByte(0);
            for (var a = 0; a < e.value.length; ++a) void 0 !== e.value[a] && s.putBuffer(i.toDer(e.value[a]));
          } else if (e.type === i.Type.BMPSTRING) for (a = 0; a < e.value.length; ++a) s.putInt16(e.value.charCodeAt(a));else e.type === i.Type.INTEGER && e.value.length > 1 && (0 === e.value.charCodeAt(0) && 0 == (128 & e.value.charCodeAt(1)) || 255 === e.value.charCodeAt(0) && 128 == (128 & e.value.charCodeAt(1))) ? s.putBytes(e.value.substr(1)) : s.putBytes(e.value);
          if (t.putByte(r), s.length() <= 127) t.putByte(127 & s.length());else {
            var c = s.length(),
              l = "";
            do {
              l += String.fromCharCode(255 & c), c >>>= 8;
            } while (c > 0);
            for (t.putByte(128 | l.length), a = l.length - 1; a >= 0; --a) t.putByte(l.charCodeAt(a));
          }
          return t.putBuffer(s), t;
        }, i.oidToDer = function (e) {
          var t,
            r,
            i,
            s,
            o = e.split("."),
            a = n.util.createBuffer();
          a.putByte(40 * parseInt(o[0], 10) + parseInt(o[1], 10));
          for (var c = 2; c < o.length; ++c) {
            t = !0, r = [], i = parseInt(o[c], 10);
            do {
              s = 127 & i, i >>>= 7, t || (s |= 128), r.push(s), t = !1;
            } while (i > 0);
            for (var l = r.length - 1; l >= 0; --l) a.putByte(r[l]);
          }
          return a;
        }, i.derToOid = function (e) {
          var t;
          "string" == typeof e && (e = n.util.createBuffer(e));
          var r = e.getByte();
          t = Math.floor(r / 40) + "." + r % 40;
          for (var i = 0; e.length() > 0;) i <<= 7, 128 & (r = e.getByte()) ? i += 127 & r : (t += "." + (i + r), i = 0);
          return t;
        }, i.utcTimeToDate = function (e) {
          var t = new Date(),
            r = parseInt(e.substr(0, 2), 10);
          r = r >= 50 ? 1900 + r : 2e3 + r;
          var n = parseInt(e.substr(2, 2), 10) - 1,
            i = parseInt(e.substr(4, 2), 10),
            s = parseInt(e.substr(6, 2), 10),
            o = parseInt(e.substr(8, 2), 10),
            a = 0;
          if (e.length > 11) {
            var c = e.charAt(10),
              l = 10;
            "+" !== c && "-" !== c && (a = parseInt(e.substr(10, 2), 10), l += 2);
          }
          if (t.setUTCFullYear(r, n, i), t.setUTCHours(s, o, a, 0), l && ("+" === (c = e.charAt(l)) || "-" === c)) {
            var u = 60 * parseInt(e.substr(l + 1, 2), 10) + parseInt(e.substr(l + 4, 2), 10);
            u *= 6e4, "+" === c ? t.setTime(+t - u) : t.setTime(+t + u);
          }
          return t;
        }, i.generalizedTimeToDate = function (e) {
          var t = new Date(),
            r = parseInt(e.substr(0, 4), 10),
            n = parseInt(e.substr(4, 2), 10) - 1,
            i = parseInt(e.substr(6, 2), 10),
            s = parseInt(e.substr(8, 2), 10),
            o = parseInt(e.substr(10, 2), 10),
            a = parseInt(e.substr(12, 2), 10),
            c = 0,
            l = 0,
            u = !1;
          "Z" === e.charAt(e.length - 1) && (u = !0);
          var h = e.length - 5,
            d = e.charAt(h);
          return "+" !== d && "-" !== d || (l = 60 * parseInt(e.substr(h + 1, 2), 10) + parseInt(e.substr(h + 4, 2), 10), l *= 6e4, "+" === d && (l *= -1), u = !0), "." === e.charAt(14) && (c = 1e3 * parseFloat(e.substr(14), 10)), u ? (t.setUTCFullYear(r, n, i), t.setUTCHours(s, o, a, c), t.setTime(+t + l)) : (t.setFullYear(r, n, i), t.setHours(s, o, a, c)), t;
        }, i.dateToUtcTime = function (e) {
          if ("string" == typeof e) return e;
          var t = "",
            r = [];
          r.push(("" + e.getUTCFullYear()).substr(2)), r.push("" + (e.getUTCMonth() + 1)), r.push("" + e.getUTCDate()), r.push("" + e.getUTCHours()), r.push("" + e.getUTCMinutes()), r.push("" + e.getUTCSeconds());
          for (var n = 0; n < r.length; ++n) r[n].length < 2 && (t += "0"), t += r[n];
          return t + "Z";
        }, i.dateToGeneralizedTime = function (e) {
          if ("string" == typeof e) return e;
          var t = "",
            r = [];
          r.push("" + e.getUTCFullYear()), r.push("" + (e.getUTCMonth() + 1)), r.push("" + e.getUTCDate()), r.push("" + e.getUTCHours()), r.push("" + e.getUTCMinutes()), r.push("" + e.getUTCSeconds());
          for (var n = 0; n < r.length; ++n) r[n].length < 2 && (t += "0"), t += r[n];
          return t + "Z";
        }, i.integerToDer = function (e) {
          var t = n.util.createBuffer();
          if (e >= -128 && e < 128) return t.putSignedInt(e, 8);
          if (e >= -32768 && e < 32768) return t.putSignedInt(e, 16);
          if (e >= -8388608 && e < 8388608) return t.putSignedInt(e, 24);
          if (e >= -2147483648 && e < 2147483648) return t.putSignedInt(e, 32);
          var r = new Error("Integer too large; max is 32-bits.");
          throw r.integer = e, r;
        }, i.derToInteger = function (e) {
          "string" == typeof e && (e = n.util.createBuffer(e));
          var t = 8 * e.length();
          if (t > 32) throw new Error("Integer too large; max is 32-bits.");
          return e.getSignedInt(t);
        }, i.validate = function (e, t, r, s) {
          var o = !1;
          if (e.tagClass !== t.tagClass && void 0 !== t.tagClass || e.type !== t.type && void 0 !== t.type) s && (e.tagClass !== t.tagClass && s.push("[" + t.name + '] Expected tag class "' + t.tagClass + '", got "' + e.tagClass + '"'), e.type !== t.type && s.push("[" + t.name + '] Expected type "' + t.type + '", got "' + e.type + '"'));else if (e.constructed === t.constructed || void 0 === t.constructed) {
            if (o = !0, t.value && n.util.isArray(t.value)) for (var a = 0, c = 0; o && c < t.value.length; ++c) o = t.value[c].optional || !1, e.value[a] && ((o = i.validate(e.value[a], t.value[c], r, s)) ? ++a : t.value[c].optional && (o = !0)), !o && s && s.push("[" + t.name + '] Tag class "' + t.tagClass + '", type "' + t.type + '" expected value length "' + t.value.length + '", got "' + e.value.length + '"');
            if (o && r && (t.capture && (r[t.capture] = e.value), t.captureAsn1 && (r[t.captureAsn1] = e), t.captureBitStringContents && "bitStringContents" in e && (r[t.captureBitStringContents] = e.bitStringContents), t.captureBitStringValue && "bitStringContents" in e)) if (e.bitStringContents.length < 2) r[t.captureBitStringValue] = "";else {
              if (0 !== e.bitStringContents.charCodeAt(0)) throw new Error("captureBitStringValue only supported for zero unused bits");
              r[t.captureBitStringValue] = e.bitStringContents.slice(1);
            }
          } else s && s.push("[" + t.name + '] Expected constructed "' + t.constructed + '", got "' + e.constructed + '"');
          return o;
        };
        var c = /[^\\u0000-\\u00ff]/;
        i.prettyPrint = function (e, t, r) {
          var s = "";
          r = r || 2, (t = t || 0) > 0 && (s += "\n");
          for (var o = "", a = 0; a < t * r; ++a) o += " ";
          switch (s += o + "Tag: ", e.tagClass) {
            case i.Class.UNIVERSAL:
              s += "Universal:";
              break;
            case i.Class.APPLICATION:
              s += "Application:";
              break;
            case i.Class.CONTEXT_SPECIFIC:
              s += "Context-Specific:";
              break;
            case i.Class.PRIVATE:
              s += "Private:";
          }
          if (e.tagClass === i.Class.UNIVERSAL) switch (s += e.type, e.type) {
            case i.Type.NONE:
              s += " (None)";
              break;
            case i.Type.BOOLEAN:
              s += " (Boolean)";
              break;
            case i.Type.INTEGER:
              s += " (Integer)";
              break;
            case i.Type.BITSTRING:
              s += " (Bit string)";
              break;
            case i.Type.OCTETSTRING:
              s += " (Octet string)";
              break;
            case i.Type.NULL:
              s += " (Null)";
              break;
            case i.Type.OID:
              s += " (Object Identifier)";
              break;
            case i.Type.ODESC:
              s += " (Object Descriptor)";
              break;
            case i.Type.EXTERNAL:
              s += " (External or Instance of)";
              break;
            case i.Type.REAL:
              s += " (Real)";
              break;
            case i.Type.ENUMERATED:
              s += " (Enumerated)";
              break;
            case i.Type.EMBEDDED:
              s += " (Embedded PDV)";
              break;
            case i.Type.UTF8:
              s += " (UTF8)";
              break;
            case i.Type.ROID:
              s += " (Relative Object Identifier)";
              break;
            case i.Type.SEQUENCE:
              s += " (Sequence)";
              break;
            case i.Type.SET:
              s += " (Set)";
              break;
            case i.Type.PRINTABLESTRING:
              s += " (Printable String)";
              break;
            case i.Type.IA5String:
              s += " (IA5String (ASCII))";
              break;
            case i.Type.UTCTIME:
              s += " (UTC time)";
              break;
            case i.Type.GENERALIZEDTIME:
              s += " (Generalized time)";
              break;
            case i.Type.BMPSTRING:
              s += " (BMP String)";
          } else s += e.type;
          if (s += "\n", s += o + "Constructed: " + e.constructed + "\n", e.composed) {
            var l = 0,
              u = "";
            for (a = 0; a < e.value.length; ++a) void 0 !== e.value[a] && (l += 1, u += i.prettyPrint(e.value[a], t + 1, r), a + 1 < e.value.length && (u += ","));
            s += o + "Sub values: " + l + u;
          } else {
            if (s += o + "Value: ", e.type === i.Type.OID) {
              var h = i.derToOid(e.value);
              s += h, n.pki && n.pki.oids && h in n.pki.oids && (s += " (" + n.pki.oids[h] + ") ");
            }
            if (e.type === i.Type.INTEGER) try {
              s += i.derToInteger(e.value);
            } catch (t) {
              s += "0x" + n.util.bytesToHex(e.value);
            } else if (e.type === i.Type.BITSTRING) {
              if (e.value.length > 1 ? s += "0x" + n.util.bytesToHex(e.value.slice(1)) : s += "(none)", e.value.length > 0) {
                var d = e.value.charCodeAt(0);
                1 == d ? s += " (1 unused bit shown)" : d > 1 && (s += " (" + d + " unused bits shown)");
              }
            } else if (e.type === i.Type.OCTETSTRING) c.test(e.value) || (s += "(" + e.value + ") "), s += "0x" + n.util.bytesToHex(e.value);else if (e.type === i.Type.UTF8) try {
              s += n.util.decodeUtf8(e.value);
            } catch (t) {
              if ("URI malformed" !== t.message) throw t;
              s += "0x" + n.util.bytesToHex(e.value) + " (malformed UTF8)";
            } else e.type === i.Type.PRINTABLESTRING || e.type === i.Type.IA5String ? s += e.value : c.test(e.value) ? s += "0x" + n.util.bytesToHex(e.value) : 0 === e.value.length ? s += "[null]" : s += e.value;
          }
          return s;
        };
      },
      8807: function _(e) {
        var t = {};
        e.exports = t;
        var r = {};
        t.encode = function (e, t, r) {
          if ("string" != typeof t) throw new TypeError('"alphabet" must be a string.');
          if (void 0 !== r && "number" != typeof r) throw new TypeError('"maxline" must be a number.');
          var n = "";
          if (e instanceof Uint8Array) {
            var i = 0,
              s = t.length,
              o = t.charAt(0),
              a = [0];
            for (i = 0; i < e.length; ++i) {
              for (var c = 0, l = e[i]; c < a.length; ++c) l += a[c] << 8, a[c] = l % s, l = l / s | 0;
              for (; l > 0;) a.push(l % s), l = l / s | 0;
            }
            for (i = 0; 0 === e[i] && i < e.length - 1; ++i) n += o;
            for (i = a.length - 1; i >= 0; --i) n += t[a[i]];
          } else n = function (e, t) {
            var r = 0,
              n = t.length,
              i = t.charAt(0),
              s = [0];
            for (r = 0; r < e.length(); ++r) {
              for (var o = 0, a = e.at(r); o < s.length; ++o) a += s[o] << 8, s[o] = a % n, a = a / n | 0;
              for (; a > 0;) s.push(a % n), a = a / n | 0;
            }
            var c = "";
            for (r = 0; 0 === e.at(r) && r < e.length() - 1; ++r) c += i;
            for (r = s.length - 1; r >= 0; --r) c += t[s[r]];
            return c;
          }(e, t);
          if (r) {
            var u = new RegExp(".{1," + r + "}", "g");
            n = n.match(u).join("\r\n");
          }
          return n;
        }, t.decode = function (e, t) {
          if ("string" != typeof e) throw new TypeError('"input" must be a string.');
          if ("string" != typeof t) throw new TypeError('"alphabet" must be a string.');
          var n = r[t];
          if (!n) {
            n = r[t] = [];
            for (var i = 0; i < t.length; ++i) n[t.charCodeAt(i)] = i;
          }
          e = e.replace(/\s/g, "");
          var s = t.length,
            o = t.charAt(0),
            a = [0];
          for (i = 0; i < e.length; i++) {
            var c = n[e.charCodeAt(i)];
            if (void 0 === c) return;
            for (var l = 0, u = c; l < a.length; ++l) u += a[l] * s, a[l] = 255 & u, u >>= 8;
            for (; u > 0;) a.push(255 & u), u >>= 8;
          }
          for (var h = 0; e[h] === o && h < e.length - 1; ++h) a.push(0);
          return "undefined" != typeof Buffer ? Buffer.from(a.reverse()) : new Uint8Array(a.reverse());
        };
      },
      5649: function _(e, t, r) {
        var n = r(3832);
        r(7116), e.exports = n.cipher = n.cipher || {}, n.cipher.algorithms = n.cipher.algorithms || {}, n.cipher.createCipher = function (e, t) {
          var r = e;
          if ("string" == typeof r && (r = n.cipher.getAlgorithm(r)) && (r = r()), !r) throw new Error("Unsupported algorithm: " + e);
          return new n.cipher.BlockCipher({
            algorithm: r,
            key: t,
            decrypt: !1
          });
        }, n.cipher.createDecipher = function (e, t) {
          var r = e;
          if ("string" == typeof r && (r = n.cipher.getAlgorithm(r)) && (r = r()), !r) throw new Error("Unsupported algorithm: " + e);
          return new n.cipher.BlockCipher({
            algorithm: r,
            key: t,
            decrypt: !0
          });
        }, n.cipher.registerAlgorithm = function (e, t) {
          e = e.toUpperCase(), n.cipher.algorithms[e] = t;
        }, n.cipher.getAlgorithm = function (e) {
          return (e = e.toUpperCase()) in n.cipher.algorithms ? n.cipher.algorithms[e] : null;
        };
        var i = n.cipher.BlockCipher = function (e) {
          this.algorithm = e.algorithm, this.mode = this.algorithm.mode, this.blockSize = this.mode.blockSize, this._finish = !1, this._input = null, this.output = null, this._op = e.decrypt ? this.mode.decrypt : this.mode.encrypt, this._decrypt = e.decrypt, this.algorithm.initialize(e);
        };
        i.prototype.start = function (e) {
          e = e || {};
          var t = {};
          for (var r in e) t[r] = e[r];
          t.decrypt = this._decrypt, this._finish = !1, this._input = n.util.createBuffer(), this.output = e.output || n.util.createBuffer(), this.mode.start(t);
        }, i.prototype.update = function (e) {
          for (e && this._input.putBuffer(e); !this._op.call(this.mode, this._input, this.output, this._finish) && !this._finish;);
          this._input.compact();
        }, i.prototype.finish = function (e) {
          !e || "ECB" !== this.mode.name && "CBC" !== this.mode.name || (this.mode.pad = function (t) {
            return e(this.blockSize, t, !1);
          }, this.mode.unpad = function (t) {
            return e(this.blockSize, t, !0);
          });
          var t = {};
          return t.decrypt = this._decrypt, t.overflow = this._input.length() % this.blockSize, !(!this._decrypt && this.mode.pad && !this.mode.pad(this._input, t) || (this._finish = !0, this.update(), this._decrypt && this.mode.unpad && !this.mode.unpad(this.output, t) || this.mode.afterFinish && !this.mode.afterFinish(this.output, t)));
        };
      },
      1967: function _(e, t, r) {
        var n = r(3832);
        r(7116), n.cipher = n.cipher || {};
        var i = e.exports = n.cipher.modes = n.cipher.modes || {};
        function s(e, t) {
          if ("string" == typeof e && (e = n.util.createBuffer(e)), n.util.isArray(e) && e.length > 4) {
            var r = e;
            e = n.util.createBuffer();
            for (var i = 0; i < r.length; ++i) e.putByte(r[i]);
          }
          if (e.length() < t) throw new Error("Invalid IV length; got " + e.length() + " bytes and expected " + t + " bytes.");
          if (!n.util.isArray(e)) {
            var s = [],
              o = t / 4;
            for (i = 0; i < o; ++i) s.push(e.getInt32());
            e = s;
          }
          return e;
        }
        function o(e) {
          e[e.length - 1] = e[e.length - 1] + 1 & 4294967295;
        }
        function a(e) {
          return [e / 4294967296 | 0, 4294967295 & e];
        }
        i.ecb = function (e) {
          e = e || {}, this.name = "ECB", this.cipher = e.cipher, this.blockSize = e.blockSize || 16, this._ints = this.blockSize / 4, this._inBlock = new Array(this._ints), this._outBlock = new Array(this._ints);
        }, i.ecb.prototype.start = function (e) {}, i.ecb.prototype.encrypt = function (e, t, r) {
          if (e.length() < this.blockSize && !(r && e.length() > 0)) return !0;
          for (var n = 0; n < this._ints; ++n) this._inBlock[n] = e.getInt32();
          for (this.cipher.encrypt(this._inBlock, this._outBlock), n = 0; n < this._ints; ++n) t.putInt32(this._outBlock[n]);
        }, i.ecb.prototype.decrypt = function (e, t, r) {
          if (e.length() < this.blockSize && !(r && e.length() > 0)) return !0;
          for (var n = 0; n < this._ints; ++n) this._inBlock[n] = e.getInt32();
          for (this.cipher.decrypt(this._inBlock, this._outBlock), n = 0; n < this._ints; ++n) t.putInt32(this._outBlock[n]);
        }, i.ecb.prototype.pad = function (e, t) {
          var r = e.length() === this.blockSize ? this.blockSize : this.blockSize - e.length();
          return e.fillWithByte(r, r), !0;
        }, i.ecb.prototype.unpad = function (e, t) {
          if (t.overflow > 0) return !1;
          var r = e.length(),
            n = e.at(r - 1);
          return !(n > this.blockSize << 2 || (e.truncate(n), 0));
        }, i.cbc = function (e) {
          e = e || {}, this.name = "CBC", this.cipher = e.cipher, this.blockSize = e.blockSize || 16, this._ints = this.blockSize / 4, this._inBlock = new Array(this._ints), this._outBlock = new Array(this._ints);
        }, i.cbc.prototype.start = function (e) {
          if (null === e.iv) {
            if (!this._prev) throw new Error("Invalid IV parameter.");
            this._iv = this._prev.slice(0);
          } else {
            if (!("iv" in e)) throw new Error("Invalid IV parameter.");
            this._iv = s(e.iv, this.blockSize), this._prev = this._iv.slice(0);
          }
        }, i.cbc.prototype.encrypt = function (e, t, r) {
          if (e.length() < this.blockSize && !(r && e.length() > 0)) return !0;
          for (var n = 0; n < this._ints; ++n) this._inBlock[n] = this._prev[n] ^ e.getInt32();
          for (this.cipher.encrypt(this._inBlock, this._outBlock), n = 0; n < this._ints; ++n) t.putInt32(this._outBlock[n]);
          this._prev = this._outBlock;
        }, i.cbc.prototype.decrypt = function (e, t, r) {
          if (e.length() < this.blockSize && !(r && e.length() > 0)) return !0;
          for (var n = 0; n < this._ints; ++n) this._inBlock[n] = e.getInt32();
          for (this.cipher.decrypt(this._inBlock, this._outBlock), n = 0; n < this._ints; ++n) t.putInt32(this._prev[n] ^ this._outBlock[n]);
          this._prev = this._inBlock.slice(0);
        }, i.cbc.prototype.pad = function (e, t) {
          var r = e.length() === this.blockSize ? this.blockSize : this.blockSize - e.length();
          return e.fillWithByte(r, r), !0;
        }, i.cbc.prototype.unpad = function (e, t) {
          if (t.overflow > 0) return !1;
          var r = e.length(),
            n = e.at(r - 1);
          return !(n > this.blockSize << 2 || (e.truncate(n), 0));
        }, i.cfb = function (e) {
          e = e || {}, this.name = "CFB", this.cipher = e.cipher, this.blockSize = e.blockSize || 16, this._ints = this.blockSize / 4, this._inBlock = null, this._outBlock = new Array(this._ints), this._partialBlock = new Array(this._ints), this._partialOutput = n.util.createBuffer(), this._partialBytes = 0;
        }, i.cfb.prototype.start = function (e) {
          if (!("iv" in e)) throw new Error("Invalid IV parameter.");
          this._iv = s(e.iv, this.blockSize), this._inBlock = this._iv.slice(0), this._partialBytes = 0;
        }, i.cfb.prototype.encrypt = function (e, t, r) {
          var n = e.length();
          if (0 === n) return !0;
          if (this.cipher.encrypt(this._inBlock, this._outBlock), 0 === this._partialBytes && n >= this.blockSize) for (var i = 0; i < this._ints; ++i) this._inBlock[i] = e.getInt32() ^ this._outBlock[i], t.putInt32(this._inBlock[i]);else {
            var s = (this.blockSize - n) % this.blockSize;
            for (s > 0 && (s = this.blockSize - s), this._partialOutput.clear(), i = 0; i < this._ints; ++i) this._partialBlock[i] = e.getInt32() ^ this._outBlock[i], this._partialOutput.putInt32(this._partialBlock[i]);
            if (s > 0) e.read -= this.blockSize;else for (i = 0; i < this._ints; ++i) this._inBlock[i] = this._partialBlock[i];
            if (this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes), s > 0 && !r) return t.putBytes(this._partialOutput.getBytes(s - this._partialBytes)), this._partialBytes = s, !0;
            t.putBytes(this._partialOutput.getBytes(n - this._partialBytes)), this._partialBytes = 0;
          }
        }, i.cfb.prototype.decrypt = function (e, t, r) {
          var n = e.length();
          if (0 === n) return !0;
          if (this.cipher.encrypt(this._inBlock, this._outBlock), 0 === this._partialBytes && n >= this.blockSize) for (var i = 0; i < this._ints; ++i) this._inBlock[i] = e.getInt32(), t.putInt32(this._inBlock[i] ^ this._outBlock[i]);else {
            var s = (this.blockSize - n) % this.blockSize;
            for (s > 0 && (s = this.blockSize - s), this._partialOutput.clear(), i = 0; i < this._ints; ++i) this._partialBlock[i] = e.getInt32(), this._partialOutput.putInt32(this._partialBlock[i] ^ this._outBlock[i]);
            if (s > 0) e.read -= this.blockSize;else for (i = 0; i < this._ints; ++i) this._inBlock[i] = this._partialBlock[i];
            if (this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes), s > 0 && !r) return t.putBytes(this._partialOutput.getBytes(s - this._partialBytes)), this._partialBytes = s, !0;
            t.putBytes(this._partialOutput.getBytes(n - this._partialBytes)), this._partialBytes = 0;
          }
        }, i.ofb = function (e) {
          e = e || {}, this.name = "OFB", this.cipher = e.cipher, this.blockSize = e.blockSize || 16, this._ints = this.blockSize / 4, this._inBlock = null, this._outBlock = new Array(this._ints), this._partialOutput = n.util.createBuffer(), this._partialBytes = 0;
        }, i.ofb.prototype.start = function (e) {
          if (!("iv" in e)) throw new Error("Invalid IV parameter.");
          this._iv = s(e.iv, this.blockSize), this._inBlock = this._iv.slice(0), this._partialBytes = 0;
        }, i.ofb.prototype.encrypt = function (e, t, r) {
          var n = e.length();
          if (0 === e.length()) return !0;
          if (this.cipher.encrypt(this._inBlock, this._outBlock), 0 === this._partialBytes && n >= this.blockSize) for (var i = 0; i < this._ints; ++i) t.putInt32(e.getInt32() ^ this._outBlock[i]), this._inBlock[i] = this._outBlock[i];else {
            var s = (this.blockSize - n) % this.blockSize;
            for (s > 0 && (s = this.blockSize - s), this._partialOutput.clear(), i = 0; i < this._ints; ++i) this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[i]);
            if (s > 0) e.read -= this.blockSize;else for (i = 0; i < this._ints; ++i) this._inBlock[i] = this._outBlock[i];
            if (this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes), s > 0 && !r) return t.putBytes(this._partialOutput.getBytes(s - this._partialBytes)), this._partialBytes = s, !0;
            t.putBytes(this._partialOutput.getBytes(n - this._partialBytes)), this._partialBytes = 0;
          }
        }, i.ofb.prototype.decrypt = i.ofb.prototype.encrypt, i.ctr = function (e) {
          e = e || {}, this.name = "CTR", this.cipher = e.cipher, this.blockSize = e.blockSize || 16, this._ints = this.blockSize / 4, this._inBlock = null, this._outBlock = new Array(this._ints), this._partialOutput = n.util.createBuffer(), this._partialBytes = 0;
        }, i.ctr.prototype.start = function (e) {
          if (!("iv" in e)) throw new Error("Invalid IV parameter.");
          this._iv = s(e.iv, this.blockSize), this._inBlock = this._iv.slice(0), this._partialBytes = 0;
        }, i.ctr.prototype.encrypt = function (e, t, r) {
          var n = e.length();
          if (0 === n) return !0;
          if (this.cipher.encrypt(this._inBlock, this._outBlock), 0 === this._partialBytes && n >= this.blockSize) for (var i = 0; i < this._ints; ++i) t.putInt32(e.getInt32() ^ this._outBlock[i]);else {
            var s = (this.blockSize - n) % this.blockSize;
            for (s > 0 && (s = this.blockSize - s), this._partialOutput.clear(), i = 0; i < this._ints; ++i) this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[i]);
            if (s > 0 && (e.read -= this.blockSize), this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes), s > 0 && !r) return t.putBytes(this._partialOutput.getBytes(s - this._partialBytes)), this._partialBytes = s, !0;
            t.putBytes(this._partialOutput.getBytes(n - this._partialBytes)), this._partialBytes = 0;
          }
          o(this._inBlock);
        }, i.ctr.prototype.decrypt = i.ctr.prototype.encrypt, i.gcm = function (e) {
          e = e || {}, this.name = "GCM", this.cipher = e.cipher, this.blockSize = e.blockSize || 16, this._ints = this.blockSize / 4, this._inBlock = new Array(this._ints), this._outBlock = new Array(this._ints), this._partialOutput = n.util.createBuffer(), this._partialBytes = 0, this._R = 3774873600;
        }, i.gcm.prototype.start = function (e) {
          if (!("iv" in e)) throw new Error("Invalid IV parameter.");
          var t,
            r = n.util.createBuffer(e.iv);
          if (this._cipherLength = 0, t = "additionalData" in e ? n.util.createBuffer(e.additionalData) : n.util.createBuffer(), this._tagLength = "tagLength" in e ? e.tagLength : 128, this._tag = null, e.decrypt && (this._tag = n.util.createBuffer(e.tag).getBytes(), this._tag.length !== this._tagLength / 8)) throw new Error("Authentication tag does not match tag length.");
          this._hashBlock = new Array(this._ints), this.tag = null, this._hashSubkey = new Array(this._ints), this.cipher.encrypt([0, 0, 0, 0], this._hashSubkey), this.componentBits = 4, this._m = this.generateHashTable(this._hashSubkey, this.componentBits);
          var i = r.length();
          if (12 === i) this._j0 = [r.getInt32(), r.getInt32(), r.getInt32(), 1];else {
            for (this._j0 = [0, 0, 0, 0]; r.length() > 0;) this._j0 = this.ghash(this._hashSubkey, this._j0, [r.getInt32(), r.getInt32(), r.getInt32(), r.getInt32()]);
            this._j0 = this.ghash(this._hashSubkey, this._j0, [0, 0].concat(a(8 * i)));
          }
          this._inBlock = this._j0.slice(0), o(this._inBlock), this._partialBytes = 0, t = n.util.createBuffer(t), this._aDataLength = a(8 * t.length());
          var s = t.length() % this.blockSize;
          for (s && t.fillWithByte(0, this.blockSize - s), this._s = [0, 0, 0, 0]; t.length() > 0;) this._s = this.ghash(this._hashSubkey, this._s, [t.getInt32(), t.getInt32(), t.getInt32(), t.getInt32()]);
        }, i.gcm.prototype.encrypt = function (e, t, r) {
          var n = e.length();
          if (0 === n) return !0;
          if (this.cipher.encrypt(this._inBlock, this._outBlock), 0 === this._partialBytes && n >= this.blockSize) {
            for (var i = 0; i < this._ints; ++i) t.putInt32(this._outBlock[i] ^= e.getInt32());
            this._cipherLength += this.blockSize;
          } else {
            var s = (this.blockSize - n) % this.blockSize;
            for (s > 0 && (s = this.blockSize - s), this._partialOutput.clear(), i = 0; i < this._ints; ++i) this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[i]);
            if (s <= 0 || r) {
              if (r) {
                var a = n % this.blockSize;
                this._cipherLength += a, this._partialOutput.truncate(this.blockSize - a);
              } else this._cipherLength += this.blockSize;
              for (i = 0; i < this._ints; ++i) this._outBlock[i] = this._partialOutput.getInt32();
              this._partialOutput.read -= this.blockSize;
            }
            if (this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes), s > 0 && !r) return e.read -= this.blockSize, t.putBytes(this._partialOutput.getBytes(s - this._partialBytes)), this._partialBytes = s, !0;
            t.putBytes(this._partialOutput.getBytes(n - this._partialBytes)), this._partialBytes = 0;
          }
          this._s = this.ghash(this._hashSubkey, this._s, this._outBlock), o(this._inBlock);
        }, i.gcm.prototype.decrypt = function (e, t, r) {
          var n = e.length();
          if (n < this.blockSize && !(r && n > 0)) return !0;
          this.cipher.encrypt(this._inBlock, this._outBlock), o(this._inBlock), this._hashBlock[0] = e.getInt32(), this._hashBlock[1] = e.getInt32(), this._hashBlock[2] = e.getInt32(), this._hashBlock[3] = e.getInt32(), this._s = this.ghash(this._hashSubkey, this._s, this._hashBlock);
          for (var i = 0; i < this._ints; ++i) t.putInt32(this._outBlock[i] ^ this._hashBlock[i]);
          n < this.blockSize ? this._cipherLength += n % this.blockSize : this._cipherLength += this.blockSize;
        }, i.gcm.prototype.afterFinish = function (e, t) {
          var r = !0;
          t.decrypt && t.overflow && e.truncate(this.blockSize - t.overflow), this.tag = n.util.createBuffer();
          var i = this._aDataLength.concat(a(8 * this._cipherLength));
          this._s = this.ghash(this._hashSubkey, this._s, i);
          var s = [];
          this.cipher.encrypt(this._j0, s);
          for (var o = 0; o < this._ints; ++o) this.tag.putInt32(this._s[o] ^ s[o]);
          return this.tag.truncate(this.tag.length() % (this._tagLength / 8)), t.decrypt && this.tag.bytes() !== this._tag && (r = !1), r;
        }, i.gcm.prototype.multiply = function (e, t) {
          for (var r = [0, 0, 0, 0], n = t.slice(0), i = 0; i < 128; ++i) e[i / 32 | 0] & 1 << 31 - i % 32 && (r[0] ^= n[0], r[1] ^= n[1], r[2] ^= n[2], r[3] ^= n[3]), this.pow(n, n);
          return r;
        }, i.gcm.prototype.pow = function (e, t) {
          for (var r = 1 & e[3], n = 3; n > 0; --n) t[n] = e[n] >>> 1 | (1 & e[n - 1]) << 31;
          t[0] = e[0] >>> 1, r && (t[0] ^= this._R);
        }, i.gcm.prototype.tableMultiply = function (e) {
          for (var t = [0, 0, 0, 0], r = 0; r < 32; ++r) {
            var n = e[r / 8 | 0] >>> 4 * (7 - r % 8) & 15,
              i = this._m[r][n];
            t[0] ^= i[0], t[1] ^= i[1], t[2] ^= i[2], t[3] ^= i[3];
          }
          return t;
        }, i.gcm.prototype.ghash = function (e, t, r) {
          return t[0] ^= r[0], t[1] ^= r[1], t[2] ^= r[2], t[3] ^= r[3], this.tableMultiply(t);
        }, i.gcm.prototype.generateHashTable = function (e, t) {
          for (var r = 8 / t, n = 4 * r, i = 16 * r, s = new Array(i), o = 0; o < i; ++o) {
            var a = [0, 0, 0, 0],
              c = (n - 1 - o % n) * t;
            a[o / n | 0] = 1 << t - 1 << c, s[o] = this.generateSubHashTable(this.multiply(a, e), t);
          }
          return s;
        }, i.gcm.prototype.generateSubHashTable = function (e, t) {
          var r = 1 << t,
            n = r >>> 1,
            i = new Array(r);
          i[n] = e.slice(0);
          for (var s = n >>> 1; s > 0;) this.pow(i[2 * s], i[s] = []), s >>= 1;
          for (s = 2; s < n;) {
            for (var o = 1; o < s; ++o) {
              var a = i[s],
                c = i[o];
              i[s + o] = [a[0] ^ c[0], a[1] ^ c[1], a[2] ^ c[2], a[3] ^ c[3]];
            }
            s *= 2;
          }
          for (i[0] = [0, 0, 0, 0], s = n + 1; s < r; ++s) {
            var l = i[s ^ n];
            i[s] = [e[0] ^ l[0], e[1] ^ l[1], e[2] ^ l[2], e[3] ^ l[3]];
          }
          return i;
        };
      },
      3480: function _(e, t, r) {
        var n = r(3832);
        function i(e, t) {
          n.cipher.registerAlgorithm(e, function () {
            return new n.des.Algorithm(e, t);
          });
        }
        r(5649), r(1967), r(7116), e.exports = n.des = n.des || {}, n.des.startEncrypting = function (e, t, r, n) {
          var i = f({
            key: e,
            output: r,
            decrypt: !1,
            mode: n || (null === t ? "ECB" : "CBC")
          });
          return i.start(t), i;
        }, n.des.createEncryptionCipher = function (e, t) {
          return f({
            key: e,
            output: null,
            decrypt: !1,
            mode: t
          });
        }, n.des.startDecrypting = function (e, t, r, n) {
          var i = f({
            key: e,
            output: r,
            decrypt: !0,
            mode: n || (null === t ? "ECB" : "CBC")
          });
          return i.start(t), i;
        }, n.des.createDecryptionCipher = function (e, t) {
          return f({
            key: e,
            output: null,
            decrypt: !0,
            mode: t
          });
        }, n.des.Algorithm = function (e, t) {
          var r = this;
          r.name = e, r.mode = new t({
            blockSize: 8,
            cipher: {
              encrypt: function encrypt(e, t) {
                return p(r._keys, e, t, !1);
              },
              decrypt: function decrypt(e, t) {
                return p(r._keys, e, t, !0);
              }
            }
          }), r._init = !1;
        }, n.des.Algorithm.prototype.initialize = function (e) {
          if (!this._init) {
            var t = n.util.createBuffer(e.key);
            if (0 === this.name.indexOf("3DES") && 24 !== t.length()) throw new Error("Invalid Triple-DES key size: " + 8 * t.length());
            this._keys = function (e) {
              for (var t, r = [0, 4, 536870912, 536870916, 65536, 65540, 536936448, 536936452, 512, 516, 536871424, 536871428, 66048, 66052, 536936960, 536936964], n = [0, 1, 1048576, 1048577, 67108864, 67108865, 68157440, 68157441, 256, 257, 1048832, 1048833, 67109120, 67109121, 68157696, 68157697], i = [0, 8, 2048, 2056, 16777216, 16777224, 16779264, 16779272, 0, 8, 2048, 2056, 16777216, 16777224, 16779264, 16779272], s = [0, 2097152, 134217728, 136314880, 8192, 2105344, 134225920, 136323072, 131072, 2228224, 134348800, 136445952, 139264, 2236416, 134356992, 136454144], o = [0, 262144, 16, 262160, 0, 262144, 16, 262160, 4096, 266240, 4112, 266256, 4096, 266240, 4112, 266256], a = [0, 1024, 32, 1056, 0, 1024, 32, 1056, 33554432, 33555456, 33554464, 33555488, 33554432, 33555456, 33554464, 33555488], c = [0, 268435456, 524288, 268959744, 2, 268435458, 524290, 268959746, 0, 268435456, 524288, 268959744, 2, 268435458, 524290, 268959746], l = [0, 65536, 2048, 67584, 536870912, 536936448, 536872960, 536938496, 131072, 196608, 133120, 198656, 537001984, 537067520, 537004032, 537069568], u = [0, 262144, 0, 262144, 2, 262146, 2, 262146, 33554432, 33816576, 33554432, 33816576, 33554434, 33816578, 33554434, 33816578], h = [0, 268435456, 8, 268435464, 0, 268435456, 8, 268435464, 1024, 268436480, 1032, 268436488, 1024, 268436480, 1032, 268436488], d = [0, 32, 0, 32, 1048576, 1048608, 1048576, 1048608, 8192, 8224, 8192, 8224, 1056768, 1056800, 1056768, 1056800], p = [0, 16777216, 512, 16777728, 2097152, 18874368, 2097664, 18874880, 67108864, 83886080, 67109376, 83886592, 69206016, 85983232, 69206528, 85983744], f = [0, 4096, 134217728, 134221824, 524288, 528384, 134742016, 134746112, 16, 4112, 134217744, 134221840, 524304, 528400, 134742032, 134746128], y = [0, 4, 256, 260, 0, 4, 256, 260, 1, 5, 257, 261, 1, 5, 257, 261], g = e.length() > 8 ? 3 : 1, m = [], w = [0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0], E = 0, b = 0; b < g; b++) {
                var v = e.getInt32(),
                  _ = e.getInt32();
                v ^= (t = 252645135 & (v >>> 4 ^ _)) << 4, v ^= t = 65535 & ((_ ^= t) >>> -16 ^ v), v ^= (t = 858993459 & (v >>> 2 ^ (_ ^= t << -16))) << 2, v ^= t = 65535 & ((_ ^= t) >>> -16 ^ v), v ^= (t = 1431655765 & (v >>> 1 ^ (_ ^= t << -16))) << 1, v ^= t = 16711935 & ((_ ^= t) >>> 8 ^ v), t = (v ^= (t = 1431655765 & (v >>> 1 ^ (_ ^= t << 8))) << 1) << 8 | (_ ^= t) >>> 20 & 240, v = _ << 24 | _ << 8 & 16711680 | _ >>> 8 & 65280 | _ >>> 24 & 240, _ = t;
                for (var S = 0; S < w.length; ++S) {
                  w[S] ? (v = v << 2 | v >>> 26, _ = _ << 2 | _ >>> 26) : (v = v << 1 | v >>> 27, _ = _ << 1 | _ >>> 27);
                  var C = r[(v &= -15) >>> 28] | n[v >>> 24 & 15] | i[v >>> 20 & 15] | s[v >>> 16 & 15] | o[v >>> 12 & 15] | a[v >>> 8 & 15] | c[v >>> 4 & 15],
                    A = l[(_ &= -15) >>> 28] | u[_ >>> 24 & 15] | h[_ >>> 20 & 15] | d[_ >>> 16 & 15] | p[_ >>> 12 & 15] | f[_ >>> 8 & 15] | y[_ >>> 4 & 15];
                  t = 65535 & (A >>> 16 ^ C), m[E++] = C ^ t, m[E++] = A ^ t << 16;
                }
              }
              return m;
            }(t), this._init = !0;
          }
        }, i("DES-ECB", n.cipher.modes.ecb), i("DES-CBC", n.cipher.modes.cbc), i("DES-CFB", n.cipher.modes.cfb), i("DES-OFB", n.cipher.modes.ofb), i("DES-CTR", n.cipher.modes.ctr), i("3DES-ECB", n.cipher.modes.ecb), i("3DES-CBC", n.cipher.modes.cbc), i("3DES-CFB", n.cipher.modes.cfb), i("3DES-OFB", n.cipher.modes.ofb), i("3DES-CTR", n.cipher.modes.ctr);
        var s = [16843776, 0, 65536, 16843780, 16842756, 66564, 4, 65536, 1024, 16843776, 16843780, 1024, 16778244, 16842756, 16777216, 4, 1028, 16778240, 16778240, 66560, 66560, 16842752, 16842752, 16778244, 65540, 16777220, 16777220, 65540, 0, 1028, 66564, 16777216, 65536, 16843780, 4, 16842752, 16843776, 16777216, 16777216, 1024, 16842756, 65536, 66560, 16777220, 1024, 4, 16778244, 66564, 16843780, 65540, 16842752, 16778244, 16777220, 1028, 66564, 16843776, 1028, 16778240, 16778240, 0, 65540, 66560, 0, 16842756],
          o = [-2146402272, -2147450880, 32768, 1081376, 1048576, 32, -2146435040, -2147450848, -2147483616, -2146402272, -2146402304, -2147483648, -2147450880, 1048576, 32, -2146435040, 1081344, 1048608, -2147450848, 0, -2147483648, 32768, 1081376, -2146435072, 1048608, -2147483616, 0, 1081344, 32800, -2146402304, -2146435072, 32800, 0, 1081376, -2146435040, 1048576, -2147450848, -2146435072, -2146402304, 32768, -2146435072, -2147450880, 32, -2146402272, 1081376, 32, 32768, -2147483648, 32800, -2146402304, 1048576, -2147483616, 1048608, -2147450848, -2147483616, 1048608, 1081344, 0, -2147450880, 32800, -2147483648, -2146435040, -2146402272, 1081344],
          a = [520, 134349312, 0, 134348808, 134218240, 0, 131592, 134218240, 131080, 134217736, 134217736, 131072, 134349320, 131080, 134348800, 520, 134217728, 8, 134349312, 512, 131584, 134348800, 134348808, 131592, 134218248, 131584, 131072, 134218248, 8, 134349320, 512, 134217728, 134349312, 134217728, 131080, 520, 131072, 134349312, 134218240, 0, 512, 131080, 134349320, 134218240, 134217736, 512, 0, 134348808, 134218248, 131072, 134217728, 134349320, 8, 131592, 131584, 134217736, 134348800, 134218248, 520, 134348800, 131592, 8, 134348808, 131584],
          c = [8396801, 8321, 8321, 128, 8396928, 8388737, 8388609, 8193, 0, 8396800, 8396800, 8396929, 129, 0, 8388736, 8388609, 1, 8192, 8388608, 8396801, 128, 8388608, 8193, 8320, 8388737, 1, 8320, 8388736, 8192, 8396928, 8396929, 129, 8388736, 8388609, 8396800, 8396929, 129, 0, 0, 8396800, 8320, 8388736, 8388737, 1, 8396801, 8321, 8321, 128, 8396929, 129, 1, 8192, 8388609, 8193, 8396928, 8388737, 8193, 8320, 8388608, 8396801, 128, 8388608, 8192, 8396928],
          l = [256, 34078976, 34078720, 1107296512, 524288, 256, 1073741824, 34078720, 1074266368, 524288, 33554688, 1074266368, 1107296512, 1107820544, 524544, 1073741824, 33554432, 1074266112, 1074266112, 0, 1073742080, 1107820800, 1107820800, 33554688, 1107820544, 1073742080, 0, 1107296256, 34078976, 33554432, 1107296256, 524544, 524288, 1107296512, 256, 33554432, 1073741824, 34078720, 1107296512, 1074266368, 33554688, 1073741824, 1107820544, 34078976, 1074266368, 256, 33554432, 1107820544, 1107820800, 524544, 1107296256, 1107820800, 34078720, 0, 1074266112, 1107296256, 524544, 33554688, 1073742080, 524288, 0, 1074266112, 34078976, 1073742080],
          u = [536870928, 541065216, 16384, 541081616, 541065216, 16, 541081616, 4194304, 536887296, 4210704, 4194304, 536870928, 4194320, 536887296, 536870912, 16400, 0, 4194320, 536887312, 16384, 4210688, 536887312, 16, 541065232, 541065232, 0, 4210704, 541081600, 16400, 4210688, 541081600, 536870912, 536887296, 16, 541065232, 4210688, 541081616, 4194304, 16400, 536870928, 4194304, 536887296, 536870912, 16400, 536870928, 541081616, 4210688, 541065216, 4210704, 541081600, 0, 541065232, 16, 16384, 541065216, 4210704, 16384, 4194320, 536887312, 0, 541081600, 536870912, 4194320, 536887312],
          h = [2097152, 69206018, 67110914, 0, 2048, 67110914, 2099202, 69208064, 69208066, 2097152, 0, 67108866, 2, 67108864, 69206018, 2050, 67110912, 2099202, 2097154, 67110912, 67108866, 69206016, 69208064, 2097154, 69206016, 2048, 2050, 69208066, 2099200, 2, 67108864, 2099200, 67108864, 2099200, 2097152, 67110914, 67110914, 69206018, 69206018, 2, 2097154, 67108864, 67110912, 2097152, 69208064, 2050, 2099202, 69208064, 2050, 67108866, 69208066, 69206016, 2099200, 0, 2, 69208066, 0, 2099202, 69206016, 2048, 67108866, 67110912, 2048, 2097154],
          d = [268439616, 4096, 262144, 268701760, 268435456, 268439616, 64, 268435456, 262208, 268697600, 268701760, 266240, 268701696, 266304, 4096, 64, 268697600, 268435520, 268439552, 4160, 266240, 262208, 268697664, 268701696, 4160, 0, 0, 268697664, 268435520, 268439552, 266304, 262144, 266304, 262144, 268701696, 4096, 64, 268697664, 4096, 266304, 268439552, 64, 268435520, 268697600, 268697664, 268435456, 262144, 268439616, 0, 268701760, 262208, 268435520, 268697600, 268439552, 268439616, 0, 268701760, 266240, 266240, 4160, 4160, 262208, 268435456, 268701696];
        function p(e, t, r, n) {
          var i,
            p,
            f = 32 === e.length ? 3 : 9;
          i = 3 === f ? n ? [30, -2, -2] : [0, 32, 2] : n ? [94, 62, -2, 32, 64, 2, 30, -2, -2] : [0, 32, 2, 62, 30, -2, 64, 96, 2];
          var y = t[0],
            g = t[1];
          y ^= (p = 252645135 & (y >>> 4 ^ g)) << 4, y ^= (p = 65535 & (y >>> 16 ^ (g ^= p))) << 16, y ^= p = 858993459 & ((g ^= p) >>> 2 ^ y), y ^= p = 16711935 & ((g ^= p << 2) >>> 8 ^ y), y = (y ^= (p = 1431655765 & (y >>> 1 ^ (g ^= p << 8))) << 1) << 1 | y >>> 31, g = (g ^= p) << 1 | g >>> 31;
          for (var m = 0; m < f; m += 3) {
            for (var w = i[m + 1], E = i[m + 2], b = i[m]; b != w; b += E) {
              var v = g ^ e[b],
                _ = (g >>> 4 | g << 28) ^ e[b + 1];
              p = y, y = g, g = p ^ (o[v >>> 24 & 63] | c[v >>> 16 & 63] | u[v >>> 8 & 63] | d[63 & v] | s[_ >>> 24 & 63] | a[_ >>> 16 & 63] | l[_ >>> 8 & 63] | h[63 & _]);
            }
            p = y, y = g, g = p;
          }
          g = g >>> 1 | g << 31, g ^= p = 1431655765 & ((y = y >>> 1 | y << 31) >>> 1 ^ g), g ^= (p = 16711935 & (g >>> 8 ^ (y ^= p << 1))) << 8, g ^= (p = 858993459 & (g >>> 2 ^ (y ^= p))) << 2, g ^= p = 65535 & ((y ^= p) >>> 16 ^ g), g ^= p = 252645135 & ((y ^= p << 16) >>> 4 ^ g), y ^= p << 4, r[0] = y, r[1] = g;
        }
        function f(e) {
          var t,
            r = "DES-" + ((e = e || {}).mode || "CBC").toUpperCase(),
            i = (t = e.decrypt ? n.cipher.createDecipher(r, e.key) : n.cipher.createCipher(r, e.key)).start;
          return t.start = function (e, r) {
            var s = null;
            r instanceof n.util.ByteBuffer && (s = r, r = {}), (r = r || {}).output = s, r.iv = e, i.call(t, r);
          }, t;
        }
      },
      3832: function _(e) {
        e.exports = {
          options: {
            usePureJavaScript: !1
          }
        };
      },
      6607: function _(e, t, r) {
        var n = r(3832);
        r(8991), r(7116), (e.exports = n.hmac = n.hmac || {}).create = function () {
          var e = null,
            t = null,
            r = null,
            i = null,
            s = {
              start: function start(s, o) {
                if (null !== s) if ("string" == typeof s) {
                  if (!((s = s.toLowerCase()) in n.md.algorithms)) throw new Error('Unknown hash algorithm "' + s + '"');
                  t = n.md.algorithms[s].create();
                } else t = s;
                if (null === o) o = e;else {
                  if ("string" == typeof o) o = n.util.createBuffer(o);else if (n.util.isArray(o)) {
                    var a = o;
                    o = n.util.createBuffer();
                    for (var c = 0; c < a.length; ++c) o.putByte(a[c]);
                  }
                  var l = o.length();
                  for (l > t.blockLength && (t.start(), t.update(o.bytes()), o = t.digest()), r = n.util.createBuffer(), i = n.util.createBuffer(), l = o.length(), c = 0; c < l; ++c) a = o.at(c), r.putByte(54 ^ a), i.putByte(92 ^ a);
                  if (l < t.blockLength) for (a = t.blockLength - l, c = 0; c < a; ++c) r.putByte(54), i.putByte(92);
                  e = o, r = r.bytes(), i = i.bytes();
                }
                t.start(), t.update(r);
              },
              update: function update(e) {
                t.update(e);
              },
              getMac: function getMac() {
                var e = t.digest().bytes();
                return t.start(), t.update(i), t.update(e), t.digest();
              }
            };
          return s.digest = s.getMac, s;
        };
      },
      5764: function _(e, t, r) {
        var n,
          i = r(3832);
        function s(e, t, r) {
          this.data = [], null != e && ("number" == typeof e ? this.fromNumber(e, t, r) : null == t && "string" != typeof e ? this.fromString(e, 256) : this.fromString(e, t));
        }
        function o() {
          return new s(null);
        }
        function a(e, t, r, n, i, s) {
          for (var o = 16383 & t, a = t >> 14; --s >= 0;) {
            var c = 16383 & this.data[e],
              l = this.data[e++] >> 14,
              u = a * c + l * o;
            i = ((c = o * c + ((16383 & u) << 14) + r.data[n] + i) >> 28) + (u >> 14) + a * l, r.data[n++] = 268435455 & c;
          }
          return i;
        }
        e.exports = i.jsbn = i.jsbn || {}, i.jsbn.BigInteger = s, "undefined" == typeof navigator ? (s.prototype.am = a, n = 28) : "Microsoft Internet Explorer" == navigator.appName ? (s.prototype.am = function (e, t, r, n, i, s) {
          for (var o = 32767 & t, a = t >> 15; --s >= 0;) {
            var c = 32767 & this.data[e],
              l = this.data[e++] >> 15,
              u = a * c + l * o;
            i = ((c = o * c + ((32767 & u) << 15) + r.data[n] + (1073741823 & i)) >>> 30) + (u >>> 15) + a * l + (i >>> 30), r.data[n++] = 1073741823 & c;
          }
          return i;
        }, n = 30) : "Netscape" != navigator.appName ? (s.prototype.am = function (e, t, r, n, i, s) {
          for (; --s >= 0;) {
            var o = t * this.data[e++] + r.data[n] + i;
            i = Math.floor(o / 67108864), r.data[n++] = 67108863 & o;
          }
          return i;
        }, n = 26) : (s.prototype.am = a, n = 28), s.prototype.DB = n, s.prototype.DM = (1 << n) - 1, s.prototype.DV = 1 << n, s.prototype.FV = Math.pow(2, 52), s.prototype.F1 = 52 - n, s.prototype.F2 = 2 * n - 52;
        var c,
          l,
          u = "0123456789abcdefghijklmnopqrstuvwxyz",
          h = new Array();
        for (c = "0".charCodeAt(0), l = 0; l <= 9; ++l) h[c++] = l;
        for (c = "a".charCodeAt(0), l = 10; l < 36; ++l) h[c++] = l;
        for (c = "A".charCodeAt(0), l = 10; l < 36; ++l) h[c++] = l;
        function d(e) {
          return u.charAt(e);
        }
        function p(e, t) {
          var r = h[e.charCodeAt(t)];
          return null == r ? -1 : r;
        }
        function f(e) {
          var t = o();
          return t.fromInt(e), t;
        }
        function y(e) {
          var t,
            r = 1;
          return 0 != (t = e >>> 16) && (e = t, r += 16), 0 != (t = e >> 8) && (e = t, r += 8), 0 != (t = e >> 4) && (e = t, r += 4), 0 != (t = e >> 2) && (e = t, r += 2), 0 != (t = e >> 1) && (e = t, r += 1), r;
        }
        function g(e) {
          this.m = e;
        }
        function m(e) {
          this.m = e, this.mp = e.invDigit(), this.mpl = 32767 & this.mp, this.mph = this.mp >> 15, this.um = (1 << e.DB - 15) - 1, this.mt2 = 2 * e.t;
        }
        function w(e, t) {
          return e & t;
        }
        function E(e, t) {
          return e | t;
        }
        function b(e, t) {
          return e ^ t;
        }
        function v(e, t) {
          return e & ~t;
        }
        function _(e) {
          if (0 == e) return -1;
          var t = 0;
          return 0 == (65535 & e) && (e >>= 16, t += 16), 0 == (255 & e) && (e >>= 8, t += 8), 0 == (15 & e) && (e >>= 4, t += 4), 0 == (3 & e) && (e >>= 2, t += 2), 0 == (1 & e) && ++t, t;
        }
        function S(e) {
          for (var t = 0; 0 != e;) e &= e - 1, ++t;
          return t;
        }
        function C() {}
        function A(e) {
          return e;
        }
        function I(e) {
          this.r2 = o(), this.q3 = o(), s.ONE.dlShiftTo(2 * e.t, this.r2), this.mu = this.r2.divide(e), this.m = e;
        }
        g.prototype.convert = function (e) {
          return e.s < 0 || e.compareTo(this.m) >= 0 ? e.mod(this.m) : e;
        }, g.prototype.revert = function (e) {
          return e;
        }, g.prototype.reduce = function (e) {
          e.divRemTo(this.m, null, e);
        }, g.prototype.mulTo = function (e, t, r) {
          e.multiplyTo(t, r), this.reduce(r);
        }, g.prototype.sqrTo = function (e, t) {
          e.squareTo(t), this.reduce(t);
        }, m.prototype.convert = function (e) {
          var t = o();
          return e.abs().dlShiftTo(this.m.t, t), t.divRemTo(this.m, null, t), e.s < 0 && t.compareTo(s.ZERO) > 0 && this.m.subTo(t, t), t;
        }, m.prototype.revert = function (e) {
          var t = o();
          return e.copyTo(t), this.reduce(t), t;
        }, m.prototype.reduce = function (e) {
          for (; e.t <= this.mt2;) e.data[e.t++] = 0;
          for (var t = 0; t < this.m.t; ++t) {
            var r = 32767 & e.data[t],
              n = r * this.mpl + ((r * this.mph + (e.data[t] >> 15) * this.mpl & this.um) << 15) & e.DM;
            for (r = t + this.m.t, e.data[r] += this.m.am(0, n, e, t, 0, this.m.t); e.data[r] >= e.DV;) e.data[r] -= e.DV, e.data[++r]++;
          }
          e.clamp(), e.drShiftTo(this.m.t, e), e.compareTo(this.m) >= 0 && e.subTo(this.m, e);
        }, m.prototype.mulTo = function (e, t, r) {
          e.multiplyTo(t, r), this.reduce(r);
        }, m.prototype.sqrTo = function (e, t) {
          e.squareTo(t), this.reduce(t);
        }, s.prototype.copyTo = function (e) {
          for (var t = this.t - 1; t >= 0; --t) e.data[t] = this.data[t];
          e.t = this.t, e.s = this.s;
        }, s.prototype.fromInt = function (e) {
          this.t = 1, this.s = e < 0 ? -1 : 0, e > 0 ? this.data[0] = e : e < -1 ? this.data[0] = e + this.DV : this.t = 0;
        }, s.prototype.fromString = function (e, t) {
          var r;
          if (16 == t) r = 4;else if (8 == t) r = 3;else if (256 == t) r = 8;else if (2 == t) r = 1;else if (32 == t) r = 5;else {
            if (4 != t) return void this.fromRadix(e, t);
            r = 2;
          }
          this.t = 0, this.s = 0;
          for (var n = e.length, i = !1, o = 0; --n >= 0;) {
            var a = 8 == r ? 255 & e[n] : p(e, n);
            a < 0 ? "-" == e.charAt(n) && (i = !0) : (i = !1, 0 == o ? this.data[this.t++] = a : o + r > this.DB ? (this.data[this.t - 1] |= (a & (1 << this.DB - o) - 1) << o, this.data[this.t++] = a >> this.DB - o) : this.data[this.t - 1] |= a << o, (o += r) >= this.DB && (o -= this.DB));
          }
          8 == r && 0 != (128 & e[0]) && (this.s = -1, o > 0 && (this.data[this.t - 1] |= (1 << this.DB - o) - 1 << o)), this.clamp(), i && s.ZERO.subTo(this, this);
        }, s.prototype.clamp = function () {
          for (var e = this.s & this.DM; this.t > 0 && this.data[this.t - 1] == e;) --this.t;
        }, s.prototype.dlShiftTo = function (e, t) {
          var r;
          for (r = this.t - 1; r >= 0; --r) t.data[r + e] = this.data[r];
          for (r = e - 1; r >= 0; --r) t.data[r] = 0;
          t.t = this.t + e, t.s = this.s;
        }, s.prototype.drShiftTo = function (e, t) {
          for (var r = e; r < this.t; ++r) t.data[r - e] = this.data[r];
          t.t = Math.max(this.t - e, 0), t.s = this.s;
        }, s.prototype.lShiftTo = function (e, t) {
          var r,
            n = e % this.DB,
            i = this.DB - n,
            s = (1 << i) - 1,
            o = Math.floor(e / this.DB),
            a = this.s << n & this.DM;
          for (r = this.t - 1; r >= 0; --r) t.data[r + o + 1] = this.data[r] >> i | a, a = (this.data[r] & s) << n;
          for (r = o - 1; r >= 0; --r) t.data[r] = 0;
          t.data[o] = a, t.t = this.t + o + 1, t.s = this.s, t.clamp();
        }, s.prototype.rShiftTo = function (e, t) {
          t.s = this.s;
          var r = Math.floor(e / this.DB);
          if (r >= this.t) t.t = 0;else {
            var n = e % this.DB,
              i = this.DB - n,
              s = (1 << n) - 1;
            t.data[0] = this.data[r] >> n;
            for (var o = r + 1; o < this.t; ++o) t.data[o - r - 1] |= (this.data[o] & s) << i, t.data[o - r] = this.data[o] >> n;
            n > 0 && (t.data[this.t - r - 1] |= (this.s & s) << i), t.t = this.t - r, t.clamp();
          }
        }, s.prototype.subTo = function (e, t) {
          for (var r = 0, n = 0, i = Math.min(e.t, this.t); r < i;) n += this.data[r] - e.data[r], t.data[r++] = n & this.DM, n >>= this.DB;
          if (e.t < this.t) {
            for (n -= e.s; r < this.t;) n += this.data[r], t.data[r++] = n & this.DM, n >>= this.DB;
            n += this.s;
          } else {
            for (n += this.s; r < e.t;) n -= e.data[r], t.data[r++] = n & this.DM, n >>= this.DB;
            n -= e.s;
          }
          t.s = n < 0 ? -1 : 0, n < -1 ? t.data[r++] = this.DV + n : n > 0 && (t.data[r++] = n), t.t = r, t.clamp();
        }, s.prototype.multiplyTo = function (e, t) {
          var r = this.abs(),
            n = e.abs(),
            i = r.t;
          for (t.t = i + n.t; --i >= 0;) t.data[i] = 0;
          for (i = 0; i < n.t; ++i) t.data[i + r.t] = r.am(0, n.data[i], t, i, 0, r.t);
          t.s = 0, t.clamp(), this.s != e.s && s.ZERO.subTo(t, t);
        }, s.prototype.squareTo = function (e) {
          for (var t = this.abs(), r = e.t = 2 * t.t; --r >= 0;) e.data[r] = 0;
          for (r = 0; r < t.t - 1; ++r) {
            var n = t.am(r, t.data[r], e, 2 * r, 0, 1);
            (e.data[r + t.t] += t.am(r + 1, 2 * t.data[r], e, 2 * r + 1, n, t.t - r - 1)) >= t.DV && (e.data[r + t.t] -= t.DV, e.data[r + t.t + 1] = 1);
          }
          e.t > 0 && (e.data[e.t - 1] += t.am(r, t.data[r], e, 2 * r, 0, 1)), e.s = 0, e.clamp();
        }, s.prototype.divRemTo = function (e, t, r) {
          var n = e.abs();
          if (!(n.t <= 0)) {
            var i = this.abs();
            if (i.t < n.t) return null != t && t.fromInt(0), void (null != r && this.copyTo(r));
            null == r && (r = o());
            var a = o(),
              c = this.s,
              l = e.s,
              u = this.DB - y(n.data[n.t - 1]);
            u > 0 ? (n.lShiftTo(u, a), i.lShiftTo(u, r)) : (n.copyTo(a), i.copyTo(r));
            var h = a.t,
              d = a.data[h - 1];
            if (0 != d) {
              var p = d * (1 << this.F1) + (h > 1 ? a.data[h - 2] >> this.F2 : 0),
                f = this.FV / p,
                g = (1 << this.F1) / p,
                m = 1 << this.F2,
                w = r.t,
                E = w - h,
                b = null == t ? o() : t;
              for (a.dlShiftTo(E, b), r.compareTo(b) >= 0 && (r.data[r.t++] = 1, r.subTo(b, r)), s.ONE.dlShiftTo(h, b), b.subTo(a, a); a.t < h;) a.data[a.t++] = 0;
              for (; --E >= 0;) {
                var v = r.data[--w] == d ? this.DM : Math.floor(r.data[w] * f + (r.data[w - 1] + m) * g);
                if ((r.data[w] += a.am(0, v, r, E, 0, h)) < v) for (a.dlShiftTo(E, b), r.subTo(b, r); r.data[w] < --v;) r.subTo(b, r);
              }
              null != t && (r.drShiftTo(h, t), c != l && s.ZERO.subTo(t, t)), r.t = h, r.clamp(), u > 0 && r.rShiftTo(u, r), c < 0 && s.ZERO.subTo(r, r);
            }
          }
        }, s.prototype.invDigit = function () {
          if (this.t < 1) return 0;
          var e = this.data[0];
          if (0 == (1 & e)) return 0;
          var t = 3 & e;
          return (t = (t = (t = (t = t * (2 - (15 & e) * t) & 15) * (2 - (255 & e) * t) & 255) * (2 - ((65535 & e) * t & 65535)) & 65535) * (2 - e * t % this.DV) % this.DV) > 0 ? this.DV - t : -t;
        }, s.prototype.isEven = function () {
          return 0 == (this.t > 0 ? 1 & this.data[0] : this.s);
        }, s.prototype.exp = function (e, t) {
          if (e > 4294967295 || e < 1) return s.ONE;
          var r = o(),
            n = o(),
            i = t.convert(this),
            a = y(e) - 1;
          for (i.copyTo(r); --a >= 0;) if (t.sqrTo(r, n), (e & 1 << a) > 0) t.mulTo(n, i, r);else {
            var c = r;
            r = n, n = c;
          }
          return t.revert(r);
        }, s.prototype.toString = function (e) {
          if (this.s < 0) return "-" + this.negate().toString(e);
          var t;
          if (16 == e) t = 4;else if (8 == e) t = 3;else if (2 == e) t = 1;else if (32 == e) t = 5;else {
            if (4 != e) return this.toRadix(e);
            t = 2;
          }
          var r,
            n = (1 << t) - 1,
            i = !1,
            s = "",
            o = this.t,
            a = this.DB - o * this.DB % t;
          if (o-- > 0) for (a < this.DB && (r = this.data[o] >> a) > 0 && (i = !0, s = d(r)); o >= 0;) a < t ? (r = (this.data[o] & (1 << a) - 1) << t - a, r |= this.data[--o] >> (a += this.DB - t)) : (r = this.data[o] >> (a -= t) & n, a <= 0 && (a += this.DB, --o)), r > 0 && (i = !0), i && (s += d(r));
          return i ? s : "0";
        }, s.prototype.negate = function () {
          var e = o();
          return s.ZERO.subTo(this, e), e;
        }, s.prototype.abs = function () {
          return this.s < 0 ? this.negate() : this;
        }, s.prototype.compareTo = function (e) {
          var t = this.s - e.s;
          if (0 != t) return t;
          var r = this.t;
          if (0 != (t = r - e.t)) return this.s < 0 ? -t : t;
          for (; --r >= 0;) if (0 != (t = this.data[r] - e.data[r])) return t;
          return 0;
        }, s.prototype.bitLength = function () {
          return this.t <= 0 ? 0 : this.DB * (this.t - 1) + y(this.data[this.t - 1] ^ this.s & this.DM);
        }, s.prototype.mod = function (e) {
          var t = o();
          return this.abs().divRemTo(e, null, t), this.s < 0 && t.compareTo(s.ZERO) > 0 && e.subTo(t, t), t;
        }, s.prototype.modPowInt = function (e, t) {
          var r;
          return r = e < 256 || t.isEven() ? new g(t) : new m(t), this.exp(e, r);
        }, s.ZERO = f(0), s.ONE = f(1), C.prototype.convert = A, C.prototype.revert = A, C.prototype.mulTo = function (e, t, r) {
          e.multiplyTo(t, r);
        }, C.prototype.sqrTo = function (e, t) {
          e.squareTo(t);
        }, I.prototype.convert = function (e) {
          if (e.s < 0 || e.t > 2 * this.m.t) return e.mod(this.m);
          if (e.compareTo(this.m) < 0) return e;
          var t = o();
          return e.copyTo(t), this.reduce(t), t;
        }, I.prototype.revert = function (e) {
          return e;
        }, I.prototype.reduce = function (e) {
          for (e.drShiftTo(this.m.t - 1, this.r2), e.t > this.m.t + 1 && (e.t = this.m.t + 1, e.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); e.compareTo(this.r2) < 0;) e.dAddOffset(1, this.m.t + 1);
          for (e.subTo(this.r2, e); e.compareTo(this.m) >= 0;) e.subTo(this.m, e);
        }, I.prototype.mulTo = function (e, t, r) {
          e.multiplyTo(t, r), this.reduce(r);
        }, I.prototype.sqrTo = function (e, t) {
          e.squareTo(t), this.reduce(t);
        };
        var T = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509],
          R = (1 << 26) / T[T.length - 1];
        s.prototype.chunkSize = function (e) {
          return Math.floor(Math.LN2 * this.DB / Math.log(e));
        }, s.prototype.toRadix = function (e) {
          if (null == e && (e = 10), 0 == this.signum() || e < 2 || e > 36) return "0";
          var t = this.chunkSize(e),
            r = Math.pow(e, t),
            n = f(r),
            i = o(),
            s = o(),
            a = "";
          for (this.divRemTo(n, i, s); i.signum() > 0;) a = (r + s.intValue()).toString(e).substr(1) + a, i.divRemTo(n, i, s);
          return s.intValue().toString(e) + a;
        }, s.prototype.fromRadix = function (e, t) {
          this.fromInt(0), null == t && (t = 10);
          for (var r = this.chunkSize(t), n = Math.pow(t, r), i = !1, o = 0, a = 0, c = 0; c < e.length; ++c) {
            var l = p(e, c);
            l < 0 ? "-" == e.charAt(c) && 0 == this.signum() && (i = !0) : (a = t * a + l, ++o >= r && (this.dMultiply(n), this.dAddOffset(a, 0), o = 0, a = 0));
          }
          o > 0 && (this.dMultiply(Math.pow(t, o)), this.dAddOffset(a, 0)), i && s.ZERO.subTo(this, this);
        }, s.prototype.fromNumber = function (e, t, r) {
          if ("number" == typeof t) {
            if (e < 2) this.fromInt(1);else for (this.fromNumber(e, r), this.testBit(e - 1) || this.bitwiseTo(s.ONE.shiftLeft(e - 1), E, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(t);) this.dAddOffset(2, 0), this.bitLength() > e && this.subTo(s.ONE.shiftLeft(e - 1), this);
          } else {
            var n = new Array(),
              i = 7 & e;
            n.length = 1 + (e >> 3), t.nextBytes(n), i > 0 ? n[0] &= (1 << i) - 1 : n[0] = 0, this.fromString(n, 256);
          }
        }, s.prototype.bitwiseTo = function (e, t, r) {
          var n,
            i,
            s = Math.min(e.t, this.t);
          for (n = 0; n < s; ++n) r.data[n] = t(this.data[n], e.data[n]);
          if (e.t < this.t) {
            for (i = e.s & this.DM, n = s; n < this.t; ++n) r.data[n] = t(this.data[n], i);
            r.t = this.t;
          } else {
            for (i = this.s & this.DM, n = s; n < e.t; ++n) r.data[n] = t(i, e.data[n]);
            r.t = e.t;
          }
          r.s = t(this.s, e.s), r.clamp();
        }, s.prototype.changeBit = function (e, t) {
          var r = s.ONE.shiftLeft(e);
          return this.bitwiseTo(r, t, r), r;
        }, s.prototype.addTo = function (e, t) {
          for (var r = 0, n = 0, i = Math.min(e.t, this.t); r < i;) n += this.data[r] + e.data[r], t.data[r++] = n & this.DM, n >>= this.DB;
          if (e.t < this.t) {
            for (n += e.s; r < this.t;) n += this.data[r], t.data[r++] = n & this.DM, n >>= this.DB;
            n += this.s;
          } else {
            for (n += this.s; r < e.t;) n += e.data[r], t.data[r++] = n & this.DM, n >>= this.DB;
            n += e.s;
          }
          t.s = n < 0 ? -1 : 0, n > 0 ? t.data[r++] = n : n < -1 && (t.data[r++] = this.DV + n), t.t = r, t.clamp();
        }, s.prototype.dMultiply = function (e) {
          this.data[this.t] = this.am(0, e - 1, this, 0, 0, this.t), ++this.t, this.clamp();
        }, s.prototype.dAddOffset = function (e, t) {
          if (0 != e) {
            for (; this.t <= t;) this.data[this.t++] = 0;
            for (this.data[t] += e; this.data[t] >= this.DV;) this.data[t] -= this.DV, ++t >= this.t && (this.data[this.t++] = 0), ++this.data[t];
          }
        }, s.prototype.multiplyLowerTo = function (e, t, r) {
          var n,
            i = Math.min(this.t + e.t, t);
          for (r.s = 0, r.t = i; i > 0;) r.data[--i] = 0;
          for (n = r.t - this.t; i < n; ++i) r.data[i + this.t] = this.am(0, e.data[i], r, i, 0, this.t);
          for (n = Math.min(e.t, t); i < n; ++i) this.am(0, e.data[i], r, i, 0, t - i);
          r.clamp();
        }, s.prototype.multiplyUpperTo = function (e, t, r) {
          --t;
          var n = r.t = this.t + e.t - t;
          for (r.s = 0; --n >= 0;) r.data[n] = 0;
          for (n = Math.max(t - this.t, 0); n < e.t; ++n) r.data[this.t + n - t] = this.am(t - n, e.data[n], r, 0, 0, this.t + n - t);
          r.clamp(), r.drShiftTo(1, r);
        }, s.prototype.modInt = function (e) {
          if (e <= 0) return 0;
          var t = this.DV % e,
            r = this.s < 0 ? e - 1 : 0;
          if (this.t > 0) if (0 == t) r = this.data[0] % e;else for (var n = this.t - 1; n >= 0; --n) r = (t * r + this.data[n]) % e;
          return r;
        }, s.prototype.millerRabin = function (e) {
          var t = this.subtract(s.ONE),
            r = t.getLowestSetBit();
          if (r <= 0) return !1;
          for (var n, i = t.shiftRight(r), o = {
              nextBytes: function nextBytes(e) {
                for (var t = 0; t < e.length; ++t) e[t] = Math.floor(256 * Math.random());
              }
            }, a = 0; a < e; ++a) {
            do {
              n = new s(this.bitLength(), o);
            } while (n.compareTo(s.ONE) <= 0 || n.compareTo(t) >= 0);
            var c = n.modPow(i, this);
            if (0 != c.compareTo(s.ONE) && 0 != c.compareTo(t)) {
              for (var l = 1; l++ < r && 0 != c.compareTo(t);) if (0 == (c = c.modPowInt(2, this)).compareTo(s.ONE)) return !1;
              if (0 != c.compareTo(t)) return !1;
            }
          }
          return !0;
        }, s.prototype.clone = function () {
          var e = o();
          return this.copyTo(e), e;
        }, s.prototype.intValue = function () {
          if (this.s < 0) {
            if (1 == this.t) return this.data[0] - this.DV;
            if (0 == this.t) return -1;
          } else {
            if (1 == this.t) return this.data[0];
            if (0 == this.t) return 0;
          }
          return (this.data[1] & (1 << 32 - this.DB) - 1) << this.DB | this.data[0];
        }, s.prototype.byteValue = function () {
          return 0 == this.t ? this.s : this.data[0] << 24 >> 24;
        }, s.prototype.shortValue = function () {
          return 0 == this.t ? this.s : this.data[0] << 16 >> 16;
        }, s.prototype.signum = function () {
          return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this.data[0] <= 0 ? 0 : 1;
        }, s.prototype.toByteArray = function () {
          var e = this.t,
            t = new Array();
          t[0] = this.s;
          var r,
            n = this.DB - e * this.DB % 8,
            i = 0;
          if (e-- > 0) for (n < this.DB && (r = this.data[e] >> n) != (this.s & this.DM) >> n && (t[i++] = r | this.s << this.DB - n); e >= 0;) n < 8 ? (r = (this.data[e] & (1 << n) - 1) << 8 - n, r |= this.data[--e] >> (n += this.DB - 8)) : (r = this.data[e] >> (n -= 8) & 255, n <= 0 && (n += this.DB, --e)), 0 != (128 & r) && (r |= -256), 0 == i && (128 & this.s) != (128 & r) && ++i, (i > 0 || r != this.s) && (t[i++] = r);
          return t;
        }, s.prototype.equals = function (e) {
          return 0 == this.compareTo(e);
        }, s.prototype.min = function (e) {
          return this.compareTo(e) < 0 ? this : e;
        }, s.prototype.max = function (e) {
          return this.compareTo(e) > 0 ? this : e;
        }, s.prototype.and = function (e) {
          var t = o();
          return this.bitwiseTo(e, w, t), t;
        }, s.prototype.or = function (e) {
          var t = o();
          return this.bitwiseTo(e, E, t), t;
        }, s.prototype.xor = function (e) {
          var t = o();
          return this.bitwiseTo(e, b, t), t;
        }, s.prototype.andNot = function (e) {
          var t = o();
          return this.bitwiseTo(e, v, t), t;
        }, s.prototype.not = function () {
          for (var e = o(), t = 0; t < this.t; ++t) e.data[t] = this.DM & ~this.data[t];
          return e.t = this.t, e.s = ~this.s, e;
        }, s.prototype.shiftLeft = function (e) {
          var t = o();
          return e < 0 ? this.rShiftTo(-e, t) : this.lShiftTo(e, t), t;
        }, s.prototype.shiftRight = function (e) {
          var t = o();
          return e < 0 ? this.lShiftTo(-e, t) : this.rShiftTo(e, t), t;
        }, s.prototype.getLowestSetBit = function () {
          for (var e = 0; e < this.t; ++e) if (0 != this.data[e]) return e * this.DB + _(this.data[e]);
          return this.s < 0 ? this.t * this.DB : -1;
        }, s.prototype.bitCount = function () {
          for (var e = 0, t = this.s & this.DM, r = 0; r < this.t; ++r) e += S(this.data[r] ^ t);
          return e;
        }, s.prototype.testBit = function (e) {
          var t = Math.floor(e / this.DB);
          return t >= this.t ? 0 != this.s : 0 != (this.data[t] & 1 << e % this.DB);
        }, s.prototype.setBit = function (e) {
          return this.changeBit(e, E);
        }, s.prototype.clearBit = function (e) {
          return this.changeBit(e, v);
        }, s.prototype.flipBit = function (e) {
          return this.changeBit(e, b);
        }, s.prototype.add = function (e) {
          var t = o();
          return this.addTo(e, t), t;
        }, s.prototype.subtract = function (e) {
          var t = o();
          return this.subTo(e, t), t;
        }, s.prototype.multiply = function (e) {
          var t = o();
          return this.multiplyTo(e, t), t;
        }, s.prototype.divide = function (e) {
          var t = o();
          return this.divRemTo(e, t, null), t;
        }, s.prototype.remainder = function (e) {
          var t = o();
          return this.divRemTo(e, null, t), t;
        }, s.prototype.divideAndRemainder = function (e) {
          var t = o(),
            r = o();
          return this.divRemTo(e, t, r), new Array(t, r);
        }, s.prototype.modPow = function (e, t) {
          var r,
            n,
            i = e.bitLength(),
            s = f(1);
          if (i <= 0) return s;
          r = i < 18 ? 1 : i < 48 ? 3 : i < 144 ? 4 : i < 768 ? 5 : 6, n = i < 8 ? new g(t) : t.isEven() ? new I(t) : new m(t);
          var a = new Array(),
            c = 3,
            l = r - 1,
            u = (1 << r) - 1;
          if (a[1] = n.convert(this), r > 1) {
            var h = o();
            for (n.sqrTo(a[1], h); c <= u;) a[c] = o(), n.mulTo(h, a[c - 2], a[c]), c += 2;
          }
          var d,
            p,
            w = e.t - 1,
            E = !0,
            b = o();
          for (i = y(e.data[w]) - 1; w >= 0;) {
            for (i >= l ? d = e.data[w] >> i - l & u : (d = (e.data[w] & (1 << i + 1) - 1) << l - i, w > 0 && (d |= e.data[w - 1] >> this.DB + i - l)), c = r; 0 == (1 & d);) d >>= 1, --c;
            if ((i -= c) < 0 && (i += this.DB, --w), E) a[d].copyTo(s), E = !1;else {
              for (; c > 1;) n.sqrTo(s, b), n.sqrTo(b, s), c -= 2;
              c > 0 ? n.sqrTo(s, b) : (p = s, s = b, b = p), n.mulTo(b, a[d], s);
            }
            for (; w >= 0 && 0 == (e.data[w] & 1 << i);) n.sqrTo(s, b), p = s, s = b, b = p, --i < 0 && (i = this.DB - 1, --w);
          }
          return n.revert(s);
        }, s.prototype.modInverse = function (e) {
          var t = e.isEven();
          if (this.isEven() && t || 0 == e.signum()) return s.ZERO;
          for (var r = e.clone(), n = this.clone(), i = f(1), o = f(0), a = f(0), c = f(1); 0 != r.signum();) {
            for (; r.isEven();) r.rShiftTo(1, r), t ? (i.isEven() && o.isEven() || (i.addTo(this, i), o.subTo(e, o)), i.rShiftTo(1, i)) : o.isEven() || o.subTo(e, o), o.rShiftTo(1, o);
            for (; n.isEven();) n.rShiftTo(1, n), t ? (a.isEven() && c.isEven() || (a.addTo(this, a), c.subTo(e, c)), a.rShiftTo(1, a)) : c.isEven() || c.subTo(e, c), c.rShiftTo(1, c);
            r.compareTo(n) >= 0 ? (r.subTo(n, r), t && i.subTo(a, i), o.subTo(c, o)) : (n.subTo(r, n), t && a.subTo(i, a), c.subTo(o, c));
          }
          return 0 != n.compareTo(s.ONE) ? s.ZERO : c.compareTo(e) >= 0 ? c.subtract(e) : c.signum() < 0 ? (c.addTo(e, c), c.signum() < 0 ? c.add(e) : c) : c;
        }, s.prototype.pow = function (e) {
          return this.exp(e, new C());
        }, s.prototype.gcd = function (e) {
          var t = this.s < 0 ? this.negate() : this.clone(),
            r = e.s < 0 ? e.negate() : e.clone();
          if (t.compareTo(r) < 0) {
            var n = t;
            t = r, r = n;
          }
          var i = t.getLowestSetBit(),
            s = r.getLowestSetBit();
          if (s < 0) return t;
          for (i < s && (s = i), s > 0 && (t.rShiftTo(s, t), r.rShiftTo(s, r)); t.signum() > 0;) (i = t.getLowestSetBit()) > 0 && t.rShiftTo(i, t), (i = r.getLowestSetBit()) > 0 && r.rShiftTo(i, r), t.compareTo(r) >= 0 ? (t.subTo(r, t), t.rShiftTo(1, t)) : (r.subTo(t, r), r.rShiftTo(1, r));
          return s > 0 && r.lShiftTo(s, r), r;
        }, s.prototype.isProbablePrime = function (e) {
          var t,
            r = this.abs();
          if (1 == r.t && r.data[0] <= T[T.length - 1]) {
            for (t = 0; t < T.length; ++t) if (r.data[0] == T[t]) return !0;
            return !1;
          }
          if (r.isEven()) return !1;
          for (t = 1; t < T.length;) {
            for (var n = T[t], i = t + 1; i < T.length && n < R;) n *= T[i++];
            for (n = r.modInt(n); t < i;) if (n % T[t++] == 0) return !1;
          }
          return r.millerRabin(e);
        };
      },
      8991: function _(e, t, r) {
        var n = r(3832);
        e.exports = n.md = n.md || {}, n.md.algorithms = n.md.algorithms || {};
      },
      6971: function _(e, t, r) {
        var n = r(3832);
        r(3453), e.exports = n.mgf = n.mgf || {}, n.mgf.mgf1 = n.mgf1;
      },
      3453: function _(e, t, r) {
        var n = r(3832);
        r(7116), n.mgf = n.mgf || {}, (e.exports = n.mgf.mgf1 = n.mgf1 = n.mgf1 || {}).create = function (e) {
          return {
            generate: function generate(t, r) {
              for (var i = new n.util.ByteBuffer(), s = Math.ceil(r / e.digestLength), o = 0; o < s; o++) {
                var a = new n.util.ByteBuffer();
                a.putInt32(o), e.start(), e.update(t + a.getBytes()), i.putBuffer(e.digest());
              }
              return i.truncate(i.length() - r), i.getBytes();
            }
          };
        };
      },
      6270: function _(e, t, r) {
        var n = r(3832);
        n.pki = n.pki || {};
        var i = e.exports = n.pki.oids = n.oids = n.oids || {};
        function s(e, t) {
          i[e] = t, i[t] = e;
        }
        function o(e, t) {
          i[e] = t;
        }
        s("1.2.840.113549.1.1.1", "rsaEncryption"), s("1.2.840.113549.1.1.4", "md5WithRSAEncryption"), s("1.2.840.113549.1.1.5", "sha1WithRSAEncryption"), s("1.2.840.113549.1.1.7", "RSAES-OAEP"), s("1.2.840.113549.1.1.8", "mgf1"), s("1.2.840.113549.1.1.9", "pSpecified"), s("1.2.840.113549.1.1.10", "RSASSA-PSS"), s("1.2.840.113549.1.1.11", "sha256WithRSAEncryption"), s("1.2.840.113549.1.1.12", "sha384WithRSAEncryption"), s("1.2.840.113549.1.1.13", "sha512WithRSAEncryption"), s("1.3.101.112", "EdDSA25519"), s("1.2.840.10040.4.3", "dsa-with-sha1"), s("1.3.14.3.2.7", "desCBC"), s("1.3.14.3.2.26", "sha1"), s("1.3.14.3.2.29", "sha1WithRSASignature"), s("2.16.840.1.101.3.4.2.1", "sha256"), s("2.16.840.1.101.3.4.2.2", "sha384"), s("2.16.840.1.101.3.4.2.3", "sha512"), s("2.16.840.1.101.3.4.2.4", "sha224"), s("2.16.840.1.101.3.4.2.5", "sha512-224"), s("2.16.840.1.101.3.4.2.6", "sha512-256"), s("1.2.840.113549.2.2", "md2"), s("1.2.840.113549.2.5", "md5"), s("1.2.840.113549.1.7.1", "data"), s("1.2.840.113549.1.7.2", "signedData"), s("1.2.840.113549.1.7.3", "envelopedData"), s("1.2.840.113549.1.7.4", "signedAndEnvelopedData"), s("1.2.840.113549.1.7.5", "digestedData"), s("1.2.840.113549.1.7.6", "encryptedData"), s("1.2.840.113549.1.9.1", "emailAddress"), s("1.2.840.113549.1.9.2", "unstructuredName"), s("1.2.840.113549.1.9.3", "contentType"), s("1.2.840.113549.1.9.4", "messageDigest"), s("1.2.840.113549.1.9.5", "signingTime"), s("1.2.840.113549.1.9.6", "counterSignature"), s("1.2.840.113549.1.9.7", "challengePassword"), s("1.2.840.113549.1.9.8", "unstructuredAddress"), s("1.2.840.113549.1.9.14", "extensionRequest"), s("1.2.840.113549.1.9.20", "friendlyName"), s("1.2.840.113549.1.9.21", "localKeyId"), s("1.2.840.113549.1.9.22.1", "x509Certificate"), s("1.2.840.113549.1.12.10.1.1", "keyBag"), s("1.2.840.113549.1.12.10.1.2", "pkcs8ShroudedKeyBag"), s("1.2.840.113549.1.12.10.1.3", "certBag"), s("1.2.840.113549.1.12.10.1.4", "crlBag"), s("1.2.840.113549.1.12.10.1.5", "secretBag"), s("1.2.840.113549.1.12.10.1.6", "safeContentsBag"), s("1.2.840.113549.1.5.13", "pkcs5PBES2"), s("1.2.840.113549.1.5.12", "pkcs5PBKDF2"), s("1.2.840.113549.1.12.1.1", "pbeWithSHAAnd128BitRC4"), s("1.2.840.113549.1.12.1.2", "pbeWithSHAAnd40BitRC4"), s("1.2.840.113549.1.12.1.3", "pbeWithSHAAnd3-KeyTripleDES-CBC"), s("1.2.840.113549.1.12.1.4", "pbeWithSHAAnd2-KeyTripleDES-CBC"), s("1.2.840.113549.1.12.1.5", "pbeWithSHAAnd128BitRC2-CBC"), s("1.2.840.113549.1.12.1.6", "pbewithSHAAnd40BitRC2-CBC"), s("1.2.840.113549.2.7", "hmacWithSHA1"), s("1.2.840.113549.2.8", "hmacWithSHA224"), s("1.2.840.113549.2.9", "hmacWithSHA256"), s("1.2.840.113549.2.10", "hmacWithSHA384"), s("1.2.840.113549.2.11", "hmacWithSHA512"), s("1.2.840.113549.3.7", "des-EDE3-CBC"), s("2.16.840.1.101.3.4.1.2", "aes128-CBC"), s("2.16.840.1.101.3.4.1.22", "aes192-CBC"), s("2.16.840.1.101.3.4.1.42", "aes256-CBC"), s("2.5.4.3", "commonName"), s("2.5.4.4", "surname"), s("2.5.4.5", "serialNumber"), s("2.5.4.6", "countryName"), s("2.5.4.7", "localityName"), s("2.5.4.8", "stateOrProvinceName"), s("2.5.4.9", "streetAddress"), s("2.5.4.10", "organizationName"), s("2.5.4.11", "organizationalUnitName"), s("2.5.4.12", "title"), s("2.5.4.13", "description"), s("2.5.4.15", "businessCategory"), s("2.5.4.17", "postalCode"), s("2.5.4.42", "givenName"), s("1.3.6.1.4.1.311.60.2.1.2", "jurisdictionOfIncorporationStateOrProvinceName"), s("1.3.6.1.4.1.311.60.2.1.3", "jurisdictionOfIncorporationCountryName"), s("2.16.840.1.113730.1.1", "nsCertType"), s("2.16.840.1.113730.1.13", "nsComment"), o("2.5.29.1", "authorityKeyIdentifier"), o("2.5.29.2", "keyAttributes"), o("2.5.29.3", "certificatePolicies"), o("2.5.29.4", "keyUsageRestriction"), o("2.5.29.5", "policyMapping"), o("2.5.29.6", "subtreesConstraint"), o("2.5.29.7", "subjectAltName"), o("2.5.29.8", "issuerAltName"), o("2.5.29.9", "subjectDirectoryAttributes"), o("2.5.29.10", "basicConstraints"), o("2.5.29.11", "nameConstraints"), o("2.5.29.12", "policyConstraints"), o("2.5.29.13", "basicConstraints"), s("2.5.29.14", "subjectKeyIdentifier"), s("2.5.29.15", "keyUsage"), o("2.5.29.16", "privateKeyUsagePeriod"), s("2.5.29.17", "subjectAltName"), s("2.5.29.18", "issuerAltName"), s("2.5.29.19", "basicConstraints"), o("2.5.29.20", "cRLNumber"), o("2.5.29.21", "cRLReason"), o("2.5.29.22", "expirationDate"), o("2.5.29.23", "instructionCode"), o("2.5.29.24", "invalidityDate"), o("2.5.29.25", "cRLDistributionPoints"), o("2.5.29.26", "issuingDistributionPoint"), o("2.5.29.27", "deltaCRLIndicator"), o("2.5.29.28", "issuingDistributionPoint"), o("2.5.29.29", "certificateIssuer"), o("2.5.29.30", "nameConstraints"), s("2.5.29.31", "cRLDistributionPoints"), s("2.5.29.32", "certificatePolicies"), o("2.5.29.33", "policyMappings"), o("2.5.29.34", "policyConstraints"), s("2.5.29.35", "authorityKeyIdentifier"), o("2.5.29.36", "policyConstraints"), s("2.5.29.37", "extKeyUsage"), o("2.5.29.46", "freshestCRL"), o("2.5.29.54", "inhibitAnyPolicy"), s("1.3.6.1.4.1.11129.2.4.2", "timestampList"), s("1.3.6.1.5.5.7.1.1", "authorityInfoAccess"), s("1.3.6.1.5.5.7.3.1", "serverAuth"), s("1.3.6.1.5.5.7.3.2", "clientAuth"), s("1.3.6.1.5.5.7.3.3", "codeSigning"), s("1.3.6.1.5.5.7.3.4", "emailProtection"), s("1.3.6.1.5.5.7.3.8", "timeStamping");
      },
      7450: function _(e, t, r) {
        var n = r(3832);
        if (r(8925), r(3068), r(3480), r(8991), r(6270), r(8960), r(6953), r(9563), r(9372), r(8095), r(7116), void 0 === i) var i = n.jsbn.BigInteger;
        var s = n.asn1,
          o = n.pki = n.pki || {};
        e.exports = o.pbe = n.pbe = n.pbe || {};
        var a = o.oids,
          c = {
            name: "EncryptedPrivateKeyInfo",
            tagClass: s.Class.UNIVERSAL,
            type: s.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "EncryptedPrivateKeyInfo.encryptionAlgorithm",
              tagClass: s.Class.UNIVERSAL,
              type: s.Type.SEQUENCE,
              constructed: !0,
              value: [{
                name: "AlgorithmIdentifier.algorithm",
                tagClass: s.Class.UNIVERSAL,
                type: s.Type.OID,
                constructed: !1,
                capture: "encryptionOid"
              }, {
                name: "AlgorithmIdentifier.parameters",
                tagClass: s.Class.UNIVERSAL,
                type: s.Type.SEQUENCE,
                constructed: !0,
                captureAsn1: "encryptionParams"
              }]
            }, {
              name: "EncryptedPrivateKeyInfo.encryptedData",
              tagClass: s.Class.UNIVERSAL,
              type: s.Type.OCTETSTRING,
              constructed: !1,
              capture: "encryptedData"
            }]
          },
          l = {
            name: "PBES2Algorithms",
            tagClass: s.Class.UNIVERSAL,
            type: s.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "PBES2Algorithms.keyDerivationFunc",
              tagClass: s.Class.UNIVERSAL,
              type: s.Type.SEQUENCE,
              constructed: !0,
              value: [{
                name: "PBES2Algorithms.keyDerivationFunc.oid",
                tagClass: s.Class.UNIVERSAL,
                type: s.Type.OID,
                constructed: !1,
                capture: "kdfOid"
              }, {
                name: "PBES2Algorithms.params",
                tagClass: s.Class.UNIVERSAL,
                type: s.Type.SEQUENCE,
                constructed: !0,
                value: [{
                  name: "PBES2Algorithms.params.salt",
                  tagClass: s.Class.UNIVERSAL,
                  type: s.Type.OCTETSTRING,
                  constructed: !1,
                  capture: "kdfSalt"
                }, {
                  name: "PBES2Algorithms.params.iterationCount",
                  tagClass: s.Class.UNIVERSAL,
                  type: s.Type.INTEGER,
                  constructed: !1,
                  capture: "kdfIterationCount"
                }, {
                  name: "PBES2Algorithms.params.keyLength",
                  tagClass: s.Class.UNIVERSAL,
                  type: s.Type.INTEGER,
                  constructed: !1,
                  optional: !0,
                  capture: "keyLength"
                }, {
                  name: "PBES2Algorithms.params.prf",
                  tagClass: s.Class.UNIVERSAL,
                  type: s.Type.SEQUENCE,
                  constructed: !0,
                  optional: !0,
                  value: [{
                    name: "PBES2Algorithms.params.prf.algorithm",
                    tagClass: s.Class.UNIVERSAL,
                    type: s.Type.OID,
                    constructed: !1,
                    capture: "prfOid"
                  }]
                }]
              }]
            }, {
              name: "PBES2Algorithms.encryptionScheme",
              tagClass: s.Class.UNIVERSAL,
              type: s.Type.SEQUENCE,
              constructed: !0,
              value: [{
                name: "PBES2Algorithms.encryptionScheme.oid",
                tagClass: s.Class.UNIVERSAL,
                type: s.Type.OID,
                constructed: !1,
                capture: "encOid"
              }, {
                name: "PBES2Algorithms.encryptionScheme.iv",
                tagClass: s.Class.UNIVERSAL,
                type: s.Type.OCTETSTRING,
                constructed: !1,
                capture: "encIv"
              }]
            }]
          },
          u = {
            name: "pkcs-12PbeParams",
            tagClass: s.Class.UNIVERSAL,
            type: s.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "pkcs-12PbeParams.salt",
              tagClass: s.Class.UNIVERSAL,
              type: s.Type.OCTETSTRING,
              constructed: !1,
              capture: "salt"
            }, {
              name: "pkcs-12PbeParams.iterations",
              tagClass: s.Class.UNIVERSAL,
              type: s.Type.INTEGER,
              constructed: !1,
              capture: "iterations"
            }]
          };
        function h(e, t) {
          return e.start().update(t).digest().getBytes();
        }
        function d(e) {
          var t;
          if (e) {
            if (!(t = o.oids[s.derToOid(e)])) {
              var r = new Error("Unsupported PRF OID.");
              throw r.oid = e, r.supported = ["hmacWithSHA1", "hmacWithSHA224", "hmacWithSHA256", "hmacWithSHA384", "hmacWithSHA512"], r;
            }
          } else t = "hmacWithSHA1";
          return p(t);
        }
        function p(e) {
          var t = n.md;
          switch (e) {
            case "hmacWithSHA224":
              t = n.md.sha512;
            case "hmacWithSHA1":
            case "hmacWithSHA256":
            case "hmacWithSHA384":
            case "hmacWithSHA512":
              e = e.substr(8).toLowerCase();
              break;
            default:
              var r = new Error("Unsupported PRF algorithm.");
              throw r.algorithm = e, r.supported = ["hmacWithSHA1", "hmacWithSHA224", "hmacWithSHA256", "hmacWithSHA384", "hmacWithSHA512"], r;
          }
          if (!t || !(e in t)) throw new Error("Unknown hash algorithm: " + e);
          return t[e].create();
        }
        o.encryptPrivateKeyInfo = function (e, t, r) {
          (r = r || {}).saltSize = r.saltSize || 8, r.count = r.count || 2048, r.algorithm = r.algorithm || "aes128", r.prfAlgorithm = r.prfAlgorithm || "sha1";
          var i,
            c,
            l,
            u = n.random.getBytesSync(r.saltSize),
            h = r.count,
            d = s.integerToDer(h);
          if (0 === r.algorithm.indexOf("aes") || "des" === r.algorithm) {
            var f, y, g;
            switch (r.algorithm) {
              case "aes128":
                i = 16, f = 16, y = a["aes128-CBC"], g = n.aes.createEncryptionCipher;
                break;
              case "aes192":
                i = 24, f = 16, y = a["aes192-CBC"], g = n.aes.createEncryptionCipher;
                break;
              case "aes256":
                i = 32, f = 16, y = a["aes256-CBC"], g = n.aes.createEncryptionCipher;
                break;
              case "des":
                i = 8, f = 8, y = a.desCBC, g = n.des.createEncryptionCipher;
                break;
              default:
                throw (_ = new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm = r.algorithm, _;
            }
            var m = "hmacWith" + r.prfAlgorithm.toUpperCase(),
              w = p(m),
              E = n.pkcs5.pbkdf2(t, u, h, i, w),
              b = n.random.getBytesSync(f);
            (S = g(E)).start(b), S.update(s.toDer(e)), S.finish(), l = S.output.getBytes();
            var v = function (e, t, r, i) {
              var a = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, e), s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, t.getBytes())]);
              return "hmacWithSHA1" !== i && a.value.push(s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, n.util.hexToBytes(r.toString(16))), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(o.oids[i]).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.NULL, !1, "")])), a;
            }(u, d, i, m);
            c = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(a.pkcs5PBES2).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(a.pkcs5PBKDF2).getBytes()), v]), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(y).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, b)])])]);
          } else {
            var _;
            if ("3des" !== r.algorithm) throw (_ = new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm = r.algorithm, _;
            i = 24;
            var S,
              C = new n.util.ByteBuffer(u);
            E = o.pbe.generatePkcs12Key(t, C, 1, h, i), b = o.pbe.generatePkcs12Key(t, C, 2, h, i), (S = n.des.createEncryptionCipher(E)).start(b), S.update(s.toDer(e)), S.finish(), l = S.output.getBytes(), c = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, u), s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, d.getBytes())])]);
          }
          return s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [c, s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, l)]);
        }, o.decryptPrivateKeyInfo = function (e, t) {
          var r = null,
            i = {},
            a = [];
          if (!s.validate(e, c, i, a)) {
            var l = new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");
            throw l.errors = a, l;
          }
          var u = s.derToOid(i.encryptionOid),
            h = o.pbe.getCipher(u, i.encryptionParams, t),
            d = n.util.createBuffer(i.encryptedData);
          return h.update(d), h.finish() && (r = s.fromDer(h.output)), r;
        }, o.encryptedPrivateKeyToPem = function (e, t) {
          var r = {
            type: "ENCRYPTED PRIVATE KEY",
            body: s.toDer(e).getBytes()
          };
          return n.pem.encode(r, {
            maxline: t
          });
        }, o.encryptedPrivateKeyFromPem = function (e) {
          var t = n.pem.decode(e)[0];
          if ("ENCRYPTED PRIVATE KEY" !== t.type) {
            var r = new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');
            throw r.headerType = t.type, r;
          }
          if (t.procType && "ENCRYPTED" === t.procType.type) throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");
          return s.fromDer(t.body);
        }, o.encryptRsaPrivateKey = function (e, t, r) {
          if (!(r = r || {}).legacy) {
            var i = o.wrapRsaPrivateKey(o.privateKeyToAsn1(e));
            return i = o.encryptPrivateKeyInfo(i, t, r), o.encryptedPrivateKeyToPem(i);
          }
          var a, c, l, u;
          switch (r.algorithm) {
            case "aes128":
              a = "AES-128-CBC", l = 16, c = n.random.getBytesSync(16), u = n.aes.createEncryptionCipher;
              break;
            case "aes192":
              a = "AES-192-CBC", l = 24, c = n.random.getBytesSync(16), u = n.aes.createEncryptionCipher;
              break;
            case "aes256":
              a = "AES-256-CBC", l = 32, c = n.random.getBytesSync(16), u = n.aes.createEncryptionCipher;
              break;
            case "3des":
              a = "DES-EDE3-CBC", l = 24, c = n.random.getBytesSync(8), u = n.des.createEncryptionCipher;
              break;
            case "des":
              a = "DES-CBC", l = 8, c = n.random.getBytesSync(8), u = n.des.createEncryptionCipher;
              break;
            default:
              var h = new Error('Could not encrypt RSA private key; unsupported encryption algorithm "' + r.algorithm + '".');
              throw h.algorithm = r.algorithm, h;
          }
          var d = u(n.pbe.opensslDeriveBytes(t, c.substr(0, 8), l));
          d.start(c), d.update(s.toDer(o.privateKeyToAsn1(e))), d.finish();
          var p = {
            type: "RSA PRIVATE KEY",
            procType: {
              version: "4",
              type: "ENCRYPTED"
            },
            dekInfo: {
              algorithm: a,
              parameters: n.util.bytesToHex(c).toUpperCase()
            },
            body: d.output.getBytes()
          };
          return n.pem.encode(p);
        }, o.decryptRsaPrivateKey = function (e, t) {
          var r = null,
            i = n.pem.decode(e)[0];
          if ("ENCRYPTED PRIVATE KEY" !== i.type && "PRIVATE KEY" !== i.type && "RSA PRIVATE KEY" !== i.type) throw (l = new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType = l, l;
          if (i.procType && "ENCRYPTED" === i.procType.type) {
            var a, c;
            switch (i.dekInfo.algorithm) {
              case "DES-CBC":
                a = 8, c = n.des.createDecryptionCipher;
                break;
              case "DES-EDE3-CBC":
                a = 24, c = n.des.createDecryptionCipher;
                break;
              case "AES-128-CBC":
                a = 16, c = n.aes.createDecryptionCipher;
                break;
              case "AES-192-CBC":
                a = 24, c = n.aes.createDecryptionCipher;
                break;
              case "AES-256-CBC":
                a = 32, c = n.aes.createDecryptionCipher;
                break;
              case "RC2-40-CBC":
                a = 5, c = function c(e) {
                  return n.rc2.createDecryptionCipher(e, 40);
                };
                break;
              case "RC2-64-CBC":
                a = 8, c = function c(e) {
                  return n.rc2.createDecryptionCipher(e, 64);
                };
                break;
              case "RC2-128-CBC":
                a = 16, c = function c(e) {
                  return n.rc2.createDecryptionCipher(e, 128);
                };
                break;
              default:
                var l;
                throw (l = new Error('Could not decrypt private key; unsupported encryption algorithm "' + i.dekInfo.algorithm + '".')).algorithm = i.dekInfo.algorithm, l;
            }
            var u = n.util.hexToBytes(i.dekInfo.parameters),
              h = c(n.pbe.opensslDeriveBytes(t, u.substr(0, 8), a));
            if (h.start(u), h.update(n.util.createBuffer(i.body)), !h.finish()) return r;
            r = h.output.getBytes();
          } else r = i.body;
          return null !== (r = "ENCRYPTED PRIVATE KEY" === i.type ? o.decryptPrivateKeyInfo(s.fromDer(r), t) : s.fromDer(r)) && (r = o.privateKeyFromAsn1(r)), r;
        }, o.pbe.generatePkcs12Key = function (e, t, r, i, s, o) {
          var a, c;
          if (null == o) {
            if (!("sha1" in n.md)) throw new Error('"sha1" hash algorithm unavailable.');
            o = n.md.sha1.create();
          }
          var l = o.digestLength,
            u = o.blockLength,
            h = new n.util.ByteBuffer(),
            d = new n.util.ByteBuffer();
          if (null != e) {
            for (c = 0; c < e.length; c++) d.putInt16(e.charCodeAt(c));
            d.putInt16(0);
          }
          var p = d.length(),
            f = t.length(),
            y = new n.util.ByteBuffer();
          y.fillWithByte(r, u);
          var g = u * Math.ceil(f / u),
            m = new n.util.ByteBuffer();
          for (c = 0; c < g; c++) m.putByte(t.at(c % f));
          var w = u * Math.ceil(p / u),
            E = new n.util.ByteBuffer();
          for (c = 0; c < w; c++) E.putByte(d.at(c % p));
          var b = m;
          b.putBuffer(E);
          for (var v = Math.ceil(s / l), _ = 1; _ <= v; _++) {
            var S = new n.util.ByteBuffer();
            S.putBytes(y.bytes()), S.putBytes(b.bytes());
            for (var C = 0; C < i; C++) o.start(), o.update(S.getBytes()), S = o.digest();
            var A = new n.util.ByteBuffer();
            for (c = 0; c < u; c++) A.putByte(S.at(c % l));
            var I = Math.ceil(f / u) + Math.ceil(p / u),
              T = new n.util.ByteBuffer();
            for (a = 0; a < I; a++) {
              var R = new n.util.ByteBuffer(b.getBytes(u)),
                k = 511;
              for (c = A.length() - 1; c >= 0; c--) k >>= 8, k += A.at(c) + R.at(c), R.setAt(c, 255 & k);
              T.putBuffer(R);
            }
            b = T, h.putBuffer(S);
          }
          return h.truncate(h.length() - s), h;
        }, o.pbe.getCipher = function (e, t, r) {
          switch (e) {
            case o.oids.pkcs5PBES2:
              return o.pbe.getCipherForPBES2(e, t, r);
            case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:
            case o.oids["pbewithSHAAnd40BitRC2-CBC"]:
              return o.pbe.getCipherForPKCS12PBE(e, t, r);
            default:
              var n = new Error("Cannot read encrypted PBE data block. Unsupported OID.");
              throw n.oid = e, n.supportedOids = ["pkcs5PBES2", "pbeWithSHAAnd3-KeyTripleDES-CBC", "pbewithSHAAnd40BitRC2-CBC"], n;
          }
        }, o.pbe.getCipherForPBES2 = function (e, t, r) {
          var i,
            a = {},
            c = [];
          if (!s.validate(t, l, a, c)) throw (i = new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors = c, i;
          if ((e = s.derToOid(a.kdfOid)) !== o.oids.pkcs5PBKDF2) throw (i = new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid = e, i.supportedOids = ["pkcs5PBKDF2"], i;
          if ((e = s.derToOid(a.encOid)) !== o.oids["aes128-CBC"] && e !== o.oids["aes192-CBC"] && e !== o.oids["aes256-CBC"] && e !== o.oids["des-EDE3-CBC"] && e !== o.oids.desCBC) throw (i = new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid = e, i.supportedOids = ["aes128-CBC", "aes192-CBC", "aes256-CBC", "des-EDE3-CBC", "desCBC"], i;
          var u,
            h,
            p = a.kdfSalt,
            f = n.util.createBuffer(a.kdfIterationCount);
          switch (f = f.getInt(f.length() << 3), o.oids[e]) {
            case "aes128-CBC":
              u = 16, h = n.aes.createDecryptionCipher;
              break;
            case "aes192-CBC":
              u = 24, h = n.aes.createDecryptionCipher;
              break;
            case "aes256-CBC":
              u = 32, h = n.aes.createDecryptionCipher;
              break;
            case "des-EDE3-CBC":
              u = 24, h = n.des.createDecryptionCipher;
              break;
            case "desCBC":
              u = 8, h = n.des.createDecryptionCipher;
          }
          var y = d(a.prfOid),
            g = n.pkcs5.pbkdf2(r, p, f, u, y),
            m = a.encIv,
            w = h(g);
          return w.start(m), w;
        }, o.pbe.getCipherForPKCS12PBE = function (e, t, r) {
          var i = {},
            a = [];
          if (!s.validate(t, u, i, a)) throw (y = new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors = a, y;
          var c,
            l,
            h,
            p = n.util.createBuffer(i.salt),
            f = n.util.createBuffer(i.iterations);
          switch (f = f.getInt(f.length() << 3), e) {
            case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:
              c = 24, l = 8, h = n.des.startDecrypting;
              break;
            case o.oids["pbewithSHAAnd40BitRC2-CBC"]:
              c = 5, l = 8, h = function h(e, t) {
                var r = n.rc2.createDecryptionCipher(e, 40);
                return r.start(t, null), r;
              };
              break;
            default:
              var y;
              throw (y = new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid = e, y;
          }
          var g = d(i.prfOid),
            m = o.pbe.generatePkcs12Key(r, p, 1, f, c, g);
          return g.start(), h(m, o.pbe.generatePkcs12Key(r, p, 2, f, l, g));
        }, o.pbe.opensslDeriveBytes = function (e, t, r, i) {
          if (null == i) {
            if (!("md5" in n.md)) throw new Error('"md5" hash algorithm unavailable.');
            i = n.md.md5.create();
          }
          null === t && (t = "");
          for (var s = [h(i, e + t)], o = 16, a = 1; o < r; ++a, o += 16) s.push(h(i, s[a - 1] + e + t));
          return s.join("").substr(0, r);
        };
      },
      8960: function _(e, t, r) {
        var n = r(3832);
        r(6607), r(8991), r(7116);
        var i,
          s = n.pkcs5 = n.pkcs5 || {};
        n.util.isNodejs && !n.options.usePureJavaScript && (i = r(5819)), e.exports = n.pbkdf2 = s.pbkdf2 = function (e, t, r, s, o, a) {
          if ("function" == typeof o && (a = o, o = null), n.util.isNodejs && !n.options.usePureJavaScript && i.pbkdf2 && (null === o || "object" != _typeof(o)) && (i.pbkdf2Sync.length > 4 || !o || "sha1" === o)) return "string" != typeof o && (o = "sha1"), e = Buffer.from(e, "binary"), t = Buffer.from(t, "binary"), a ? 4 === i.pbkdf2Sync.length ? i.pbkdf2(e, t, r, s, function (e, t) {
            if (e) return a(e);
            a(null, t.toString("binary"));
          }) : i.pbkdf2(e, t, r, s, o, function (e, t) {
            if (e) return a(e);
            a(null, t.toString("binary"));
          }) : 4 === i.pbkdf2Sync.length ? i.pbkdf2Sync(e, t, r, s).toString("binary") : i.pbkdf2Sync(e, t, r, s, o).toString("binary");
          if (null == o && (o = "sha1"), "string" == typeof o) {
            if (!(o in n.md.algorithms)) throw new Error("Unknown hash algorithm: " + o);
            o = n.md[o].create();
          }
          var c = o.digestLength;
          if (s > 4294967295 * c) {
            var l = new Error("Derived key is too long.");
            if (a) return a(l);
            throw l;
          }
          var u = Math.ceil(s / c),
            h = s - (u - 1) * c,
            d = n.hmac.create();
          d.start(o, e);
          var p,
            f,
            y,
            g = "";
          if (!a) {
            for (var m = 1; m <= u; ++m) {
              d.start(null, null), d.update(t), d.update(n.util.int32ToBytes(m)), p = y = d.digest().getBytes();
              for (var w = 2; w <= r; ++w) d.start(null, null), d.update(y), f = d.digest().getBytes(), p = n.util.xorBytes(p, f, c), y = f;
              g += m < u ? p : p.substr(0, h);
            }
            return g;
          }
          function E() {
            if (m > u) return a(null, g);
            d.start(null, null), d.update(t), d.update(n.util.int32ToBytes(m)), p = y = d.digest().getBytes(), w = 2, b();
          }
          function b() {
            if (w <= r) return d.start(null, null), d.update(y), f = d.digest().getBytes(), p = n.util.xorBytes(p, f, c), y = f, ++w, n.util.setImmediate(b);
            g += m < u ? p : p.substr(0, h), ++m, E();
          }
          m = 1, E();
        };
      },
      6953: function _(e, t, r) {
        var n = r(3832);
        r(7116);
        var i = e.exports = n.pem = n.pem || {};
        function s(e) {
          for (var t = e.name + ": ", r = [], n = function n(e, t) {
              return " " + t;
            }, i = 0; i < e.values.length; ++i) r.push(e.values[i].replace(/^(\S+\r\n)/, n));
          t += r.join(",") + "\r\n";
          var s = 0,
            o = -1;
          for (i = 0; i < t.length; ++i, ++s) if (s > 65 && -1 !== o) {
            var a = t[o];
            "," === a ? (++o, t = t.substr(0, o) + "\r\n " + t.substr(o)) : t = t.substr(0, o) + "\r\n" + a + t.substr(o + 1), s = i - o - 1, o = -1, ++i;
          } else " " !== t[i] && "\t" !== t[i] && "," !== t[i] || (o = i);
          return t;
        }
        function o(e) {
          return e.replace(/^\s+/, "");
        }
        i.encode = function (e, t) {
          t = t || {};
          var r,
            i = "-----BEGIN " + e.type + "-----\r\n";
          if (e.procType && (i += s(r = {
            name: "Proc-Type",
            values: [String(e.procType.version), e.procType.type]
          })), e.contentDomain && (i += s(r = {
            name: "Content-Domain",
            values: [e.contentDomain]
          })), e.dekInfo && (r = {
            name: "DEK-Info",
            values: [e.dekInfo.algorithm]
          }, e.dekInfo.parameters && r.values.push(e.dekInfo.parameters), i += s(r)), e.headers) for (var o = 0; o < e.headers.length; ++o) i += s(e.headers[o]);
          return e.procType && (i += "\r\n"), (i += n.util.encode64(e.body, t.maxline || 64) + "\r\n") + "-----END " + e.type + "-----\r\n";
        }, i.decode = function (e) {
          for (var t, r = [], i = /\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g, s = /([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/, a = /\r?\n/; t = i.exec(e);) {
            var c = t[1];
            "NEW CERTIFICATE REQUEST" === c && (c = "CERTIFICATE REQUEST");
            var l = {
              type: c,
              procType: null,
              contentDomain: null,
              dekInfo: null,
              headers: [],
              body: n.util.decode64(t[3])
            };
            if (r.push(l), t[2]) {
              for (var u = t[2].split(a), h = 0; t && h < u.length;) {
                for (var d = u[h].replace(/\s+$/, ""), p = h + 1; p < u.length; ++p) {
                  var f = u[p];
                  if (!/\s/.test(f[0])) break;
                  d += f, h = p;
                }
                if (t = d.match(s)) {
                  for (var y = {
                      name: t[1],
                      values: []
                    }, g = t[2].split(","), m = 0; m < g.length; ++m) y.values.push(o(g[m]));
                  if (l.procType) {
                    if (l.contentDomain || "Content-Domain" !== y.name) {
                      if (l.dekInfo || "DEK-Info" !== y.name) l.headers.push(y);else {
                        if (0 === y.values.length) throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');
                        l.dekInfo = {
                          algorithm: g[0],
                          parameters: g[1] || null
                        };
                      }
                    } else l.contentDomain = g[0] || "";
                  } else {
                    if ("Proc-Type" !== y.name) throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');
                    if (2 !== y.values.length) throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');
                    l.procType = {
                      version: g[0],
                      type: g[1]
                    };
                  }
                }
                ++h;
              }
              if ("ENCRYPTED" === l.procType && !l.dekInfo) throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".');
            }
          }
          if (0 === r.length) throw new Error("Invalid PEM formatted message.");
          return r;
        };
      },
      8936: function _(e, t, r) {
        var n = r(3832);
        r(7116), r(9563), r(137);
        var i = e.exports = n.pkcs1 = n.pkcs1 || {};
        function s(e, t, r) {
          r || (r = n.md.sha1.create());
          for (var i = "", s = Math.ceil(t / r.digestLength), o = 0; o < s; ++o) {
            var a = String.fromCharCode(o >> 24 & 255, o >> 16 & 255, o >> 8 & 255, 255 & o);
            r.start(), r.update(e + a), i += r.digest().getBytes();
          }
          return i.substring(0, t);
        }
        i.encode_rsa_oaep = function (e, t, r) {
          var i, o, a, c;
          "string" == typeof r ? (i = r, o = arguments[3] || void 0, a = arguments[4] || void 0) : r && (i = r.label || void 0, o = r.seed || void 0, a = r.md || void 0, r.mgf1 && r.mgf1.md && (c = r.mgf1.md)), a ? a.start() : a = n.md.sha1.create(), c || (c = a);
          var l = Math.ceil(e.n.bitLength() / 8),
            u = l - 2 * a.digestLength - 2;
          if (t.length > u) throw (g = new Error("RSAES-OAEP input message length is too long.")).length = t.length, g.maxLength = u, g;
          i || (i = ""), a.update(i, "raw");
          for (var h = a.digest(), d = "", p = u - t.length, f = 0; f < p; f++) d += "\0";
          var y = h.getBytes() + d + "" + t;
          if (o) {
            if (o.length !== a.digestLength) {
              var g;
              throw (g = new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength = o.length, g.digestLength = a.digestLength, g;
            }
          } else o = n.random.getBytes(a.digestLength);
          var m = s(o, l - a.digestLength - 1, c),
            w = n.util.xorBytes(y, m, y.length),
            E = s(w, a.digestLength, c);
          return "\0" + n.util.xorBytes(o, E, o.length) + w;
        }, i.decode_rsa_oaep = function (e, t, r) {
          var i, o, a;
          "string" == typeof r ? (i = r, o = arguments[3] || void 0) : r && (i = r.label || void 0, o = r.md || void 0, r.mgf1 && r.mgf1.md && (a = r.mgf1.md));
          var c = Math.ceil(e.n.bitLength() / 8);
          if (t.length !== c) throw (m = new Error("RSAES-OAEP encoded message length is invalid.")).length = t.length, m.expectedLength = c, m;
          if (void 0 === o ? o = n.md.sha1.create() : o.start(), a || (a = o), c < 2 * o.digestLength + 2) throw new Error("RSAES-OAEP key is too short for the hash function.");
          i || (i = ""), o.update(i, "raw");
          for (var l = o.digest().getBytes(), u = t.charAt(0), h = t.substring(1, o.digestLength + 1), d = t.substring(1 + o.digestLength), p = s(d, o.digestLength, a), f = s(n.util.xorBytes(h, p, h.length), c - o.digestLength - 1, a), y = n.util.xorBytes(d, f, d.length), g = y.substring(0, o.digestLength), m = "\0" !== u, w = 0; w < o.digestLength; ++w) m |= l.charAt(w) !== g.charAt(w);
          for (var E = 1, b = o.digestLength, v = o.digestLength; v < y.length; v++) {
            var _ = y.charCodeAt(v);
            m |= _ & (E ? 65534 : 0), b += E &= 1 & _ ^ 1;
          }
          if (m || 1 !== y.charCodeAt(b)) throw new Error("Invalid RSAES-OAEP padding.");
          return y.substring(b + 1);
        };
      },
      9437: function _(e, t, r) {
        var n = r(3832);
        r(8925), r(3068), r(3480), r(6270), r(6953), r(5496), r(9563), r(7116), r(5414);
        var i = n.asn1,
          s = e.exports = n.pkcs7 = n.pkcs7 || {};
        function o(e) {
          var t = {},
            r = [];
          if (!i.validate(e, s.asn1.recipientInfoValidator, t, r)) {
            var o = new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");
            throw o.errors = r, o;
          }
          return {
            version: t.version.charCodeAt(0),
            issuer: n.pki.RDNAttributesAsArray(t.issuer),
            serialNumber: n.util.createBuffer(t.serial).toHex(),
            encryptedContent: {
              algorithm: i.derToOid(t.encAlgorithm),
              parameter: t.encParameter ? t.encParameter.value : void 0,
              content: t.encKey
            }
          };
        }
        function a(e) {
          for (var t, r = [], s = 0; s < e.length; ++s) r.push((t = e[s], i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, i.integerToDer(t.version).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [n.pki.distinguishedNameToAsn1({
            attributes: t.issuer
          }), i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, n.util.hexToBytes(t.serialNumber))]), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(t.encryptedContent.algorithm).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.NULL, !1, "")]), i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, t.encryptedContent.content)])));
          return r;
        }
        function c(e) {
          var t = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, i.integerToDer(e.version).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [n.pki.distinguishedNameToAsn1({
            attributes: e.issuer
          }), i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, n.util.hexToBytes(e.serialNumber))]), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(e.digestAlgorithm).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.NULL, !1, "")])]);
          if (e.authenticatedAttributesAsn1 && t.value.push(e.authenticatedAttributesAsn1), t.value.push(i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(e.signatureAlgorithm).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.NULL, !1, "")])), t.value.push(i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, e.signature)), e.unauthenticatedAttributes.length > 0) {
            for (var r = i.create(i.Class.CONTEXT_SPECIFIC, 1, !0, []), s = 0; s < e.unauthenticatedAttributes.length; ++s) {
              var o = e.unauthenticatedAttributes[s];
              r.values.push(l(o));
            }
            t.value.push(r);
          }
          return t;
        }
        function l(e) {
          var t;
          if (e.type === n.pki.oids.contentType) t = i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(e.value).getBytes());else if (e.type === n.pki.oids.messageDigest) t = i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, e.value.bytes());else if (e.type === n.pki.oids.signingTime) {
            var r = new Date("1950-01-01T00:00:00Z"),
              s = new Date("2050-01-01T00:00:00Z"),
              o = e.value;
            if ("string" == typeof o) {
              var a = Date.parse(o);
              o = isNaN(a) ? 13 === o.length ? i.utcTimeToDate(o) : i.generalizedTimeToDate(o) : new Date(a);
            }
            t = o >= r && o < s ? i.create(i.Class.UNIVERSAL, i.Type.UTCTIME, !1, i.dateToUtcTime(o)) : i.create(i.Class.UNIVERSAL, i.Type.GENERALIZEDTIME, !1, i.dateToGeneralizedTime(o));
          }
          return i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(e.type).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SET, !0, [t])]);
        }
        function u(e, t, r) {
          var s = {};
          if (!i.validate(t, r, s, [])) {
            var o = new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");
            throw o.errors = o, o;
          }
          if (i.derToOid(s.contentType) !== n.pki.oids.data) throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");
          if (s.encryptedContent) {
            var a = "";
            if (n.util.isArray(s.encryptedContent)) for (var c = 0; c < s.encryptedContent.length; ++c) {
              if (s.encryptedContent[c].type !== i.Type.OCTETSTRING) throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");
              a += s.encryptedContent[c].value;
            } else a = s.encryptedContent;
            e.encryptedContent = {
              algorithm: i.derToOid(s.encAlgorithm),
              parameter: n.util.createBuffer(s.encParameter.value),
              content: n.util.createBuffer(a)
            };
          }
          if (s.content) {
            if (a = "", n.util.isArray(s.content)) for (c = 0; c < s.content.length; ++c) {
              if (s.content[c].type !== i.Type.OCTETSTRING) throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");
              a += s.content[c].value;
            } else a = s.content;
            e.content = n.util.createBuffer(a);
          }
          return e.version = s.version.charCodeAt(0), e.rawCapture = s, s;
        }
        function h(e) {
          if (void 0 === e.encryptedContent.key) throw new Error("Symmetric key not available.");
          if (void 0 === e.content) {
            var t;
            switch (e.encryptedContent.algorithm) {
              case n.pki.oids["aes128-CBC"]:
              case n.pki.oids["aes192-CBC"]:
              case n.pki.oids["aes256-CBC"]:
                t = n.aes.createDecryptionCipher(e.encryptedContent.key);
                break;
              case n.pki.oids.desCBC:
              case n.pki.oids["des-EDE3-CBC"]:
                t = n.des.createDecryptionCipher(e.encryptedContent.key);
                break;
              default:
                throw new Error("Unsupported symmetric cipher, OID " + e.encryptedContent.algorithm);
            }
            if (t.start(e.encryptedContent.parameter), t.update(e.encryptedContent.content), !t.finish()) throw new Error("Symmetric decryption failed.");
            e.content = t.output;
          }
        }
        s.messageFromPem = function (e) {
          var t = n.pem.decode(e)[0];
          if ("PKCS7" !== t.type) {
            var r = new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');
            throw r.headerType = t.type, r;
          }
          if (t.procType && "ENCRYPTED" === t.procType.type) throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");
          var o = i.fromDer(t.body);
          return s.messageFromAsn1(o);
        }, s.messageToPem = function (e, t) {
          var r = {
            type: "PKCS7",
            body: i.toDer(e.toAsn1()).getBytes()
          };
          return n.pem.encode(r, {
            maxline: t
          });
        }, s.messageFromAsn1 = function (e) {
          var t = {},
            r = [];
          if (!i.validate(e, s.asn1.contentInfoValidator, t, r)) {
            var o = new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");
            throw o.errors = r, o;
          }
          var a,
            c = i.derToOid(t.contentType);
          switch (c) {
            case n.pki.oids.envelopedData:
              a = s.createEnvelopedData();
              break;
            case n.pki.oids.encryptedData:
              a = s.createEncryptedData();
              break;
            case n.pki.oids.signedData:
              a = s.createSignedData();
              break;
            default:
              throw new Error("Cannot read PKCS#7 message. ContentType with OID " + c + " is not (yet) supported.");
          }
          return a.fromAsn1(t.content.value[0]), a;
        }, s.createSignedData = function () {
          var e = null;
          return e = {
            type: n.pki.oids.signedData,
            version: 1,
            certificates: [],
            crls: [],
            signers: [],
            digestAlgorithmIdentifiers: [],
            contentInfo: null,
            signerInfos: [],
            fromAsn1: function fromAsn1(t) {
              if (u(e, t, s.asn1.signedDataValidator), e.certificates = [], e.crls = [], e.digestAlgorithmIdentifiers = [], e.contentInfo = null, e.signerInfos = [], e.rawCapture.certificates) for (var r = e.rawCapture.certificates.value, i = 0; i < r.length; ++i) e.certificates.push(n.pki.certificateFromAsn1(r[i]));
            },
            toAsn1: function toAsn1() {
              e.contentInfo || e.sign();
              for (var t = [], r = 0; r < e.certificates.length; ++r) t.push(n.pki.certificateToAsn1(e.certificates[r]));
              var s = [],
                o = i.create(i.Class.CONTEXT_SPECIFIC, 0, !0, [i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, i.integerToDer(e.version).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SET, !0, e.digestAlgorithmIdentifiers), e.contentInfo])]);
              return t.length > 0 && o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC, 0, !0, t)), s.length > 0 && o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC, 1, !0, s)), o.value[0].value.push(i.create(i.Class.UNIVERSAL, i.Type.SET, !0, e.signerInfos)), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(e.type).getBytes()), o]);
            },
            addSigner: function addSigner(t) {
              var r = t.issuer,
                i = t.serialNumber;
              if (t.certificate) {
                var s = t.certificate;
                "string" == typeof s && (s = n.pki.certificateFromPem(s)), r = s.issuer.attributes, i = s.serialNumber;
              }
              var o = t.key;
              if (!o) throw new Error("Could not add PKCS#7 signer; no private key specified.");
              "string" == typeof o && (o = n.pki.privateKeyFromPem(o));
              var a = t.digestAlgorithm || n.pki.oids.sha1;
              switch (a) {
                case n.pki.oids.sha1:
                case n.pki.oids.sha256:
                case n.pki.oids.sha384:
                case n.pki.oids.sha512:
                case n.pki.oids.md5:
                  break;
                default:
                  throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: " + a);
              }
              var c = t.authenticatedAttributes || [];
              if (c.length > 0) {
                for (var l = !1, u = !1, h = 0; h < c.length; ++h) {
                  var d = c[h];
                  if (l || d.type !== n.pki.oids.contentType) {
                    if (u || d.type !== n.pki.oids.messageDigest) ;else if (u = !0, l) break;
                  } else if (l = !0, u) break;
                }
                if (!l || !u) throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.");
              }
              e.signers.push({
                key: o,
                version: 1,
                issuer: r,
                serialNumber: i,
                digestAlgorithm: a,
                signatureAlgorithm: n.pki.oids.rsaEncryption,
                signature: null,
                authenticatedAttributes: c,
                unauthenticatedAttributes: []
              });
            },
            sign: function sign(t) {
              var r;
              t = t || {}, ("object" != _typeof(e.content) || null === e.contentInfo) && (e.contentInfo = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(n.pki.oids.data).getBytes())]), "content" in e && (e.content instanceof n.util.ByteBuffer ? r = e.content.bytes() : "string" == typeof e.content && (r = n.util.encodeUtf8(e.content)), t.detached ? e.detachedContent = i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, r) : e.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC, 0, !0, [i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, r)])))), 0 !== e.signers.length && function (t) {
                var r;
                if (!(r = e.detachedContent ? e.detachedContent : (r = e.contentInfo.value[1]).value[0])) throw new Error("Could not sign PKCS#7 message; there is no content to sign.");
                var s = i.derToOid(e.contentInfo.value[0].value),
                  o = i.toDer(r);
                for (var a in o.getByte(), i.getBerValueLength(o), o = o.getBytes(), t) t[a].start().update(o);
                for (var u = new Date(), h = 0; h < e.signers.length; ++h) {
                  var d = e.signers[h];
                  if (0 === d.authenticatedAttributes.length) {
                    if (s !== n.pki.oids.data) throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.");
                  } else {
                    d.authenticatedAttributesAsn1 = i.create(i.Class.CONTEXT_SPECIFIC, 0, !0, []);
                    for (var p = i.create(i.Class.UNIVERSAL, i.Type.SET, !0, []), f = 0; f < d.authenticatedAttributes.length; ++f) {
                      var y = d.authenticatedAttributes[f];
                      y.type === n.pki.oids.messageDigest ? y.value = t[d.digestAlgorithm].digest() : y.type === n.pki.oids.signingTime && (y.value || (y.value = u)), p.value.push(l(y)), d.authenticatedAttributesAsn1.value.push(l(y));
                    }
                    o = i.toDer(p).getBytes(), d.md.start().update(o);
                  }
                  d.signature = d.key.sign(d.md, "RSASSA-PKCS1-V1_5");
                }
                e.signerInfos = function (e) {
                  for (var t = [], r = 0; r < e.length; ++r) t.push(c(e[r]));
                  return t;
                }(e.signers);
              }(function () {
                for (var t = {}, r = 0; r < e.signers.length; ++r) {
                  var s = e.signers[r];
                  (o = s.digestAlgorithm) in t || (t[o] = n.md[n.pki.oids[o]].create()), 0 === s.authenticatedAttributes.length ? s.md = t[o] : s.md = n.md[n.pki.oids[o]].create();
                }
                for (var o in e.digestAlgorithmIdentifiers = [], t) e.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(o).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.NULL, !1, "")]));
                return t;
              }());
            },
            verify: function verify() {
              throw new Error("PKCS#7 signature verification not yet implemented.");
            },
            addCertificate: function addCertificate(t) {
              "string" == typeof t && (t = n.pki.certificateFromPem(t)), e.certificates.push(t);
            },
            addCertificateRevokationList: function addCertificateRevokationList(e) {
              throw new Error("PKCS#7 CRL support not yet implemented.");
            }
          };
        }, s.createEncryptedData = function () {
          var e = null;
          return e = {
            type: n.pki.oids.encryptedData,
            version: 0,
            encryptedContent: {
              algorithm: n.pki.oids["aes256-CBC"]
            },
            fromAsn1: function fromAsn1(t) {
              u(e, t, s.asn1.encryptedDataValidator);
            },
            decrypt: function decrypt(t) {
              void 0 !== t && (e.encryptedContent.key = t), h(e);
            }
          };
        }, s.createEnvelopedData = function () {
          var e = null;
          return e = {
            type: n.pki.oids.envelopedData,
            version: 0,
            recipients: [],
            encryptedContent: {
              algorithm: n.pki.oids["aes256-CBC"]
            },
            fromAsn1: function fromAsn1(t) {
              var r = u(e, t, s.asn1.envelopedDataValidator);
              e.recipients = function (e) {
                for (var t = [], r = 0; r < e.length; ++r) t.push(o(e[r]));
                return t;
              }(r.recipientInfos.value);
            },
            toAsn1: function toAsn1() {
              return i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(e.type).getBytes()), i.create(i.Class.CONTEXT_SPECIFIC, 0, !0, [i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, i.integerToDer(e.version).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SET, !0, a(e.recipients)), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, (t = e.encryptedContent, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(n.pki.oids.data).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(t.algorithm).getBytes()), t.parameter ? i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, t.parameter.getBytes()) : void 0]), i.create(i.Class.CONTEXT_SPECIFIC, 0, !0, [i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, t.content.getBytes())])]))])])]);
              var t;
            },
            findRecipient: function findRecipient(t) {
              for (var r = t.issuer.attributes, n = 0; n < e.recipients.length; ++n) {
                var i = e.recipients[n],
                  s = i.issuer;
                if (i.serialNumber === t.serialNumber && s.length === r.length) {
                  for (var o = !0, a = 0; a < r.length; ++a) if (s[a].type !== r[a].type || s[a].value !== r[a].value) {
                    o = !1;
                    break;
                  }
                  if (o) return i;
                }
              }
              return null;
            },
            decrypt: function decrypt(t, r) {
              if (void 0 === e.encryptedContent.key && void 0 !== t && void 0 !== r) switch (t.encryptedContent.algorithm) {
                case n.pki.oids.rsaEncryption:
                case n.pki.oids.desCBC:
                  var i = r.decrypt(t.encryptedContent.content);
                  e.encryptedContent.key = n.util.createBuffer(i);
                  break;
                default:
                  throw new Error("Unsupported asymmetric cipher, OID " + t.encryptedContent.algorithm);
              }
              h(e);
            },
            addRecipient: function addRecipient(t) {
              e.recipients.push({
                version: 0,
                issuer: t.issuer.attributes,
                serialNumber: t.serialNumber,
                encryptedContent: {
                  algorithm: n.pki.oids.rsaEncryption,
                  key: t.publicKey
                }
              });
            },
            encrypt: function encrypt(t, r) {
              if (void 0 === e.encryptedContent.content) {
                var i, s, o;
                switch (r = r || e.encryptedContent.algorithm, t = t || e.encryptedContent.key, r) {
                  case n.pki.oids["aes128-CBC"]:
                    i = 16, s = 16, o = n.aes.createEncryptionCipher;
                    break;
                  case n.pki.oids["aes192-CBC"]:
                    i = 24, s = 16, o = n.aes.createEncryptionCipher;
                    break;
                  case n.pki.oids["aes256-CBC"]:
                    i = 32, s = 16, o = n.aes.createEncryptionCipher;
                    break;
                  case n.pki.oids["des-EDE3-CBC"]:
                    i = 24, s = 8, o = n.des.createEncryptionCipher;
                    break;
                  default:
                    throw new Error("Unsupported symmetric cipher, OID " + r);
                }
                if (void 0 === t) t = n.util.createBuffer(n.random.getBytes(i));else if (t.length() != i) throw new Error("Symmetric key has wrong length; got " + t.length() + " bytes, expected " + i + ".");
                e.encryptedContent.algorithm = r, e.encryptedContent.key = t, e.encryptedContent.parameter = n.util.createBuffer(n.random.getBytes(s));
                var a = o(t);
                if (a.start(e.encryptedContent.parameter.copy()), a.update(e.content), !a.finish()) throw new Error("Symmetric encryption failed.");
                e.encryptedContent.content = a.output;
              }
              for (var c = 0; c < e.recipients.length; ++c) {
                var l = e.recipients[c];
                if (void 0 === l.encryptedContent.content) {
                  if (l.encryptedContent.algorithm !== n.pki.oids.rsaEncryption) throw new Error("Unsupported asymmetric cipher, OID " + l.encryptedContent.algorithm);
                  l.encryptedContent.content = l.encryptedContent.key.encrypt(e.encryptedContent.key.data);
                }
              }
            }
          };
        };
      },
      5496: function _(e, t, r) {
        var n = r(3832);
        r(3068), r(7116);
        var i = n.asn1,
          s = e.exports = n.pkcs7asn1 = n.pkcs7asn1 || {};
        n.pkcs7 = n.pkcs7 || {}, n.pkcs7.asn1 = s;
        var o = {
          name: "ContentInfo",
          tagClass: i.Class.UNIVERSAL,
          type: i.Type.SEQUENCE,
          constructed: !0,
          value: [{
            name: "ContentInfo.ContentType",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.OID,
            constructed: !1,
            capture: "contentType"
          }, {
            name: "ContentInfo.content",
            tagClass: i.Class.CONTEXT_SPECIFIC,
            type: 0,
            constructed: !0,
            optional: !0,
            captureAsn1: "content"
          }]
        };
        s.contentInfoValidator = o;
        var a = {
          name: "EncryptedContentInfo",
          tagClass: i.Class.UNIVERSAL,
          type: i.Type.SEQUENCE,
          constructed: !0,
          value: [{
            name: "EncryptedContentInfo.contentType",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.OID,
            constructed: !1,
            capture: "contentType"
          }, {
            name: "EncryptedContentInfo.contentEncryptionAlgorithm",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.OID,
              constructed: !1,
              capture: "encAlgorithm"
            }, {
              name: "EncryptedContentInfo.contentEncryptionAlgorithm.parameter",
              tagClass: i.Class.UNIVERSAL,
              captureAsn1: "encParameter"
            }]
          }, {
            name: "EncryptedContentInfo.encryptedContent",
            tagClass: i.Class.CONTEXT_SPECIFIC,
            type: 0,
            capture: "encryptedContent",
            captureAsn1: "encryptedContentAsn1"
          }]
        };
        s.envelopedDataValidator = {
          name: "EnvelopedData",
          tagClass: i.Class.UNIVERSAL,
          type: i.Type.SEQUENCE,
          constructed: !0,
          value: [{
            name: "EnvelopedData.Version",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.INTEGER,
            constructed: !1,
            capture: "version"
          }, {
            name: "EnvelopedData.RecipientInfos",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SET,
            constructed: !0,
            captureAsn1: "recipientInfos"
          }].concat(a)
        }, s.encryptedDataValidator = {
          name: "EncryptedData",
          tagClass: i.Class.UNIVERSAL,
          type: i.Type.SEQUENCE,
          constructed: !0,
          value: [{
            name: "EncryptedData.Version",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.INTEGER,
            constructed: !1,
            capture: "version"
          }].concat(a)
        };
        var c = {
          name: "SignerInfo",
          tagClass: i.Class.UNIVERSAL,
          type: i.Type.SEQUENCE,
          constructed: !0,
          value: [{
            name: "SignerInfo.version",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.INTEGER,
            constructed: !1
          }, {
            name: "SignerInfo.issuerAndSerialNumber",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "SignerInfo.issuerAndSerialNumber.issuer",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.SEQUENCE,
              constructed: !0,
              captureAsn1: "issuer"
            }, {
              name: "SignerInfo.issuerAndSerialNumber.serialNumber",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.INTEGER,
              constructed: !1,
              capture: "serial"
            }]
          }, {
            name: "SignerInfo.digestAlgorithm",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "SignerInfo.digestAlgorithm.algorithm",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.OID,
              constructed: !1,
              capture: "digestAlgorithm"
            }, {
              name: "SignerInfo.digestAlgorithm.parameter",
              tagClass: i.Class.UNIVERSAL,
              constructed: !1,
              captureAsn1: "digestParameter",
              optional: !0
            }]
          }, {
            name: "SignerInfo.authenticatedAttributes",
            tagClass: i.Class.CONTEXT_SPECIFIC,
            type: 0,
            constructed: !0,
            optional: !0,
            capture: "authenticatedAttributes"
          }, {
            name: "SignerInfo.digestEncryptionAlgorithm",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SEQUENCE,
            constructed: !0,
            capture: "signatureAlgorithm"
          }, {
            name: "SignerInfo.encryptedDigest",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.OCTETSTRING,
            constructed: !1,
            capture: "signature"
          }, {
            name: "SignerInfo.unauthenticatedAttributes",
            tagClass: i.Class.CONTEXT_SPECIFIC,
            type: 1,
            constructed: !0,
            optional: !0,
            capture: "unauthenticatedAttributes"
          }]
        };
        s.signedDataValidator = {
          name: "SignedData",
          tagClass: i.Class.UNIVERSAL,
          type: i.Type.SEQUENCE,
          constructed: !0,
          value: [{
            name: "SignedData.Version",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.INTEGER,
            constructed: !1,
            capture: "version"
          }, {
            name: "SignedData.DigestAlgorithms",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SET,
            constructed: !0,
            captureAsn1: "digestAlgorithms"
          }, o, {
            name: "SignedData.Certificates",
            tagClass: i.Class.CONTEXT_SPECIFIC,
            type: 0,
            optional: !0,
            captureAsn1: "certificates"
          }, {
            name: "SignedData.CertificateRevocationLists",
            tagClass: i.Class.CONTEXT_SPECIFIC,
            type: 1,
            optional: !0,
            captureAsn1: "crls"
          }, {
            name: "SignedData.SignerInfos",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SET,
            capture: "signerInfos",
            optional: !0,
            value: [c]
          }]
        }, s.recipientInfoValidator = {
          name: "RecipientInfo",
          tagClass: i.Class.UNIVERSAL,
          type: i.Type.SEQUENCE,
          constructed: !0,
          value: [{
            name: "RecipientInfo.version",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.INTEGER,
            constructed: !1,
            capture: "version"
          }, {
            name: "RecipientInfo.issuerAndSerial",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "RecipientInfo.issuerAndSerial.issuer",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.SEQUENCE,
              constructed: !0,
              captureAsn1: "issuer"
            }, {
              name: "RecipientInfo.issuerAndSerial.serialNumber",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.INTEGER,
              constructed: !1,
              capture: "serial"
            }]
          }, {
            name: "RecipientInfo.keyEncryptionAlgorithm",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "RecipientInfo.keyEncryptionAlgorithm.algorithm",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.OID,
              constructed: !1,
              capture: "encAlgorithm"
            }, {
              name: "RecipientInfo.keyEncryptionAlgorithm.parameter",
              tagClass: i.Class.UNIVERSAL,
              constructed: !1,
              captureAsn1: "encParameter",
              optional: !0
            }]
          }, {
            name: "RecipientInfo.encryptedKey",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.OCTETSTRING,
            constructed: !1,
            capture: "encKey"
          }]
        };
      },
      9654: function _(e, t, r) {
        var n = r(3832);
        r(7116), r(5764), r(9563), function () {
          if (n.prime) e.exports = n.prime;else {
            var t = e.exports = n.prime = n.prime || {},
              r = n.jsbn.BigInteger,
              i = [6, 4, 2, 4, 2, 4, 6, 2],
              s = new r(null);
            s.fromInt(30);
            var o = function o(e, t) {
              return e | t;
            };
            t.generateProbablePrime = function (e, t, i) {
              "function" == typeof t && (i = t, t = {});
              var s = (t = t || {}).algorithm || "PRIMEINC";
              "string" == typeof s && (s = {
                name: s
              }), s.options = s.options || {};
              var o = t.prng || n.random,
                c = {
                  nextBytes: function nextBytes(e) {
                    for (var t = o.getBytesSync(e.length), r = 0; r < e.length; ++r) e[r] = t.charCodeAt(r);
                  }
                };
              if ("PRIMEINC" === s.name) return function (e, t, i, s) {
                return "workers" in i ? function (e, t, i, s) {
                  if ("undefined" == typeof Worker) return a(e, t, i, s);
                  var o = l(e, t),
                    c = i.workers,
                    u = i.workLoad || 100,
                    h = 30 * u / 8,
                    d = i.workerScript || "forge/prime.worker.js";
                  if (-1 === c) return n.util.estimateCores(function (e, t) {
                    e && (t = 2), c = t - 1, p();
                  });
                  function p() {
                    c = Math.max(1, c);
                    for (var n = [], i = 0; i < c; ++i) n[i] = new Worker(d);
                    for (i = 0; i < c; ++i) n[i].addEventListener("message", p);
                    var a = !1;
                    function p(i) {
                      if (!a) {
                        var c = i.data;
                        if (c.found) {
                          for (var d = 0; d < n.length; ++d) n[d].terminate();
                          return a = !0, s(null, new r(c.prime, 16));
                        }
                        o.bitLength() > e && (o = l(e, t));
                        var p = o.toString(16);
                        i.target.postMessage({
                          hex: p,
                          workLoad: u
                        }), o.dAddOffset(h, 0);
                      }
                    }
                  }
                  p();
                }(e, t, i, s) : a(e, t, i, s);
              }(e, c, s.options, i);
              throw new Error("Invalid prime generation algorithm: " + s.name);
            };
          }
          function a(e, t, r, n) {
            var i = l(e, t),
              s = function (e) {
                return e <= 100 ? 27 : e <= 150 ? 18 : e <= 200 ? 15 : e <= 250 ? 12 : e <= 300 ? 9 : e <= 350 ? 8 : e <= 400 ? 7 : e <= 500 ? 6 : e <= 600 ? 5 : e <= 800 ? 4 : e <= 1250 ? 3 : 2;
              }(i.bitLength());
            "millerRabinTests" in r && (s = r.millerRabinTests);
            var o = 10;
            "maxBlockTime" in r && (o = r.maxBlockTime), c(i, e, t, 0, s, o, n);
          }
          function c(e, t, r, s, o, a, u) {
            var h = +new Date();
            do {
              if (e.bitLength() > t && (e = l(t, r)), e.isProbablePrime(o)) return u(null, e);
              e.dAddOffset(i[s++ % 8], 0);
            } while (a < 0 || +new Date() - h < a);
            n.util.setImmediate(function () {
              c(e, t, r, s, o, a, u);
            });
          }
          function l(e, t) {
            var n = new r(e, t),
              i = e - 1;
            return n.testBit(i) || n.bitwiseTo(r.ONE.shiftLeft(i), o, n), n.dAddOffset(31 - n.mod(s).byteValue(), 0), n;
          }
        }();
      },
      4933: function _(e, t, r) {
        var n = r(3832);
        r(7116);
        var i = null;
        !n.util.isNodejs || n.options.usePureJavaScript || process.versions["node-webkit"] || (i = r(5819)), (e.exports = n.prng = n.prng || {}).create = function (e) {
          for (var t = {
              plugin: e,
              key: null,
              seed: null,
              time: null,
              reseeds: 0,
              generated: 0,
              keyBytes: ""
            }, r = e.md, s = new Array(32), o = 0; o < 32; ++o) s[o] = r.create();
          function a() {
            if (t.pools[0].messageLength >= 32) return c();
            var e = 32 - t.pools[0].messageLength << 5;
            t.collect(t.seedFileSync(e)), c();
          }
          function c() {
            t.reseeds = 4294967295 === t.reseeds ? 0 : t.reseeds + 1;
            var e = t.plugin.md.create();
            e.update(t.keyBytes);
            for (var r = 1, n = 0; n < 32; ++n) t.reseeds % r == 0 && (e.update(t.pools[n].digest().getBytes()), t.pools[n].start()), r <<= 1;
            t.keyBytes = e.digest().getBytes(), e.start(), e.update(t.keyBytes);
            var i = e.digest().getBytes();
            t.key = t.plugin.formatKey(t.keyBytes), t.seed = t.plugin.formatSeed(i), t.generated = 0;
          }
          function l(e) {
            var t = null,
              r = n.util.globalScope,
              i = r.crypto || r.msCrypto;
            i && i.getRandomValues && (t = function t(e) {
              return i.getRandomValues(e);
            });
            var s = n.util.createBuffer();
            if (t) for (; s.length() < e;) {
              var o = Math.max(1, Math.min(e - s.length(), 65536) / 4),
                a = new Uint32Array(Math.floor(o));
              try {
                t(a);
                for (var c = 0; c < a.length; ++c) s.putInt32(a[c]);
              } catch (e) {
                if (!("undefined" != typeof QuotaExceededError && e instanceof QuotaExceededError)) throw e;
              }
            }
            if (s.length() < e) for (var l, u, h, d = Math.floor(65536 * Math.random()); s.length() < e;) for (u = 16807 * (65535 & d), u += (32767 & (l = 16807 * (d >> 16))) << 16, d = 4294967295 & (u = (2147483647 & (u += l >> 15)) + (u >> 31)), c = 0; c < 3; ++c) h = d >>> (c << 3), h ^= Math.floor(256 * Math.random()), s.putByte(255 & h);
            return s.getBytes(e);
          }
          return t.pools = s, t.pool = 0, t.generate = function (e, r) {
            if (!r) return t.generateSync(e);
            var i = t.plugin.cipher,
              s = t.plugin.increment,
              o = t.plugin.formatKey,
              a = t.plugin.formatSeed,
              l = n.util.createBuffer();
            t.key = null, function u(h) {
              if (h) return r(h);
              if (l.length() >= e) return r(null, l.getBytes(e));
              if (t.generated > 1048575 && (t.key = null), null === t.key) return n.util.nextTick(function () {
                !function (e) {
                  if (t.pools[0].messageLength >= 32) return c(), e();
                  var r = 32 - t.pools[0].messageLength << 5;
                  t.seedFile(r, function (r, n) {
                    if (r) return e(r);
                    t.collect(n), c(), e();
                  });
                }(u);
              });
              var d = i(t.key, t.seed);
              t.generated += d.length, l.putBytes(d), t.key = o(i(t.key, s(t.seed))), t.seed = a(i(t.key, t.seed)), n.util.setImmediate(u);
            }();
          }, t.generateSync = function (e) {
            var r = t.plugin.cipher,
              i = t.plugin.increment,
              s = t.plugin.formatKey,
              o = t.plugin.formatSeed;
            t.key = null;
            for (var c = n.util.createBuffer(); c.length() < e;) {
              t.generated > 1048575 && (t.key = null), null === t.key && a();
              var l = r(t.key, t.seed);
              t.generated += l.length, c.putBytes(l), t.key = s(r(t.key, i(t.seed))), t.seed = o(r(t.key, t.seed));
            }
            return c.getBytes(e);
          }, i ? (t.seedFile = function (e, t) {
            i.randomBytes(e, function (e, r) {
              if (e) return t(e);
              t(null, r.toString());
            });
          }, t.seedFileSync = function (e) {
            return i.randomBytes(e).toString();
          }) : (t.seedFile = function (e, t) {
            try {
              t(null, l(e));
            } catch (e) {
              t(e);
            }
          }, t.seedFileSync = l), t.collect = function (e) {
            for (var r = e.length, n = 0; n < r; ++n) t.pools[t.pool].update(e.substr(n, 1)), t.pool = 31 === t.pool ? 0 : t.pool + 1;
          }, t.collectInt = function (e, r) {
            for (var n = "", i = 0; i < r; i += 8) n += String.fromCharCode(e >> i & 255);
            t.collect(n);
          }, t.registerWorker = function (e) {
            e === self ? t.seedFile = function (e, t) {
              self.addEventListener("message", function e(r) {
                var n = r.data;
                n.forge && n.forge.prng && (self.removeEventListener("message", e), t(n.forge.prng.err, n.forge.prng.bytes));
              }), self.postMessage({
                forge: {
                  prng: {
                    needed: e
                  }
                }
              });
            } : e.addEventListener("message", function (r) {
              var n = r.data;
              n.forge && n.forge.prng && t.seedFile(n.forge.prng.needed, function (t, r) {
                e.postMessage({
                  forge: {
                    prng: {
                      err: t,
                      bytes: r
                    }
                  }
                });
              });
            });
          }, t;
        };
      },
      6007: function _(e, t, r) {
        var n = r(3832);
        r(9563), r(7116), (e.exports = n.pss = n.pss || {}).create = function (e) {
          3 === arguments.length && (e = {
            md: arguments[0],
            mgf: arguments[1],
            saltLength: arguments[2]
          });
          var t,
            r = e.md,
            i = e.mgf,
            s = r.digestLength,
            o = e.salt || null;
          if ("string" == typeof o && (o = n.util.createBuffer(o)), "saltLength" in e) t = e.saltLength;else {
            if (null === o) throw new Error("Salt length not specified or specific salt not given.");
            t = o.length();
          }
          if (null !== o && o.length() !== t) throw new Error("Given salt length does not match length of given salt.");
          var a = e.prng || n.random;
          return {
            encode: function encode(e, c) {
              var l,
                u,
                h = c - 1,
                d = Math.ceil(h / 8),
                p = e.digest().getBytes();
              if (d < s + t + 2) throw new Error("Message is too long to encrypt.");
              u = null === o ? a.getBytesSync(t) : o.bytes();
              var f = new n.util.ByteBuffer();
              f.fillWithByte(0, 8), f.putBytes(p), f.putBytes(u), r.start(), r.update(f.getBytes());
              var y = r.digest().getBytes(),
                g = new n.util.ByteBuffer();
              g.fillWithByte(0, d - t - s - 2), g.putByte(1), g.putBytes(u);
              var m = g.getBytes(),
                w = d - s - 1,
                E = i.generate(y, w),
                b = "";
              for (l = 0; l < w; l++) b += String.fromCharCode(m.charCodeAt(l) ^ E.charCodeAt(l));
              var v = 65280 >> 8 * d - h & 255;
              return (b = String.fromCharCode(b.charCodeAt(0) & ~v) + b.substr(1)) + y + String.fromCharCode(188);
            },
            verify: function verify(e, o, a) {
              var c,
                l = a - 1,
                u = Math.ceil(l / 8);
              if (o = o.substr(-u), u < s + t + 2) throw new Error("Inconsistent parameters to PSS signature verification.");
              if (188 !== o.charCodeAt(u - 1)) throw new Error("Encoded message does not end in 0xBC.");
              var h = u - s - 1,
                d = o.substr(0, h),
                p = o.substr(h, s),
                f = 65280 >> 8 * u - l & 255;
              if (0 != (d.charCodeAt(0) & f)) throw new Error("Bits beyond keysize not zero as expected.");
              var y = i.generate(p, h),
                g = "";
              for (c = 0; c < h; c++) g += String.fromCharCode(d.charCodeAt(c) ^ y.charCodeAt(c));
              g = String.fromCharCode(g.charCodeAt(0) & ~f) + g.substr(1);
              var m = u - s - t - 2;
              for (c = 0; c < m; c++) if (0 !== g.charCodeAt(c)) throw new Error("Leftmost octets not zero as expected");
              if (1 !== g.charCodeAt(m)) throw new Error("Inconsistent PSS signature, 0x01 marker not found");
              var w = g.substr(-t),
                E = new n.util.ByteBuffer();
              return E.fillWithByte(0, 8), E.putBytes(e), E.putBytes(w), r.start(), r.update(E.getBytes()), p === r.digest().getBytes();
            }
          };
        };
      },
      9563: function _(e, t, r) {
        var n = r(3832);
        r(8925), r(1668), r(4933), r(7116), n.random && n.random.getBytes ? e.exports = n.random : function (t) {
          var r = {},
            i = new Array(4),
            s = n.util.createBuffer();
          function o() {
            var e = n.prng.create(r);
            return e.getBytes = function (t, r) {
              return e.generate(t, r);
            }, e.getBytesSync = function (t) {
              return e.generate(t);
            }, e;
          }
          r.formatKey = function (e) {
            var t = n.util.createBuffer(e);
            return (e = new Array(4))[0] = t.getInt32(), e[1] = t.getInt32(), e[2] = t.getInt32(), e[3] = t.getInt32(), n.aes._expandKey(e, !1);
          }, r.formatSeed = function (e) {
            var t = n.util.createBuffer(e);
            return (e = new Array(4))[0] = t.getInt32(), e[1] = t.getInt32(), e[2] = t.getInt32(), e[3] = t.getInt32(), e;
          }, r.cipher = function (e, t) {
            return n.aes._updateBlock(e, t, i, !1), s.putInt32(i[0]), s.putInt32(i[1]), s.putInt32(i[2]), s.putInt32(i[3]), s.getBytes();
          }, r.increment = function (e) {
            return ++e[3], e;
          }, r.md = n.md.sha256;
          var a = o(),
            c = null,
            l = n.util.globalScope,
            u = l.crypto || l.msCrypto;
          if (u && u.getRandomValues && (c = function c(e) {
            return u.getRandomValues(e);
          }), n.options.usePureJavaScript || !n.util.isNodejs && !c) {
            if ("undefined" == typeof window || window.document, a.collectInt(+new Date(), 32), "undefined" != typeof navigator) {
              var h = "";
              for (var d in navigator) try {
                "string" == typeof navigator[d] && (h += navigator[d]);
              } catch (e) {}
              a.collect(h), h = null;
            }
            t && (t().mousemove(function (e) {
              a.collectInt(e.clientX, 16), a.collectInt(e.clientY, 16);
            }), t().keypress(function (e) {
              a.collectInt(e.charCode, 8);
            }));
          }
          if (n.random) for (var d in a) n.random[d] = a[d];else n.random = a;
          n.random.createInstance = o, e.exports = n.random;
        }("undefined" != typeof jQuery ? jQuery : null);
      },
      9372: function _(e, t, r) {
        var n = r(3832);
        r(7116);
        var i = [217, 120, 249, 196, 25, 221, 181, 237, 40, 233, 253, 121, 74, 160, 216, 157, 198, 126, 55, 131, 43, 118, 83, 142, 98, 76, 100, 136, 68, 139, 251, 162, 23, 154, 89, 245, 135, 179, 79, 19, 97, 69, 109, 141, 9, 129, 125, 50, 189, 143, 64, 235, 134, 183, 123, 11, 240, 149, 33, 34, 92, 107, 78, 130, 84, 214, 101, 147, 206, 96, 178, 28, 115, 86, 192, 20, 167, 140, 241, 220, 18, 117, 202, 31, 59, 190, 228, 209, 66, 61, 212, 48, 163, 60, 182, 38, 111, 191, 14, 218, 70, 105, 7, 87, 39, 242, 29, 155, 188, 148, 67, 3, 248, 17, 199, 246, 144, 239, 62, 231, 6, 195, 213, 47, 200, 102, 30, 215, 8, 232, 234, 222, 128, 82, 238, 247, 132, 170, 114, 172, 53, 77, 106, 42, 150, 26, 210, 113, 90, 21, 73, 116, 75, 159, 208, 94, 4, 24, 164, 236, 194, 224, 65, 110, 15, 81, 203, 204, 36, 145, 175, 80, 161, 244, 112, 57, 153, 124, 58, 133, 35, 184, 180, 122, 252, 2, 54, 91, 37, 85, 151, 49, 45, 93, 250, 152, 227, 138, 146, 174, 5, 223, 41, 16, 103, 108, 186, 201, 211, 0, 230, 207, 225, 158, 168, 44, 99, 22, 1, 63, 88, 226, 137, 169, 13, 56, 52, 27, 171, 51, 255, 176, 187, 72, 12, 95, 185, 177, 205, 46, 197, 243, 219, 71, 229, 165, 156, 119, 10, 166, 32, 104, 254, 127, 193, 173],
          s = [1, 2, 3, 5],
          o = function o(e, t) {
            return e << t & 65535 | (65535 & e) >> 16 - t;
          },
          a = function a(e, t) {
            return (65535 & e) >> t | e << 16 - t & 65535;
          };
        e.exports = n.rc2 = n.rc2 || {}, n.rc2.expandKey = function (e, t) {
          "string" == typeof e && (e = n.util.createBuffer(e)), t = t || 128;
          var r,
            s = e,
            o = e.length(),
            a = t,
            c = Math.ceil(a / 8),
            l = 255 >> (7 & a);
          for (r = o; r < 128; r++) s.putByte(i[s.at(r - 1) + s.at(r - o) & 255]);
          for (s.setAt(128 - c, i[s.at(128 - c) & l]), r = 127 - c; r >= 0; r--) s.setAt(r, i[s.at(r + 1) ^ s.at(r + c)]);
          return s;
        };
        var c = function c(e, t, r) {
          var i,
            c,
            l,
            u,
            h = !1,
            d = null,
            p = null,
            f = null,
            y = [];
          for (e = n.rc2.expandKey(e, t), l = 0; l < 64; l++) y.push(e.getInt16Le());
          r ? (i = function i(e) {
            for (l = 0; l < 4; l++) e[l] += y[u] + (e[(l + 3) % 4] & e[(l + 2) % 4]) + (~e[(l + 3) % 4] & e[(l + 1) % 4]), e[l] = o(e[l], s[l]), u++;
          }, c = function c(e) {
            for (l = 0; l < 4; l++) e[l] += y[63 & e[(l + 3) % 4]];
          }) : (i = function i(e) {
            for (l = 3; l >= 0; l--) e[l] = a(e[l], s[l]), e[l] -= y[u] + (e[(l + 3) % 4] & e[(l + 2) % 4]) + (~e[(l + 3) % 4] & e[(l + 1) % 4]), u--;
          }, c = function c(e) {
            for (l = 3; l >= 0; l--) e[l] -= y[63 & e[(l + 3) % 4]];
          });
          var g = function g(e) {
              var t = [];
              for (l = 0; l < 4; l++) {
                var n = d.getInt16Le();
                null !== f && (r ? n ^= f.getInt16Le() : f.putInt16Le(n)), t.push(65535 & n);
              }
              u = r ? 0 : 63;
              for (var i = 0; i < e.length; i++) for (var s = 0; s < e[i][0]; s++) e[i][1](t);
              for (l = 0; l < 4; l++) null !== f && (r ? f.putInt16Le(t[l]) : t[l] ^= f.getInt16Le()), p.putInt16Le(t[l]);
            },
            m = null;
          return m = {
            start: function start(e, t) {
              e && "string" == typeof e && (e = n.util.createBuffer(e)), h = !1, d = n.util.createBuffer(), p = t || new n.util.createBuffer(), f = e, m.output = p;
            },
            update: function update(e) {
              for (h || d.putBuffer(e); d.length() >= 8;) g([[5, i], [1, c], [6, i], [1, c], [5, i]]);
            },
            finish: function finish(e) {
              var t = !0;
              if (r) if (e) t = e(8, d, !r);else {
                var n = 8 === d.length() ? 8 : 8 - d.length();
                d.fillWithByte(n, n);
              }
              if (t && (h = !0, m.update()), !r && (t = 0 === d.length())) if (e) t = e(8, p, !r);else {
                var i = p.length(),
                  s = p.at(i - 1);
                s > i ? t = !1 : p.truncate(s);
              }
              return t;
            }
          };
        };
        n.rc2.startEncrypting = function (e, t, r) {
          var i = n.rc2.createEncryptionCipher(e, 128);
          return i.start(t, r), i;
        }, n.rc2.createEncryptionCipher = function (e, t) {
          return c(e, t, !0);
        }, n.rc2.startDecrypting = function (e, t, r) {
          var i = n.rc2.createDecryptionCipher(e, 128);
          return i.start(t, r), i;
        }, n.rc2.createDecryptionCipher = function (e, t) {
          return c(e, t, !1);
        };
      },
      8095: function _(e, t, r) {
        var n = r(3832);
        if (r(3068), r(5764), r(6270), r(8936), r(9654), r(9563), r(7116), void 0 === i) var i = n.jsbn.BigInteger;
        var s = n.util.isNodejs ? r(5819) : null,
          o = n.asn1,
          a = n.util;
        n.pki = n.pki || {}, e.exports = n.pki.rsa = n.rsa = n.rsa || {};
        var c = n.pki,
          l = [6, 4, 2, 4, 2, 4, 6, 2],
          u = {
            name: "PrivateKeyInfo",
            tagClass: o.Class.UNIVERSAL,
            type: o.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "PrivateKeyInfo.version",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "privateKeyVersion"
            }, {
              name: "PrivateKeyInfo.privateKeyAlgorithm",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.SEQUENCE,
              constructed: !0,
              value: [{
                name: "AlgorithmIdentifier.algorithm",
                tagClass: o.Class.UNIVERSAL,
                type: o.Type.OID,
                constructed: !1,
                capture: "privateKeyOid"
              }]
            }, {
              name: "PrivateKeyInfo",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.OCTETSTRING,
              constructed: !1,
              capture: "privateKey"
            }]
          },
          h = {
            name: "RSAPrivateKey",
            tagClass: o.Class.UNIVERSAL,
            type: o.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "RSAPrivateKey.version",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "privateKeyVersion"
            }, {
              name: "RSAPrivateKey.modulus",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "privateKeyModulus"
            }, {
              name: "RSAPrivateKey.publicExponent",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "privateKeyPublicExponent"
            }, {
              name: "RSAPrivateKey.privateExponent",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "privateKeyPrivateExponent"
            }, {
              name: "RSAPrivateKey.prime1",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "privateKeyPrime1"
            }, {
              name: "RSAPrivateKey.prime2",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "privateKeyPrime2"
            }, {
              name: "RSAPrivateKey.exponent1",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "privateKeyExponent1"
            }, {
              name: "RSAPrivateKey.exponent2",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "privateKeyExponent2"
            }, {
              name: "RSAPrivateKey.coefficient",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "privateKeyCoefficient"
            }]
          },
          d = {
            name: "RSAPublicKey",
            tagClass: o.Class.UNIVERSAL,
            type: o.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "RSAPublicKey.modulus",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "publicKeyModulus"
            }, {
              name: "RSAPublicKey.exponent",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.INTEGER,
              constructed: !1,
              capture: "publicKeyExponent"
            }]
          },
          p = n.pki.rsa.publicKeyValidator = {
            name: "SubjectPublicKeyInfo",
            tagClass: o.Class.UNIVERSAL,
            type: o.Type.SEQUENCE,
            constructed: !0,
            captureAsn1: "subjectPublicKeyInfo",
            value: [{
              name: "SubjectPublicKeyInfo.AlgorithmIdentifier",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.SEQUENCE,
              constructed: !0,
              value: [{
                name: "AlgorithmIdentifier.algorithm",
                tagClass: o.Class.UNIVERSAL,
                type: o.Type.OID,
                constructed: !1,
                capture: "publicKeyOid"
              }]
            }, {
              name: "SubjectPublicKeyInfo.subjectPublicKey",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.BITSTRING,
              constructed: !1,
              value: [{
                name: "SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",
                tagClass: o.Class.UNIVERSAL,
                type: o.Type.SEQUENCE,
                constructed: !0,
                optional: !0,
                captureAsn1: "rsaPublicKey"
              }]
            }]
          },
          f = {
            name: "DigestInfo",
            tagClass: o.Class.UNIVERSAL,
            type: o.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "DigestInfo.DigestAlgorithm",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.SEQUENCE,
              constructed: !0,
              value: [{
                name: "DigestInfo.DigestAlgorithm.algorithmIdentifier",
                tagClass: o.Class.UNIVERSAL,
                type: o.Type.OID,
                constructed: !1,
                capture: "algorithmIdentifier"
              }, {
                name: "DigestInfo.DigestAlgorithm.parameters",
                tagClass: o.Class.UNIVERSAL,
                type: o.Type.NULL,
                capture: "parameters",
                optional: !0,
                constructed: !1
              }]
            }, {
              name: "DigestInfo.digest",
              tagClass: o.Class.UNIVERSAL,
              type: o.Type.OCTETSTRING,
              constructed: !1,
              capture: "digest"
            }]
          },
          y = function y(e) {
            var t;
            if (!(e.algorithm in c.oids)) {
              var r = new Error("Unknown message digest algorithm.");
              throw r.algorithm = e.algorithm, r;
            }
            t = c.oids[e.algorithm];
            var n = o.oidToDer(t).getBytes(),
              i = o.create(o.Class.UNIVERSAL, o.Type.SEQUENCE, !0, []),
              s = o.create(o.Class.UNIVERSAL, o.Type.SEQUENCE, !0, []);
            s.value.push(o.create(o.Class.UNIVERSAL, o.Type.OID, !1, n)), s.value.push(o.create(o.Class.UNIVERSAL, o.Type.NULL, !1, ""));
            var a = o.create(o.Class.UNIVERSAL, o.Type.OCTETSTRING, !1, e.digest().getBytes());
            return i.value.push(s), i.value.push(a), o.toDer(i).getBytes();
          },
          g = function g(e, t, r) {
            if (r) return e.modPow(t.e, t.n);
            if (!t.p || !t.q) return e.modPow(t.d, t.n);
            var s;
            t.dP || (t.dP = t.d.mod(t.p.subtract(i.ONE))), t.dQ || (t.dQ = t.d.mod(t.q.subtract(i.ONE))), t.qInv || (t.qInv = t.q.modInverse(t.p));
            do {
              s = new i(n.util.bytesToHex(n.random.getBytes(t.n.bitLength() / 8)), 16);
            } while (s.compareTo(t.n) >= 0 || !s.gcd(t.n).equals(i.ONE));
            for (var o = (e = e.multiply(s.modPow(t.e, t.n)).mod(t.n)).mod(t.p).modPow(t.dP, t.p), a = e.mod(t.q).modPow(t.dQ, t.q); o.compareTo(a) < 0;) o = o.add(t.p);
            var c = o.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);
            return c.multiply(s.modInverse(t.n)).mod(t.n);
          };
        function m(e, t, r) {
          var i = n.util.createBuffer(),
            s = Math.ceil(t.n.bitLength() / 8);
          if (e.length > s - 11) {
            var o = new Error("Message is too long for PKCS#1 v1.5 padding.");
            throw o.length = e.length, o.max = s - 11, o;
          }
          i.putByte(0), i.putByte(r);
          var a,
            c = s - 3 - e.length;
          if (0 === r || 1 === r) {
            a = 0 === r ? 0 : 255;
            for (var l = 0; l < c; ++l) i.putByte(a);
          } else for (; c > 0;) {
            var u = 0,
              h = n.random.getBytes(c);
            for (l = 0; l < c; ++l) 0 === (a = h.charCodeAt(l)) ? ++u : i.putByte(a);
            c = u;
          }
          return i.putByte(0), i.putBytes(e), i;
        }
        function w(e, t, r, i) {
          var s = Math.ceil(t.n.bitLength() / 8),
            o = n.util.createBuffer(e),
            a = o.getByte(),
            c = o.getByte();
          if (0 !== a || r && 0 !== c && 1 !== c || !r && 2 != c || r && 0 === c && void 0 === i) throw new Error("Encryption block is invalid.");
          var l = 0;
          if (0 === c) {
            l = s - 3 - i;
            for (var u = 0; u < l; ++u) if (0 !== o.getByte()) throw new Error("Encryption block is invalid.");
          } else if (1 === c) for (l = 0; o.length() > 1;) {
            if (255 !== o.getByte()) {
              --o.read;
              break;
            }
            ++l;
          } else if (2 === c) for (l = 0; o.length() > 1;) {
            if (0 === o.getByte()) {
              --o.read;
              break;
            }
            ++l;
          }
          if (0 !== o.getByte() || l !== s - 3 - o.length()) throw new Error("Encryption block is invalid.");
          return o.getBytes();
        }
        function E(e) {
          var t = e.toString(16);
          t[0] >= "8" && (t = "00" + t);
          var r = n.util.hexToBytes(t);
          return r.length > 1 && (0 === r.charCodeAt(0) && 0 == (128 & r.charCodeAt(1)) || 255 === r.charCodeAt(0) && 128 == (128 & r.charCodeAt(1))) ? r.substr(1) : r;
        }
        function b(e) {
          return e <= 100 ? 27 : e <= 150 ? 18 : e <= 200 ? 15 : e <= 250 ? 12 : e <= 300 ? 9 : e <= 350 ? 8 : e <= 400 ? 7 : e <= 500 ? 6 : e <= 600 ? 5 : e <= 800 ? 4 : e <= 1250 ? 3 : 2;
        }
        function v(e) {
          return n.util.isNodejs && "function" == typeof s[e];
        }
        function _(e) {
          return void 0 !== a.globalScope && "object" == _typeof(a.globalScope.crypto) && "object" == _typeof(a.globalScope.crypto.subtle) && "function" == typeof a.globalScope.crypto.subtle[e];
        }
        function S(e) {
          return void 0 !== a.globalScope && "object" == _typeof(a.globalScope.msCrypto) && "object" == _typeof(a.globalScope.msCrypto.subtle) && "function" == typeof a.globalScope.msCrypto.subtle[e];
        }
        function C(e) {
          for (var t = n.util.hexToBytes(e.toString(16)), r = new Uint8Array(t.length), i = 0; i < t.length; ++i) r[i] = t.charCodeAt(i);
          return r;
        }
        c.rsa.encrypt = function (e, t, r) {
          var s,
            o = r,
            a = Math.ceil(t.n.bitLength() / 8);
          !1 !== r && !0 !== r ? (o = 2 === r, s = m(e, t, r)) : (s = n.util.createBuffer()).putBytes(e);
          for (var c = new i(s.toHex(), 16), l = g(c, t, o).toString(16), u = n.util.createBuffer(), h = a - Math.ceil(l.length / 2); h > 0;) u.putByte(0), --h;
          return u.putBytes(n.util.hexToBytes(l)), u.getBytes();
        }, c.rsa.decrypt = function (e, t, r, s) {
          var o = Math.ceil(t.n.bitLength() / 8);
          if (e.length !== o) {
            var a = new Error("Encrypted message length is invalid.");
            throw a.length = e.length, a.expected = o, a;
          }
          var c = new i(n.util.createBuffer(e).toHex(), 16);
          if (c.compareTo(t.n) >= 0) throw new Error("Encrypted message is invalid.");
          for (var l = g(c, t, r).toString(16), u = n.util.createBuffer(), h = o - Math.ceil(l.length / 2); h > 0;) u.putByte(0), --h;
          return u.putBytes(n.util.hexToBytes(l)), !1 !== s ? w(u.getBytes(), t, r) : u.getBytes();
        }, c.rsa.createKeyPairGenerationState = function (e, t, r) {
          "string" == typeof e && (e = parseInt(e, 10)), e = e || 2048;
          var s,
            o = (r = r || {}).prng || n.random,
            a = {
              nextBytes: function nextBytes(e) {
                for (var t = o.getBytesSync(e.length), r = 0; r < e.length; ++r) e[r] = t.charCodeAt(r);
              }
            },
            c = r.algorithm || "PRIMEINC";
          if ("PRIMEINC" !== c) throw new Error("Invalid key generation algorithm: " + c);
          return (s = {
            algorithm: c,
            state: 0,
            bits: e,
            rng: a,
            eInt: t || 65537,
            e: new i(null),
            p: null,
            q: null,
            qBits: e >> 1,
            pBits: e - (e >> 1),
            pqState: 0,
            num: null,
            keys: null
          }).e.fromInt(s.eInt), s;
        }, c.rsa.stepKeyPairGenerationState = function (e, t) {
          "algorithm" in e || (e.algorithm = "PRIMEINC");
          var r = new i(null);
          r.fromInt(30);
          for (var n, s = 0, o = function o(e, t) {
              return e | t;
            }, a = +new Date(), u = 0; null === e.keys && (t <= 0 || u < t);) {
            if (0 === e.state) {
              var h = null === e.p ? e.pBits : e.qBits,
                d = h - 1;
              0 === e.pqState ? (e.num = new i(h, e.rng), e.num.testBit(d) || e.num.bitwiseTo(i.ONE.shiftLeft(d), o, e.num), e.num.dAddOffset(31 - e.num.mod(r).byteValue(), 0), s = 0, ++e.pqState) : 1 === e.pqState ? e.num.bitLength() > h ? e.pqState = 0 : e.num.isProbablePrime(b(e.num.bitLength())) ? ++e.pqState : e.num.dAddOffset(l[s++ % 8], 0) : 2 === e.pqState ? e.pqState = 0 === e.num.subtract(i.ONE).gcd(e.e).compareTo(i.ONE) ? 3 : 0 : 3 === e.pqState && (e.pqState = 0, null === e.p ? e.p = e.num : e.q = e.num, null !== e.p && null !== e.q && ++e.state, e.num = null);
            } else if (1 === e.state) e.p.compareTo(e.q) < 0 && (e.num = e.p, e.p = e.q, e.q = e.num), ++e.state;else if (2 === e.state) e.p1 = e.p.subtract(i.ONE), e.q1 = e.q.subtract(i.ONE), e.phi = e.p1.multiply(e.q1), ++e.state;else if (3 === e.state) 0 === e.phi.gcd(e.e).compareTo(i.ONE) ? ++e.state : (e.p = null, e.q = null, e.state = 0);else if (4 === e.state) e.n = e.p.multiply(e.q), e.n.bitLength() === e.bits ? ++e.state : (e.q = null, e.state = 0);else if (5 === e.state) {
              var p = e.e.modInverse(e.phi);
              e.keys = {
                privateKey: c.rsa.setPrivateKey(e.n, e.e, p, e.p, e.q, p.mod(e.p1), p.mod(e.q1), e.q.modInverse(e.p)),
                publicKey: c.rsa.setPublicKey(e.n, e.e)
              };
            }
            u += (n = +new Date()) - a, a = n;
          }
          return null !== e.keys;
        }, c.rsa.generateKeyPair = function (e, t, r, l) {
          if (1 === arguments.length ? "object" == _typeof(e) ? (r = e, e = void 0) : "function" == typeof e && (l = e, e = void 0) : 2 === arguments.length ? "number" == typeof e ? "function" == typeof t ? (l = t, t = void 0) : "number" != typeof t && (r = t, t = void 0) : (r = e, l = t, e = void 0, t = void 0) : 3 === arguments.length && ("number" == typeof t ? "function" == typeof r && (l = r, r = void 0) : (l = r, r = t, t = void 0)), r = r || {}, void 0 === e && (e = r.bits || 2048), void 0 === t && (t = r.e || 65537), !n.options.usePureJavaScript && !r.prng && e >= 256 && e <= 16384 && (65537 === t || 3 === t)) if (l) {
            if (v("generateKeyPair")) return s.generateKeyPair("rsa", {
              modulusLength: e,
              publicExponent: t,
              publicKeyEncoding: {
                type: "spki",
                format: "pem"
              },
              privateKeyEncoding: {
                type: "pkcs8",
                format: "pem"
              }
            }, function (e, t, r) {
              if (e) return l(e);
              l(null, {
                privateKey: c.privateKeyFromPem(r),
                publicKey: c.publicKeyFromPem(t)
              });
            });
            if (_("generateKey") && _("exportKey")) return a.globalScope.crypto.subtle.generateKey({
              name: "RSASSA-PKCS1-v1_5",
              modulusLength: e,
              publicExponent: C(t),
              hash: {
                name: "SHA-256"
              }
            }, !0, ["sign", "verify"]).then(function (e) {
              return a.globalScope.crypto.subtle.exportKey("pkcs8", e.privateKey);
            }).then(void 0, function (e) {
              l(e);
            }).then(function (e) {
              if (e) {
                var t = c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(e)));
                l(null, {
                  privateKey: t,
                  publicKey: c.setRsaPublicKey(t.n, t.e)
                });
              }
            });
            if (S("generateKey") && S("exportKey")) {
              var u = a.globalScope.msCrypto.subtle.generateKey({
                name: "RSASSA-PKCS1-v1_5",
                modulusLength: e,
                publicExponent: C(t),
                hash: {
                  name: "SHA-256"
                }
              }, !0, ["sign", "verify"]);
              return u.oncomplete = function (e) {
                var t = e.target.result,
                  r = a.globalScope.msCrypto.subtle.exportKey("pkcs8", t.privateKey);
                r.oncomplete = function (e) {
                  var t = e.target.result,
                    r = c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(t)));
                  l(null, {
                    privateKey: r,
                    publicKey: c.setRsaPublicKey(r.n, r.e)
                  });
                }, r.onerror = function (e) {
                  l(e);
                };
              }, void (u.onerror = function (e) {
                l(e);
              });
            }
          } else if (v("generateKeyPairSync")) {
            var h = s.generateKeyPairSync("rsa", {
              modulusLength: e,
              publicExponent: t,
              publicKeyEncoding: {
                type: "spki",
                format: "pem"
              },
              privateKeyEncoding: {
                type: "pkcs8",
                format: "pem"
              }
            });
            return {
              privateKey: c.privateKeyFromPem(h.privateKey),
              publicKey: c.publicKeyFromPem(h.publicKey)
            };
          }
          var d = c.rsa.createKeyPairGenerationState(e, t, r);
          if (!l) return c.rsa.stepKeyPairGenerationState(d, 0), d.keys;
          !function (e, t, r) {
            "function" == typeof t && (r = t, t = {});
            var s = {
              algorithm: {
                name: (t = t || {}).algorithm || "PRIMEINC",
                options: {
                  workers: t.workers || 2,
                  workLoad: t.workLoad || 100,
                  workerScript: t.workerScript
                }
              }
            };
            function o() {
              a(e.pBits, function (t, n) {
                return t ? r(t) : (e.p = n, null !== e.q ? l(t, e.q) : void a(e.qBits, l));
              });
            }
            function a(e, t) {
              n.prime.generateProbablePrime(e, s, t);
            }
            function l(t, n) {
              if (t) return r(t);
              if (e.q = n, e.p.compareTo(e.q) < 0) {
                var s = e.p;
                e.p = e.q, e.q = s;
              }
              if (0 !== e.p.subtract(i.ONE).gcd(e.e).compareTo(i.ONE)) return e.p = null, void o();
              if (0 !== e.q.subtract(i.ONE).gcd(e.e).compareTo(i.ONE)) return e.q = null, void a(e.qBits, l);
              if (e.p1 = e.p.subtract(i.ONE), e.q1 = e.q.subtract(i.ONE), e.phi = e.p1.multiply(e.q1), 0 !== e.phi.gcd(e.e).compareTo(i.ONE)) return e.p = e.q = null, void o();
              if (e.n = e.p.multiply(e.q), e.n.bitLength() !== e.bits) return e.q = null, void a(e.qBits, l);
              var u = e.e.modInverse(e.phi);
              e.keys = {
                privateKey: c.rsa.setPrivateKey(e.n, e.e, u, e.p, e.q, u.mod(e.p1), u.mod(e.q1), e.q.modInverse(e.p)),
                publicKey: c.rsa.setPublicKey(e.n, e.e)
              }, r(null, e.keys);
            }
            "prng" in t && (s.prng = t.prng), o();
          }(d, r, l);
        }, c.setRsaPublicKey = c.rsa.setPublicKey = function (e, t) {
          var r = {
            n: e,
            e: t,
            encrypt: function encrypt(e, t, i) {
              if ("string" == typeof t ? t = t.toUpperCase() : void 0 === t && (t = "RSAES-PKCS1-V1_5"), "RSAES-PKCS1-V1_5" === t) t = {
                encode: function encode(e, t, r) {
                  return m(e, t, 2).getBytes();
                }
              };else if ("RSA-OAEP" === t || "RSAES-OAEP" === t) t = {
                encode: function encode(e, t) {
                  return n.pkcs1.encode_rsa_oaep(t, e, i);
                }
              };else if (-1 !== ["RAW", "NONE", "NULL", null].indexOf(t)) t = {
                encode: function encode(e) {
                  return e;
                }
              };else if ("string" == typeof t) throw new Error('Unsupported encryption scheme: "' + t + '".');
              var s = t.encode(e, r, !0);
              return c.rsa.encrypt(s, r, !0);
            },
            verify: function verify(e, t, i, s) {
              "string" == typeof i ? i = i.toUpperCase() : void 0 === i && (i = "RSASSA-PKCS1-V1_5"), void 0 === s && (s = {
                _parseAllDigestBytes: !0
              }), "_parseAllDigestBytes" in s || (s._parseAllDigestBytes = !0), "RSASSA-PKCS1-V1_5" === i ? i = {
                verify: function verify(e, t) {
                  t = w(t, r, !0);
                  var i = o.fromDer(t, {
                      parseAllBytes: s._parseAllDigestBytes
                    }),
                    a = {},
                    c = [];
                  if (!o.validate(i, f, a, c)) throw (l = new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors = c, l;
                  var l,
                    u = o.derToOid(a.algorithmIdentifier);
                  if (u !== n.oids.md2 && u !== n.oids.md5 && u !== n.oids.sha1 && u !== n.oids.sha224 && u !== n.oids.sha256 && u !== n.oids.sha384 && u !== n.oids.sha512 && u !== n.oids["sha512-224"] && u !== n.oids["sha512-256"]) throw (l = new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid = u, l;
                  if ((u === n.oids.md2 || u === n.oids.md5) && !("parameters" in a)) throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");
                  return e === a.digest;
                }
              } : "NONE" !== i && "NULL" !== i && null !== i || (i = {
                verify: function verify(e, t) {
                  return e === w(t, r, !0);
                }
              });
              var a = c.rsa.decrypt(t, r, !0, !1);
              return i.verify(e, a, r.n.bitLength());
            }
          };
          return r;
        }, c.setRsaPrivateKey = c.rsa.setPrivateKey = function (e, t, r, i, s, o, a, l) {
          var u = {
            n: e,
            e: t,
            d: r,
            p: i,
            q: s,
            dP: o,
            dQ: a,
            qInv: l,
            decrypt: function decrypt(e, t, r) {
              "string" == typeof t ? t = t.toUpperCase() : void 0 === t && (t = "RSAES-PKCS1-V1_5");
              var i = c.rsa.decrypt(e, u, !1, !1);
              if ("RSAES-PKCS1-V1_5" === t) t = {
                decode: w
              };else if ("RSA-OAEP" === t || "RSAES-OAEP" === t) t = {
                decode: function decode(e, t) {
                  return n.pkcs1.decode_rsa_oaep(t, e, r);
                }
              };else {
                if (-1 === ["RAW", "NONE", "NULL", null].indexOf(t)) throw new Error('Unsupported encryption scheme: "' + t + '".');
                t = {
                  decode: function decode(e) {
                    return e;
                  }
                };
              }
              return t.decode(i, u, !1);
            },
            sign: function sign(e, t) {
              var r = !1;
              "string" == typeof t && (t = t.toUpperCase()), void 0 === t || "RSASSA-PKCS1-V1_5" === t ? (t = {
                encode: y
              }, r = 1) : "NONE" !== t && "NULL" !== t && null !== t || (t = {
                encode: function encode() {
                  return e;
                }
              }, r = 1);
              var n = t.encode(e, u.n.bitLength());
              return c.rsa.encrypt(n, u, r);
            }
          };
          return u;
        }, c.wrapRsaPrivateKey = function (e) {
          return o.create(o.Class.UNIVERSAL, o.Type.SEQUENCE, !0, [o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, o.integerToDer(0).getBytes()), o.create(o.Class.UNIVERSAL, o.Type.SEQUENCE, !0, [o.create(o.Class.UNIVERSAL, o.Type.OID, !1, o.oidToDer(c.oids.rsaEncryption).getBytes()), o.create(o.Class.UNIVERSAL, o.Type.NULL, !1, "")]), o.create(o.Class.UNIVERSAL, o.Type.OCTETSTRING, !1, o.toDer(e).getBytes())]);
        }, c.privateKeyFromAsn1 = function (e) {
          var t,
            r,
            s,
            a,
            l,
            d,
            p,
            f,
            y = {},
            g = [];
          if (o.validate(e, u, y, g) && (e = o.fromDer(n.util.createBuffer(y.privateKey))), y = {}, g = [], !o.validate(e, h, y, g)) {
            var m = new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");
            throw m.errors = g, m;
          }
          return t = n.util.createBuffer(y.privateKeyModulus).toHex(), r = n.util.createBuffer(y.privateKeyPublicExponent).toHex(), s = n.util.createBuffer(y.privateKeyPrivateExponent).toHex(), a = n.util.createBuffer(y.privateKeyPrime1).toHex(), l = n.util.createBuffer(y.privateKeyPrime2).toHex(), d = n.util.createBuffer(y.privateKeyExponent1).toHex(), p = n.util.createBuffer(y.privateKeyExponent2).toHex(), f = n.util.createBuffer(y.privateKeyCoefficient).toHex(), c.setRsaPrivateKey(new i(t, 16), new i(r, 16), new i(s, 16), new i(a, 16), new i(l, 16), new i(d, 16), new i(p, 16), new i(f, 16));
        }, c.privateKeyToAsn1 = c.privateKeyToRSAPrivateKey = function (e) {
          return o.create(o.Class.UNIVERSAL, o.Type.SEQUENCE, !0, [o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, o.integerToDer(0).getBytes()), o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, E(e.n)), o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, E(e.e)), o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, E(e.d)), o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, E(e.p)), o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, E(e.q)), o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, E(e.dP)), o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, E(e.dQ)), o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, E(e.qInv))]);
        }, c.publicKeyFromAsn1 = function (e) {
          var t = {},
            r = [];
          if (o.validate(e, p, t, r)) {
            var s,
              a = o.derToOid(t.publicKeyOid);
            if (a !== c.oids.rsaEncryption) throw (s = new Error("Cannot read public key. Unknown OID.")).oid = a, s;
            e = t.rsaPublicKey;
          }
          if (r = [], !o.validate(e, d, t, r)) throw (s = new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors = r, s;
          var l = n.util.createBuffer(t.publicKeyModulus).toHex(),
            u = n.util.createBuffer(t.publicKeyExponent).toHex();
          return c.setRsaPublicKey(new i(l, 16), new i(u, 16));
        }, c.publicKeyToAsn1 = c.publicKeyToSubjectPublicKeyInfo = function (e) {
          return o.create(o.Class.UNIVERSAL, o.Type.SEQUENCE, !0, [o.create(o.Class.UNIVERSAL, o.Type.SEQUENCE, !0, [o.create(o.Class.UNIVERSAL, o.Type.OID, !1, o.oidToDer(c.oids.rsaEncryption).getBytes()), o.create(o.Class.UNIVERSAL, o.Type.NULL, !1, "")]), o.create(o.Class.UNIVERSAL, o.Type.BITSTRING, !1, [c.publicKeyToRSAPublicKey(e)])]);
        }, c.publicKeyToRSAPublicKey = function (e) {
          return o.create(o.Class.UNIVERSAL, o.Type.SEQUENCE, !0, [o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, E(e.n)), o.create(o.Class.UNIVERSAL, o.Type.INTEGER, !1, E(e.e))]);
        };
      },
      137: function _(e, t, r) {
        var n = r(3832);
        r(8991), r(7116);
        var i = e.exports = n.sha1 = n.sha1 || {};
        n.md.sha1 = n.md.algorithms.sha1 = i, i.create = function () {
          o || (s = String.fromCharCode(128), s += n.util.fillString(String.fromCharCode(0), 64), o = !0);
          var e = null,
            t = n.util.createBuffer(),
            r = new Array(80),
            i = {
              algorithm: "sha1",
              blockLength: 64,
              digestLength: 20,
              messageLength: 0,
              fullMessageLength: null,
              messageLengthSize: 8,
              start: function start() {
                i.messageLength = 0, i.fullMessageLength = i.messageLength64 = [];
                for (var r = i.messageLengthSize / 4, s = 0; s < r; ++s) i.fullMessageLength.push(0);
                return t = n.util.createBuffer(), e = {
                  h0: 1732584193,
                  h1: 4023233417,
                  h2: 2562383102,
                  h3: 271733878,
                  h4: 3285377520
                }, i;
              }
            };
          return i.start(), i.update = function (s, o) {
            "utf8" === o && (s = n.util.encodeUtf8(s));
            var c = s.length;
            i.messageLength += c, c = [c / 4294967296 >>> 0, c >>> 0];
            for (var l = i.fullMessageLength.length - 1; l >= 0; --l) i.fullMessageLength[l] += c[1], c[1] = c[0] + (i.fullMessageLength[l] / 4294967296 >>> 0), i.fullMessageLength[l] = i.fullMessageLength[l] >>> 0, c[0] = c[1] / 4294967296 >>> 0;
            return t.putBytes(s), a(e, r, t), (t.read > 2048 || 0 === t.length()) && t.compact(), i;
          }, i.digest = function () {
            var o = n.util.createBuffer();
            o.putBytes(t.bytes());
            var c,
              l = i.fullMessageLength[i.fullMessageLength.length - 1] + i.messageLengthSize & i.blockLength - 1;
            o.putBytes(s.substr(0, i.blockLength - l));
            for (var u = 8 * i.fullMessageLength[0], h = 0; h < i.fullMessageLength.length - 1; ++h) u += (c = 8 * i.fullMessageLength[h + 1]) / 4294967296 >>> 0, o.putInt32(u >>> 0), u = c >>> 0;
            o.putInt32(u);
            var d = {
              h0: e.h0,
              h1: e.h1,
              h2: e.h2,
              h3: e.h3,
              h4: e.h4
            };
            a(d, r, o);
            var p = n.util.createBuffer();
            return p.putInt32(d.h0), p.putInt32(d.h1), p.putInt32(d.h2), p.putInt32(d.h3), p.putInt32(d.h4), p;
          }, i;
        };
        var s = null,
          o = !1;
        function a(e, t, r) {
          for (var n, i, s, o, a, c, l, u = r.length(); u >= 64;) {
            for (i = e.h0, s = e.h1, o = e.h2, a = e.h3, c = e.h4, l = 0; l < 16; ++l) n = r.getInt32(), t[l] = n, n = (i << 5 | i >>> 27) + (a ^ s & (o ^ a)) + c + 1518500249 + n, c = a, a = o, o = (s << 30 | s >>> 2) >>> 0, s = i, i = n;
            for (; l < 20; ++l) n = (n = t[l - 3] ^ t[l - 8] ^ t[l - 14] ^ t[l - 16]) << 1 | n >>> 31, t[l] = n, n = (i << 5 | i >>> 27) + (a ^ s & (o ^ a)) + c + 1518500249 + n, c = a, a = o, o = (s << 30 | s >>> 2) >>> 0, s = i, i = n;
            for (; l < 32; ++l) n = (n = t[l - 3] ^ t[l - 8] ^ t[l - 14] ^ t[l - 16]) << 1 | n >>> 31, t[l] = n, n = (i << 5 | i >>> 27) + (s ^ o ^ a) + c + 1859775393 + n, c = a, a = o, o = (s << 30 | s >>> 2) >>> 0, s = i, i = n;
            for (; l < 40; ++l) n = (n = t[l - 6] ^ t[l - 16] ^ t[l - 28] ^ t[l - 32]) << 2 | n >>> 30, t[l] = n, n = (i << 5 | i >>> 27) + (s ^ o ^ a) + c + 1859775393 + n, c = a, a = o, o = (s << 30 | s >>> 2) >>> 0, s = i, i = n;
            for (; l < 60; ++l) n = (n = t[l - 6] ^ t[l - 16] ^ t[l - 28] ^ t[l - 32]) << 2 | n >>> 30, t[l] = n, n = (i << 5 | i >>> 27) + (s & o | a & (s ^ o)) + c + 2400959708 + n, c = a, a = o, o = (s << 30 | s >>> 2) >>> 0, s = i, i = n;
            for (; l < 80; ++l) n = (n = t[l - 6] ^ t[l - 16] ^ t[l - 28] ^ t[l - 32]) << 2 | n >>> 30, t[l] = n, n = (i << 5 | i >>> 27) + (s ^ o ^ a) + c + 3395469782 + n, c = a, a = o, o = (s << 30 | s >>> 2) >>> 0, s = i, i = n;
            e.h0 = e.h0 + i | 0, e.h1 = e.h1 + s | 0, e.h2 = e.h2 + o | 0, e.h3 = e.h3 + a | 0, e.h4 = e.h4 + c | 0, u -= 64;
          }
        }
      },
      1668: function _(e, t, r) {
        var n = r(3832);
        r(8991), r(7116);
        var i = e.exports = n.sha256 = n.sha256 || {};
        n.md.sha256 = n.md.algorithms.sha256 = i, i.create = function () {
          o || (s = String.fromCharCode(128), s += n.util.fillString(String.fromCharCode(0), 64), a = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298], o = !0);
          var e = null,
            t = n.util.createBuffer(),
            r = new Array(64),
            i = {
              algorithm: "sha256",
              blockLength: 64,
              digestLength: 32,
              messageLength: 0,
              fullMessageLength: null,
              messageLengthSize: 8,
              start: function start() {
                i.messageLength = 0, i.fullMessageLength = i.messageLength64 = [];
                for (var r = i.messageLengthSize / 4, s = 0; s < r; ++s) i.fullMessageLength.push(0);
                return t = n.util.createBuffer(), e = {
                  h0: 1779033703,
                  h1: 3144134277,
                  h2: 1013904242,
                  h3: 2773480762,
                  h4: 1359893119,
                  h5: 2600822924,
                  h6: 528734635,
                  h7: 1541459225
                }, i;
              }
            };
          return i.start(), i.update = function (s, o) {
            "utf8" === o && (s = n.util.encodeUtf8(s));
            var a = s.length;
            i.messageLength += a, a = [a / 4294967296 >>> 0, a >>> 0];
            for (var l = i.fullMessageLength.length - 1; l >= 0; --l) i.fullMessageLength[l] += a[1], a[1] = a[0] + (i.fullMessageLength[l] / 4294967296 >>> 0), i.fullMessageLength[l] = i.fullMessageLength[l] >>> 0, a[0] = a[1] / 4294967296 >>> 0;
            return t.putBytes(s), c(e, r, t), (t.read > 2048 || 0 === t.length()) && t.compact(), i;
          }, i.digest = function () {
            var o = n.util.createBuffer();
            o.putBytes(t.bytes());
            var a,
              l = i.fullMessageLength[i.fullMessageLength.length - 1] + i.messageLengthSize & i.blockLength - 1;
            o.putBytes(s.substr(0, i.blockLength - l));
            for (var u = 8 * i.fullMessageLength[0], h = 0; h < i.fullMessageLength.length - 1; ++h) u += (a = 8 * i.fullMessageLength[h + 1]) / 4294967296 >>> 0, o.putInt32(u >>> 0), u = a >>> 0;
            o.putInt32(u);
            var d = {
              h0: e.h0,
              h1: e.h1,
              h2: e.h2,
              h3: e.h3,
              h4: e.h4,
              h5: e.h5,
              h6: e.h6,
              h7: e.h7
            };
            c(d, r, o);
            var p = n.util.createBuffer();
            return p.putInt32(d.h0), p.putInt32(d.h1), p.putInt32(d.h2), p.putInt32(d.h3), p.putInt32(d.h4), p.putInt32(d.h5), p.putInt32(d.h6), p.putInt32(d.h7), p;
          }, i;
        };
        var s = null,
          o = !1,
          a = null;
        function c(e, t, r) {
          for (var n, i, s, o, c, l, u, h, d, p, f, y, g, m = r.length(); m >= 64;) {
            for (c = 0; c < 16; ++c) t[c] = r.getInt32();
            for (; c < 64; ++c) n = ((n = t[c - 2]) >>> 17 | n << 15) ^ (n >>> 19 | n << 13) ^ n >>> 10, i = ((i = t[c - 15]) >>> 7 | i << 25) ^ (i >>> 18 | i << 14) ^ i >>> 3, t[c] = n + t[c - 7] + i + t[c - 16] | 0;
            for (l = e.h0, u = e.h1, h = e.h2, d = e.h3, p = e.h4, f = e.h5, y = e.h6, g = e.h7, c = 0; c < 64; ++c) s = (l >>> 2 | l << 30) ^ (l >>> 13 | l << 19) ^ (l >>> 22 | l << 10), o = l & u | h & (l ^ u), n = g + ((p >>> 6 | p << 26) ^ (p >>> 11 | p << 21) ^ (p >>> 25 | p << 7)) + (y ^ p & (f ^ y)) + a[c] + t[c], g = y, y = f, f = p, p = d + n >>> 0, d = h, h = u, u = l, l = n + (i = s + o) >>> 0;
            e.h0 = e.h0 + l | 0, e.h1 = e.h1 + u | 0, e.h2 = e.h2 + h | 0, e.h3 = e.h3 + d | 0, e.h4 = e.h4 + p | 0, e.h5 = e.h5 + f | 0, e.h6 = e.h6 + y | 0, e.h7 = e.h7 + g | 0, m -= 64;
          }
        }
      },
      3219: function _(e, t, r) {
        var n = r(3832);
        r(8991), r(7116);
        var i = e.exports = n.sha512 = n.sha512 || {};
        n.md.sha512 = n.md.algorithms.sha512 = i;
        var s = n.sha384 = n.sha512.sha384 = n.sha512.sha384 || {};
        s.create = function () {
          return i.create("SHA-384");
        }, n.md.sha384 = n.md.algorithms.sha384 = s, n.sha512.sha256 = n.sha512.sha256 || {
          create: function create() {
            return i.create("SHA-512/256");
          }
        }, n.md["sha512/256"] = n.md.algorithms["sha512/256"] = n.sha512.sha256, n.sha512.sha224 = n.sha512.sha224 || {
          create: function create() {
            return i.create("SHA-512/224");
          }
        }, n.md["sha512/224"] = n.md.algorithms["sha512/224"] = n.sha512.sha224, i.create = function (e) {
          if (a || (o = String.fromCharCode(128), o += n.util.fillString(String.fromCharCode(0), 128), c = [[1116352408, 3609767458], [1899447441, 602891725], [3049323471, 3964484399], [3921009573, 2173295548], [961987163, 4081628472], [1508970993, 3053834265], [2453635748, 2937671579], [2870763221, 3664609560], [3624381080, 2734883394], [310598401, 1164996542], [607225278, 1323610764], [1426881987, 3590304994], [1925078388, 4068182383], [2162078206, 991336113], [2614888103, 633803317], [3248222580, 3479774868], [3835390401, 2666613458], [4022224774, 944711139], [264347078, 2341262773], [604807628, 2007800933], [770255983, 1495990901], [1249150122, 1856431235], [1555081692, 3175218132], [1996064986, 2198950837], [2554220882, 3999719339], [2821834349, 766784016], [2952996808, 2566594879], [3210313671, 3203337956], [3336571891, 1034457026], [3584528711, 2466948901], [113926993, 3758326383], [338241895, 168717936], [666307205, 1188179964], [773529912, 1546045734], [1294757372, 1522805485], [1396182291, 2643833823], [1695183700, 2343527390], [1986661051, 1014477480], [2177026350, 1206759142], [2456956037, 344077627], [2730485921, 1290863460], [2820302411, 3158454273], [3259730800, 3505952657], [3345764771, 106217008], [3516065817, 3606008344], [3600352804, 1432725776], [4094571909, 1467031594], [275423344, 851169720], [430227734, 3100823752], [506948616, 1363258195], [659060556, 3750685593], [883997877, 3785050280], [958139571, 3318307427], [1322822218, 3812723403], [1537002063, 2003034995], [1747873779, 3602036899], [1955562222, 1575990012], [2024104815, 1125592928], [2227730452, 2716904306], [2361852424, 442776044], [2428436474, 593698344], [2756734187, 3733110249], [3204031479, 2999351573], [3329325298, 3815920427], [3391569614, 3928383900], [3515267271, 566280711], [3940187606, 3454069534], [4118630271, 4000239992], [116418474, 1914138554], [174292421, 2731055270], [289380356, 3203993006], [460393269, 320620315], [685471733, 587496836], [852142971, 1086792851], [1017036298, 365543100], [1126000580, 2618297676], [1288033470, 3409855158], [1501505948, 4234509866], [1607167915, 987167468], [1816402316, 1246189591]], (l = {})["SHA-512"] = [[1779033703, 4089235720], [3144134277, 2227873595], [1013904242, 4271175723], [2773480762, 1595750129], [1359893119, 2917565137], [2600822924, 725511199], [528734635, 4215389547], [1541459225, 327033209]], l["SHA-384"] = [[3418070365, 3238371032], [1654270250, 914150663], [2438529370, 812702999], [355462360, 4144912697], [1731405415, 4290775857], [2394180231, 1750603025], [3675008525, 1694076839], [1203062813, 3204075428]], l["SHA-512/256"] = [[573645204, 4230739756], [2673172387, 3360449730], [596883563, 1867755857], [2520282905, 1497426621], [2519219938, 2827943907], [3193839141, 1401305490], [721525244, 746961066], [246885852, 2177182882]], l["SHA-512/224"] = [[2352822216, 424955298], [1944164710, 2312950998], [502970286, 855612546], [1738396948, 1479516111], [258812777, 2077511080], [2011393907, 79989058], [1067287976, 1780299464], [286451373, 2446758561]], a = !0), void 0 === e && (e = "SHA-512"), !(e in l)) throw new Error("Invalid SHA-512 algorithm: " + e);
          for (var t = l[e], r = null, i = n.util.createBuffer(), s = new Array(80), h = 0; h < 80; ++h) s[h] = new Array(2);
          var d = 64;
          switch (e) {
            case "SHA-384":
              d = 48;
              break;
            case "SHA-512/256":
              d = 32;
              break;
            case "SHA-512/224":
              d = 28;
          }
          var p = {
            algorithm: e.replace("-", "").toLowerCase(),
            blockLength: 128,
            digestLength: d,
            messageLength: 0,
            fullMessageLength: null,
            messageLengthSize: 16,
            start: function start() {
              p.messageLength = 0, p.fullMessageLength = p.messageLength128 = [];
              for (var e = p.messageLengthSize / 4, s = 0; s < e; ++s) p.fullMessageLength.push(0);
              for (i = n.util.createBuffer(), r = new Array(t.length), s = 0; s < t.length; ++s) r[s] = t[s].slice(0);
              return p;
            }
          };
          return p.start(), p.update = function (e, t) {
            "utf8" === t && (e = n.util.encodeUtf8(e));
            var o = e.length;
            p.messageLength += o, o = [o / 4294967296 >>> 0, o >>> 0];
            for (var a = p.fullMessageLength.length - 1; a >= 0; --a) p.fullMessageLength[a] += o[1], o[1] = o[0] + (p.fullMessageLength[a] / 4294967296 >>> 0), p.fullMessageLength[a] = p.fullMessageLength[a] >>> 0, o[0] = o[1] / 4294967296 >>> 0;
            return i.putBytes(e), u(r, s, i), (i.read > 2048 || 0 === i.length()) && i.compact(), p;
          }, p.digest = function () {
            var t = n.util.createBuffer();
            t.putBytes(i.bytes());
            var a,
              c = p.fullMessageLength[p.fullMessageLength.length - 1] + p.messageLengthSize & p.blockLength - 1;
            t.putBytes(o.substr(0, p.blockLength - c));
            for (var l = 8 * p.fullMessageLength[0], h = 0; h < p.fullMessageLength.length - 1; ++h) l += (a = 8 * p.fullMessageLength[h + 1]) / 4294967296 >>> 0, t.putInt32(l >>> 0), l = a >>> 0;
            t.putInt32(l);
            var d = new Array(r.length);
            for (h = 0; h < r.length; ++h) d[h] = r[h].slice(0);
            u(d, s, t);
            var f,
              y = n.util.createBuffer();
            for (f = "SHA-512" === e ? d.length : "SHA-384" === e ? d.length - 2 : d.length - 4, h = 0; h < f; ++h) y.putInt32(d[h][0]), h === f - 1 && "SHA-512/224" === e || y.putInt32(d[h][1]);
            return y;
          }, p;
        };
        var o = null,
          a = !1,
          c = null,
          l = null;
        function u(e, t, r) {
          for (var n, i, s, o, a, l, u, h, d, p, f, y, g, m, w, E, b, v, _, S, C, A, I, T, R, k, N, L, D, P, B, O, x, U = r.length(); U >= 128;) {
            for (N = 0; N < 16; ++N) t[N][0] = r.getInt32() >>> 0, t[N][1] = r.getInt32() >>> 0;
            for (; N < 80; ++N) n = (((L = (P = t[N - 2])[0]) >>> 19 | (D = P[1]) << 13) ^ (D >>> 29 | L << 3) ^ L >>> 6) >>> 0, i = ((L << 13 | D >>> 19) ^ (D << 3 | L >>> 29) ^ (L << 26 | D >>> 6)) >>> 0, s = (((L = (O = t[N - 15])[0]) >>> 1 | (D = O[1]) << 31) ^ (L >>> 8 | D << 24) ^ L >>> 7) >>> 0, o = ((L << 31 | D >>> 1) ^ (L << 24 | D >>> 8) ^ (L << 25 | D >>> 7)) >>> 0, B = t[N - 7], x = t[N - 16], D = i + B[1] + o + x[1], t[N][0] = n + B[0] + s + x[0] + (D / 4294967296 >>> 0) >>> 0, t[N][1] = D >>> 0;
            for (f = e[0][0], y = e[0][1], g = e[1][0], m = e[1][1], w = e[2][0], E = e[2][1], b = e[3][0], v = e[3][1], _ = e[4][0], S = e[4][1], C = e[5][0], A = e[5][1], I = e[6][0], T = e[6][1], R = e[7][0], k = e[7][1], N = 0; N < 80; ++N) u = ((_ >>> 14 | S << 18) ^ (_ >>> 18 | S << 14) ^ (S >>> 9 | _ << 23)) >>> 0, h = (I ^ _ & (C ^ I)) >>> 0, a = ((f >>> 28 | y << 4) ^ (y >>> 2 | f << 30) ^ (y >>> 7 | f << 25)) >>> 0, l = ((f << 4 | y >>> 28) ^ (y << 30 | f >>> 2) ^ (y << 25 | f >>> 7)) >>> 0, d = (f & g | w & (f ^ g)) >>> 0, p = (y & m | E & (y ^ m)) >>> 0, D = k + (((_ << 18 | S >>> 14) ^ (_ << 14 | S >>> 18) ^ (S << 23 | _ >>> 9)) >>> 0) + ((T ^ S & (A ^ T)) >>> 0) + c[N][1] + t[N][1], n = R + u + h + c[N][0] + t[N][0] + (D / 4294967296 >>> 0) >>> 0, i = D >>> 0, s = a + d + ((D = l + p) / 4294967296 >>> 0) >>> 0, o = D >>> 0, R = I, k = T, I = C, T = A, C = _, A = S, _ = b + n + ((D = v + i) / 4294967296 >>> 0) >>> 0, S = D >>> 0, b = w, v = E, w = g, E = m, g = f, m = y, f = n + s + ((D = i + o) / 4294967296 >>> 0) >>> 0, y = D >>> 0;
            D = e[0][1] + y, e[0][0] = e[0][0] + f + (D / 4294967296 >>> 0) >>> 0, e[0][1] = D >>> 0, D = e[1][1] + m, e[1][0] = e[1][0] + g + (D / 4294967296 >>> 0) >>> 0, e[1][1] = D >>> 0, D = e[2][1] + E, e[2][0] = e[2][0] + w + (D / 4294967296 >>> 0) >>> 0, e[2][1] = D >>> 0, D = e[3][1] + v, e[3][0] = e[3][0] + b + (D / 4294967296 >>> 0) >>> 0, e[3][1] = D >>> 0, D = e[4][1] + S, e[4][0] = e[4][0] + _ + (D / 4294967296 >>> 0) >>> 0, e[4][1] = D >>> 0, D = e[5][1] + A, e[5][0] = e[5][0] + C + (D / 4294967296 >>> 0) >>> 0, e[5][1] = D >>> 0, D = e[6][1] + T, e[6][0] = e[6][0] + I + (D / 4294967296 >>> 0) >>> 0, e[6][1] = D >>> 0, D = e[7][1] + k, e[7][0] = e[7][0] + R + (D / 4294967296 >>> 0) >>> 0, e[7][1] = D >>> 0, U -= 128;
          }
        }
      },
      7116: function _(e, t, r) {
        var n = r(3832),
          i = r(8807),
          s = e.exports = n.util = n.util || {};
        function o(e) {
          if (8 !== e && 16 !== e && 24 !== e && 32 !== e) throw new Error("Only 8, 16, 24, or 32 bits supported: " + e);
        }
        function a(e) {
          if (this.data = "", this.read = 0, "string" == typeof e) this.data = e;else if (s.isArrayBuffer(e) || s.isArrayBufferView(e)) {
            if ("undefined" != typeof Buffer && e instanceof Buffer) this.data = e.toString("binary");else {
              var t = new Uint8Array(e);
              try {
                this.data = String.fromCharCode.apply(null, t);
              } catch (e) {
                for (var r = 0; r < t.length; ++r) this.putByte(t[r]);
              }
            }
          } else (e instanceof a || "object" == _typeof(e) && "string" == typeof e.data && "number" == typeof e.read) && (this.data = e.data, this.read = e.read);
          this._constructedStringLength = 0;
        }
        !function () {
          if ("undefined" != typeof process && process.nextTick && !true) return s.nextTick = process.nextTick, void ("function" == typeof setImmediate ? s.setImmediate = setImmediate : s.setImmediate = s.nextTick);
          if ("function" == typeof setImmediate) return s.setImmediate = function () {
            return setImmediate.apply(void 0, arguments);
          }, void (s.nextTick = function (e) {
            return setImmediate(e);
          });
          if (s.setImmediate = function (e) {
            setTimeout(e, 0);
          }, "undefined" != typeof window && "function" == typeof window.postMessage) {
            var e = "forge.setImmediate",
              t = [];
            s.setImmediate = function (r) {
              t.push(r), 1 === t.length && window.postMessage(e, "*");
            }, window.addEventListener("message", function (r) {
              if (r.source === window && r.data === e) {
                r.stopPropagation();
                var n = t.slice();
                t.length = 0, n.forEach(function (e) {
                  e();
                });
              }
            }, !0);
          }
          if ("undefined" != typeof MutationObserver) {
            var r = Date.now(),
              n = !0,
              i = document.createElement("div");
            t = [], new MutationObserver(function () {
              var e = t.slice();
              t.length = 0, e.forEach(function (e) {
                e();
              });
            }).observe(i, {
              attributes: !0
            });
            var o = s.setImmediate;
            s.setImmediate = function (e) {
              Date.now() - r > 15 ? (r = Date.now(), o(e)) : (t.push(e), 1 === t.length && i.setAttribute("a", n = !n));
            };
          }
          s.nextTick = s.setImmediate;
        }(), s.isNodejs = "undefined" != typeof process && process.versions && process.versions.node, s.globalScope = s.isNodejs ? r.g : "undefined" == typeof self ? window : self, s.isArray = Array.isArray || function (e) {
          return "[object Array]" === Object.prototype.toString.call(e);
        }, s.isArrayBuffer = function (e) {
          return "undefined" != typeof ArrayBuffer && e instanceof ArrayBuffer;
        }, s.isArrayBufferView = function (e) {
          return e && s.isArrayBuffer(e.buffer) && void 0 !== e.byteLength;
        }, s.ByteBuffer = a, s.ByteStringBuffer = a, s.ByteStringBuffer.prototype._optimizeConstructedString = function (e) {
          this._constructedStringLength += e, this._constructedStringLength > 4096 && (this.data.substr(0, 1), this._constructedStringLength = 0);
        }, s.ByteStringBuffer.prototype.length = function () {
          return this.data.length - this.read;
        }, s.ByteStringBuffer.prototype.isEmpty = function () {
          return this.length() <= 0;
        }, s.ByteStringBuffer.prototype.putByte = function (e) {
          return this.putBytes(String.fromCharCode(e));
        }, s.ByteStringBuffer.prototype.fillWithByte = function (e, t) {
          e = String.fromCharCode(e);
          for (var r = this.data; t > 0;) 1 & t && (r += e), (t >>>= 1) > 0 && (e += e);
          return this.data = r, this._optimizeConstructedString(t), this;
        }, s.ByteStringBuffer.prototype.putBytes = function (e) {
          return this.data += e, this._optimizeConstructedString(e.length), this;
        }, s.ByteStringBuffer.prototype.putString = function (e) {
          return this.putBytes(s.encodeUtf8(e));
        }, s.ByteStringBuffer.prototype.putInt16 = function (e) {
          return this.putBytes(String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e));
        }, s.ByteStringBuffer.prototype.putInt24 = function (e) {
          return this.putBytes(String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e));
        }, s.ByteStringBuffer.prototype.putInt32 = function (e) {
          return this.putBytes(String.fromCharCode(e >> 24 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e));
        }, s.ByteStringBuffer.prototype.putInt16Le = function (e) {
          return this.putBytes(String.fromCharCode(255 & e) + String.fromCharCode(e >> 8 & 255));
        }, s.ByteStringBuffer.prototype.putInt24Le = function (e) {
          return this.putBytes(String.fromCharCode(255 & e) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e >> 16 & 255));
        }, s.ByteStringBuffer.prototype.putInt32Le = function (e) {
          return this.putBytes(String.fromCharCode(255 & e) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 24 & 255));
        }, s.ByteStringBuffer.prototype.putInt = function (e, t) {
          o(t);
          var r = "";
          do {
            t -= 8, r += String.fromCharCode(e >> t & 255);
          } while (t > 0);
          return this.putBytes(r);
        }, s.ByteStringBuffer.prototype.putSignedInt = function (e, t) {
          return e < 0 && (e += 2 << t - 1), this.putInt(e, t);
        }, s.ByteStringBuffer.prototype.putBuffer = function (e) {
          return this.putBytes(e.getBytes());
        }, s.ByteStringBuffer.prototype.getByte = function () {
          return this.data.charCodeAt(this.read++);
        }, s.ByteStringBuffer.prototype.getInt16 = function () {
          var e = this.data.charCodeAt(this.read) << 8 ^ this.data.charCodeAt(this.read + 1);
          return this.read += 2, e;
        }, s.ByteStringBuffer.prototype.getInt24 = function () {
          var e = this.data.charCodeAt(this.read) << 16 ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2);
          return this.read += 3, e;
        }, s.ByteStringBuffer.prototype.getInt32 = function () {
          var e = this.data.charCodeAt(this.read) << 24 ^ this.data.charCodeAt(this.read + 1) << 16 ^ this.data.charCodeAt(this.read + 2) << 8 ^ this.data.charCodeAt(this.read + 3);
          return this.read += 4, e;
        }, s.ByteStringBuffer.prototype.getInt16Le = function () {
          var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8;
          return this.read += 2, e;
        }, s.ByteStringBuffer.prototype.getInt24Le = function () {
          var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2) << 16;
          return this.read += 3, e;
        }, s.ByteStringBuffer.prototype.getInt32Le = function () {
          var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2) << 16 ^ this.data.charCodeAt(this.read + 3) << 24;
          return this.read += 4, e;
        }, s.ByteStringBuffer.prototype.getInt = function (e) {
          o(e);
          var t = 0;
          do {
            t = (t << 8) + this.data.charCodeAt(this.read++), e -= 8;
          } while (e > 0);
          return t;
        }, s.ByteStringBuffer.prototype.getSignedInt = function (e) {
          var t = this.getInt(e),
            r = 2 << e - 2;
          return t >= r && (t -= r << 1), t;
        }, s.ByteStringBuffer.prototype.getBytes = function (e) {
          var t;
          return e ? (e = Math.min(this.length(), e), t = this.data.slice(this.read, this.read + e), this.read += e) : 0 === e ? t = "" : (t = 0 === this.read ? this.data : this.data.slice(this.read), this.clear()), t;
        }, s.ByteStringBuffer.prototype.bytes = function (e) {
          return void 0 === e ? this.data.slice(this.read) : this.data.slice(this.read, this.read + e);
        }, s.ByteStringBuffer.prototype.at = function (e) {
          return this.data.charCodeAt(this.read + e);
        }, s.ByteStringBuffer.prototype.setAt = function (e, t) {
          return this.data = this.data.substr(0, this.read + e) + String.fromCharCode(t) + this.data.substr(this.read + e + 1), this;
        }, s.ByteStringBuffer.prototype.last = function () {
          return this.data.charCodeAt(this.data.length - 1);
        }, s.ByteStringBuffer.prototype.copy = function () {
          var e = s.createBuffer(this.data);
          return e.read = this.read, e;
        }, s.ByteStringBuffer.prototype.compact = function () {
          return this.read > 0 && (this.data = this.data.slice(this.read), this.read = 0), this;
        }, s.ByteStringBuffer.prototype.clear = function () {
          return this.data = "", this.read = 0, this;
        }, s.ByteStringBuffer.prototype.truncate = function (e) {
          var t = Math.max(0, this.length() - e);
          return this.data = this.data.substr(this.read, t), this.read = 0, this;
        }, s.ByteStringBuffer.prototype.toHex = function () {
          for (var e = "", t = this.read; t < this.data.length; ++t) {
            var r = this.data.charCodeAt(t);
            r < 16 && (e += "0"), e += r.toString(16);
          }
          return e;
        }, s.ByteStringBuffer.prototype.toString = function () {
          return s.decodeUtf8(this.bytes());
        }, s.DataBuffer = function (e, t) {
          t = t || {}, this.read = t.readOffset || 0, this.growSize = t.growSize || 1024;
          var r = s.isArrayBuffer(e),
            n = s.isArrayBufferView(e);
          if (r || n) return this.data = r ? new DataView(e) : new DataView(e.buffer, e.byteOffset, e.byteLength), void (this.write = "writeOffset" in t ? t.writeOffset : this.data.byteLength);
          this.data = new DataView(new ArrayBuffer(0)), this.write = 0, null != e && this.putBytes(e), "writeOffset" in t && (this.write = t.writeOffset);
        }, s.DataBuffer.prototype.length = function () {
          return this.write - this.read;
        }, s.DataBuffer.prototype.isEmpty = function () {
          return this.length() <= 0;
        }, s.DataBuffer.prototype.accommodate = function (e, t) {
          if (this.length() >= e) return this;
          t = Math.max(t || this.growSize, e);
          var r = new Uint8Array(this.data.buffer, this.data.byteOffset, this.data.byteLength),
            n = new Uint8Array(this.length() + t);
          return n.set(r), this.data = new DataView(n.buffer), this;
        }, s.DataBuffer.prototype.putByte = function (e) {
          return this.accommodate(1), this.data.setUint8(this.write++, e), this;
        }, s.DataBuffer.prototype.fillWithByte = function (e, t) {
          this.accommodate(t);
          for (var r = 0; r < t; ++r) this.data.setUint8(e);
          return this;
        }, s.DataBuffer.prototype.putBytes = function (e, t) {
          if (s.isArrayBufferView(e)) {
            var r = (n = new Uint8Array(e.buffer, e.byteOffset, e.byteLength)).byteLength - n.byteOffset;
            return this.accommodate(r), new Uint8Array(this.data.buffer, this.write).set(n), this.write += r, this;
          }
          if (s.isArrayBuffer(e)) {
            var n = new Uint8Array(e);
            return this.accommodate(n.byteLength), new Uint8Array(this.data.buffer).set(n, this.write), this.write += n.byteLength, this;
          }
          if (e instanceof s.DataBuffer || "object" == _typeof(e) && "number" == typeof e.read && "number" == typeof e.write && s.isArrayBufferView(e.data)) return n = new Uint8Array(e.data.byteLength, e.read, e.length()), this.accommodate(n.byteLength), new Uint8Array(e.data.byteLength, this.write).set(n), this.write += n.byteLength, this;
          if (e instanceof s.ByteStringBuffer && (e = e.data, t = "binary"), t = t || "binary", "string" == typeof e) {
            var i;
            if ("hex" === t) return this.accommodate(Math.ceil(e.length / 2)), i = new Uint8Array(this.data.buffer, this.write), this.write += s.binary.hex.decode(e, i, this.write), this;
            if ("base64" === t) return this.accommodate(3 * Math.ceil(e.length / 4)), i = new Uint8Array(this.data.buffer, this.write), this.write += s.binary.base64.decode(e, i, this.write), this;
            if ("utf8" === t && (e = s.encodeUtf8(e), t = "binary"), "binary" === t || "raw" === t) return this.accommodate(e.length), i = new Uint8Array(this.data.buffer, this.write), this.write += s.binary.raw.decode(i), this;
            if ("utf16" === t) return this.accommodate(2 * e.length), i = new Uint16Array(this.data.buffer, this.write), this.write += s.text.utf16.encode(i), this;
            throw new Error("Invalid encoding: " + t);
          }
          throw Error("Invalid parameter: " + e);
        }, s.DataBuffer.prototype.putBuffer = function (e) {
          return this.putBytes(e), e.clear(), this;
        }, s.DataBuffer.prototype.putString = function (e) {
          return this.putBytes(e, "utf16");
        }, s.DataBuffer.prototype.putInt16 = function (e) {
          return this.accommodate(2), this.data.setInt16(this.write, e), this.write += 2, this;
        }, s.DataBuffer.prototype.putInt24 = function (e) {
          return this.accommodate(3), this.data.setInt16(this.write, e >> 8 & 65535), this.data.setInt8(this.write, e >> 16 & 255), this.write += 3, this;
        }, s.DataBuffer.prototype.putInt32 = function (e) {
          return this.accommodate(4), this.data.setInt32(this.write, e), this.write += 4, this;
        }, s.DataBuffer.prototype.putInt16Le = function (e) {
          return this.accommodate(2), this.data.setInt16(this.write, e, !0), this.write += 2, this;
        }, s.DataBuffer.prototype.putInt24Le = function (e) {
          return this.accommodate(3), this.data.setInt8(this.write, e >> 16 & 255), this.data.setInt16(this.write, e >> 8 & 65535, !0), this.write += 3, this;
        }, s.DataBuffer.prototype.putInt32Le = function (e) {
          return this.accommodate(4), this.data.setInt32(this.write, e, !0), this.write += 4, this;
        }, s.DataBuffer.prototype.putInt = function (e, t) {
          o(t), this.accommodate(t / 8);
          do {
            t -= 8, this.data.setInt8(this.write++, e >> t & 255);
          } while (t > 0);
          return this;
        }, s.DataBuffer.prototype.putSignedInt = function (e, t) {
          return o(t), this.accommodate(t / 8), e < 0 && (e += 2 << t - 1), this.putInt(e, t);
        }, s.DataBuffer.prototype.getByte = function () {
          return this.data.getInt8(this.read++);
        }, s.DataBuffer.prototype.getInt16 = function () {
          var e = this.data.getInt16(this.read);
          return this.read += 2, e;
        }, s.DataBuffer.prototype.getInt24 = function () {
          var e = this.data.getInt16(this.read) << 8 ^ this.data.getInt8(this.read + 2);
          return this.read += 3, e;
        }, s.DataBuffer.prototype.getInt32 = function () {
          var e = this.data.getInt32(this.read);
          return this.read += 4, e;
        }, s.DataBuffer.prototype.getInt16Le = function () {
          var e = this.data.getInt16(this.read, !0);
          return this.read += 2, e;
        }, s.DataBuffer.prototype.getInt24Le = function () {
          var e = this.data.getInt8(this.read) ^ this.data.getInt16(this.read + 1, !0) << 8;
          return this.read += 3, e;
        }, s.DataBuffer.prototype.getInt32Le = function () {
          var e = this.data.getInt32(this.read, !0);
          return this.read += 4, e;
        }, s.DataBuffer.prototype.getInt = function (e) {
          o(e);
          var t = 0;
          do {
            t = (t << 8) + this.data.getInt8(this.read++), e -= 8;
          } while (e > 0);
          return t;
        }, s.DataBuffer.prototype.getSignedInt = function (e) {
          var t = this.getInt(e),
            r = 2 << e - 2;
          return t >= r && (t -= r << 1), t;
        }, s.DataBuffer.prototype.getBytes = function (e) {
          var t;
          return e ? (e = Math.min(this.length(), e), t = this.data.slice(this.read, this.read + e), this.read += e) : 0 === e ? t = "" : (t = 0 === this.read ? this.data : this.data.slice(this.read), this.clear()), t;
        }, s.DataBuffer.prototype.bytes = function (e) {
          return void 0 === e ? this.data.slice(this.read) : this.data.slice(this.read, this.read + e);
        }, s.DataBuffer.prototype.at = function (e) {
          return this.data.getUint8(this.read + e);
        }, s.DataBuffer.prototype.setAt = function (e, t) {
          return this.data.setUint8(e, t), this;
        }, s.DataBuffer.prototype.last = function () {
          return this.data.getUint8(this.write - 1);
        }, s.DataBuffer.prototype.copy = function () {
          return new s.DataBuffer(this);
        }, s.DataBuffer.prototype.compact = function () {
          if (this.read > 0) {
            var e = new Uint8Array(this.data.buffer, this.read),
              t = new Uint8Array(e.byteLength);
            t.set(e), this.data = new DataView(t), this.write -= this.read, this.read = 0;
          }
          return this;
        }, s.DataBuffer.prototype.clear = function () {
          return this.data = new DataView(new ArrayBuffer(0)), this.read = this.write = 0, this;
        }, s.DataBuffer.prototype.truncate = function (e) {
          return this.write = Math.max(0, this.length() - e), this.read = Math.min(this.read, this.write), this;
        }, s.DataBuffer.prototype.toHex = function () {
          for (var e = "", t = this.read; t < this.data.byteLength; ++t) {
            var r = this.data.getUint8(t);
            r < 16 && (e += "0"), e += r.toString(16);
          }
          return e;
        }, s.DataBuffer.prototype.toString = function (e) {
          var t = new Uint8Array(this.data, this.read, this.length());
          if ("binary" === (e = e || "utf8") || "raw" === e) return s.binary.raw.encode(t);
          if ("hex" === e) return s.binary.hex.encode(t);
          if ("base64" === e) return s.binary.base64.encode(t);
          if ("utf8" === e) return s.text.utf8.decode(t);
          if ("utf16" === e) return s.text.utf16.decode(t);
          throw new Error("Invalid encoding: " + e);
        }, s.createBuffer = function (e, t) {
          return t = t || "raw", void 0 !== e && "utf8" === t && (e = s.encodeUtf8(e)), new s.ByteBuffer(e);
        }, s.fillString = function (e, t) {
          for (var r = ""; t > 0;) 1 & t && (r += e), (t >>>= 1) > 0 && (e += e);
          return r;
        }, s.xorBytes = function (e, t, r) {
          for (var n = "", i = "", s = "", o = 0, a = 0; r > 0; --r, ++o) i = e.charCodeAt(o) ^ t.charCodeAt(o), a >= 10 && (n += s, s = "", a = 0), s += String.fromCharCode(i), ++a;
          return n + s;
        }, s.hexToBytes = function (e) {
          var t = "",
            r = 0;
          for (!0 & e.length && (r = 1, t += String.fromCharCode(parseInt(e[0], 16))); r < e.length; r += 2) t += String.fromCharCode(parseInt(e.substr(r, 2), 16));
          return t;
        }, s.bytesToHex = function (e) {
          return s.createBuffer(e).toHex();
        }, s.int32ToBytes = function (e) {
          return String.fromCharCode(e >> 24 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e);
        };
        var c = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
          l = [62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, 64, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51],
          u = "123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";
        s.encode64 = function (e, t) {
          for (var r, n, i, s = "", o = "", a = 0; a < e.length;) r = e.charCodeAt(a++), n = e.charCodeAt(a++), i = e.charCodeAt(a++), s += c.charAt(r >> 2), s += c.charAt((3 & r) << 4 | n >> 4), isNaN(n) ? s += "==" : (s += c.charAt((15 & n) << 2 | i >> 6), s += isNaN(i) ? "=" : c.charAt(63 & i)), t && s.length > t && (o += s.substr(0, t) + "\r\n", s = s.substr(t));
          return o + s;
        }, s.decode64 = function (e) {
          e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
          for (var t, r, n, i, s = "", o = 0; o < e.length;) t = l[e.charCodeAt(o++) - 43], r = l[e.charCodeAt(o++) - 43], n = l[e.charCodeAt(o++) - 43], i = l[e.charCodeAt(o++) - 43], s += String.fromCharCode(t << 2 | r >> 4), 64 !== n && (s += String.fromCharCode((15 & r) << 4 | n >> 2), 64 !== i && (s += String.fromCharCode((3 & n) << 6 | i)));
          return s;
        }, s.encodeUtf8 = function (e) {
          return unescape(encodeURIComponent(e));
        }, s.decodeUtf8 = function (e) {
          return decodeURIComponent(escape(e));
        }, s.binary = {
          raw: {},
          hex: {},
          base64: {},
          base58: {},
          baseN: {
            encode: i.encode,
            decode: i.decode
          }
        }, s.binary.raw.encode = function (e) {
          return String.fromCharCode.apply(null, e);
        }, s.binary.raw.decode = function (e, t, r) {
          var n = t;
          n || (n = new Uint8Array(e.length));
          for (var i = r = r || 0, s = 0; s < e.length; ++s) n[i++] = e.charCodeAt(s);
          return t ? i - r : n;
        }, s.binary.hex.encode = s.bytesToHex, s.binary.hex.decode = function (e, t, r) {
          var n = t;
          n || (n = new Uint8Array(Math.ceil(e.length / 2)));
          var i = 0,
            s = r = r || 0;
          for (1 & e.length && (i = 1, n[s++] = parseInt(e[0], 16)); i < e.length; i += 2) n[s++] = parseInt(e.substr(i, 2), 16);
          return t ? s - r : n;
        }, s.binary.base64.encode = function (e, t) {
          for (var r, n, i, s = "", o = "", a = 0; a < e.byteLength;) r = e[a++], n = e[a++], i = e[a++], s += c.charAt(r >> 2), s += c.charAt((3 & r) << 4 | n >> 4), isNaN(n) ? s += "==" : (s += c.charAt((15 & n) << 2 | i >> 6), s += isNaN(i) ? "=" : c.charAt(63 & i)), t && s.length > t && (o += s.substr(0, t) + "\r\n", s = s.substr(t));
          return o + s;
        }, s.binary.base64.decode = function (e, t, r) {
          var n,
            i,
            s,
            o,
            a = t;
          a || (a = new Uint8Array(3 * Math.ceil(e.length / 4))), e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
          for (var c = 0, u = r = r || 0; c < e.length;) n = l[e.charCodeAt(c++) - 43], i = l[e.charCodeAt(c++) - 43], s = l[e.charCodeAt(c++) - 43], o = l[e.charCodeAt(c++) - 43], a[u++] = n << 2 | i >> 4, 64 !== s && (a[u++] = (15 & i) << 4 | s >> 2, 64 !== o && (a[u++] = (3 & s) << 6 | o));
          return t ? u - r : a.subarray(0, u);
        }, s.binary.base58.encode = function (e, t) {
          return s.binary.baseN.encode(e, u, t);
        }, s.binary.base58.decode = function (e, t) {
          return s.binary.baseN.decode(e, u, t);
        }, s.text = {
          utf8: {},
          utf16: {}
        }, s.text.utf8.encode = function (e, t, r) {
          e = s.encodeUtf8(e);
          var n = t;
          n || (n = new Uint8Array(e.length));
          for (var i = r = r || 0, o = 0; o < e.length; ++o) n[i++] = e.charCodeAt(o);
          return t ? i - r : n;
        }, s.text.utf8.decode = function (e) {
          return s.decodeUtf8(String.fromCharCode.apply(null, e));
        }, s.text.utf16.encode = function (e, t, r) {
          var n = t;
          n || (n = new Uint8Array(2 * e.length));
          for (var i = new Uint16Array(n.buffer), s = r = r || 0, o = r, a = 0; a < e.length; ++a) i[o++] = e.charCodeAt(a), s += 2;
          return t ? s - r : n;
        }, s.text.utf16.decode = function (e) {
          return String.fromCharCode.apply(null, new Uint16Array(e.buffer));
        }, s.deflate = function (e, t, r) {
          if (t = s.decode64(e.deflate(s.encode64(t)).rval), r) {
            var n = 2;
            32 & t.charCodeAt(1) && (n = 6), t = t.substring(n, t.length - 4);
          }
          return t;
        }, s.inflate = function (e, t, r) {
          var n = e.inflate(s.encode64(t)).rval;
          return null === n ? null : s.decode64(n);
        };
        var h = function h(e, t, r) {
            if (!e) throw new Error("WebStorage not available.");
            var n;
            if (null === r ? n = e.removeItem(t) : (r = s.encode64(JSON.stringify(r)), n = e.setItem(t, r)), void 0 !== n && !0 !== n.rval) {
              var i = new Error(n.error.message);
              throw i.id = n.error.id, i.name = n.error.name, i;
            }
          },
          d = function d(e, t) {
            if (!e) throw new Error("WebStorage not available.");
            var r = e.getItem(t);
            if (e.init) if (null === r.rval) {
              if (r.error) {
                var n = new Error(r.error.message);
                throw n.id = r.error.id, n.name = r.error.name, n;
              }
              r = null;
            } else r = r.rval;
            return null !== r && (r = JSON.parse(s.decode64(r))), r;
          },
          p = function p(e, t, r, n) {
            var i = d(e, t);
            null === i && (i = {}), i[r] = n, h(e, t, i);
          },
          f = function f(e, t, r) {
            var n = d(e, t);
            return null !== n && (n = r in n ? n[r] : null), n;
          },
          y = function y(e, t, r) {
            var n = d(e, t);
            if (null !== n && r in n) {
              delete n[r];
              var i = !0;
              for (var s in n) {
                i = !1;
                break;
              }
              i && (n = null), h(e, t, n);
            }
          },
          g = function g(e, t) {
            h(e, t, null);
          },
          m = function m(e, t, r) {
            var n,
              i = null;
            void 0 === r && (r = ["web", "flash"]);
            var s = !1,
              o = null;
            for (var a in r) {
              n = r[a];
              try {
                if ("flash" === n || "both" === n) {
                  if (null === t[0]) throw new Error("Flash local storage not available.");
                  i = e.apply(this, t), s = "flash" === n;
                }
                "web" !== n && "both" !== n || (t[0] = localStorage, i = e.apply(this, t), s = !0);
              } catch (e) {
                o = e;
              }
              if (s) break;
            }
            if (!s) throw o;
            return i;
          };
        s.setItem = function (e, t, r, n, i) {
          m(p, arguments, i);
        }, s.getItem = function (e, t, r, n) {
          return m(f, arguments, n);
        }, s.removeItem = function (e, t, r, n) {
          m(y, arguments, n);
        }, s.clearItems = function (e, t, r) {
          m(g, arguments, r);
        }, s.isEmpty = function (e) {
          for (var t in e) if (e.hasOwnProperty(t)) return !1;
          return !0;
        }, s.format = function (e) {
          for (var t, r, n = /%./g, i = 0, s = [], o = 0; t = n.exec(e);) {
            (r = e.substring(o, n.lastIndex - 2)).length > 0 && s.push(r), o = n.lastIndex;
            var a = t[0][1];
            switch (a) {
              case "s":
              case "o":
                i < arguments.length ? s.push(arguments[1 + i++]) : s.push("<?>");
                break;
              case "%":
                s.push("%");
                break;
              default:
                s.push("<%" + a + "?>");
            }
          }
          return s.push(e.substring(o)), s.join("");
        }, s.formatNumber = function (e, t, r, n) {
          var i = e,
            s = isNaN(t = Math.abs(t)) ? 2 : t,
            o = void 0 === r ? "," : r,
            a = void 0 === n ? "." : n,
            c = i < 0 ? "-" : "",
            l = parseInt(i = Math.abs(+i || 0).toFixed(s), 10) + "",
            u = l.length > 3 ? l.length % 3 : 0;
          return c + (u ? l.substr(0, u) + a : "") + l.substr(u).replace(/(\d{3})(?=\d)/g, "$1" + a) + (s ? o + Math.abs(i - l).toFixed(s).slice(2) : "");
        }, s.formatSize = function (e) {
          return e >= 1073741824 ? s.formatNumber(e / 1073741824, 2, ".", "") + " GiB" : e >= 1048576 ? s.formatNumber(e / 1048576, 2, ".", "") + " MiB" : e >= 1024 ? s.formatNumber(e / 1024, 0) + " KiB" : s.formatNumber(e, 0) + " bytes";
        }, s.bytesFromIP = function (e) {
          return -1 !== e.indexOf(".") ? s.bytesFromIPv4(e) : -1 !== e.indexOf(":") ? s.bytesFromIPv6(e) : null;
        }, s.bytesFromIPv4 = function (e) {
          if (4 !== (e = e.split(".")).length) return null;
          for (var t = s.createBuffer(), r = 0; r < e.length; ++r) {
            var n = parseInt(e[r], 10);
            if (isNaN(n)) return null;
            t.putByte(n);
          }
          return t.getBytes();
        }, s.bytesFromIPv6 = function (e) {
          for (var t = 0, r = 2 * (8 - (e = e.split(":").filter(function (e) {
              return 0 === e.length && ++t, !0;
            })).length + t), n = s.createBuffer(), i = 0; i < 8; ++i) if (e[i] && 0 !== e[i].length) {
            var o = s.hexToBytes(e[i]);
            o.length < 2 && n.putByte(0), n.putBytes(o);
          } else n.fillWithByte(0, r), r = 0;
          return n.getBytes();
        }, s.bytesToIP = function (e) {
          return 4 === e.length ? s.bytesToIPv4(e) : 16 === e.length ? s.bytesToIPv6(e) : null;
        }, s.bytesToIPv4 = function (e) {
          if (4 !== e.length) return null;
          for (var t = [], r = 0; r < e.length; ++r) t.push(e.charCodeAt(r));
          return t.join(".");
        }, s.bytesToIPv6 = function (e) {
          if (16 !== e.length) return null;
          for (var t = [], r = [], n = 0, i = 0; i < e.length; i += 2) {
            for (var o = s.bytesToHex(e[i] + e[i + 1]); "0" === o[0] && "0" !== o;) o = o.substr(1);
            if ("0" === o) {
              var a = r[r.length - 1],
                c = t.length;
              a && c === a.end + 1 ? (a.end = c, a.end - a.start > r[n].end - r[n].start && (n = r.length - 1)) : r.push({
                start: c,
                end: c
              });
            }
            t.push(o);
          }
          if (r.length > 0) {
            var l = r[n];
            l.end - l.start > 0 && (t.splice(l.start, l.end - l.start + 1, ""), 0 === l.start && t.unshift(""), 7 === l.end && t.push(""));
          }
          return t.join(":");
        }, s.estimateCores = function (e, t) {
          if ("function" == typeof e && (t = e, e = {}), e = e || {}, "cores" in s && !e.update) return t(null, s.cores);
          if ("undefined" != typeof navigator && "hardwareConcurrency" in navigator && navigator.hardwareConcurrency > 0) return s.cores = navigator.hardwareConcurrency, t(null, s.cores);
          if ("undefined" == typeof Worker) return s.cores = 1, t(null, s.cores);
          if ("undefined" == typeof Blob) return s.cores = 2, t(null, s.cores);
          var r = URL.createObjectURL(new Blob(["(", function () {
            self.addEventListener("message", function (e) {
              for (var t = Date.now(), r = t + 4; Date.now() < r;);
              self.postMessage({
                st: t,
                et: r
              });
            });
          }.toString(), ")()"], {
            type: "application/javascript"
          }));
          !function e(n, i, o) {
            if (0 === i) {
              var a = Math.floor(n.reduce(function (e, t) {
                return e + t;
              }, 0) / n.length);
              return s.cores = Math.max(1, a), URL.revokeObjectURL(r), t(null, s.cores);
            }
            !function (e, t) {
              for (var n = [], i = [], s = 0; s < e; ++s) {
                var o = new Worker(r);
                o.addEventListener("message", function (r) {
                  if (i.push(r.data), i.length === e) {
                    for (var s = 0; s < e; ++s) n[s].terminate();
                    t(0, i);
                  }
                }), n.push(o);
              }
              for (s = 0; s < e; ++s) n[s].postMessage(s);
            }(o, function (t, r) {
              n.push(function (e, t) {
                for (var r = [], n = 0; n < e; ++n) for (var i = t[n], s = r[n] = [], o = 0; o < e; ++o) if (n !== o) {
                  var a = t[o];
                  (i.st > a.st && i.st < a.et || a.st > i.st && a.st < i.et) && s.push(o);
                }
                return r.reduce(function (e, t) {
                  return Math.max(e, t.length);
                }, 0);
              }(o, r)), e(n, i - 1, o);
            });
          }([], 5, 16);
        };
      },
      5414: function _(e, t, r) {
        var n = r(3832);
        r(8925), r(3068), r(3480), r(8991), r(6971), r(6270), r(6953), r(6007), r(8095), r(7116);
        var i = n.asn1,
          s = e.exports = n.pki = n.pki || {},
          o = s.oids,
          a = {};
        a.CN = o.commonName, a.commonName = "CN", a.C = o.countryName, a.countryName = "C", a.L = o.localityName, a.localityName = "L", a.ST = o.stateOrProvinceName, a.stateOrProvinceName = "ST", a.O = o.organizationName, a.organizationName = "O", a.OU = o.organizationalUnitName, a.organizationalUnitName = "OU", a.E = o.emailAddress, a.emailAddress = "E";
        var c = n.pki.rsa.publicKeyValidator,
          l = {
            name: "Certificate",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "Certificate.TBSCertificate",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.SEQUENCE,
              constructed: !0,
              captureAsn1: "tbsCertificate",
              value: [{
                name: "Certificate.TBSCertificate.version",
                tagClass: i.Class.CONTEXT_SPECIFIC,
                type: 0,
                constructed: !0,
                optional: !0,
                value: [{
                  name: "Certificate.TBSCertificate.version.integer",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.INTEGER,
                  constructed: !1,
                  capture: "certVersion"
                }]
              }, {
                name: "Certificate.TBSCertificate.serialNumber",
                tagClass: i.Class.UNIVERSAL,
                type: i.Type.INTEGER,
                constructed: !1,
                capture: "certSerialNumber"
              }, {
                name: "Certificate.TBSCertificate.signature",
                tagClass: i.Class.UNIVERSAL,
                type: i.Type.SEQUENCE,
                constructed: !0,
                value: [{
                  name: "Certificate.TBSCertificate.signature.algorithm",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.OID,
                  constructed: !1,
                  capture: "certinfoSignatureOid"
                }, {
                  name: "Certificate.TBSCertificate.signature.parameters",
                  tagClass: i.Class.UNIVERSAL,
                  optional: !0,
                  captureAsn1: "certinfoSignatureParams"
                }]
              }, {
                name: "Certificate.TBSCertificate.issuer",
                tagClass: i.Class.UNIVERSAL,
                type: i.Type.SEQUENCE,
                constructed: !0,
                captureAsn1: "certIssuer"
              }, {
                name: "Certificate.TBSCertificate.validity",
                tagClass: i.Class.UNIVERSAL,
                type: i.Type.SEQUENCE,
                constructed: !0,
                value: [{
                  name: "Certificate.TBSCertificate.validity.notBefore (utc)",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.UTCTIME,
                  constructed: !1,
                  optional: !0,
                  capture: "certValidity1UTCTime"
                }, {
                  name: "Certificate.TBSCertificate.validity.notBefore (generalized)",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.GENERALIZEDTIME,
                  constructed: !1,
                  optional: !0,
                  capture: "certValidity2GeneralizedTime"
                }, {
                  name: "Certificate.TBSCertificate.validity.notAfter (utc)",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.UTCTIME,
                  constructed: !1,
                  optional: !0,
                  capture: "certValidity3UTCTime"
                }, {
                  name: "Certificate.TBSCertificate.validity.notAfter (generalized)",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.GENERALIZEDTIME,
                  constructed: !1,
                  optional: !0,
                  capture: "certValidity4GeneralizedTime"
                }]
              }, {
                name: "Certificate.TBSCertificate.subject",
                tagClass: i.Class.UNIVERSAL,
                type: i.Type.SEQUENCE,
                constructed: !0,
                captureAsn1: "certSubject"
              }, c, {
                name: "Certificate.TBSCertificate.issuerUniqueID",
                tagClass: i.Class.CONTEXT_SPECIFIC,
                type: 1,
                constructed: !0,
                optional: !0,
                value: [{
                  name: "Certificate.TBSCertificate.issuerUniqueID.id",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.BITSTRING,
                  constructed: !1,
                  captureBitStringValue: "certIssuerUniqueId"
                }]
              }, {
                name: "Certificate.TBSCertificate.subjectUniqueID",
                tagClass: i.Class.CONTEXT_SPECIFIC,
                type: 2,
                constructed: !0,
                optional: !0,
                value: [{
                  name: "Certificate.TBSCertificate.subjectUniqueID.id",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.BITSTRING,
                  constructed: !1,
                  captureBitStringValue: "certSubjectUniqueId"
                }]
              }, {
                name: "Certificate.TBSCertificate.extensions",
                tagClass: i.Class.CONTEXT_SPECIFIC,
                type: 3,
                constructed: !0,
                captureAsn1: "certExtensions",
                optional: !0
              }]
            }, {
              name: "Certificate.signatureAlgorithm",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.SEQUENCE,
              constructed: !0,
              value: [{
                name: "Certificate.signatureAlgorithm.algorithm",
                tagClass: i.Class.UNIVERSAL,
                type: i.Type.OID,
                constructed: !1,
                capture: "certSignatureOid"
              }, {
                name: "Certificate.TBSCertificate.signature.parameters",
                tagClass: i.Class.UNIVERSAL,
                optional: !0,
                captureAsn1: "certSignatureParams"
              }]
            }, {
              name: "Certificate.signatureValue",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.BITSTRING,
              constructed: !1,
              captureBitStringValue: "certSignature"
            }]
          },
          u = {
            name: "rsapss",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SEQUENCE,
            constructed: !0,
            value: [{
              name: "rsapss.hashAlgorithm",
              tagClass: i.Class.CONTEXT_SPECIFIC,
              type: 0,
              constructed: !0,
              value: [{
                name: "rsapss.hashAlgorithm.AlgorithmIdentifier",
                tagClass: i.Class.UNIVERSAL,
                type: i.Class.SEQUENCE,
                constructed: !0,
                optional: !0,
                value: [{
                  name: "rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.OID,
                  constructed: !1,
                  capture: "hashOid"
                }]
              }]
            }, {
              name: "rsapss.maskGenAlgorithm",
              tagClass: i.Class.CONTEXT_SPECIFIC,
              type: 1,
              constructed: !0,
              value: [{
                name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier",
                tagClass: i.Class.UNIVERSAL,
                type: i.Class.SEQUENCE,
                constructed: !0,
                optional: !0,
                value: [{
                  name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.OID,
                  constructed: !1,
                  capture: "maskGenOid"
                }, {
                  name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.SEQUENCE,
                  constructed: !0,
                  value: [{
                    name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",
                    tagClass: i.Class.UNIVERSAL,
                    type: i.Type.OID,
                    constructed: !1,
                    capture: "maskGenHashOid"
                  }]
                }]
              }]
            }, {
              name: "rsapss.saltLength",
              tagClass: i.Class.CONTEXT_SPECIFIC,
              type: 2,
              optional: !0,
              value: [{
                name: "rsapss.saltLength.saltLength",
                tagClass: i.Class.UNIVERSAL,
                type: i.Class.INTEGER,
                constructed: !1,
                capture: "saltLength"
              }]
            }, {
              name: "rsapss.trailerField",
              tagClass: i.Class.CONTEXT_SPECIFIC,
              type: 3,
              optional: !0,
              value: [{
                name: "rsapss.trailer.trailer",
                tagClass: i.Class.UNIVERSAL,
                type: i.Class.INTEGER,
                constructed: !1,
                capture: "trailer"
              }]
            }]
          },
          h = {
            name: "CertificationRequestInfo",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SEQUENCE,
            constructed: !0,
            captureAsn1: "certificationRequestInfo",
            value: [{
              name: "CertificationRequestInfo.integer",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.INTEGER,
              constructed: !1,
              capture: "certificationRequestInfoVersion"
            }, {
              name: "CertificationRequestInfo.subject",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.SEQUENCE,
              constructed: !0,
              captureAsn1: "certificationRequestInfoSubject"
            }, c, {
              name: "CertificationRequestInfo.attributes",
              tagClass: i.Class.CONTEXT_SPECIFIC,
              type: 0,
              constructed: !0,
              optional: !0,
              capture: "certificationRequestInfoAttributes",
              value: [{
                name: "CertificationRequestInfo.attributes",
                tagClass: i.Class.UNIVERSAL,
                type: i.Type.SEQUENCE,
                constructed: !0,
                value: [{
                  name: "CertificationRequestInfo.attributes.type",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.OID,
                  constructed: !1
                }, {
                  name: "CertificationRequestInfo.attributes.value",
                  tagClass: i.Class.UNIVERSAL,
                  type: i.Type.SET,
                  constructed: !0
                }]
              }]
            }]
          },
          d = {
            name: "CertificationRequest",
            tagClass: i.Class.UNIVERSAL,
            type: i.Type.SEQUENCE,
            constructed: !0,
            captureAsn1: "csr",
            value: [h, {
              name: "CertificationRequest.signatureAlgorithm",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.SEQUENCE,
              constructed: !0,
              value: [{
                name: "CertificationRequest.signatureAlgorithm.algorithm",
                tagClass: i.Class.UNIVERSAL,
                type: i.Type.OID,
                constructed: !1,
                capture: "csrSignatureOid"
              }, {
                name: "CertificationRequest.signatureAlgorithm.parameters",
                tagClass: i.Class.UNIVERSAL,
                optional: !0,
                captureAsn1: "csrSignatureParams"
              }]
            }, {
              name: "CertificationRequest.signature",
              tagClass: i.Class.UNIVERSAL,
              type: i.Type.BITSTRING,
              constructed: !1,
              captureBitStringValue: "csrSignature"
            }]
          };
        function p(e, t) {
          "string" == typeof t && (t = {
            shortName: t
          });
          for (var r, n = null, i = 0; null === n && i < e.attributes.length; ++i) r = e.attributes[i], (t.type && t.type === r.type || t.name && t.name === r.name || t.shortName && t.shortName === r.shortName) && (n = r);
          return n;
        }
        s.RDNAttributesAsArray = function (e, t) {
          for (var r, n, s, c = [], l = 0; l < e.value.length; ++l) {
            r = e.value[l];
            for (var u = 0; u < r.value.length; ++u) s = {}, n = r.value[u], s.type = i.derToOid(n.value[0].value), s.value = n.value[1].value, s.valueTagClass = n.value[1].type, s.type in o && (s.name = o[s.type], s.name in a && (s.shortName = a[s.name])), t && (t.update(s.type), t.update(s.value)), c.push(s);
          }
          return c;
        }, s.CRIAttributesAsArray = function (e) {
          for (var t = [], r = 0; r < e.length; ++r) for (var n = e[r], c = i.derToOid(n.value[0].value), l = n.value[1].value, u = 0; u < l.length; ++u) {
            var h = {};
            if (h.type = c, h.value = l[u].value, h.valueTagClass = l[u].type, h.type in o && (h.name = o[h.type], h.name in a && (h.shortName = a[h.name])), h.type === o.extensionRequest) {
              h.extensions = [];
              for (var d = 0; d < h.value.length; ++d) h.extensions.push(s.certificateExtensionFromAsn1(h.value[d]));
            }
            t.push(h);
          }
          return t;
        };
        var f = function f(e, t, r) {
            var n = {};
            if (e !== o["RSASSA-PSS"]) return n;
            r && (n = {
              hash: {
                algorithmOid: o.sha1
              },
              mgf: {
                algorithmOid: o.mgf1,
                hash: {
                  algorithmOid: o.sha1
                }
              },
              saltLength: 20
            });
            var s = {},
              a = [];
            if (!i.validate(t, u, s, a)) {
              var c = new Error("Cannot read RSASSA-PSS parameter block.");
              throw c.errors = a, c;
            }
            return void 0 !== s.hashOid && (n.hash = n.hash || {}, n.hash.algorithmOid = i.derToOid(s.hashOid)), void 0 !== s.maskGenOid && (n.mgf = n.mgf || {}, n.mgf.algorithmOid = i.derToOid(s.maskGenOid), n.mgf.hash = n.mgf.hash || {}, n.mgf.hash.algorithmOid = i.derToOid(s.maskGenHashOid)), void 0 !== s.saltLength && (n.saltLength = s.saltLength.charCodeAt(0)), n;
          },
          y = function y(e) {
            switch (o[e.signatureOid]) {
              case "sha1WithRSAEncryption":
              case "sha1WithRSASignature":
                return n.md.sha1.create();
              case "md5WithRSAEncryption":
                return n.md.md5.create();
              case "sha256WithRSAEncryption":
              case "RSASSA-PSS":
                return n.md.sha256.create();
              case "sha384WithRSAEncryption":
                return n.md.sha384.create();
              case "sha512WithRSAEncryption":
                return n.md.sha512.create();
              default:
                var t = new Error("Could not compute " + e.type + " digest. Unknown signature OID.");
                throw t.signatureOid = e.signatureOid, t;
            }
          },
          g = function g(e) {
            var t,
              r = e.certificate;
            switch (r.signatureOid) {
              case o.sha1WithRSAEncryption:
              case o.sha1WithRSASignature:
                break;
              case o["RSASSA-PSS"]:
                var i, s, a;
                if (void 0 === (i = o[r.signatureParameters.mgf.hash.algorithmOid]) || void 0 === n.md[i]) throw (a = new Error("Unsupported MGF hash function.")).oid = r.signatureParameters.mgf.hash.algorithmOid, a.name = i, a;
                if (void 0 === (s = o[r.signatureParameters.mgf.algorithmOid]) || void 0 === n.mgf[s]) throw (a = new Error("Unsupported MGF function.")).oid = r.signatureParameters.mgf.algorithmOid, a.name = s, a;
                if (s = n.mgf[s].create(n.md[i].create()), void 0 === (i = o[r.signatureParameters.hash.algorithmOid]) || void 0 === n.md[i]) throw (a = new Error("Unsupported RSASSA-PSS hash function.")).oid = r.signatureParameters.hash.algorithmOid, a.name = i, a;
                t = n.pss.create(n.md[i].create(), s, r.signatureParameters.saltLength);
            }
            return r.publicKey.verify(e.md.digest().getBytes(), e.signature, t);
          };
        function m(e) {
          for (var t, r, s = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, []), o = e.attributes, a = 0; a < o.length; ++a) {
            var c = (t = o[a]).value,
              l = i.Type.PRINTABLESTRING;
            "valueTagClass" in t && (l = t.valueTagClass) === i.Type.UTF8 && (c = n.util.encodeUtf8(c)), r = i.create(i.Class.UNIVERSAL, i.Type.SET, !0, [i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(t.type).getBytes()), i.create(i.Class.UNIVERSAL, l, !1, c)])]), s.value.push(r);
          }
          return s;
        }
        function w(e) {
          for (var t, r = 0; r < e.length; ++r) {
            if (void 0 === (t = e[r]).name && (t.type && t.type in s.oids ? t.name = s.oids[t.type] : t.shortName && t.shortName in a && (t.name = s.oids[a[t.shortName]])), void 0 === t.type) {
              if (!t.name || !(t.name in s.oids)) throw (c = new Error("Attribute type not specified.")).attribute = t, c;
              t.type = s.oids[t.name];
            }
            if (void 0 === t.shortName && t.name && t.name in a && (t.shortName = a[t.name]), t.type === o.extensionRequest && (t.valueConstructed = !0, t.valueTagClass = i.Type.SEQUENCE, !t.value && t.extensions)) {
              t.value = [];
              for (var n = 0; n < t.extensions.length; ++n) t.value.push(s.certificateExtensionToAsn1(E(t.extensions[n])));
            }
            var c;
            if (void 0 === t.value) throw (c = new Error("Attribute value not specified.")).attribute = t, c;
          }
        }
        function E(e, t) {
          if (t = t || {}, void 0 === e.name && e.id && e.id in s.oids && (e.name = s.oids[e.id]), void 0 === e.id) {
            if (!e.name || !(e.name in s.oids)) throw (v = new Error("Extension ID not specified.")).extension = e, v;
            e.id = s.oids[e.name];
          }
          if (void 0 !== e.value) return e;
          if ("keyUsage" === e.name) {
            var r = 0,
              a = 0,
              c = 0;
            e.digitalSignature && (a |= 128, r = 7), e.nonRepudiation && (a |= 64, r = 6), e.keyEncipherment && (a |= 32, r = 5), e.dataEncipherment && (a |= 16, r = 4), e.keyAgreement && (a |= 8, r = 3), e.keyCertSign && (a |= 4, r = 2), e.cRLSign && (a |= 2, r = 1), e.encipherOnly && (a |= 1, r = 0), e.decipherOnly && (c |= 128, r = 7);
            var l = String.fromCharCode(r);
            0 !== c ? l += String.fromCharCode(a) + String.fromCharCode(c) : 0 !== a && (l += String.fromCharCode(a)), e.value = i.create(i.Class.UNIVERSAL, i.Type.BITSTRING, !1, l);
          } else if ("basicConstraints" === e.name) e.value = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, []), e.cA && e.value.value.push(i.create(i.Class.UNIVERSAL, i.Type.BOOLEAN, !1, String.fromCharCode(255))), "pathLenConstraint" in e && e.value.value.push(i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, i.integerToDer(e.pathLenConstraint).getBytes()));else if ("extKeyUsage" === e.name) {
            e.value = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, []);
            var u = e.value.value;
            for (var h in e) !0 === e[h] && (h in o ? u.push(i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(o[h]).getBytes())) : -1 !== h.indexOf(".") && u.push(i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(h).getBytes())));
          } else if ("nsCertType" === e.name) r = 0, a = 0, e.client && (a |= 128, r = 7), e.server && (a |= 64, r = 6), e.email && (a |= 32, r = 5), e.objsign && (a |= 16, r = 4), e.reserved && (a |= 8, r = 3), e.sslCA && (a |= 4, r = 2), e.emailCA && (a |= 2, r = 1), e.objCA && (a |= 1, r = 0), l = String.fromCharCode(r), 0 !== a && (l += String.fromCharCode(a)), e.value = i.create(i.Class.UNIVERSAL, i.Type.BITSTRING, !1, l);else if ("subjectAltName" === e.name || "issuerAltName" === e.name) {
            e.value = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, []);
            for (var d = 0; d < e.altNames.length; ++d) {
              if (l = (w = e.altNames[d]).value, 7 === w.type && w.ip) {
                if (null === (l = n.util.bytesFromIP(w.ip))) throw (v = new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension = e, v;
              } else 8 === w.type && (l = w.oid ? i.oidToDer(i.oidToDer(w.oid)) : i.oidToDer(l));
              e.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC, w.type, !1, l));
            }
          } else if ("nsComment" === e.name && t.cert) {
            if (!/^[\x00-\x7F]*$/.test(e.comment) || e.comment.length < 1 || e.comment.length > 128) throw new Error('Invalid "nsComment" content.');
            e.value = i.create(i.Class.UNIVERSAL, i.Type.IA5STRING, !1, e.comment);
          } else if ("subjectKeyIdentifier" === e.name && t.cert) {
            var p = t.cert.generateSubjectKeyIdentifier();
            e.subjectKeyIdentifier = p.toHex(), e.value = i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, p.getBytes());
          } else if ("authorityKeyIdentifier" === e.name && t.cert) {
            if (e.value = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, []), u = e.value.value, e.keyIdentifier) {
              var f = !0 === e.keyIdentifier ? t.cert.generateSubjectKeyIdentifier().getBytes() : e.keyIdentifier;
              u.push(i.create(i.Class.CONTEXT_SPECIFIC, 0, !1, f));
            }
            if (e.authorityCertIssuer) {
              var y = [i.create(i.Class.CONTEXT_SPECIFIC, 4, !0, [m(!0 === e.authorityCertIssuer ? t.cert.issuer : e.authorityCertIssuer)])];
              u.push(i.create(i.Class.CONTEXT_SPECIFIC, 1, !0, y));
            }
            if (e.serialNumber) {
              var g = n.util.hexToBytes(!0 === e.serialNumber ? t.cert.serialNumber : e.serialNumber);
              u.push(i.create(i.Class.CONTEXT_SPECIFIC, 2, !1, g));
            }
          } else if ("cRLDistributionPoints" === e.name) {
            e.value = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, []), u = e.value.value;
            var w,
              E = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, []),
              b = i.create(i.Class.CONTEXT_SPECIFIC, 0, !0, []);
            for (d = 0; d < e.altNames.length; ++d) {
              if (l = (w = e.altNames[d]).value, 7 === w.type && w.ip) {
                if (null === (l = n.util.bytesFromIP(w.ip))) throw (v = new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension = e, v;
              } else 8 === w.type && (l = w.oid ? i.oidToDer(i.oidToDer(w.oid)) : i.oidToDer(l));
              b.value.push(i.create(i.Class.CONTEXT_SPECIFIC, w.type, !1, l));
            }
            E.value.push(i.create(i.Class.CONTEXT_SPECIFIC, 0, !0, [b])), u.push(E);
          }
          var v;
          if (void 0 === e.value) throw (v = new Error("Extension value not specified.")).extension = e, v;
          return e;
        }
        function b(e, t) {
          if (e === o["RSASSA-PSS"]) {
            var r = [];
            return void 0 !== t.hash.algorithmOid && r.push(i.create(i.Class.CONTEXT_SPECIFIC, 0, !0, [i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(t.hash.algorithmOid).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.NULL, !1, "")])])), void 0 !== t.mgf.algorithmOid && r.push(i.create(i.Class.CONTEXT_SPECIFIC, 1, !0, [i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(t.mgf.algorithmOid).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(t.mgf.hash.algorithmOid).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.NULL, !1, "")])])])), void 0 !== t.saltLength && r.push(i.create(i.Class.CONTEXT_SPECIFIC, 2, !0, [i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, i.integerToDer(t.saltLength).getBytes())])), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, r);
          }
          return i.create(i.Class.UNIVERSAL, i.Type.NULL, !1, "");
        }
        function v(e) {
          var t = i.create(i.Class.CONTEXT_SPECIFIC, 0, !0, []);
          if (0 === e.attributes.length) return t;
          for (var r = e.attributes, s = 0; s < r.length; ++s) {
            var o = r[s],
              a = o.value,
              c = i.Type.UTF8;
            "valueTagClass" in o && (c = o.valueTagClass), c === i.Type.UTF8 && (a = n.util.encodeUtf8(a));
            var l = !1;
            "valueConstructed" in o && (l = o.valueConstructed);
            var u = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(o.type).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SET, !0, [i.create(i.Class.UNIVERSAL, c, l, a)])]);
            t.value.push(u);
          }
          return t;
        }
        s.certificateFromPem = function (e, t, r) {
          var o = n.pem.decode(e)[0];
          if ("CERTIFICATE" !== o.type && "X509 CERTIFICATE" !== o.type && "TRUSTED CERTIFICATE" !== o.type) {
            var a = new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');
            throw a.headerType = o.type, a;
          }
          if (o.procType && "ENCRYPTED" === o.procType.type) throw new Error("Could not convert certificate from PEM; PEM is encrypted.");
          var c = i.fromDer(o.body, r);
          return s.certificateFromAsn1(c, t);
        }, s.certificateToPem = function (e, t) {
          var r = {
            type: "CERTIFICATE",
            body: i.toDer(s.certificateToAsn1(e)).getBytes()
          };
          return n.pem.encode(r, {
            maxline: t
          });
        }, s.publicKeyFromPem = function (e) {
          var t = n.pem.decode(e)[0];
          if ("PUBLIC KEY" !== t.type && "RSA PUBLIC KEY" !== t.type) {
            var r = new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');
            throw r.headerType = t.type, r;
          }
          if (t.procType && "ENCRYPTED" === t.procType.type) throw new Error("Could not convert public key from PEM; PEM is encrypted.");
          var o = i.fromDer(t.body);
          return s.publicKeyFromAsn1(o);
        }, s.publicKeyToPem = function (e, t) {
          var r = {
            type: "PUBLIC KEY",
            body: i.toDer(s.publicKeyToAsn1(e)).getBytes()
          };
          return n.pem.encode(r, {
            maxline: t
          });
        }, s.publicKeyToRSAPublicKeyPem = function (e, t) {
          var r = {
            type: "RSA PUBLIC KEY",
            body: i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes()
          };
          return n.pem.encode(r, {
            maxline: t
          });
        }, s.getPublicKeyFingerprint = function (e, t) {
          var r,
            o = (t = t || {}).md || n.md.sha1.create();
          switch (t.type || "RSAPublicKey") {
            case "RSAPublicKey":
              r = i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes();
              break;
            case "SubjectPublicKeyInfo":
              r = i.toDer(s.publicKeyToAsn1(e)).getBytes();
              break;
            default:
              throw new Error('Unknown fingerprint type "' + t.type + '".');
          }
          o.start(), o.update(r);
          var a = o.digest();
          if ("hex" === t.encoding) {
            var c = a.toHex();
            return t.delimiter ? c.match(/.{2}/g).join(t.delimiter) : c;
          }
          if ("binary" === t.encoding) return a.getBytes();
          if (t.encoding) throw new Error('Unknown encoding "' + t.encoding + '".');
          return a;
        }, s.certificationRequestFromPem = function (e, t, r) {
          var o = n.pem.decode(e)[0];
          if ("CERTIFICATE REQUEST" !== o.type) {
            var a = new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');
            throw a.headerType = o.type, a;
          }
          if (o.procType && "ENCRYPTED" === o.procType.type) throw new Error("Could not convert certification request from PEM; PEM is encrypted.");
          var c = i.fromDer(o.body, r);
          return s.certificationRequestFromAsn1(c, t);
        }, s.certificationRequestToPem = function (e, t) {
          var r = {
            type: "CERTIFICATE REQUEST",
            body: i.toDer(s.certificationRequestToAsn1(e)).getBytes()
          };
          return n.pem.encode(r, {
            maxline: t
          });
        }, s.createCertificate = function () {
          var e = {
            version: 2,
            serialNumber: "00",
            signatureOid: null,
            signature: null,
            siginfo: {}
          };
          return e.siginfo.algorithmOid = null, e.validity = {}, e.validity.notBefore = new Date(), e.validity.notAfter = new Date(), e.issuer = {}, e.issuer.getField = function (t) {
            return p(e.issuer, t);
          }, e.issuer.addField = function (t) {
            w([t]), e.issuer.attributes.push(t);
          }, e.issuer.attributes = [], e.issuer.hash = null, e.subject = {}, e.subject.getField = function (t) {
            return p(e.subject, t);
          }, e.subject.addField = function (t) {
            w([t]), e.subject.attributes.push(t);
          }, e.subject.attributes = [], e.subject.hash = null, e.extensions = [], e.publicKey = null, e.md = null, e.setSubject = function (t, r) {
            w(t), e.subject.attributes = t, delete e.subject.uniqueId, r && (e.subject.uniqueId = r), e.subject.hash = null;
          }, e.setIssuer = function (t, r) {
            w(t), e.issuer.attributes = t, delete e.issuer.uniqueId, r && (e.issuer.uniqueId = r), e.issuer.hash = null;
          }, e.setExtensions = function (t) {
            for (var r = 0; r < t.length; ++r) E(t[r], {
              cert: e
            });
            e.extensions = t;
          }, e.getExtension = function (t) {
            "string" == typeof t && (t = {
              name: t
            });
            for (var r, n = null, i = 0; null === n && i < e.extensions.length; ++i) r = e.extensions[i], (t.id && r.id === t.id || t.name && r.name === t.name) && (n = r);
            return n;
          }, e.sign = function (t, r) {
            e.md = r || n.md.sha1.create();
            var a = o[e.md.algorithm + "WithRSAEncryption"];
            if (!a) {
              var c = new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");
              throw c.algorithm = e.md.algorithm, c;
            }
            e.signatureOid = e.siginfo.algorithmOid = a, e.tbsCertificate = s.getTBSCertificate(e);
            var l = i.toDer(e.tbsCertificate);
            e.md.update(l.getBytes()), e.signature = t.sign(e.md);
          }, e.verify = function (t) {
            var r = !1;
            if (!e.issued(t)) {
              var n = t.issuer,
                o = e.subject,
                a = new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");
              throw a.expectedIssuer = o.attributes, a.actualIssuer = n.attributes, a;
            }
            var c = t.md;
            if (null === c) {
              c = y({
                signatureOid: t.signatureOid,
                type: "certificate"
              });
              var l = t.tbsCertificate || s.getTBSCertificate(t),
                u = i.toDer(l);
              c.update(u.getBytes());
            }
            return null !== c && (r = g({
              certificate: e,
              md: c,
              signature: t.signature
            })), r;
          }, e.isIssuer = function (t) {
            var r = !1,
              n = e.issuer,
              i = t.subject;
            if (n.hash && i.hash) r = n.hash === i.hash;else if (n.attributes.length === i.attributes.length) {
              var s, o;
              r = !0;
              for (var a = 0; r && a < n.attributes.length; ++a) s = n.attributes[a], o = i.attributes[a], s.type === o.type && s.value === o.value || (r = !1);
            }
            return r;
          }, e.issued = function (t) {
            return t.isIssuer(e);
          }, e.generateSubjectKeyIdentifier = function () {
            return s.getPublicKeyFingerprint(e.publicKey, {
              type: "RSAPublicKey"
            });
          }, e.verifySubjectKeyIdentifier = function () {
            for (var t = o.subjectKeyIdentifier, r = 0; r < e.extensions.length; ++r) {
              var i = e.extensions[r];
              if (i.id === t) {
                var s = e.generateSubjectKeyIdentifier().getBytes();
                return n.util.hexToBytes(i.subjectKeyIdentifier) === s;
              }
            }
            return !1;
          }, e;
        }, s.certificateFromAsn1 = function (e, t) {
          var r = {},
            o = [];
          if (!i.validate(e, l, r, o)) {
            var a = new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");
            throw a.errors = o, a;
          }
          if (i.derToOid(r.publicKeyOid) !== s.oids.rsaEncryption) throw new Error("Cannot read public key. OID is not RSA.");
          var c = s.createCertificate();
          c.version = r.certVersion ? r.certVersion.charCodeAt(0) : 0;
          var u = n.util.createBuffer(r.certSerialNumber);
          c.serialNumber = u.toHex(), c.signatureOid = n.asn1.derToOid(r.certSignatureOid), c.signatureParameters = f(c.signatureOid, r.certSignatureParams, !0), c.siginfo.algorithmOid = n.asn1.derToOid(r.certinfoSignatureOid), c.siginfo.parameters = f(c.siginfo.algorithmOid, r.certinfoSignatureParams, !1), c.signature = r.certSignature;
          var h = [];
          if (void 0 !== r.certValidity1UTCTime && h.push(i.utcTimeToDate(r.certValidity1UTCTime)), void 0 !== r.certValidity2GeneralizedTime && h.push(i.generalizedTimeToDate(r.certValidity2GeneralizedTime)), void 0 !== r.certValidity3UTCTime && h.push(i.utcTimeToDate(r.certValidity3UTCTime)), void 0 !== r.certValidity4GeneralizedTime && h.push(i.generalizedTimeToDate(r.certValidity4GeneralizedTime)), h.length > 2) throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");
          if (h.length < 2) throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");
          if (c.validity.notBefore = h[0], c.validity.notAfter = h[1], c.tbsCertificate = r.tbsCertificate, t) {
            c.md = y({
              signatureOid: c.signatureOid,
              type: "certificate"
            });
            var d = i.toDer(c.tbsCertificate);
            c.md.update(d.getBytes());
          }
          var g = n.md.sha1.create(),
            m = i.toDer(r.certIssuer);
          g.update(m.getBytes()), c.issuer.getField = function (e) {
            return p(c.issuer, e);
          }, c.issuer.addField = function (e) {
            w([e]), c.issuer.attributes.push(e);
          }, c.issuer.attributes = s.RDNAttributesAsArray(r.certIssuer), r.certIssuerUniqueId && (c.issuer.uniqueId = r.certIssuerUniqueId), c.issuer.hash = g.digest().toHex();
          var E = n.md.sha1.create(),
            b = i.toDer(r.certSubject);
          return E.update(b.getBytes()), c.subject.getField = function (e) {
            return p(c.subject, e);
          }, c.subject.addField = function (e) {
            w([e]), c.subject.attributes.push(e);
          }, c.subject.attributes = s.RDNAttributesAsArray(r.certSubject), r.certSubjectUniqueId && (c.subject.uniqueId = r.certSubjectUniqueId), c.subject.hash = E.digest().toHex(), r.certExtensions ? c.extensions = s.certificateExtensionsFromAsn1(r.certExtensions) : c.extensions = [], c.publicKey = s.publicKeyFromAsn1(r.subjectPublicKeyInfo), c;
        }, s.certificateExtensionsFromAsn1 = function (e) {
          for (var t = [], r = 0; r < e.value.length; ++r) for (var n = e.value[r], i = 0; i < n.value.length; ++i) t.push(s.certificateExtensionFromAsn1(n.value[i]));
          return t;
        }, s.certificateExtensionFromAsn1 = function (e) {
          var t = {};
          if (t.id = i.derToOid(e.value[0].value), t.critical = !1, e.value[1].type === i.Type.BOOLEAN ? (t.critical = 0 !== e.value[1].value.charCodeAt(0), t.value = e.value[2].value) : t.value = e.value[1].value, t.id in o) if (t.name = o[t.id], "keyUsage" === t.name) {
            var r = 0,
              s = 0;
            (c = i.fromDer(t.value)).value.length > 1 && (r = c.value.charCodeAt(1), s = c.value.length > 2 ? c.value.charCodeAt(2) : 0), t.digitalSignature = 128 == (128 & r), t.nonRepudiation = 64 == (64 & r), t.keyEncipherment = 32 == (32 & r), t.dataEncipherment = 16 == (16 & r), t.keyAgreement = 8 == (8 & r), t.keyCertSign = 4 == (4 & r), t.cRLSign = 2 == (2 & r), t.encipherOnly = 1 == (1 & r), t.decipherOnly = 128 == (128 & s);
          } else if ("basicConstraints" === t.name) {
            (c = i.fromDer(t.value)).value.length > 0 && c.value[0].type === i.Type.BOOLEAN ? t.cA = 0 !== c.value[0].value.charCodeAt(0) : t.cA = !1;
            var a = null;
            c.value.length > 0 && c.value[0].type === i.Type.INTEGER ? a = c.value[0].value : c.value.length > 1 && (a = c.value[1].value), null !== a && (t.pathLenConstraint = i.derToInteger(a));
          } else if ("extKeyUsage" === t.name) for (var c = i.fromDer(t.value), l = 0; l < c.value.length; ++l) {
            var u = i.derToOid(c.value[l].value);
            u in o ? t[o[u]] = !0 : t[u] = !0;
          } else if ("nsCertType" === t.name) r = 0, (c = i.fromDer(t.value)).value.length > 1 && (r = c.value.charCodeAt(1)), t.client = 128 == (128 & r), t.server = 64 == (64 & r), t.email = 32 == (32 & r), t.objsign = 16 == (16 & r), t.reserved = 8 == (8 & r), t.sslCA = 4 == (4 & r), t.emailCA = 2 == (2 & r), t.objCA = 1 == (1 & r);else if ("subjectAltName" === t.name || "issuerAltName" === t.name) {
            var h;
            t.altNames = [], c = i.fromDer(t.value);
            for (var d = 0; d < c.value.length; ++d) {
              var p = {
                type: (h = c.value[d]).type,
                value: h.value
              };
              switch (t.altNames.push(p), h.type) {
                case 1:
                case 2:
                case 6:
                  break;
                case 7:
                  p.ip = n.util.bytesToIP(h.value);
                  break;
                case 8:
                  p.oid = i.derToOid(h.value);
              }
            }
          } else "subjectKeyIdentifier" === t.name && (c = i.fromDer(t.value), t.subjectKeyIdentifier = n.util.bytesToHex(c.value));
          return t;
        }, s.certificationRequestFromAsn1 = function (e, t) {
          var r = {},
            o = [];
          if (!i.validate(e, d, r, o)) {
            var a = new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");
            throw a.errors = o, a;
          }
          if (i.derToOid(r.publicKeyOid) !== s.oids.rsaEncryption) throw new Error("Cannot read public key. OID is not RSA.");
          var c = s.createCertificationRequest();
          if (c.version = r.csrVersion ? r.csrVersion.charCodeAt(0) : 0, c.signatureOid = n.asn1.derToOid(r.csrSignatureOid), c.signatureParameters = f(c.signatureOid, r.csrSignatureParams, !0), c.siginfo.algorithmOid = n.asn1.derToOid(r.csrSignatureOid), c.siginfo.parameters = f(c.siginfo.algorithmOid, r.csrSignatureParams, !1), c.signature = r.csrSignature, c.certificationRequestInfo = r.certificationRequestInfo, t) {
            c.md = y({
              signatureOid: c.signatureOid,
              type: "certification request"
            });
            var l = i.toDer(c.certificationRequestInfo);
            c.md.update(l.getBytes());
          }
          var u = n.md.sha1.create();
          return c.subject.getField = function (e) {
            return p(c.subject, e);
          }, c.subject.addField = function (e) {
            w([e]), c.subject.attributes.push(e);
          }, c.subject.attributes = s.RDNAttributesAsArray(r.certificationRequestInfoSubject, u), c.subject.hash = u.digest().toHex(), c.publicKey = s.publicKeyFromAsn1(r.subjectPublicKeyInfo), c.getAttribute = function (e) {
            return p(c, e);
          }, c.addAttribute = function (e) {
            w([e]), c.attributes.push(e);
          }, c.attributes = s.CRIAttributesAsArray(r.certificationRequestInfoAttributes || []), c;
        }, s.createCertificationRequest = function () {
          var e = {
            version: 0,
            signatureOid: null,
            signature: null,
            siginfo: {}
          };
          return e.siginfo.algorithmOid = null, e.subject = {}, e.subject.getField = function (t) {
            return p(e.subject, t);
          }, e.subject.addField = function (t) {
            w([t]), e.subject.attributes.push(t);
          }, e.subject.attributes = [], e.subject.hash = null, e.publicKey = null, e.attributes = [], e.getAttribute = function (t) {
            return p(e, t);
          }, e.addAttribute = function (t) {
            w([t]), e.attributes.push(t);
          }, e.md = null, e.setSubject = function (t) {
            w(t), e.subject.attributes = t, e.subject.hash = null;
          }, e.setAttributes = function (t) {
            w(t), e.attributes = t;
          }, e.sign = function (t, r) {
            e.md = r || n.md.sha1.create();
            var a = o[e.md.algorithm + "WithRSAEncryption"];
            if (!a) {
              var c = new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");
              throw c.algorithm = e.md.algorithm, c;
            }
            e.signatureOid = e.siginfo.algorithmOid = a, e.certificationRequestInfo = s.getCertificationRequestInfo(e);
            var l = i.toDer(e.certificationRequestInfo);
            e.md.update(l.getBytes()), e.signature = t.sign(e.md);
          }, e.verify = function () {
            var t = !1,
              r = e.md;
            if (null === r) {
              r = y({
                signatureOid: e.signatureOid,
                type: "certification request"
              });
              var n = e.certificationRequestInfo || s.getCertificationRequestInfo(e),
                o = i.toDer(n);
              r.update(o.getBytes());
            }
            return null !== r && (t = g({
              certificate: e,
              md: r,
              signature: e.signature
            })), t;
          }, e;
        };
        var _ = new Date("1950-01-01T00:00:00Z"),
          S = new Date("2050-01-01T00:00:00Z");
        function C(e) {
          return e >= _ && e < S ? i.create(i.Class.UNIVERSAL, i.Type.UTCTIME, !1, i.dateToUtcTime(e)) : i.create(i.Class.UNIVERSAL, i.Type.GENERALIZEDTIME, !1, i.dateToGeneralizedTime(e));
        }
        s.getTBSCertificate = function (e) {
          var t = C(e.validity.notBefore),
            r = C(e.validity.notAfter),
            o = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.CONTEXT_SPECIFIC, 0, !0, [i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, i.integerToDer(e.version).getBytes())]), i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, n.util.hexToBytes(e.serialNumber)), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(e.siginfo.algorithmOid).getBytes()), b(e.siginfo.algorithmOid, e.siginfo.parameters)]), m(e.issuer), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [t, r]), m(e.subject), s.publicKeyToAsn1(e.publicKey)]);
          return e.issuer.uniqueId && o.value.push(i.create(i.Class.CONTEXT_SPECIFIC, 1, !0, [i.create(i.Class.UNIVERSAL, i.Type.BITSTRING, !1, String.fromCharCode(0) + e.issuer.uniqueId)])), e.subject.uniqueId && o.value.push(i.create(i.Class.CONTEXT_SPECIFIC, 2, !0, [i.create(i.Class.UNIVERSAL, i.Type.BITSTRING, !1, String.fromCharCode(0) + e.subject.uniqueId)])), e.extensions.length > 0 && o.value.push(s.certificateExtensionsToAsn1(e.extensions)), o;
        }, s.getCertificationRequestInfo = function (e) {
          return i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, i.integerToDer(e.version).getBytes()), m(e.subject), s.publicKeyToAsn1(e.publicKey), v(e)]);
        }, s.distinguishedNameToAsn1 = function (e) {
          return m(e);
        }, s.certificateToAsn1 = function (e) {
          var t = e.tbsCertificate || s.getTBSCertificate(e);
          return i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [t, i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(e.signatureOid).getBytes()), b(e.signatureOid, e.signatureParameters)]), i.create(i.Class.UNIVERSAL, i.Type.BITSTRING, !1, String.fromCharCode(0) + e.signature)]);
        }, s.certificateExtensionsToAsn1 = function (e) {
          var t = i.create(i.Class.CONTEXT_SPECIFIC, 3, !0, []),
            r = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, []);
          t.value.push(r);
          for (var n = 0; n < e.length; ++n) r.value.push(s.certificateExtensionToAsn1(e[n]));
          return t;
        }, s.certificateExtensionToAsn1 = function (e) {
          var t = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, []);
          t.value.push(i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(e.id).getBytes())), e.critical && t.value.push(i.create(i.Class.UNIVERSAL, i.Type.BOOLEAN, !1, String.fromCharCode(255)));
          var r = e.value;
          return "string" != typeof e.value && (r = i.toDer(r).getBytes()), t.value.push(i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, r)), t;
        }, s.certificationRequestToAsn1 = function (e) {
          var t = e.certificationRequestInfo || s.getCertificationRequestInfo(e);
          return i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [t, i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(e.signatureOid).getBytes()), b(e.signatureOid, e.signatureParameters)]), i.create(i.Class.UNIVERSAL, i.Type.BITSTRING, !1, String.fromCharCode(0) + e.signature)]);
        }, s.createCaStore = function (e) {
          var t = {
            certs: {}
          };
          function r(e) {
            return o(e), t.certs[e.hash] || null;
          }
          function o(e) {
            if (!e.hash) {
              var t = n.md.sha1.create();
              e.attributes = s.RDNAttributesAsArray(m(e), t), e.hash = t.digest().toHex();
            }
          }
          if (t.getIssuer = function (e) {
            return r(e.issuer);
          }, t.addCertificate = function (e) {
            if ("string" == typeof e && (e = n.pki.certificateFromPem(e)), o(e.subject), !t.hasCertificate(e)) if (e.subject.hash in t.certs) {
              var r = t.certs[e.subject.hash];
              n.util.isArray(r) || (r = [r]), r.push(e), t.certs[e.subject.hash] = r;
            } else t.certs[e.subject.hash] = e;
          }, t.hasCertificate = function (e) {
            "string" == typeof e && (e = n.pki.certificateFromPem(e));
            var t = r(e.subject);
            if (!t) return !1;
            n.util.isArray(t) || (t = [t]);
            for (var o = i.toDer(s.certificateToAsn1(e)).getBytes(), a = 0; a < t.length; ++a) if (o === i.toDer(s.certificateToAsn1(t[a])).getBytes()) return !0;
            return !1;
          }, t.listAllCertificates = function () {
            var e = [];
            for (var r in t.certs) if (t.certs.hasOwnProperty(r)) {
              var i = t.certs[r];
              if (n.util.isArray(i)) for (var s = 0; s < i.length; ++s) e.push(i[s]);else e.push(i);
            }
            return e;
          }, t.removeCertificate = function (e) {
            var a;
            if ("string" == typeof e && (e = n.pki.certificateFromPem(e)), o(e.subject), !t.hasCertificate(e)) return null;
            var c = r(e.subject);
            if (!n.util.isArray(c)) return a = t.certs[e.subject.hash], delete t.certs[e.subject.hash], a;
            for (var l = i.toDer(s.certificateToAsn1(e)).getBytes(), u = 0; u < c.length; ++u) l === i.toDer(s.certificateToAsn1(c[u])).getBytes() && (a = c[u], c.splice(u, 1));
            return 0 === c.length && delete t.certs[e.subject.hash], a;
          }, e) for (var a = 0; a < e.length; ++a) {
            var c = e[a];
            t.addCertificate(c);
          }
          return t;
        }, s.certificateError = {
          bad_certificate: "forge.pki.BadCertificate",
          unsupported_certificate: "forge.pki.UnsupportedCertificate",
          certificate_revoked: "forge.pki.CertificateRevoked",
          certificate_expired: "forge.pki.CertificateExpired",
          certificate_unknown: "forge.pki.CertificateUnknown",
          unknown_ca: "forge.pki.UnknownCertificateAuthority"
        }, s.verifyCertificateChain = function (e, t, r) {
          "function" == typeof r && (r = {
            verify: r
          }), r = r || {};
          var i = (t = t.slice(0)).slice(0),
            o = r.validityCheckDate;
          void 0 === o && (o = new Date());
          var a = !0,
            c = null,
            l = 0;
          do {
            var u = t.shift(),
              h = null,
              d = !1;
            if (o && (o < u.validity.notBefore || o > u.validity.notAfter) && (c = {
              message: "Certificate is not valid yet or has expired.",
              error: s.certificateError.certificate_expired,
              notBefore: u.validity.notBefore,
              notAfter: u.validity.notAfter,
              now: o
            }), null === c) {
              if (null === (h = t[0] || e.getIssuer(u)) && u.isIssuer(u) && (d = !0, h = u), h) {
                var p = h;
                n.util.isArray(p) || (p = [p]);
                for (var f = !1; !f && p.length > 0;) {
                  h = p.shift();
                  try {
                    f = h.verify(u);
                  } catch (e) {}
                }
                f || (c = {
                  message: "Certificate signature is invalid.",
                  error: s.certificateError.bad_certificate
                });
              }
              null !== c || h && !d || e.hasCertificate(u) || (c = {
                message: "Certificate is not trusted.",
                error: s.certificateError.unknown_ca
              });
            }
            if (null === c && h && !u.isIssuer(h) && (c = {
              message: "Certificate issuer is invalid.",
              error: s.certificateError.bad_certificate
            }), null === c) for (var y = {
                keyUsage: !0,
                basicConstraints: !0
              }, g = 0; null === c && g < u.extensions.length; ++g) {
              var m = u.extensions[g];
              m.critical && !(m.name in y) && (c = {
                message: "Certificate has an unsupported critical extension.",
                error: s.certificateError.unsupported_certificate
              });
            }
            if (null === c && (!a || 0 === t.length && (!h || d))) {
              var w = u.getExtension("basicConstraints"),
                E = u.getExtension("keyUsage");
              null !== E && (E.keyCertSign && null !== w || (c = {
                message: "Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",
                error: s.certificateError.bad_certificate
              })), null !== c || null === w || w.cA || (c = {
                message: "Certificate basicConstraints indicates the certificate is not a CA.",
                error: s.certificateError.bad_certificate
              }), null === c && null !== E && "pathLenConstraint" in w && l - 1 > w.pathLenConstraint && (c = {
                message: "Certificate basicConstraints pathLenConstraint violated.",
                error: s.certificateError.bad_certificate
              });
            }
            var b = null === c || c.error,
              v = r.verify ? r.verify(b, l, i) : b;
            if (!0 !== v) throw !0 === b && (c = {
              message: "The application rejected the certificate.",
              error: s.certificateError.bad_certificate
            }), (v || 0 === v) && ("object" != _typeof(v) || n.util.isArray(v) ? "string" == typeof v && (c.error = v) : (v.message && (c.message = v.message), v.error && (c.error = v.error))), c;
            c = null, a = !1, ++l;
          } while (t.length > 0);
          return !0;
        };
      },
      5103: function _(e, t, r) {
        var n = r(1607),
          i = r(603);
        e.exports = /*#__PURE__*/function () {
          function _class6() {
            _classCallCheck(this, _class6);
            this._buffer = new n(), this._waitingConsumers = new n();
          }
          _createClass(_class6, [{
            key: "push",
            value: function push(e) {
              var _i7 = i(),
                t = _i7.promise,
                r = _i7.resolve;
              return this._buffer.push({
                chunk: e,
                resolve: r
              }), this._consume(), t;
            }
          }, {
            key: "_consume",
            value: function _consume() {
              for (; !this._waitingConsumers.isEmpty() && !this._buffer.isEmpty();) {
                var _e19 = this._waitingConsumers.shift(),
                  _t19 = this._buffer.shift();
                _e19.resolve(_t19.chunk), _t19.resolve();
              }
            }
          }, {
            key: "shift",
            value: function shift() {
              var _i8 = i(),
                e = _i8.promise,
                t = _i8.resolve;
              return this._waitingConsumers.push({
                resolve: t
              }), this._consume(), e;
            }
          }, {
            key: "isEmpty",
            value: function isEmpty() {
              return this._buffer.isEmpty();
            }
          }]);
          return _class6;
        }();
      },
      603: function _(e) {
        "use strict";

        e.exports = function () {
          var e = {};
          return e.promise = new Promise(function (t, r) {
            e.resolve = t, e.reject = r;
          }), e;
        };
      },
      1408: function _(e, t, r) {
        "use strict";

        e.exports = c;
        var n,
          i = r(9693),
          s = i.LongBits,
          o = i.utf8;
        function a(e, t) {
          return RangeError("index out of range: " + e.pos + " + " + (t || 1) + " > " + e.len);
        }
        function c(e) {
          this.buf = e, this.pos = 0, this.len = e.length;
        }
        var l,
          u = "undefined" != typeof Uint8Array ? function (e) {
            if (e instanceof Uint8Array || Array.isArray(e)) return new c(e);
            throw Error("illegal buffer");
          } : function (e) {
            if (Array.isArray(e)) return new c(e);
            throw Error("illegal buffer");
          },
          h = function h() {
            return i.Buffer ? function (e) {
              return (c.create = function (e) {
                return i.Buffer.isBuffer(e) ? new n(e) : u(e);
              })(e);
            } : u;
          };
        function d() {
          var e = new s(0, 0),
            t = 0;
          if (!(this.len - this.pos > 4)) {
            for (; t < 3; ++t) {
              if (this.pos >= this.len) throw a(this);
              if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e;
            }
            return e.lo = (e.lo | (127 & this.buf[this.pos++]) << 7 * t) >>> 0, e;
          }
          for (; t < 4; ++t) if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e;
          if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 28) >>> 0, e.hi = (e.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, this.buf[this.pos++] < 128) return e;
          if (t = 0, this.len - this.pos > 4) {
            for (; t < 5; ++t) if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e;
          } else for (; t < 5; ++t) {
            if (this.pos >= this.len) throw a(this);
            if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e;
          }
          throw Error("invalid varint encoding");
        }
        function p(e, t) {
          return (e[t - 4] | e[t - 3] << 8 | e[t - 2] << 16 | e[t - 1] << 24) >>> 0;
        }
        function f() {
          if (this.pos + 8 > this.len) throw a(this, 8);
          return new s(p(this.buf, this.pos += 4), p(this.buf, this.pos += 4));
        }
        c.create = h(), c.prototype._slice = i.Array.prototype.subarray || i.Array.prototype.slice, c.prototype.uint32 = (l = 4294967295, function () {
          if (l = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128) return l;
          if (l = (l | (127 & this.buf[this.pos]) << 7) >>> 0, this.buf[this.pos++] < 128) return l;
          if (l = (l | (127 & this.buf[this.pos]) << 14) >>> 0, this.buf[this.pos++] < 128) return l;
          if (l = (l | (127 & this.buf[this.pos]) << 21) >>> 0, this.buf[this.pos++] < 128) return l;
          if (l = (l | (15 & this.buf[this.pos]) << 28) >>> 0, this.buf[this.pos++] < 128) return l;
          if ((this.pos += 5) > this.len) throw this.pos = this.len, a(this, 10);
          return l;
        }), c.prototype.int32 = function () {
          return 0 | this.uint32();
        }, c.prototype.sint32 = function () {
          var e = this.uint32();
          return e >>> 1 ^ -(1 & e) | 0;
        }, c.prototype.bool = function () {
          return 0 !== this.uint32();
        }, c.prototype.fixed32 = function () {
          if (this.pos + 4 > this.len) throw a(this, 4);
          return p(this.buf, this.pos += 4);
        }, c.prototype.sfixed32 = function () {
          if (this.pos + 4 > this.len) throw a(this, 4);
          return 0 | p(this.buf, this.pos += 4);
        }, c.prototype.float = function () {
          if (this.pos + 4 > this.len) throw a(this, 4);
          var e = i.float.readFloatLE(this.buf, this.pos);
          return this.pos += 4, e;
        }, c.prototype.double = function () {
          if (this.pos + 8 > this.len) throw a(this, 4);
          var e = i.float.readDoubleLE(this.buf, this.pos);
          return this.pos += 8, e;
        }, c.prototype.bytes = function () {
          var e = this.uint32(),
            t = this.pos,
            r = this.pos + e;
          if (r > this.len) throw a(this, e);
          return this.pos += e, Array.isArray(this.buf) ? this.buf.slice(t, r) : t === r ? new this.buf.constructor(0) : this._slice.call(this.buf, t, r);
        }, c.prototype.string = function () {
          var e = this.bytes();
          return o.read(e, 0, e.length);
        }, c.prototype.skip = function (e) {
          if ("number" == typeof e) {
            if (this.pos + e > this.len) throw a(this, e);
            this.pos += e;
          } else do {
            if (this.pos >= this.len) throw a(this);
          } while (128 & this.buf[this.pos++]);
          return this;
        }, c.prototype.skipType = function (e) {
          switch (e) {
            case 0:
              this.skip();
              break;
            case 1:
              this.skip(8);
              break;
            case 2:
              this.skip(this.uint32());
              break;
            case 3:
              for (; 4 != (e = 7 & this.uint32());) this.skipType(e);
              break;
            case 5:
              this.skip(4);
              break;
            default:
              throw Error("invalid wire type " + e + " at offset " + this.pos);
          }
          return this;
        }, c._configure = function (e) {
          n = e, c.create = h(), n._configure();
          var t = i.Long ? "toLong" : "toNumber";
          i.merge(c.prototype, {
            int64: function int64() {
              return d.call(this)[t](!1);
            },
            uint64: function uint64() {
              return d.call(this)[t](!0);
            },
            sint64: function sint64() {
              return d.call(this).zzDecode()[t](!1);
            },
            fixed64: function fixed64() {
              return f.call(this)[t](!0);
            },
            sfixed64: function sfixed64() {
              return f.call(this)[t](!1);
            }
          });
        };
      },
      593: function _(e, t, r) {
        "use strict";

        e.exports = s;
        var n = r(1408);
        (s.prototype = Object.create(n.prototype)).constructor = s;
        var i = r(9693);
        function s(e) {
          n.call(this, e);
        }
        s._configure = function () {
          i.Buffer && (s.prototype._slice = i.Buffer.prototype.slice);
        }, s.prototype.string = function () {
          var e = this.uint32();
          return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + e, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + e, this.len));
        }, s._configure();
      },
      1945: function _(e, t, r) {
        "use strict";

        e.exports = i;
        var n = r(9693);
        function i(e, t) {
          this.lo = e >>> 0, this.hi = t >>> 0;
        }
        var s = i.zero = new i(0, 0);
        s.toNumber = function () {
          return 0;
        }, s.zzEncode = s.zzDecode = function () {
          return this;
        }, s.length = function () {
          return 1;
        };
        var o = i.zeroHash = "\0\0\0\0\0\0\0\0";
        i.fromNumber = function (e) {
          if (0 === e) return s;
          var t = e < 0;
          t && (e = -e);
          var r = e >>> 0,
            n = (e - r) / 4294967296 >>> 0;
          return t && (n = ~n >>> 0, r = ~r >>> 0, ++r > 4294967295 && (r = 0, ++n > 4294967295 && (n = 0))), new i(r, n);
        }, i.from = function (e) {
          if ("number" == typeof e) return i.fromNumber(e);
          if (n.isString(e)) {
            if (!n.Long) return i.fromNumber(parseInt(e, 10));
            e = n.Long.fromString(e);
          }
          return e.low || e.high ? new i(e.low >>> 0, e.high >>> 0) : s;
        }, i.prototype.toNumber = function (e) {
          if (!e && this.hi >>> 31) {
            var t = 1 + ~this.lo >>> 0,
              r = ~this.hi >>> 0;
            return t || (r = r + 1 >>> 0), -(t + 4294967296 * r);
          }
          return this.lo + 4294967296 * this.hi;
        }, i.prototype.toLong = function (e) {
          return n.Long ? new n.Long(0 | this.lo, 0 | this.hi, Boolean(e)) : {
            low: 0 | this.lo,
            high: 0 | this.hi,
            unsigned: Boolean(e)
          };
        };
        var a = String.prototype.charCodeAt;
        i.fromHash = function (e) {
          return e === o ? s : new i((a.call(e, 0) | a.call(e, 1) << 8 | a.call(e, 2) << 16 | a.call(e, 3) << 24) >>> 0, (a.call(e, 4) | a.call(e, 5) << 8 | a.call(e, 6) << 16 | a.call(e, 7) << 24) >>> 0);
        }, i.prototype.toHash = function () {
          return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24);
        }, i.prototype.zzEncode = function () {
          var e = this.hi >> 31;
          return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ e) >>> 0, this.lo = (this.lo << 1 ^ e) >>> 0, this;
        }, i.prototype.zzDecode = function () {
          var e = -(1 & this.lo);
          return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ e) >>> 0, this.hi = (this.hi >>> 1 ^ e) >>> 0, this;
        }, i.prototype.length = function () {
          var e = this.lo,
            t = (this.lo >>> 28 | this.hi << 4) >>> 0,
            r = this.hi >>> 24;
          return 0 === r ? 0 === t ? e < 16384 ? e < 128 ? 1 : 2 : e < 2097152 ? 3 : 4 : t < 16384 ? t < 128 ? 5 : 6 : t < 2097152 ? 7 : 8 : r < 128 ? 9 : 10;
        };
      },
      9693: function _(e, t, r) {
        "use strict";

        var n = t;
        function i(e, t, r) {
          for (var n = Object.keys(t), i = 0; i < n.length; ++i) void 0 !== e[n[i]] && r || (e[n[i]] = t[n[i]]);
          return e;
        }
        function s(e) {
          function t(e, r) {
            if (!(this instanceof t)) return new t(e, r);
            Object.defineProperty(this, "message", {
              get: function get() {
                return e;
              }
            }), Error.captureStackTrace ? Error.captureStackTrace(this, t) : Object.defineProperty(this, "stack", {
              value: new Error().stack || ""
            }), r && i(this, r);
          }
          return t.prototype = Object.create(Error.prototype, {
            constructor: {
              value: t,
              writable: !0,
              enumerable: !1,
              configurable: !0
            },
            name: {
              get: function get() {
                return e;
              },
              set: void 0,
              enumerable: !1,
              configurable: !0
            },
            toString: {
              value: function value() {
                return this.name + ": " + this.message;
              },
              writable: !0,
              enumerable: !1,
              configurable: !0
            }
          }), t;
        }
        n.asPromise = r(4537), n.base64 = r(7419), n.EventEmitter = r(9211), n.float = r(945), n.inquire = r(7199), n.utf8 = r(4997), n.pool = r(6662), n.LongBits = r(1945), n.isNode = Boolean(void 0 !== r.g && r.g && r.g.process && r.g.process.versions && r.g.process.versions.node), n.global = n.isNode && r.g || "undefined" != typeof window && window || "undefined" != typeof self && self || this, n.emptyArray = Object.freeze ? Object.freeze([]) : [], n.emptyObject = Object.freeze ? Object.freeze({}) : {}, n.isInteger = Number.isInteger || function (e) {
          return "number" == typeof e && isFinite(e) && Math.floor(e) === e;
        }, n.isString = function (e) {
          return "string" == typeof e || e instanceof String;
        }, n.isObject = function (e) {
          return e && "object" == _typeof(e);
        }, n.isset = n.isSet = function (e, t) {
          var r = e[t];
          return !(null == r || !e.hasOwnProperty(t)) && ("object" != _typeof(r) || (Array.isArray(r) ? r.length : Object.keys(r).length) > 0);
        }, n.Buffer = function () {
          try {
            var e = n.inquire("buffer").Buffer;
            return e.prototype.utf8Write ? e : null;
          } catch (e) {
            return null;
          }
        }(), n._Buffer_from = null, n._Buffer_allocUnsafe = null, n.newBuffer = function (e) {
          return "number" == typeof e ? n.Buffer ? n._Buffer_allocUnsafe(e) : new n.Array(e) : n.Buffer ? n._Buffer_from(e) : "undefined" == typeof Uint8Array ? e : new Uint8Array(e);
        }, n.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, n.Long = n.global.dcodeIO && n.global.dcodeIO.Long || n.global.Long || n.inquire("long"), n.key2Re = /^true|false|0|1$/, n.key32Re = /^-?(?:0|[1-9][0-9]*)$/, n.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, n.longToHash = function (e) {
          return e ? n.LongBits.from(e).toHash() : n.LongBits.zeroHash;
        }, n.longFromHash = function (e, t) {
          var r = n.LongBits.fromHash(e);
          return n.Long ? n.Long.fromBits(r.lo, r.hi, t) : r.toNumber(Boolean(t));
        }, n.merge = i, n.lcFirst = function (e) {
          return e.charAt(0).toLowerCase() + e.substring(1);
        }, n.newError = s, n.ProtocolError = s("ProtocolError"), n.oneOfGetter = function (e) {
          for (var t = {}, r = 0; r < e.length; ++r) t[e[r]] = 1;
          return function () {
            for (var e = Object.keys(this), r = e.length - 1; r > -1; --r) if (1 === t[e[r]] && void 0 !== this[e[r]] && null !== this[e[r]]) return e[r];
          };
        }, n.oneOfSetter = function (e) {
          return function (t) {
            for (var r = 0; r < e.length; ++r) e[r] !== t && delete this[e[r]];
          };
        }, n.toJSONOptions = {
          longs: String,
          enums: String,
          bytes: String,
          json: !0
        }, n._configure = function () {
          var e = n.Buffer;
          e ? (n._Buffer_from = e.from !== Uint8Array.from && e.from || function (t, r) {
            return new e(t, r);
          }, n._Buffer_allocUnsafe = e.allocUnsafe || function (t) {
            return new e(t);
          }) : n._Buffer_from = n._Buffer_allocUnsafe = null;
        };
      },
      1173: function _(e, t, r) {
        "use strict";

        e.exports = h;
        var n,
          i = r(9693),
          s = i.LongBits,
          o = i.base64,
          a = i.utf8;
        function c(e, t, r) {
          this.fn = e, this.len = t, this.next = void 0, this.val = r;
        }
        function l() {}
        function u(e) {
          this.head = e.head, this.tail = e.tail, this.len = e.len, this.next = e.states;
        }
        function h() {
          this.len = 0, this.head = new c(l, 0, 0), this.tail = this.head, this.states = null;
        }
        var d = function d() {
          return i.Buffer ? function () {
            return (h.create = function () {
              return new n();
            })();
          } : function () {
            return new h();
          };
        };
        function p(e, t, r) {
          t[r] = 255 & e;
        }
        function f(e, t) {
          this.len = e, this.next = void 0, this.val = t;
        }
        function y(e, t, r) {
          for (; e.hi;) t[r++] = 127 & e.lo | 128, e.lo = (e.lo >>> 7 | e.hi << 25) >>> 0, e.hi >>>= 7;
          for (; e.lo > 127;) t[r++] = 127 & e.lo | 128, e.lo = e.lo >>> 7;
          t[r++] = e.lo;
        }
        function g(e, t, r) {
          t[r] = 255 & e, t[r + 1] = e >>> 8 & 255, t[r + 2] = e >>> 16 & 255, t[r + 3] = e >>> 24;
        }
        h.create = d(), h.alloc = function (e) {
          return new i.Array(e);
        }, i.Array !== Array && (h.alloc = i.pool(h.alloc, i.Array.prototype.subarray)), h.prototype._push = function (e, t, r) {
          return this.tail = this.tail.next = new c(e, t, r), this.len += t, this;
        }, f.prototype = Object.create(c.prototype), f.prototype.fn = function (e, t, r) {
          for (; e > 127;) t[r++] = 127 & e | 128, e >>>= 7;
          t[r] = e;
        }, h.prototype.uint32 = function (e) {
          return this.len += (this.tail = this.tail.next = new f((e >>>= 0) < 128 ? 1 : e < 16384 ? 2 : e < 2097152 ? 3 : e < 268435456 ? 4 : 5, e)).len, this;
        }, h.prototype.int32 = function (e) {
          return e < 0 ? this._push(y, 10, s.fromNumber(e)) : this.uint32(e);
        }, h.prototype.sint32 = function (e) {
          return this.uint32((e << 1 ^ e >> 31) >>> 0);
        }, h.prototype.uint64 = function (e) {
          var t = s.from(e);
          return this._push(y, t.length(), t);
        }, h.prototype.int64 = h.prototype.uint64, h.prototype.sint64 = function (e) {
          var t = s.from(e).zzEncode();
          return this._push(y, t.length(), t);
        }, h.prototype.bool = function (e) {
          return this._push(p, 1, e ? 1 : 0);
        }, h.prototype.fixed32 = function (e) {
          return this._push(g, 4, e >>> 0);
        }, h.prototype.sfixed32 = h.prototype.fixed32, h.prototype.fixed64 = function (e) {
          var t = s.from(e);
          return this._push(g, 4, t.lo)._push(g, 4, t.hi);
        }, h.prototype.sfixed64 = h.prototype.fixed64, h.prototype.float = function (e) {
          return this._push(i.float.writeFloatLE, 4, e);
        }, h.prototype.double = function (e) {
          return this._push(i.float.writeDoubleLE, 8, e);
        };
        var m = i.Array.prototype.set ? function (e, t, r) {
          t.set(e, r);
        } : function (e, t, r) {
          for (var n = 0; n < e.length; ++n) t[r + n] = e[n];
        };
        h.prototype.bytes = function (e) {
          var t = e.length >>> 0;
          if (!t) return this._push(p, 1, 0);
          if (i.isString(e)) {
            var r = h.alloc(t = o.length(e));
            o.decode(e, r, 0), e = r;
          }
          return this.uint32(t)._push(m, t, e);
        }, h.prototype.string = function (e) {
          var t = a.length(e);
          return t ? this.uint32(t)._push(a.write, t, e) : this._push(p, 1, 0);
        }, h.prototype.fork = function () {
          return this.states = new u(this), this.head = this.tail = new c(l, 0, 0), this.len = 0, this;
        }, h.prototype.reset = function () {
          return this.states ? (this.head = this.states.head, this.tail = this.states.tail, this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new c(l, 0, 0), this.len = 0), this;
        }, h.prototype.ldelim = function () {
          var e = this.head,
            t = this.tail,
            r = this.len;
          return this.reset().uint32(r), r && (this.tail.next = e.next, this.tail = t, this.len += r), this;
        }, h.prototype.finish = function () {
          for (var e = this.head.next, t = this.constructor.alloc(this.len), r = 0; e;) e.fn(e.val, t, r), r += e.len, e = e.next;
          return t;
        }, h._configure = function (e) {
          n = e, h.create = d(), n._configure();
        };
      },
      3155: function _(e, t, r) {
        "use strict";

        e.exports = s;
        var n = r(1173);
        (s.prototype = Object.create(n.prototype)).constructor = s;
        var i = r(9693);
        function s() {
          n.call(this);
        }
        function o(e, t, r) {
          e.length < 40 ? i.utf8.write(e, t, r) : t.utf8Write ? t.utf8Write(e, r) : t.write(e, r);
        }
        s._configure = function () {
          s.alloc = i._Buffer_allocUnsafe, s.writeBytesBuffer = i.Buffer && i.Buffer.prototype instanceof Uint8Array && "set" === i.Buffer.prototype.set.name ? function (e, t, r) {
            t.set(e, r);
          } : function (e, t, r) {
            if (e.copy) e.copy(t, r, 0, e.length);else for (var n = 0; n < e.length;) t[r++] = e[n++];
          };
        }, s.prototype.bytes = function (e) {
          i.isString(e) && (e = i._Buffer_from(e, "base64"));
          var t = e.length >>> 0;
          return this.uint32(t), t && this._push(s.writeBytesBuffer, t, e), this;
        }, s.prototype.string = function (e) {
          var t = i.Buffer.byteLength(e);
          return this.uint32(t), t && this._push(o, t, e), this;
        }, s._configure();
      },
      8558: function _(e, t, r) {
        var n = r(4636),
          i = r(1391),
          s = r(4156),
          o = r(4832),
          _r12 = r(1713),
          a = _r12.RateLimiterClusterMaster,
          c = _r12.RateLimiterClusterMasterPM2,
          l = _r12.RateLimiterCluster,
          u = r(2288),
          h = r(5105),
          d = r(911),
          p = r(3766),
          f = r(8686),
          y = r(3328),
          g = r(5155);
        e.exports = {
          RateLimiterRedis: n,
          RateLimiterMongo: i,
          RateLimiterMySQL: s,
          RateLimiterPostgres: o,
          RateLimiterMemory: u,
          RateLimiterMemcache: h,
          RateLimiterClusterMaster: a,
          RateLimiterClusterMasterPM2: c,
          RateLimiterCluster: l,
          RLWrapperBlackAndWhite: d,
          RateLimiterUnion: p,
          RateLimiterQueue: f,
          BurstyRateLimiter: y,
          RateLimiterRes: g
        };
      },
      3328: function _(e, t, r) {
        var n = r(5155);
        e.exports = /*#__PURE__*/function () {
          function _class7(e, t) {
            _classCallCheck(this, _class7);
            this._rateLimiter = e, this._burstLimiter = t;
          }
          _createClass(_class7, [{
            key: "_combineRes",
            value: function _combineRes(e, t) {
              return new n(e.remainingPoints, Math.min(e.msBeforeNext, t.msBeforeNext), e.consumedPoints, e.isFirstInDuration);
            }
          }, {
            key: "consume",
            value: function consume(e) {
              var _this12 = this;
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
              var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              return this._rateLimiter.consume(e, t, r).catch(function (i) {
                return i instanceof n ? _this12._burstLimiter.consume(e, t, r).then(function (e) {
                  return Promise.resolve(_this12._combineRes(i, e));
                }).catch(function (e) {
                  return e instanceof n ? Promise.reject(_this12._combineRes(i, e)) : Promise.reject(e);
                }) : Promise.reject(i);
              });
            }
          }, {
            key: "get",
            value: function get(e) {
              var _this13 = this;
              return Promise.all([this._rateLimiter.get(e), this._burstLimiter.get(e)]).then(function (_ref21) {
                var _ref22 = _slicedToArray(_ref21, 2),
                  e = _ref22[0],
                  t = _ref22[1];
                return _this13._combineRes(e, t);
              });
            }
          }, {
            key: "points",
            get: function get() {
              return this._rateLimiter.points;
            }
          }]);
          return _class7;
        }();
      },
      911: function _(e, t, r) {
        var n = r(5155);
        e.exports = /*#__PURE__*/function () {
          function _class8() {
            var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
            _classCallCheck(this, _class8);
            this.limiter = e.limiter, this.blackList = e.blackList, this.whiteList = e.whiteList, this.isBlackListed = e.isBlackListed, this.isWhiteListed = e.isWhiteListed, this.runActionAnyway = e.runActionAnyway;
          }
          _createClass(_class8, [{
            key: "limiter",
            get: function get() {
              return this._limiter;
            },
            set: function set(e) {
              if (void 0 === e) throw new Error("limiter is not set");
              this._limiter = e;
            }
          }, {
            key: "runActionAnyway",
            get: function get() {
              return this._runActionAnyway;
            },
            set: function set(e) {
              this._runActionAnyway = void 0 !== e && e;
            }
          }, {
            key: "blackList",
            get: function get() {
              return this._blackList;
            },
            set: function set(e) {
              this._blackList = Array.isArray(e) ? e : [];
            }
          }, {
            key: "isBlackListed",
            get: function get() {
              return this._isBlackListed;
            },
            set: function set(e) {
              if (void 0 === e && (e = function e() {
                return !1;
              }), "function" != typeof e) throw new Error("isBlackListed must be function");
              this._isBlackListed = e;
            }
          }, {
            key: "whiteList",
            get: function get() {
              return this._whiteList;
            },
            set: function set(e) {
              this._whiteList = Array.isArray(e) ? e : [];
            }
          }, {
            key: "isWhiteListed",
            get: function get() {
              return this._isWhiteListed;
            },
            set: function set(e) {
              if (void 0 === e && (e = function e() {
                return !1;
              }), "function" != typeof e) throw new Error("isWhiteListed must be function");
              this._isWhiteListed = e;
            }
          }, {
            key: "isBlackListedSomewhere",
            value: function isBlackListedSomewhere(e) {
              return this.blackList.indexOf(e) >= 0 || this.isBlackListed(e);
            }
          }, {
            key: "isWhiteListedSomewhere",
            value: function isWhiteListedSomewhere(e) {
              return this.whiteList.indexOf(e) >= 0 || this.isWhiteListed(e);
            }
          }, {
            key: "getBlackRes",
            value: function getBlackRes() {
              return new n(0, Number.MAX_SAFE_INTEGER, 0, !1);
            }
          }, {
            key: "getWhiteRes",
            value: function getWhiteRes() {
              return new n(Number.MAX_SAFE_INTEGER, 0, 0, !1);
            }
          }, {
            key: "rejectBlack",
            value: function rejectBlack() {
              return Promise.reject(this.getBlackRes());
            }
          }, {
            key: "resolveBlack",
            value: function resolveBlack() {
              return Promise.resolve(this.getBlackRes());
            }
          }, {
            key: "resolveWhite",
            value: function resolveWhite() {
              return Promise.resolve(this.getWhiteRes());
            }
          }, {
            key: "consume",
            value: function consume(e) {
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
              var r;
              return this.isWhiteListedSomewhere(e) ? r = this.resolveWhite() : this.isBlackListedSomewhere(e) && (r = this.rejectBlack()), void 0 === r ? this.limiter.consume(e, t) : (this.runActionAnyway && this.limiter.consume(e, t).catch(function () {}), r);
            }
          }, {
            key: "block",
            value: function block(e, t) {
              var r;
              return this.isWhiteListedSomewhere(e) ? r = this.resolveWhite() : this.isBlackListedSomewhere(e) && (r = this.resolveBlack()), void 0 === r ? this.limiter.block(e, t) : (this.runActionAnyway && this.limiter.block(e, t).catch(function () {}), r);
            }
          }, {
            key: "penalty",
            value: function penalty(e, t) {
              var r;
              return this.isWhiteListedSomewhere(e) ? r = this.resolveWhite() : this.isBlackListedSomewhere(e) && (r = this.resolveBlack()), void 0 === r ? this.limiter.penalty(e, t) : (this.runActionAnyway && this.limiter.penalty(e, t).catch(function () {}), r);
            }
          }, {
            key: "reward",
            value: function reward(e, t) {
              var r;
              return this.isWhiteListedSomewhere(e) ? r = this.resolveWhite() : this.isBlackListedSomewhere(e) && (r = this.resolveBlack()), void 0 === r ? this.limiter.reward(e, t) : (this.runActionAnyway && this.limiter.reward(e, t).catch(function () {}), r);
            }
          }, {
            key: "get",
            value: function get(e) {
              var t;
              return this.isWhiteListedSomewhere(e) ? t = this.resolveWhite() : this.isBlackListedSomewhere(e) && (t = this.resolveBlack()), void 0 === t || this.runActionAnyway ? this.limiter.get(e) : t;
            }
          }, {
            key: "delete",
            value: function _delete(e) {
              return this.limiter.delete(e);
            }
          }]);
          return _class8;
        }();
      },
      1352: function _(e) {
        e.exports = /*#__PURE__*/function () {
          function _class9() {
            var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
            _classCallCheck(this, _class9);
            this.points = e.points, this.duration = e.duration, this.blockDuration = e.blockDuration, this.execEvenly = e.execEvenly, this.execEvenlyMinDelayMs = e.execEvenlyMinDelayMs, this.keyPrefix = e.keyPrefix;
          }
          _createClass(_class9, [{
            key: "points",
            get: function get() {
              return this._points;
            },
            set: function set(e) {
              this._points = e >= 0 ? e : 4;
            }
          }, {
            key: "duration",
            get: function get() {
              return this._duration;
            },
            set: function set(e) {
              this._duration = void 0 === e ? 1 : e;
            }
          }, {
            key: "msDuration",
            get: function get() {
              return 1e3 * this.duration;
            }
          }, {
            key: "blockDuration",
            get: function get() {
              return this._blockDuration;
            },
            set: function set(e) {
              this._blockDuration = void 0 === e ? 0 : e;
            }
          }, {
            key: "msBlockDuration",
            get: function get() {
              return 1e3 * this.blockDuration;
            }
          }, {
            key: "execEvenly",
            get: function get() {
              return this._execEvenly;
            },
            set: function set(e) {
              this._execEvenly = void 0 !== e && Boolean(e);
            }
          }, {
            key: "execEvenlyMinDelayMs",
            get: function get() {
              return this._execEvenlyMinDelayMs;
            },
            set: function set(e) {
              this._execEvenlyMinDelayMs = void 0 === e ? Math.ceil(this.msDuration / this.points) : e;
            }
          }, {
            key: "keyPrefix",
            get: function get() {
              return this._keyPrefix;
            },
            set: function set(e) {
              if (void 0 === e && (e = "rlflx"), "string" != typeof e) throw new Error("keyPrefix must be string");
              this._keyPrefix = e;
            }
          }, {
            key: "_getKeySecDuration",
            value: function _getKeySecDuration() {
              var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              return e && e.customDuration >= 0 ? e.customDuration : this.duration;
            }
          }, {
            key: "getKey",
            value: function getKey(e) {
              return this.keyPrefix.length > 0 ? "".concat(this.keyPrefix, ":").concat(e) : e;
            }
          }, {
            key: "parseKey",
            value: function parseKey(e) {
              return e.substring(this.keyPrefix.length);
            }
          }, {
            key: "consume",
            value: function consume() {
              throw new Error("You have to implement the method 'consume'!");
            }
          }, {
            key: "penalty",
            value: function penalty() {
              throw new Error("You have to implement the method 'penalty'!");
            }
          }, {
            key: "reward",
            value: function reward() {
              throw new Error("You have to implement the method 'reward'!");
            }
          }, {
            key: "get",
            value: function get() {
              throw new Error("You have to implement the method 'get'!");
            }
          }, {
            key: "set",
            value: function set() {
              throw new Error("You have to implement the method 'set'!");
            }
          }, {
            key: "block",
            value: function block() {
              throw new Error("You have to implement the method 'block'!");
            }
          }, {
            key: "delete",
            value: function _delete() {
              throw new Error("You have to implement the method 'delete'!");
            }
          }]);
          return _class9;
        }();
      },
      1713: function _(e, t, r) {
        var n = r(1265),
          i = r(5539),
          s = r(1352),
          o = r(2288),
          a = r(5155),
          c = "rate_limiter_flexible";
        var l = null;
        var u = function u(e, t, r, n) {
            var i;
            i = null === n || !0 === n || !1 === n ? n : {
              remainingPoints: n.remainingPoints,
              msBeforeNext: n.msBeforeNext,
              consumedPoints: n.consumedPoints,
              isFirstInDuration: n.isFirstInDuration
            }, e.send({
              channel: c,
              keyPrefix: t.keyPrefix,
              promiseId: t.promiseId,
              type: r,
              data: i
            });
          },
          h = function h(e) {
            var _this14 = this;
            setTimeout(function () {
              _this14._initiated ? process.send(e) : void 0 !== _this14._promises[e.promiseId] && h.call(_this14, e);
            }, 30);
          },
          d = function d(e, t, r, n, i) {
            var s = {
              channel: c,
              keyPrefix: this.keyPrefix,
              func: e,
              promiseId: t,
              data: {
                key: r,
                arg: n,
                opts: i
              }
            };
            this._initiated ? process.send(s) : h.call(this, s);
          },
          p = function p(e, t) {
            if (!t || t.channel !== c || void 0 === this._rateLimiters[t.keyPrefix]) return !1;
            var r;
            switch (t.func) {
              case "consume":
                r = this._rateLimiters[t.keyPrefix].consume(t.data.key, t.data.arg, t.data.opts);
                break;
              case "penalty":
                r = this._rateLimiters[t.keyPrefix].penalty(t.data.key, t.data.arg, t.data.opts);
                break;
              case "reward":
                r = this._rateLimiters[t.keyPrefix].reward(t.data.key, t.data.arg, t.data.opts);
                break;
              case "block":
                r = this._rateLimiters[t.keyPrefix].block(t.data.key, t.data.arg, t.data.opts);
                break;
              case "get":
                r = this._rateLimiters[t.keyPrefix].get(t.data.key, t.data.opts);
                break;
              case "delete":
                r = this._rateLimiters[t.keyPrefix].delete(t.data.key, t.data.opts);
                break;
              default:
                return !1;
            }
            r && r.then(function (r) {
              u(e, t, "resolve", r);
            }).catch(function (r) {
              u(e, t, "reject", r);
            });
          },
          f = function f(e) {
            if (!e || e.channel !== c || e.keyPrefix !== this.keyPrefix) return !1;
            if (this._promises[e.promiseId]) {
              var _t20;
              switch (clearTimeout(this._promises[e.promiseId].timeoutId), _t20 = null === e.data || !0 === e.data || !1 === e.data ? e.data : new a(e.data.remainingPoints, e.data.msBeforeNext, e.data.consumedPoints, e.data.isFirstInDuration), e.type) {
                case "resolve":
                  this._promises[e.promiseId].resolve(_t20);
                  break;
                case "reject":
                  this._promises[e.promiseId].reject(_t20);
                  break;
                default:
                  throw new Error("RateLimiterCluster: no such message type '".concat(e.type, "'"));
              }
              delete this._promises[e.promiseId];
            }
          },
          y = function y() {
            return {
              points: this.points,
              duration: this.duration,
              blockDuration: this.blockDuration,
              execEvenly: this.execEvenly,
              execEvenlyMinDelayMs: this.execEvenlyMinDelayMs,
              keyPrefix: this.keyPrefix
            };
          },
          g = function g(e, t) {
            var _this15 = this;
            var r = process.hrtime();
            var n = r[0].toString() + r[1].toString();
            return void 0 !== this._promises[n] && (n += i.randomBytes(12).toString("base64")), this._promises[n] = {
              resolve: e,
              reject: t,
              timeoutId: setTimeout(function () {
                delete _this15._promises[n], t(new Error("RateLimiterCluster timeout: no answer from master in time"));
              }, this.timeoutMs)
            }, n;
          };
        e.exports = {
          RateLimiterClusterMaster: /*#__PURE__*/_createClass(function RateLimiterClusterMaster() {
            var _this16 = this;
            _classCallCheck(this, RateLimiterClusterMaster);
            if (l) return l;
            this._rateLimiters = {}, n.setMaxListeners(0), n.on("message", function (e, t) {
              t && t.channel === c && "init" === t.type ? (void 0 === _this16._rateLimiters[t.opts.keyPrefix] && (_this16._rateLimiters[t.opts.keyPrefix] = new o(t.opts)), e.send({
                channel: c,
                type: "init",
                keyPrefix: t.opts.keyPrefix
              })) : p.call(_this16, e, t);
            }), l = this;
          }),
          RateLimiterClusterMasterPM2: /*#__PURE__*/_createClass(function RateLimiterClusterMasterPM2(e) {
            var _this17 = this;
            _classCallCheck(this, RateLimiterClusterMasterPM2);
            if (l) return l;
            this._rateLimiters = {}, e.launchBus(function (t, r) {
              r.on("process:msg", function (t) {
                var r = t.raw;
                r && r.channel === c && "init" === r.type ? (void 0 === _this17._rateLimiters[r.opts.keyPrefix] && (_this17._rateLimiters[r.opts.keyPrefix] = new o(r.opts)), e.sendDataToProcessId(t.process.pm_id, {
                  data: {},
                  topic: c,
                  channel: c,
                  type: "init",
                  keyPrefix: r.opts.keyPrefix
                }, function (e, t) {
                  e && console.log(e, t);
                })) : p.call(_this17, {
                  send: function send(r) {
                    var n = r;
                    n.topic = c, void 0 === n.data && (n.data = {}), e.sendDataToProcessId(t.process.pm_id, n, function (e, t) {
                      e && console.log(e, t);
                    });
                  }
                }, r);
              });
            }), l = this;
          }),
          RateLimiterCluster: /*#__PURE__*/function (_s6) {
            _inherits(RateLimiterCluster, _s6);
            var _super = _createSuper(RateLimiterCluster);
            function RateLimiterCluster() {
              var _this18;
              var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              _classCallCheck(this, RateLimiterCluster);
              _this18 = _super.call(this, e), process.setMaxListeners(0), _this18.timeoutMs = e.timeoutMs, _this18._initiated = !1, process.on("message", function (e) {
                e && e.channel === c && "init" === e.type && e.keyPrefix === _this18.keyPrefix ? _this18._initiated = !0 : f.call(_assertThisInitialized(_this18), e);
              }), process.send({
                channel: c,
                type: "init",
                opts: y.call(_assertThisInitialized(_this18))
              }), _this18._promises = {};
              return _this18;
            }
            _createClass(RateLimiterCluster, [{
              key: "timeoutMs",
              get: function get() {
                return this._timeoutMs;
              },
              set: function set(e) {
                this._timeoutMs = void 0 === e ? 5e3 : Math.abs(parseInt(e));
              }
            }, {
              key: "consume",
              value: function consume(e) {
                var _this19 = this;
                var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
                var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
                return new Promise(function (n, i) {
                  var s = g.call(_this19, n, i);
                  d.call(_this19, "consume", s, e, t, r);
                });
              }
            }, {
              key: "penalty",
              value: function penalty(e) {
                var _this20 = this;
                var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
                var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
                return new Promise(function (n, i) {
                  var s = g.call(_this20, n, i);
                  d.call(_this20, "penalty", s, e, t, r);
                });
              }
            }, {
              key: "reward",
              value: function reward(e) {
                var _this21 = this;
                var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
                var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
                return new Promise(function (n, i) {
                  var s = g.call(_this21, n, i);
                  d.call(_this21, "reward", s, e, t, r);
                });
              }
            }, {
              key: "block",
              value: function block(e, t) {
                var _this22 = this;
                var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
                return new Promise(function (n, i) {
                  var s = g.call(_this22, n, i);
                  d.call(_this22, "block", s, e, t, r);
                });
              }
            }, {
              key: "get",
              value: function get(e) {
                var _this23 = this;
                var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                return new Promise(function (r, n) {
                  var i = g.call(_this23, r, n);
                  d.call(_this23, "get", i, e, t);
                });
              }
            }, {
              key: "delete",
              value: function _delete(e) {
                var _this24 = this;
                var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                return new Promise(function (r, n) {
                  var i = g.call(_this24, r, n);
                  d.call(_this24, "delete", i, e, t);
                });
              }
            }]);
            return RateLimiterCluster;
          }(s)
        };
      },
      5105: function _(e, t, r) {
        var n = r(1090),
          i = r(5155);
        e.exports = /*#__PURE__*/function (_n10) {
          _inherits(_class10, _n10);
          var _super2 = _createSuper(_class10);
          function _class10(e) {
            var _this25;
            _classCallCheck(this, _class10);
            _this25 = _super2.call(this, e), _this25.client = e.storeClient;
            return _this25;
          }
          _createClass(_class10, [{
            key: "_getRateLimiterRes",
            value: function _getRateLimiterRes(e, t, r) {
              var n = new i();
              return n.consumedPoints = parseInt(r.consumedPoints), n.isFirstInDuration = r.consumedPoints === t, n.remainingPoints = Math.max(this.points - n.consumedPoints, 0), n.msBeforeNext = r.msBeforeNext, n;
            }
          }, {
            key: "_upsert",
            value: function _upsert(e, t, r) {
              var _this26 = this;
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
              var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};
              return new Promise(function (s, o) {
                var a = Date.now(),
                  c = Math.floor(r / 1e3);
                n ? _this26.client.set(e, t, c, function (r) {
                  r ? o(r) : _this26.client.set("".concat(e, "_expire"), c > 0 ? a + 1e3 * c : -1, c, function () {
                    s({
                      consumedPoints: t,
                      msBeforeNext: c > 0 ? 1e3 * c : -1
                    });
                  });
                }) : _this26.client.incr(e, t, function (l, u) {
                  l || !1 === u ? _this26.client.add(e, t, c, function (l, u) {
                    if (l || !u) {
                      if (void 0 === i.attemptNumber || i.attemptNumber < 3) {
                        var _a2 = Object.assign({}, i);
                        _a2.attemptNumber = _a2.attemptNumber ? _a2.attemptNumber + 1 : 1, _this26._upsert(e, t, r, n, _a2).then(function (e) {
                          return s(e);
                        }).catch(function (e) {
                          return o(e);
                        });
                      } else o(new Error("Can not add key"));
                    } else _this26.client.add("".concat(e, "_expire"), c > 0 ? a + 1e3 * c : -1, c, function () {
                      s({
                        consumedPoints: t,
                        msBeforeNext: c > 0 ? 1e3 * c : -1
                      });
                    });
                  }) : _this26.client.get("".concat(e, "_expire"), function (e, t) {
                    if (e) o(e);else {
                      var _e20 = !1 === t ? 0 : t,
                        _r13 = {
                          consumedPoints: u,
                          msBeforeNext: _e20 >= 0 ? Math.max(_e20 - a, 0) : -1
                        };
                      s(_r13);
                    }
                  });
                });
              });
            }
          }, {
            key: "_get",
            value: function _get(e) {
              var _this27 = this;
              return new Promise(function (t, r) {
                var n = Date.now();
                _this27.client.get(e, function (i, s) {
                  s ? _this27.client.get("".concat(e, "_expire"), function (e, i) {
                    if (e) r(e);else {
                      var _e21 = !1 === i ? 0 : i,
                        _r14 = {
                          consumedPoints: s,
                          msBeforeNext: _e21 >= 0 ? Math.max(_e21 - n, 0) : -1
                        };
                      t(_r14);
                    }
                  }) : t(null);
                });
              });
            }
          }, {
            key: "_delete",
            value: function _delete(e) {
              var _this28 = this;
              return new Promise(function (t, r) {
                _this28.client.del(e, function (n, i) {
                  n ? r(n) : !1 === i ? t(i) : _this28.client.del("".concat(e, "_expire"), function (e) {
                    e ? r(e) : t(i);
                  });
                });
              });
            }
          }]);
          return _class10;
        }(n);
      },
      2288: function _(e, t, r) {
        var n = r(1352),
          i = r(8425),
          s = r(5155);
        e.exports = /*#__PURE__*/function (_n11) {
          _inherits(_class11, _n11);
          var _super3 = _createSuper(_class11);
          function _class11() {
            var _this29;
            var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
            _classCallCheck(this, _class11);
            _this29 = _super3.call(this, e), _this29._memoryStorage = new i();
            return _this29;
          }
          _createClass(_class11, [{
            key: "consume",
            value: function consume(e) {
              var _this30 = this;
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
              var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              return new Promise(function (n, i) {
                var s = _this30.getKey(e),
                  o = _this30._getKeySecDuration(r);
                var a = _this30._memoryStorage.incrby(s, t, o);
                if (a.remainingPoints = Math.max(_this30.points - a.consumedPoints, 0), a.consumedPoints > _this30.points) _this30.blockDuration > 0 && a.consumedPoints <= _this30.points + t && (a = _this30._memoryStorage.set(s, a.consumedPoints, _this30.blockDuration)), i(a);else if (_this30.execEvenly && a.msBeforeNext > 0 && !a.isFirstInDuration) {
                  var _e22 = Math.ceil(a.msBeforeNext / (a.remainingPoints + 2));
                  _e22 < _this30.execEvenlyMinDelayMs && (_e22 = a.consumedPoints * _this30.execEvenlyMinDelayMs), setTimeout(n, _e22, a);
                } else n(a);
              });
            }
          }, {
            key: "penalty",
            value: function penalty(e) {
              var _this31 = this;
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
              var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              var n = this.getKey(e);
              return new Promise(function (e) {
                var i = _this31._getKeySecDuration(r),
                  s = _this31._memoryStorage.incrby(n, t, i);
                s.remainingPoints = Math.max(_this31.points - s.consumedPoints, 0), e(s);
              });
            }
          }, {
            key: "reward",
            value: function reward(e) {
              var _this32 = this;
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
              var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              var n = this.getKey(e);
              return new Promise(function (e) {
                var i = _this32._getKeySecDuration(r),
                  s = _this32._memoryStorage.incrby(n, -t, i);
                s.remainingPoints = Math.max(_this32.points - s.consumedPoints, 0), e(s);
              });
            }
          }, {
            key: "block",
            value: function block(e, t) {
              var r = 1e3 * t,
                n = this.points + 1;
              return this._memoryStorage.set(this.getKey(e), n, t), Promise.resolve(new s(0, 0 === r ? -1 : r, n));
            }
          }, {
            key: "set",
            value: function set(e, t, r) {
              var n = 1e3 * (r >= 0 ? r : this.duration);
              return this._memoryStorage.set(this.getKey(e), t, r), Promise.resolve(new s(0, 0 === n ? -1 : n, t));
            }
          }, {
            key: "get",
            value: function get(e) {
              var t = this._memoryStorage.get(this.getKey(e));
              return null !== t && (t.remainingPoints = Math.max(this.points - t.consumedPoints, 0)), Promise.resolve(t);
            }
          }, {
            key: "delete",
            value: function _delete(e) {
              return Promise.resolve(this._memoryStorage.delete(this.getKey(e)));
            }
          }]);
          return _class11;
        }(n);
      },
      1391: function _(e, t, r) {
        var n = r(1090),
          i = r(5155);
        function s(e) {
          try {
            var _t21 = e.client ? e.client : e,
              _r15 = _t21.topology.s.options.metadata.driver.version,
              _n12 = _r15.split(".").map(function (e) {
                return parseInt(e);
              });
            return {
              major: _n12[0],
              feature: _n12[1],
              patch: _n12[2]
            };
          } catch (e) {
            return {
              major: 0,
              feature: 0,
              patch: 0
            };
          }
        }
        var o = /*#__PURE__*/function (_n13) {
          _inherits(o, _n13);
          var _super4 = _createSuper(o);
          function o(e) {
            var _this33;
            _classCallCheck(this, o);
            _this33 = _super4.call(this, e), _this33.dbName = e.dbName, _this33.tableName = e.tableName, _this33.indexKeyPrefix = e.indexKeyPrefix, e.mongo ? _this33.client = e.mongo : _this33.client = e.storeClient, "function" == typeof _this33.client.then ? _this33.client.then(function (e) {
              _this33.client = e, _this33._initCollection(), _this33._driverVersion = s(_this33.client);
            }) : (_this33._initCollection(), _this33._driverVersion = s(_this33.client));
            return _this33;
          }
          _createClass(o, [{
            key: "dbName",
            get: function get() {
              return this._dbName;
            },
            set: function set(e) {
              this._dbName = void 0 === e ? o.getDbName() : e;
            }
          }, {
            key: "tableName",
            get: function get() {
              return this._tableName;
            },
            set: function set(e) {
              this._tableName = void 0 === e ? this.keyPrefix : e;
            }
          }, {
            key: "client",
            get: function get() {
              return this._client;
            },
            set: function set(e) {
              if (void 0 === e) throw new Error("mongo is not set");
              this._client = e;
            }
          }, {
            key: "indexKeyPrefix",
            get: function get() {
              return this._indexKeyPrefix;
            },
            set: function set(e) {
              this._indexKeyPrefix = e || {};
            }
          }, {
            key: "_initCollection",
            value: function _initCollection() {
              var e = ("function" == typeof this.client.db ? this.client.db(this.dbName) : this.client).collection(this.tableName);
              e.createIndex({
                expire: -1
              }, {
                expireAfterSeconds: 0
              }), e.createIndex(Object.assign({}, this.indexKeyPrefix, {
                key: 1
              }), {
                unique: !0
              }), this._collection = e;
            }
          }, {
            key: "_getRateLimiterRes",
            value: function _getRateLimiterRes(e, t, r) {
              var n = new i();
              var s;
              return s = void 0 === r.value ? r : r.value, n.isFirstInDuration = s.points === t, n.consumedPoints = s.points, n.remainingPoints = Math.max(this.points - n.consumedPoints, 0), n.msBeforeNext = null !== s.expire ? Math.max(new Date(s.expire).getTime() - Date.now(), 0) : -1, n;
            }
          }, {
            key: "_upsert",
            value: function _upsert(e, t, r) {
              var _this34 = this;
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
              var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};
              if (!this._collection) return Promise.reject(Error("Mongo connection is not established"));
              var s = i.attrs || {};
              var _o2, a;
              n ? (_o2 = {
                key: e
              }, _o2 = Object.assign(_o2, s), a = {
                $set: {
                  key: e,
                  points: t,
                  expire: r > 0 ? new Date(Date.now() + r) : null
                }
              }, a.$set = Object.assign(a.$set, s)) : (_o2 = {
                $or: [{
                  expire: {
                    $gt: new Date()
                  }
                }, {
                  expire: {
                    $eq: null
                  }
                }],
                key: e
              }, _o2 = Object.assign(_o2, s), a = {
                $setOnInsert: {
                  key: e,
                  expire: r > 0 ? new Date(Date.now() + r) : null
                },
                $inc: {
                  points: t
                }
              }, a.$setOnInsert = Object.assign(a.$setOnInsert, s));
              var c = {
                upsert: !0
              };
              return this._driverVersion.major >= 4 || 3 === this._driverVersion.major && this._driverVersion.feature >= 7 || this._driverVersion.feature >= 6 && this._driverVersion.patch >= 7 ? c.returnDocument = "after" : c.returnOriginal = !1, new Promise(function (i, l) {
                _this34._collection.findOneAndUpdate(_o2, a, c).then(function (e) {
                  i(e);
                }).catch(function (_o3) {
                  if (_o3 && 11e3 === _o3.code) {
                    var _o4 = Object.assign({
                        $or: [{
                          expire: {
                            $lte: new Date()
                          }
                        }, {
                          expire: {
                            $eq: null
                          }
                        }],
                        key: e
                      }, s),
                      _a3 = {
                        $set: Object.assign({
                          key: e,
                          points: t,
                          expire: r > 0 ? new Date(Date.now() + r) : null
                        }, s)
                      };
                    _this34._collection.findOneAndUpdate(_o4, _a3, c).then(function (e) {
                      i(e);
                    }).catch(function (s) {
                      s && 11e3 === s.code ? _this34._upsert(e, t, r, n).then(function (e) {
                        return i(e);
                      }).catch(function (e) {
                        return l(e);
                      }) : l(s);
                    });
                  } else l(_o3);
                });
              });
            }
          }, {
            key: "_get",
            value: function _get(e) {
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              if (!this._collection) return Promise.reject(Error("Mongo connection is not established"));
              var r = t.attrs || {},
                n = Object.assign({
                  key: e,
                  $or: [{
                    expire: {
                      $gt: new Date()
                    }
                  }, {
                    expire: {
                      $eq: null
                    }
                  }]
                }, r);
              return this._collection.findOne(n);
            }
          }, {
            key: "_delete",
            value: function _delete(e) {
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              if (!this._collection) return Promise.reject(Error("Mongo connection is not established"));
              var r = t.attrs || {},
                n = Object.assign({
                  key: e
                }, r);
              return this._collection.deleteOne(n).then(function (e) {
                return e.deletedCount > 0;
              });
            }
          }], [{
            key: "getDbName",
            value: function getDbName() {
              return "node-rate-limiter-flexible";
            }
          }]);
          return o;
        }(n);
        e.exports = o;
      },
      4156: function _(e, t, r) {
        var n = r(1090),
          i = r(5155);
        e.exports = /*#__PURE__*/function (_n14) {
          _inherits(_class12, _n14);
          var _super5 = _createSuper(_class12);
          function _class12(e) {
            var _this35;
            var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
            _classCallCheck(this, _class12);
            _this35 = _super5.call(this, e), _this35.client = e.storeClient, _this35.clientType = e.storeType, _this35.dbName = e.dbName, _this35.tableName = e.tableName, _this35.clearExpiredByTimeout = e.clearExpiredByTimeout, _this35.tableCreated = e.tableCreated, _this35.tableCreated ? (_this35.clearExpiredByTimeout && _this35._clearExpiredHourAgo(), "function" == typeof t && t()) : _this35._createDbAndTable().then(function () {
              _this35.tableCreated = !0, _this35.clearExpiredByTimeout && _this35._clearExpiredHourAgo(), "function" == typeof t && t();
            }).catch(function (e) {
              if ("function" != typeof t) throw e;
              t(e);
            });
            return _this35;
          }
          _createClass(_class12, [{
            key: "clearExpired",
            value: function clearExpired(e) {
              var _this36 = this;
              return new Promise(function (t) {
                _this36._getConnection().then(function (r) {
                  r.query("DELETE FROM ??.?? WHERE expire < ?", [_this36.dbName, _this36.tableName, e], function () {
                    _this36._releaseConnection(r), t();
                  });
                }).catch(function () {
                  t();
                });
              });
            }
          }, {
            key: "_clearExpiredHourAgo",
            value: function _clearExpiredHourAgo() {
              var _this37 = this;
              this._clearExpiredTimeoutId && clearTimeout(this._clearExpiredTimeoutId), this._clearExpiredTimeoutId = setTimeout(function () {
                _this37.clearExpired(Date.now() - 36e5).then(function () {
                  _this37._clearExpiredHourAgo();
                });
              }, 3e5), this._clearExpiredTimeoutId.unref();
            }
          }, {
            key: "_getConnection",
            value: function _getConnection() {
              var _this38 = this;
              switch (this.clientType) {
                case "pool":
                  return new Promise(function (e, t) {
                    _this38.client.getConnection(function (r, n) {
                      if (r) return t(r);
                      e(n);
                    });
                  });
                case "sequelize":
                  return this.client.connectionManager.getConnection();
                case "knex":
                  return this.client.client.acquireConnection();
                default:
                  return Promise.resolve(this.client);
              }
            }
          }, {
            key: "_releaseConnection",
            value: function _releaseConnection(e) {
              switch (this.clientType) {
                case "pool":
                  return e.release();
                case "sequelize":
                  return this.client.connectionManager.releaseConnection(e);
                case "knex":
                  return this.client.client.releaseConnection(e);
                default:
                  return !0;
              }
            }
          }, {
            key: "_createDbAndTable",
            value: function _createDbAndTable() {
              var _this39 = this;
              return new Promise(function (e, t) {
                _this39._getConnection().then(function (r) {
                  r.query("CREATE DATABASE IF NOT EXISTS `".concat(_this39.dbName, "`;"), function (n) {
                    if (n) return _this39._releaseConnection(r), t(n);
                    r.query(_this39._getCreateTableStmt(), function (n) {
                      if (n) return _this39._releaseConnection(r), t(n);
                      _this39._releaseConnection(r), e();
                    });
                  });
                }).catch(function (e) {
                  t(e);
                });
              });
            }
          }, {
            key: "_getCreateTableStmt",
            value: function _getCreateTableStmt() {
              return "CREATE TABLE IF NOT EXISTS `".concat(this.dbName, "`.`").concat(this.tableName, "` (`key` VARCHAR(255) CHARACTER SET utf8 NOT NULL,`points` INT(9) NOT NULL default 0,`expire` BIGINT UNSIGNED,PRIMARY KEY (`key`)) ENGINE = INNODB;");
            }
          }, {
            key: "clientType",
            get: function get() {
              return this._clientType;
            },
            set: function set(e) {
              if (void 0 === e) if ("Connection" === this.client.constructor.name) e = "connection";else if ("Pool" === this.client.constructor.name) e = "pool";else {
                if ("Sequelize" !== this.client.constructor.name) throw new Error("storeType is not defined");
                e = "sequelize";
              }
              this._clientType = e.toLowerCase();
            }
          }, {
            key: "dbName",
            get: function get() {
              return this._dbName;
            },
            set: function set(e) {
              this._dbName = void 0 === e ? "rtlmtrflx" : e;
            }
          }, {
            key: "tableName",
            get: function get() {
              return this._tableName;
            },
            set: function set(e) {
              this._tableName = void 0 === e ? this.keyPrefix : e;
            }
          }, {
            key: "tableCreated",
            get: function get() {
              return this._tableCreated;
            },
            set: function set(e) {
              this._tableCreated = void 0 !== e && !!e;
            }
          }, {
            key: "clearExpiredByTimeout",
            get: function get() {
              return this._clearExpiredByTimeout;
            },
            set: function set(e) {
              this._clearExpiredByTimeout = void 0 === e || Boolean(e);
            }
          }, {
            key: "_getRateLimiterRes",
            value: function _getRateLimiterRes(e, t, r) {
              var n = new i(),
                _r16 = _slicedToArray(r, 1),
                s = _r16[0];
              return n.isFirstInDuration = t === s.points, n.consumedPoints = n.isFirstInDuration ? t : s.points, n.remainingPoints = Math.max(this.points - n.consumedPoints, 0), n.msBeforeNext = s.expire ? Math.max(s.expire - Date.now(), 0) : -1, n;
            }
          }, {
            key: "_upsertTransaction",
            value: function _upsertTransaction(e, t, r, n, i) {
              var _this40 = this;
              return new Promise(function (s, o) {
                e.query("BEGIN", function (a) {
                  if (a) return e.rollback(), o(a);
                  var c = Date.now(),
                    l = n > 0 ? c + n : null;
                  var u, h;
                  i ? (u = "INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = ?, \n            expire = ?;", h = [_this40.dbName, _this40.tableName, t, r, l, r, l]) : (u = "INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = IF(expire <= ?, ?, points + (?)), \n            expire = IF(expire <= ?, ?, expire);", h = [_this40.dbName, _this40.tableName, t, r, l, c, r, r, c, l]), e.query(u, h, function (r) {
                    if (r) return e.rollback(), o(r);
                    e.query("SELECT points, expire FROM ??.?? WHERE `key` = ?;", [_this40.dbName, _this40.tableName, t], function (t, r) {
                      if (t) return e.rollback(), o(t);
                      e.query("COMMIT", function (t) {
                        if (t) return e.rollback(), o(t);
                        s(r);
                      });
                    });
                  });
                });
              });
            }
          }, {
            key: "_upsert",
            value: function _upsert(e, t, r) {
              var _this41 = this;
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
              return this.tableCreated ? new Promise(function (i, s) {
                _this41._getConnection().then(function (o) {
                  _this41._upsertTransaction(o, e, t, r, n).then(function (e) {
                    i(e), _this41._releaseConnection(o);
                  }).catch(function (e) {
                    s(e), _this41._releaseConnection(o);
                  });
                }).catch(function (e) {
                  s(e);
                });
              }) : Promise.reject(Error("Table is not created yet"));
            }
          }, {
            key: "_get",
            value: function _get(e) {
              var _this42 = this;
              return this.tableCreated ? new Promise(function (t, r) {
                _this42._getConnection().then(function (n) {
                  n.query("SELECT points, expire FROM ??.?? WHERE `key` = ? AND (`expire` > ? OR `expire` IS NULL)", [_this42.dbName, _this42.tableName, e, Date.now()], function (e, i) {
                    e ? r(e) : 0 === i.length ? t(null) : t(i), _this42._releaseConnection(n);
                  });
                }).catch(function (e) {
                  r(e);
                });
              }) : Promise.reject(Error("Table is not created yet"));
            }
          }, {
            key: "_delete",
            value: function _delete(e) {
              var _this43 = this;
              return this.tableCreated ? new Promise(function (t, r) {
                _this43._getConnection().then(function (n) {
                  n.query("DELETE FROM ??.?? WHERE `key` = ?", [_this43.dbName, _this43.tableName, e], function (e, i) {
                    e ? r(e) : t(i.affectedRows > 0), _this43._releaseConnection(n);
                  });
                }).catch(function (e) {
                  r(e);
                });
              }) : Promise.reject(Error("Table is not created yet"));
            }
          }]);
          return _class12;
        }(n);
      },
      4832: function _(e, t, r) {
        var n = r(1090),
          i = r(5155);
        e.exports = /*#__PURE__*/function (_n15) {
          _inherits(_class13, _n15);
          var _super6 = _createSuper(_class13);
          function _class13(e) {
            var _this44;
            var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
            _classCallCheck(this, _class13);
            _this44 = _super6.call(this, e), _this44.client = e.storeClient, _this44.clientType = e.storeType, _this44.tableName = e.tableName, _this44.clearExpiredByTimeout = e.clearExpiredByTimeout, _this44.tableCreated = e.tableCreated, _this44.tableCreated ? "function" == typeof t && t() : _this44._createTable().then(function () {
              _this44.tableCreated = !0, _this44.clearExpiredByTimeout && _this44._clearExpiredHourAgo(), "function" == typeof t && t();
            }).catch(function (e) {
              if ("function" != typeof t) throw e;
              t(e);
            });
            return _this44;
          }
          _createClass(_class13, [{
            key: "clearExpired",
            value: function clearExpired(e) {
              var _this45 = this;
              return new Promise(function (t) {
                var r = {
                  name: "rlflx-clear-expired",
                  text: "DELETE FROM ".concat(_this45.tableName, " WHERE expire < $1"),
                  values: [e]
                };
                _this45._query(r).then(function () {
                  t();
                }).catch(function () {
                  t();
                });
              });
            }
          }, {
            key: "_clearExpiredHourAgo",
            value: function _clearExpiredHourAgo() {
              var _this46 = this;
              this._clearExpiredTimeoutId && clearTimeout(this._clearExpiredTimeoutId), this._clearExpiredTimeoutId = setTimeout(function () {
                _this46.clearExpired(Date.now() - 36e5).then(function () {
                  _this46._clearExpiredHourAgo();
                });
              }, 3e5), this._clearExpiredTimeoutId.unref();
            }
          }, {
            key: "_getConnection",
            value: function _getConnection() {
              switch (this.clientType) {
                case "pool":
                default:
                  return Promise.resolve(this.client);
                case "sequelize":
                  return this.client.connectionManager.getConnection();
                case "knex":
                  return this.client.client.acquireConnection();
                case "typeorm":
                  return Promise.resolve(this.client.driver.master);
              }
            }
          }, {
            key: "_releaseConnection",
            value: function _releaseConnection(e) {
              switch (this.clientType) {
                case "pool":
                case "typeorm":
                default:
                  return !0;
                case "sequelize":
                  return this.client.connectionManager.releaseConnection(e);
                case "knex":
                  return this.client.client.releaseConnection(e);
              }
            }
          }, {
            key: "_createTable",
            value: function _createTable() {
              var _this47 = this;
              return new Promise(function (e, t) {
                _this47._query({
                  text: _this47._getCreateTableStmt()
                }).then(function () {
                  e();
                }).catch(function (r) {
                  "23505" === r.code ? e() : t(r);
                });
              });
            }
          }, {
            key: "_getCreateTableStmt",
            value: function _getCreateTableStmt() {
              return "CREATE TABLE IF NOT EXISTS ".concat(this.tableName, " ( \n      key varchar(255) PRIMARY KEY,\n      points integer NOT NULL DEFAULT 0,\n      expire bigint\n    );");
            }
          }, {
            key: "clientType",
            get: function get() {
              return this._clientType;
            },
            set: function set(e) {
              var t = this.client.constructor.name;
              if (void 0 === e) if ("Client" === t) e = "client";else if ("Pool" === t || "BoundPool" === t) e = "pool";else {
                if ("Sequelize" !== t) throw new Error("storeType is not defined");
                e = "sequelize";
              }
              this._clientType = e.toLowerCase();
            }
          }, {
            key: "tableName",
            get: function get() {
              return this._tableName;
            },
            set: function set(e) {
              this._tableName = void 0 === e ? this.keyPrefix : e;
            }
          }, {
            key: "tableCreated",
            get: function get() {
              return this._tableCreated;
            },
            set: function set(e) {
              this._tableCreated = void 0 !== e && !!e;
            }
          }, {
            key: "clearExpiredByTimeout",
            get: function get() {
              return this._clearExpiredByTimeout;
            },
            set: function set(e) {
              this._clearExpiredByTimeout = void 0 === e || Boolean(e);
            }
          }, {
            key: "_getRateLimiterRes",
            value: function _getRateLimiterRes(e, t, r) {
              var n = new i(),
                s = r.rows[0];
              return n.isFirstInDuration = t === s.points, n.consumedPoints = n.isFirstInDuration ? t : s.points, n.remainingPoints = Math.max(this.points - n.consumedPoints, 0), n.msBeforeNext = s.expire ? Math.max(s.expire - Date.now(), 0) : -1, n;
            }
          }, {
            key: "_query",
            value: function _query(e) {
              var _this48 = this;
              var t = {
                name: "".concat(this.tableName.toLowerCase(), ":").concat(e.name),
                text: e.text,
                values: e.values
              };
              return new Promise(function (e, r) {
                _this48._getConnection().then(function (n) {
                  n.query(t).then(function (t) {
                    e(t), _this48._releaseConnection(n);
                  }).catch(function (e) {
                    r(e), _this48._releaseConnection(n);
                  });
                }).catch(function (e) {
                  r(e);
                });
              });
            }
          }, {
            key: "_upsert",
            value: function _upsert(e, t, r) {
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
              if (!this.tableCreated) return Promise.reject(Error("Table is not created yet"));
              var i = r > 0 ? Date.now() + r : null,
                s = n ? " $3 " : " CASE\n             WHEN ".concat(this.tableName, ".expire <= $4 THEN $3\n             ELSE ").concat(this.tableName, ".expire\n            END ");
              return this._query({
                name: n ? "rlflx-upsert-force" : "rlflx-upsert",
                text: "\n            INSERT INTO ".concat(this.tableName, " VALUES ($1, $2, $3)\n              ON CONFLICT(key) DO UPDATE SET\n                points = CASE\n                          WHEN (").concat(this.tableName, ".expire <= $4 OR 1=").concat(n ? 1 : 0, ") THEN $2\n                          ELSE ").concat(this.tableName, ".points + ($2)\n                         END,\n                expire = ").concat(s, "\n            RETURNING points, expire;"),
                values: [e, t, i, Date.now()]
              });
            }
          }, {
            key: "_get",
            value: function _get(e) {
              var _this49 = this;
              return this.tableCreated ? new Promise(function (t, r) {
                _this49._query({
                  name: "rlflx-get",
                  text: "\n            SELECT points, expire FROM ".concat(_this49.tableName, " WHERE key = $1 AND (expire > $2 OR expire IS NULL);"),
                  values: [e, Date.now()]
                }).then(function (e) {
                  0 === e.rowCount && (e = null), t(e);
                }).catch(function (e) {
                  r(e);
                });
              }) : Promise.reject(Error("Table is not created yet"));
            }
          }, {
            key: "_delete",
            value: function _delete(e) {
              return this.tableCreated ? this._query({
                name: "rlflx-delete",
                text: "DELETE FROM ".concat(this.tableName, " WHERE key = $1"),
                values: [e]
              }).then(function (e) {
                return e.rowCount > 0;
              }) : Promise.reject(Error("Table is not created yet"));
            }
          }]);
          return _class13;
        }(n);
      },
      8686: function _(e, t, r) {
        var n = r(5255),
          i = 4294967295,
          s = "limiter";
        e.exports = /*#__PURE__*/function () {
          function _class14(e) {
            var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
              maxQueueSize: i
            };
            _classCallCheck(this, _class14);
            this._queueLimiters = {
              KEY_DEFAULT: new o(e, t)
            }, this._limiterFlexible = e, this._maxQueueSize = t.maxQueueSize;
          }
          _createClass(_class14, [{
            key: "getTokensRemaining",
            value: function getTokensRemaining() {
              var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : s;
              return this._queueLimiters[e] ? this._queueLimiters[e].getTokensRemaining() : Promise.resolve(this._limiterFlexible.points);
            }
          }, {
            key: "removeTokens",
            value: function removeTokens(e) {
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : s;
              return this._queueLimiters[t] || (this._queueLimiters[t] = new o(this._limiterFlexible, {
                key: t,
                maxQueueSize: this._maxQueueSize
              })), this._queueLimiters[t].removeTokens(e);
            }
          }]);
          return _class14;
        }();
        var o = /*#__PURE__*/function () {
          function o(e) {
            var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
              maxQueueSize: i,
              key: s
            };
            _classCallCheck(this, o);
            this._key = t.key, this._waitTimeout = null, this._queue = [], this._limiterFlexible = e, this._maxQueueSize = t.maxQueueSize;
          }
          _createClass(o, [{
            key: "getTokensRemaining",
            value: function getTokensRemaining() {
              var _this50 = this;
              return this._limiterFlexible.get(this._key).then(function (e) {
                return null !== e ? e.remainingPoints : _this50._limiterFlexible.points;
              });
            }
          }, {
            key: "removeTokens",
            value: function removeTokens(e) {
              var t = this;
              return new Promise(function (r, i) {
                e > t._limiterFlexible.points ? i(new n("Requested tokens ".concat(e, " exceeds maximum ").concat(t._limiterFlexible.points, " tokens per interval"))) : t._queue.length > 0 ? t._queueRequest.call(t, r, i, e) : t._limiterFlexible.consume(t._key, e).then(function (e) {
                  r(e.remainingPoints);
                }).catch(function (n) {
                  n instanceof Error ? i(n) : (t._queueRequest.call(t, r, i, e), null === t._waitTimeout && (t._waitTimeout = setTimeout(t._processFIFO.bind(t), n.msBeforeNext)));
                });
              });
            }
          }, {
            key: "_queueRequest",
            value: function _queueRequest(e, t, r) {
              var i = this;
              i._queue.length < i._maxQueueSize ? i._queue.push({
                resolve: e,
                reject: t,
                tokens: r
              }) : t(new n("Number of requests reached it's maximum ".concat(i._maxQueueSize)));
            }
          }, {
            key: "_processFIFO",
            value: function _processFIFO() {
              var e = this;
              if (null !== e._waitTimeout && (clearTimeout(e._waitTimeout), e._waitTimeout = null), 0 === e._queue.length) return;
              var t = e._queue.shift();
              e._limiterFlexible.consume(e._key, t.tokens).then(function (r) {
                t.resolve(r.remainingPoints), e._processFIFO.call(e);
              }).catch(function (r) {
                r instanceof Error ? (t.reject(r), e._processFIFO.call(e)) : (e._queue.unshift(t), null === e._waitTimeout && (e._waitTimeout = setTimeout(e._processFIFO.bind(e), r.msBeforeNext)));
              });
            }
          }]);
          return o;
        }();
      },
      4636: function _(e, t, r) {
        var n = r(1090),
          i = r(5155),
          s = "redis.call('set', KEYS[1], 0, 'EX', ARGV[2], 'NX') local consumed = redis.call('incrby', KEYS[1], ARGV[1]) local ttl = redis.call('pttl', KEYS[1]) if ttl == -1 then   redis.call('expire', KEYS[1], ARGV[2])   ttl = 1000 * ARGV[2] end return {consumed, ttl} ";
        e.exports = /*#__PURE__*/function (_n16) {
          _inherits(_class15, _n16);
          var _super7 = _createSuper(_class15);
          function _class15(e) {
            var _this51;
            _classCallCheck(this, _class15);
            _this51 = _super7.call(this, e), e.redis ? _this51.client = e.redis : _this51.client = e.storeClient, _this51._rejectIfRedisNotReady = !!e.rejectIfRedisNotReady, "function" == typeof _this51.client.defineCommand && _this51.client.defineCommand("rlflxIncr", {
              numberOfKeys: 1,
              lua: s
            });
            return _this51;
          }
          _createClass(_class15, [{
            key: "_isRedisReady",
            value: function _isRedisReady() {
              return !(this._rejectIfRedisNotReady && (this.client.status && "ready" !== this.client.status || "function" == typeof this.client.isReady && !this.client.isReady()));
            }
          }, {
            key: "_getRateLimiterRes",
            value: function _getRateLimiterRes(e, t, r) {
              var _n17, _n18, _s7, _s8;
              var _r17 = _slicedToArray(r, 2),
                n = _r17[0],
                s = _r17[1];
              Array.isArray(n) && ((_n17 = n, _n18 = _slicedToArray(_n17, 2), n = _n18[1]), (_s7 = s, _s8 = _slicedToArray(_s7, 2), s = _s8[1]));
              var o = new i();
              return o.consumedPoints = parseInt(n), o.isFirstInDuration = o.consumedPoints === t, o.remainingPoints = Math.max(this.points - o.consumedPoints, 0), o.msBeforeNext = s, o;
            }
          }, {
            key: "_upsert",
            value: function _upsert(e, t, r) {
              var _this52 = this;
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
              return new Promise(function (i, o) {
                if (!_this52._isRedisReady()) return o(new Error("Redis connection is not ready"));
                var a = Math.floor(r / 1e3),
                  c = _this52.client.multi();
                if (n) a > 0 ? c.set(e, t, "EX", a) : c.set(e, t), c.pttl(e).exec(function (e, t) {
                  return e ? o(e) : i(t);
                });else if (a > 0) {
                  var _r18 = function _r18(e, t) {
                    return e ? o(e) : i(t);
                  };
                  "function" == typeof _this52.client.rlflxIncr ? _this52.client.rlflxIncr(e, t, a, _r18) : _this52.client.eval(s, 1, e, t, a, _r18);
                } else c.incrby(e, t).pttl(e).exec(function (e, t) {
                  return e ? o(e) : i(t);
                });
              });
            }
          }, {
            key: "_get",
            value: function _get(e) {
              var _this53 = this;
              return new Promise(function (t, r) {
                if (!_this53._isRedisReady()) return r(new Error("Redis connection is not ready"));
                _this53.client.multi().get(e).pttl(e).exec(function (e, n) {
                  if (e) r(e);else {
                    var _n19 = _slicedToArray(n, 1),
                      _e23 = _n19[0];
                    if (null === _e23) return t(null);
                    t(n);
                  }
                });
              });
            }
          }, {
            key: "_delete",
            value: function _delete(e) {
              var _this54 = this;
              return new Promise(function (t, r) {
                _this54.client.del(e, function (e, n) {
                  e ? r(e) : t(n > 0);
                });
              });
            }
          }]);
          return _class15;
        }(n);
      },
      5155: function _(e) {
        e.exports = /*#__PURE__*/function (_Symbol$for) {
          function _class16(e, t, r, n) {
            _classCallCheck(this, _class16);
            this.remainingPoints = void 0 === e ? 0 : e, this.msBeforeNext = void 0 === t ? 0 : t, this.consumedPoints = void 0 === r ? 0 : r, this.isFirstInDuration = void 0 !== n && n;
          }
          _createClass(_class16, [{
            key: "msBeforeNext",
            get: function get() {
              return this._msBeforeNext;
            },
            set: function set(e) {
              return this._msBeforeNext = e, this;
            }
          }, {
            key: "remainingPoints",
            get: function get() {
              return this._remainingPoints;
            },
            set: function set(e) {
              return this._remainingPoints = e, this;
            }
          }, {
            key: "consumedPoints",
            get: function get() {
              return this._consumedPoints;
            },
            set: function set(e) {
              return this._consumedPoints = e, this;
            }
          }, {
            key: "isFirstInDuration",
            get: function get() {
              return this._isFirstInDuration;
            },
            set: function set(e) {
              this._isFirstInDuration = Boolean(e);
            }
          }, {
            key: "_getDecoratedProperties",
            value: function _getDecoratedProperties() {
              return {
                remainingPoints: this.remainingPoints,
                msBeforeNext: this.msBeforeNext,
                consumedPoints: this.consumedPoints,
                isFirstInDuration: this.isFirstInDuration
              };
            }
          }, {
            key: _Symbol$for,
            value: function value() {
              return this._getDecoratedProperties();
            }
          }, {
            key: "toString",
            value: function toString() {
              return JSON.stringify(this._getDecoratedProperties());
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              return this._getDecoratedProperties();
            }
          }]);
          return _class16;
        }(Symbol.for("nodejs.util.inspect.custom"));
      },
      1090: function _(e, t, r) {
        var n = r(1352),
          i = r(2423),
          s = r(5155);
        e.exports = /*#__PURE__*/function (_n20) {
          _inherits(_class17, _n20);
          var _super8 = _createSuper(_class17);
          function _class17() {
            var _this55;
            var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
            _classCallCheck(this, _class17);
            _this55 = _super8.call(this, e), _this55.inMemoryBlockOnConsumed = e.inMemoryBlockOnConsumed || e.inmemoryBlockOnConsumed, _this55.inMemoryBlockDuration = e.inMemoryBlockDuration || e.inmemoryBlockDuration, _this55.insuranceLimiter = e.insuranceLimiter, _this55._inMemoryBlockedKeys = new i();
            return _this55;
          }
          _createClass(_class17, [{
            key: "client",
            get: function get() {
              return this._client;
            },
            set: function set(e) {
              if (void 0 === e) throw new Error("storeClient is not set");
              this._client = e;
            }
          }, {
            key: "_afterConsume",
            value: function _afterConsume(e, t, r, n, i) {
              var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};
              var o = this._getRateLimiterRes(r, n, i);
              if (this.inMemoryBlockOnConsumed > 0 && !(this.inMemoryBlockDuration > 0) && o.consumedPoints >= this.inMemoryBlockOnConsumed) return this._inMemoryBlockedKeys.addMs(r, o.msBeforeNext), o.consumedPoints > this.points ? t(o) : e(o);
              if (o.consumedPoints > this.points) {
                var _e24 = Promise.resolve();
                this.blockDuration > 0 && o.consumedPoints <= this.points + n && (o.msBeforeNext = this.msBlockDuration, _e24 = this._block(r, o.consumedPoints, this.msBlockDuration, s)), this.inMemoryBlockOnConsumed > 0 && o.consumedPoints >= this.inMemoryBlockOnConsumed && (this._inMemoryBlockedKeys.add(r, this.inMemoryBlockDuration), o.msBeforeNext = this.msInMemoryBlockDuration), _e24.then(function () {
                  t(o);
                }).catch(function (e) {
                  t(e);
                });
              } else if (this.execEvenly && o.msBeforeNext > 0 && !o.isFirstInDuration) {
                var _t22 = Math.ceil(o.msBeforeNext / (o.remainingPoints + 2));
                _t22 < this.execEvenlyMinDelayMs && (_t22 = o.consumedPoints * this.execEvenlyMinDelayMs), setTimeout(e, _t22, o);
              } else e(o);
            }
          }, {
            key: "_handleError",
            value: function _handleError(e, t, r, i, s) {
              var o = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : !1;
              var a = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};
              this.insuranceLimiter instanceof n ? this.insuranceLimiter[t](s, o, a).then(function (e) {
                r(e);
              }).catch(function (e) {
                i(e);
              }) : i(e);
            }
          }, {
            key: "_inmemoryBlockedKeys",
            get: function get() {
              return this._inMemoryBlockedKeys;
            }
          }, {
            key: "getInmemoryBlockMsBeforeExpire",
            value: function getInmemoryBlockMsBeforeExpire(e) {
              return this.getInMemoryBlockMsBeforeExpire(e);
            }
          }, {
            key: "inmemoryBlockOnConsumed",
            get: function get() {
              return this.inMemoryBlockOnConsumed;
            },
            set: function set(e) {
              this.inMemoryBlockOnConsumed = e;
            }
          }, {
            key: "inmemoryBlockDuration",
            get: function get() {
              return this.inMemoryBlockDuration;
            },
            set: function set(e) {
              this.inMemoryBlockDuration = e;
            }
          }, {
            key: "msInmemoryBlockDuration",
            get: function get() {
              return 1e3 * this.inMemoryBlockDuration;
            }
          }, {
            key: "getInMemoryBlockMsBeforeExpire",
            value: function getInMemoryBlockMsBeforeExpire(e) {
              return this.inMemoryBlockOnConsumed > 0 ? this._inMemoryBlockedKeys.msBeforeExpire(e) : 0;
            }
          }, {
            key: "inMemoryBlockOnConsumed",
            get: function get() {
              return this._inMemoryBlockOnConsumed;
            },
            set: function set(e) {
              if (this._inMemoryBlockOnConsumed = e ? parseInt(e) : 0, this.inMemoryBlockOnConsumed > 0 && this.points > this.inMemoryBlockOnConsumed) throw new Error('inMemoryBlockOnConsumed option must be greater or equal "points" option');
            }
          }, {
            key: "inMemoryBlockDuration",
            get: function get() {
              return this._inMemoryBlockDuration;
            },
            set: function set(e) {
              if (this._inMemoryBlockDuration = e ? parseInt(e) : 0, this.inMemoryBlockDuration > 0 && 0 === this.inMemoryBlockOnConsumed) throw new Error("inMemoryBlockOnConsumed option must be set up");
            }
          }, {
            key: "msInMemoryBlockDuration",
            get: function get() {
              return 1e3 * this._inMemoryBlockDuration;
            }
          }, {
            key: "insuranceLimiter",
            get: function get() {
              return this._insuranceLimiter;
            },
            set: function set(e) {
              if (void 0 !== e && !(e instanceof n)) throw new Error("insuranceLimiter must be instance of RateLimiterAbstract");
              this._insuranceLimiter = e, this._insuranceLimiter && (this._insuranceLimiter.blockDuration = this.blockDuration, this._insuranceLimiter.execEvenly = this.execEvenly);
            }
          }, {
            key: "block",
            value: function block(e, t) {
              var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              var n = 1e3 * t;
              return this._block(this.getKey(e), this.points + 1, n, r);
            }
          }, {
            key: "set",
            value: function set(e, t, r) {
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
              var i = 1e3 * (r >= 0 ? r : this.duration);
              return this._block(this.getKey(e), t, i, n);
            }
          }, {
            key: "consume",
            value: function consume(e) {
              var _this56 = this;
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
              var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              return new Promise(function (n, i) {
                var o = _this56.getKey(e),
                  a = _this56.getInMemoryBlockMsBeforeExpire(o);
                if (a > 0) return i(new s(0, a));
                _this56._upsert(o, t, 1e3 * _this56._getKeySecDuration(r), !1, r).then(function (e) {
                  _this56._afterConsume(n, i, o, t, e);
                }).catch(function (s) {
                  _this56._handleError(s, "consume", n, i, e, t, r);
                });
              });
            }
          }, {
            key: "penalty",
            value: function penalty(e) {
              var _this57 = this;
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
              var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              var n = this.getKey(e);
              return new Promise(function (i, s) {
                _this57._upsert(n, t, 1e3 * _this57._getKeySecDuration(r), !1, r).then(function (e) {
                  i(_this57._getRateLimiterRes(n, t, e));
                }).catch(function (n) {
                  _this57._handleError(n, "penalty", i, s, e, t, r);
                });
              });
            }
          }, {
            key: "reward",
            value: function reward(e) {
              var _this58 = this;
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
              var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              var n = this.getKey(e);
              return new Promise(function (i, s) {
                _this58._upsert(n, -t, 1e3 * _this58._getKeySecDuration(r), !1, r).then(function (e) {
                  i(_this58._getRateLimiterRes(n, -t, e));
                }).catch(function (n) {
                  _this58._handleError(n, "reward", i, s, e, t, r);
                });
              });
            }
          }, {
            key: "get",
            value: function get(e) {
              var _this59 = this;
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var r = this.getKey(e);
              return new Promise(function (n, i) {
                _this59._get(r, t).then(function (e) {
                  n(null == e ? null : _this59._getRateLimiterRes(r, 0, e));
                }).catch(function (r) {
                  _this59._handleError(r, "get", n, i, e, t);
                });
              });
            }
          }, {
            key: "delete",
            value: function _delete(e) {
              var _this60 = this;
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var r = this.getKey(e);
              return new Promise(function (n, i) {
                _this60._delete(r, t).then(function (e) {
                  _this60._inMemoryBlockedKeys.delete(r), n(e);
                }).catch(function (r) {
                  _this60._handleError(r, "delete", n, i, e, t);
                });
              });
            }
          }, {
            key: "deleteInMemoryBlockedAll",
            value: function deleteInMemoryBlockedAll() {
              this._inMemoryBlockedKeys.delete();
            }
          }, {
            key: "_getRateLimiterRes",
            value: function _getRateLimiterRes(e, t, r) {
              throw new Error("You have to implement the method '_getRateLimiterRes'!");
            }
          }, {
            key: "_block",
            value: function _block(e, t, r) {
              var _this61 = this;
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
              return new Promise(function (i, o) {
                _this61._upsert(e, t, r, !0, n).then(function () {
                  i(new s(0, r > 0 ? r : -1, t));
                }).catch(function (t) {
                  _this61._handleError(t, "block", i, o, _this61.parseKey(e), r / 1e3, n);
                });
              });
            }
          }, {
            key: "_get",
            value: function _get(e) {
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              throw new Error("You have to implement the method '_get'!");
            }
          }, {
            key: "_delete",
            value: function _delete(e) {
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              throw new Error("You have to implement the method '_delete'!");
            }
          }, {
            key: "_upsert",
            value: function _upsert(e, t, r) {
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
              var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};
              throw new Error("You have to implement the method '_upsert'!");
            }
          }]);
          return _class17;
        }(n);
      },
      3766: function _(e, t, r) {
        var n = r(1352);
        e.exports = /*#__PURE__*/function () {
          function _class18() {
            _classCallCheck(this, _class18);
            for (var _len3 = arguments.length, e = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
              e[_key3] = arguments[_key3];
            }
            if (e.length < 1) throw new Error("RateLimiterUnion: at least one limiter have to be passed");
            e.forEach(function (e) {
              if (!(e instanceof n)) throw new Error("RateLimiterUnion: all limiters have to be instance of RateLimiterAbstract");
            }), this._limiters = e;
          }
          _createClass(_class18, [{
            key: "consume",
            value: function consume(e) {
              var _this62 = this;
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
              return new Promise(function (r, n) {
                var i = [];
                _this62._limiters.forEach(function (r) {
                  i.push(r.consume(e, t).catch(function (e) {
                    return {
                      rejected: !0,
                      rej: e
                    };
                  }));
                }), Promise.all(i).then(function (e) {
                  var t = {};
                  var i = !1;
                  e.forEach(function (e) {
                    !0 === e.rejected && (i = !0);
                  });
                  for (var _r19 = 0; _r19 < e.length; _r19++) i && !0 === e[_r19].rejected ? t[_this62._limiters[_r19].keyPrefix] = e[_r19].rej : i || (t[_this62._limiters[_r19].keyPrefix] = e[_r19]);
                  i ? n(t) : r(t);
                });
              });
            }
          }]);
          return _class18;
        }();
      },
      8894: function _(e) {
        e.exports = /*#__PURE__*/function () {
          function _class19() {
            _classCallCheck(this, _class19);
            this._keys = {}, this._addedKeysAmount = 0;
          }
          _createClass(_class19, [{
            key: "collectExpired",
            value: function collectExpired() {
              var _this63 = this;
              var e = Date.now();
              Object.keys(this._keys).forEach(function (t) {
                _this63._keys[t] <= e && delete _this63._keys[t];
              }), this._addedKeysAmount = Object.keys(this._keys).length;
            }
          }, {
            key: "add",
            value: function add(e, t) {
              this.addMs(e, 1e3 * t);
            }
          }, {
            key: "addMs",
            value: function addMs(e, t) {
              this._keys[e] = Date.now() + t, this._addedKeysAmount++, this._addedKeysAmount > 999 && this.collectExpired();
            }
          }, {
            key: "msBeforeExpire",
            value: function msBeforeExpire(e) {
              var t = this._keys[e];
              if (t && t >= Date.now()) {
                this.collectExpired();
                var _e25 = Date.now();
                return t >= _e25 ? t - _e25 : 0;
              }
              return 0;
            }
          }, {
            key: "delete",
            value: function _delete(e) {
              var _this64 = this;
              e ? delete this._keys[e] : Object.keys(this._keys).forEach(function (e) {
                delete _this64._keys[e];
              });
            }
          }]);
          return _class19;
        }();
      },
      2423: function _(e, t, r) {
        var n = r(8894);
        e.exports = n;
      },
      8425: function _(e, t, r) {
        var n = r(9250),
          i = r(5155);
        e.exports = /*#__PURE__*/function () {
          function _class20() {
            _classCallCheck(this, _class20);
            this._storage = {};
          }
          _createClass(_class20, [{
            key: "incrby",
            value: function incrby(e, t, r) {
              if (this._storage[e]) {
                var _n21 = this._storage[e].expiresAt ? this._storage[e].expiresAt.getTime() - new Date().getTime() : -1;
                return 0 !== _n21 ? (this._storage[e].value = this._storage[e].value + t, new i(0, _n21, this._storage[e].value, !1)) : this.set(e, t, r);
              }
              return this.set(e, t, r);
            }
          }, {
            key: "set",
            value: function set(e, t, r) {
              var _this65 = this;
              var s = 1e3 * r;
              return this._storage[e] && this._storage[e].timeoutId && clearTimeout(this._storage[e].timeoutId), this._storage[e] = new n(t, s > 0 ? new Date(Date.now() + s) : null), s > 0 && (this._storage[e].timeoutId = setTimeout(function () {
                delete _this65._storage[e];
              }, s), this._storage[e].timeoutId.unref && this._storage[e].timeoutId.unref()), new i(0, 0 === s ? -1 : s, this._storage[e].value, !0);
            }
          }, {
            key: "get",
            value: function get(e) {
              if (this._storage[e]) {
                var _t23 = this._storage[e].expiresAt ? this._storage[e].expiresAt.getTime() - new Date().getTime() : -1;
                return new i(0, _t23, this._storage[e].value, !1);
              }
              return null;
            }
          }, {
            key: "delete",
            value: function _delete(e) {
              return !!this._storage[e] && (this._storage[e].timeoutId && clearTimeout(this._storage[e].timeoutId), delete this._storage[e], !0);
            }
          }]);
          return _class20;
        }();
      },
      9250: function _(e) {
        e.exports = /*#__PURE__*/function () {
          function _class21(e, t) {
            var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
            _classCallCheck(this, _class21);
            this.value = e, this.expiresAt = t, this.timeoutId = r;
          }
          _createClass(_class21, [{
            key: "value",
            get: function get() {
              return this._value;
            },
            set: function set(e) {
              this._value = parseInt(e);
            }
          }, {
            key: "expiresAt",
            get: function get() {
              return this._expiresAt;
            },
            set: function set(e) {
              e instanceof Date || !Number.isInteger(e) || (e = new Date(e)), this._expiresAt = e;
            }
          }, {
            key: "timeoutId",
            get: function get() {
              return this._timeoutId;
            },
            set: function set(e) {
              this._timeoutId = e;
            }
          }]);
          return _class21;
        }();
      },
      5255: function _(e) {
        e.exports = /*#__PURE__*/function (_Error) {
          _inherits(_class22, _Error);
          var _super9 = _createSuper(_class22);
          function _class22(e, t) {
            var _this66;
            _classCallCheck(this, _class22);
            _this66 = _super9.call(this), Error.captureStackTrace && Error.captureStackTrace(_assertThisInitialized(_this66), _this66.constructor), _this66.name = "CustomError", _this66.message = e, t && (_this66.extra = t);
            return _this66;
          }
          return _createClass(_class22);
        }( /*#__PURE__*/_wrapNativeSuper(Error));
      },
      3692: function _(e, t, r) {
        "use strict";

        e.exports = o;
        var n = r(7824),
          i = o.prototype,
          s = new Date() % 1e9;
        function o(e) {
          e = e || {}, this.id = e.id || (1e9 * Math.random() >>> 0) + s++, this.max = e.max || 1 / 0, this.items = e.items || [], this._lookup = {}, this.size = this.items.length, this.lastModified = new Date(e.lastModified || new Date());
          for (var t, r, n = this.items.length; n--;) t = this.items[n], r = new Date(t.expires) - new Date(), this._lookup[t.key] = t, r > 0 ? this.expire(t.key, r) : r <= 0 && this.delete(t.key);
        }
        i.has = function (e) {
          return e in this._lookup;
        }, i.get = function (e) {
          if (!this.has(e)) return null;
          var t = this._lookup[e];
          return t.refresh && this.expire(e, t.refresh), this.items.splice(this.items.indexOf(t), 1), this.items.push(t), t.value;
        }, i.meta = function (e) {
          if (!this.has(e)) return null;
          var t = this._lookup[e];
          return "meta" in t ? t.meta : null;
        }, i.set = function (e, t, r) {
          var n = this._lookup[e],
            i = this._lookup[e] = {
              key: e,
              value: t
            };
          return this.lastModified = new Date(), n ? (clearTimeout(n.timeout), this.items.splice(this.items.indexOf(n), 1, i)) : (this.size >= this.max && this.delete(this.items[0].key), this.items.push(i), this.size++), r && ("ttl" in r && this.expire(e, r.ttl), "meta" in r && (i.meta = r.meta), r.refresh && (i.refresh = r.ttl)), this;
        }, i.delete = function (e) {
          var t = this._lookup[e];
          return !!t && (this.lastModified = new Date(), this.items.splice(this.items.indexOf(t), 1), clearTimeout(t.timeout), delete this._lookup[e], this.size--, this);
        }, i.expire = function (e, t) {
          var r = t || 0,
            i = this._lookup[e];
          if (!i) return this;
          if ("string" == typeof r && (r = n(t)), "number" != typeof r) throw new TypeError("Expiration time must be a string or number.");
          return clearTimeout(i.timeout), i.timeout = setTimeout(this.delete.bind(this, i.key), r), i.expires = Number(new Date()) + r, this;
        }, i.clear = function () {
          for (var e = this.items.length; e--;) this.delete(this.items[e].key);
          return this;
        }, i.toJSON = function () {
          for (var e, t = new Array(this.items.length), r = t.length; r--;) e = this.items[r], t[r] = {
            key: e.key,
            meta: e.meta,
            value: e.value,
            expires: e.expires,
            refresh: e.refresh
          };
          return {
            id: this.id,
            max: isFinite(this.max) ? this.max : void 0,
            lastModified: this.lastModified,
            items: t
          };
        };
      },
      2916: function _(e, t, r) {
        "use strict";

        var n = r(1807);
        var i = /*#__PURE__*/function () {
          function i(e, t, r) {
            _classCallCheck(this, i);
            var _i9 = this;
            this._started = n(), this._rescheduled = 0, this._scheduled = t, this._args = r, this._triggered = !1, this._timerWrapper = function () {
              _i9._rescheduled > 0 ? (_i9._scheduled = _i9._rescheduled - (n() - _i9._started), _i9._schedule(_i9._scheduled)) : (_i9._triggered = !0, e.apply(null, _i9._args));
            }, this._timer = setTimeout(this._timerWrapper, t);
          }
          _createClass(i, [{
            key: "reschedule",
            value: function reschedule(e) {
              e || (e = this._scheduled);
              var t = n();
              t + e - (this._started + this._scheduled) < 0 ? (clearTimeout(this._timer), this._schedule(e)) : this._triggered ? this._schedule(e) : (this._started = t, this._rescheduled = e);
            }
          }, {
            key: "_schedule",
            value: function _schedule(e) {
              this._triggered = !1, this._started = n(), this._rescheduled = 0, this._scheduled = e, this._timer = setTimeout(this._timerWrapper, e);
            }
          }, {
            key: "clear",
            value: function clear() {
              clearTimeout(this._timer);
            }
          }]);
          return i;
        }();
        e.exports = function () {
          if ("function" != typeof arguments[0]) throw new Error("callback needed");
          if ("number" != typeof arguments[1]) throw new Error("timeout needed");
          var e;
          if (arguments.length > 0) {
            e = new Array(arguments.length - 2);
            for (var t = 0; t < e.length; t++) e[t] = arguments[t + 2];
          }
          return new i(arguments[0], arguments[1], e);
        };
      },
      1807: function _(e) {
        "use strict";

        e.exports = function () {
          return Date.now();
        };
      },
      202: function _(e, t, r) {
        "use strict";

        var n = r(3700),
          i = /[\/\?<>\\:\*\|"]/g,
          s = /[\x00-\x1f\x80-\x9f]/g,
          o = /^\.+$/,
          a = /^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,
          c = /[\. ]+$/;
        function l(e, t) {
          if ("string" != typeof e) throw new Error("Input must be string");
          var r = e.replace(i, t).replace(s, t).replace(o, t).replace(a, t).replace(c, t);
          return n(r, 255);
        }
        e.exports = function (e, t) {
          var r = t && t.replacement || "",
            n = l(e, r);
          return "" === r ? n : l(n, "");
        };
      },
      7695: function _(e) {
        "use strict";

        var t = new Map();
        e.exports = {
          setDelayedInterval: function setDelayedInterval(e, r, n) {
            n = n || r;
            var i = "".concat(Date.now(), ":").concat(Math.floor(1e6 * Math.random())),
              s = setTimeout(function () {
                !function () {
                  var _ref23 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e, r, n) {
                    var _loop, _ret;
                    return _regeneratorRuntime().wrap(function _callee$(_context2) {
                      while (1) switch (_context2.prev = _context2.next) {
                        case 0:
                          _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {
                            return _regeneratorRuntime().wrap(function _loop$(_context) {
                              while (1) switch (_context.prev = _context.next) {
                                case 0:
                                  _context.prev = 0;
                                  _context.next = 3;
                                  return e();
                                case 3:
                                  _context.next = 9;
                                  break;
                                case 5:
                                  _context.prev = 5;
                                  _context.t0 = _context["catch"](0);
                                  setTimeout(function () {
                                    throw _context.t0;
                                  }, 1);
                                  return _context.abrupt("return", "break");
                                case 9:
                                  if (t.get(n)) {
                                    _context.next = 11;
                                    break;
                                  }
                                  return _context.abrupt("return", "break");
                                case 11:
                                  _context.next = 13;
                                  return new Promise(function (e) {
                                    var i = setTimeout(e, r);
                                    t.set(n, i);
                                  });
                                case 13:
                                case "end":
                                  return _context.stop();
                              }
                            }, _loop, null, [[0, 5]]);
                          });
                        case 1:
                          if (!t.get(n)) {
                            _context2.next = 8;
                            break;
                          }
                          return _context2.delegateYield(_loop(), "t0", 3);
                        case 3:
                          _ret = _context2.t0;
                          if (!(_ret === "break")) {
                            _context2.next = 6;
                            break;
                          }
                          return _context2.abrupt("break", 8);
                        case 6:
                          _context2.next = 1;
                          break;
                        case 8:
                        case "end":
                          return _context2.stop();
                      }
                    }, _callee);
                  }));
                  return function (_x19, _x20, _x21) {
                    return _ref23.apply(this, arguments);
                  };
                }()(e, r, i);
              }, n);
            return t.set(i, s), i;
          },
          clearDelayedInterval: function clearDelayedInterval(e) {
            var r = t.get(e);
            r && (clearTimeout(r), t.delete(e));
          }
        };
      },
      715: function _(e, t, r) {
        "use strict";

        var n = globalThis.AbortController,
          i = r(2916);
        var s = /*#__PURE__*/function (_n22) {
          _inherits(s, _n22);
          var _super10 = _createSuper(s);
          function s(e) {
            var _this67;
            _classCallCheck(this, s);
            _this67 = _super10.call(this), _this67._ms = e, _this67._timer = i(function () {
              return _this67.abort();
            }, e), Object.setPrototypeOf(_assertThisInitialized(_this67), s.prototype);
            return _this67;
          }
          _createClass(s, [{
            key: "abort",
            value: function abort() {
              return this._timer.clear(), _get2(_getPrototypeOf(s.prototype), "abort", this).call(this);
            }
          }, {
            key: "clear",
            value: function clear() {
              this._timer.clear();
            }
          }, {
            key: "reset",
            value: function reset() {
              var _this68 = this;
              this._timer.clear(), this._timer = i(function () {
                return _this68.abort();
              }, this._ms);
            }
          }]);
          return s;
        }(n);
        e.exports = {
          TimeoutController: s
        };
      },
      3700: function _(e, t, r) {
        "use strict";

        var n = r(1156),
          i = r(793);
        e.exports = n.bind(null, i);
      },
      1156: function _(e) {
        "use strict";

        function t(e) {
          return e >= 55296 && e <= 56319;
        }
        function r(e) {
          return e >= 56320 && e <= 57343;
        }
        e.exports = function (e, n, i) {
          if ("string" != typeof n) throw new Error("Input must be string");
          for (var s, o, a = n.length, c = 0, l = 0; l < a; l += 1) {
            if (s = n.charCodeAt(l), o = n[l], t(s) && r(n.charCodeAt(l + 1)) && (o += n[l += 1]), (c += e(o)) === i) return n.slice(0, l + 1);
            if (c > i) return n.slice(0, l - o.length + 1);
          }
          return n;
        };
      },
      793: function _(e) {
        "use strict";

        function t(e) {
          return e >= 55296 && e <= 56319;
        }
        function r(e) {
          return e >= 56320 && e <= 57343;
        }
        e.exports = function (e) {
          if ("string" != typeof e) throw new Error("Input must be string");
          for (var n = e.length, i = 0, s = null, o = null, a = 0; a < n; a++) r(s = e.charCodeAt(a)) ? null != o && t(o) ? i += 1 : i += 3 : s <= 127 ? i += 1 : s >= 128 && s <= 2047 ? i += 2 : s >= 2048 && s <= 65535 && (i += 3), o = s;
          return i;
        };
      },
      6988: function _(e) {
        e.exports = function e(n, i) {
          var s,
            o = 0,
            a = 0,
            c = i = i || 0,
            l = n.length;
          do {
            if (c >= l || a > 49) throw e.bytes = 0, new RangeError("Could not decode varint");
            s = n[c++], o += a < 28 ? (s & r) << a : (s & r) * Math.pow(2, a), a += 7;
          } while (s >= t);
          return e.bytes = c - i, o;
        };
        var t = 128,
          r = 127;
      },
      1312: function _(e) {
        e.exports = function e(i, s, o) {
          if (Number.MAX_SAFE_INTEGER && i > Number.MAX_SAFE_INTEGER) throw e.bytes = 0, new RangeError("Could not encode varint");
          s = s || [];
          for (var a = o = o || 0; i >= n;) s[o++] = 255 & i | t, i /= 128;
          for (; i & r;) s[o++] = 255 & i | t, i >>>= 7;
          return s[o] = 0 | i, e.bytes = o - a + 1, s;
        };
        var t = 128,
          r = -128,
          n = Math.pow(2, 31);
      },
      4676: function _(e, t, r) {
        e.exports = {
          encode: r(1312),
          decode: r(6988),
          encodingLength: r(82)
        };
      },
      82: function _(e) {
        var t = Math.pow(2, 7),
          r = Math.pow(2, 14),
          n = Math.pow(2, 21),
          i = Math.pow(2, 28),
          s = Math.pow(2, 35),
          o = Math.pow(2, 42),
          a = Math.pow(2, 49),
          c = Math.pow(2, 56),
          l = Math.pow(2, 63);
        e.exports = function (e) {
          return e < t ? 1 : e < r ? 2 : e < n ? 3 : e < i ? 4 : e < s ? 5 : e < o ? 6 : e < a ? 7 : e < c ? 8 : e < l ? 9 : 10;
        };
      },
      7420: function _() {},
      5856: function _() {},
      5883: function _() {},
      5819: function _() {},
      1265: function _() {},
      5539: function _() {}
    },
    __webpack_module_cache__ = {},
    leafPrototypes,
    getProto;
  function __webpack_require__(e) {
    var t = __webpack_module_cache__[e];
    if (void 0 !== t) return t.exports;
    var r = __webpack_module_cache__[e] = {
      exports: {}
    };
    return __webpack_modules__[e].call(r.exports, r, r.exports, __webpack_require__), r.exports;
  }
  getProto = Object.getPrototypeOf ? function (e) {
    return Object.getPrototypeOf(e);
  } : function (e) {
    return e.__proto__;
  }, __webpack_require__.t = function (e, t) {
    if (1 & t && (e = this(e)), 8 & t) return e;
    if ("object" == _typeof(e) && e) {
      if (4 & t && e.__esModule) return e;
      if (16 & t && "function" == typeof e.then) return e;
    }
    var r = Object.create(null);
    __webpack_require__.r(r);
    var n = {};
    leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
    for (var i = 2 & t && e; "object" == _typeof(i) && !~leafPrototypes.indexOf(i); i = getProto(i)) Object.getOwnPropertyNames(i).forEach(function (t) {
      return n[t] = function () {
        return e[t];
      };
    });
    return n.default = function () {
      return e;
    }, __webpack_require__.d(r, n), r;
  }, __webpack_require__.d = function (e, t) {
    for (var r in t) __webpack_require__.o(t, r) && !__webpack_require__.o(e, r) && Object.defineProperty(e, r, {
      enumerable: !0,
      get: t[r]
    });
  }, __webpack_require__.g = function () {
    if ("object" == (typeof globalThis === "undefined" ? "undefined" : _typeof(globalThis))) return globalThis;
    try {
      return this || new Function("return this")();
    } catch (e) {
      if ("object" == (typeof window === "undefined" ? "undefined" : _typeof(window))) return window;
    }
  }(), __webpack_require__.o = function (e, t) {
    return Object.prototype.hasOwnProperty.call(e, t);
  }, __webpack_require__.r = function (e) {
    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
      value: "Module"
    }), Object.defineProperty(e, "__esModule", {
      value: !0
    });
  };
  var __webpack_exports__ = {};
  (function () {
    "use strict";

    var _Symbol$iterator5;
    var _globalThis$CustomEve, _globalThis$process, _globalThis$process$e;
    var e = {};
    __webpack_require__.r(e), __webpack_require__.d(e, {
      base58btc: function base58btc() {
        return q;
      },
      base58flickr: function base58flickr() {
        return j;
      }
    });
    var t = {};
    __webpack_require__.r(t), __webpack_require__.d(t, {
      base32: function base32() {
        return H;
      },
      base32hex: function base32hex() {
        return W;
      },
      base32hexpad: function base32hexpad() {
        return Q;
      },
      base32hexpadupper: function base32hexpadupper() {
        return X;
      },
      base32hexupper: function base32hexupper() {
        return Y;
      },
      base32pad: function base32pad() {
        return $;
      },
      base32padupper: function base32padupper() {
        return G;
      },
      base32upper: function base32upper() {
        return z;
      },
      base32z: function base32z() {
        return Z;
      }
    });
    var r = {};
    __webpack_require__.r(r), __webpack_require__.d(r, {
      base64: function base64() {
        return J;
      },
      base64pad: function base64pad() {
        return ee;
      },
      base64url: function base64url() {
        return te;
      },
      base64urlpad: function base64urlpad() {
        return re;
      }
    });
    var n = {};
    __webpack_require__.r(n), __webpack_require__.d(n, {
      identity: function identity() {
        return ce;
      }
    });
    var i = {};
    __webpack_require__.r(i), __webpack_require__.d(i, {
      base2: function base2() {
        return le;
      }
    });
    var s = {};
    __webpack_require__.r(s), __webpack_require__.d(s, {
      base8: function base8() {
        return ue;
      }
    });
    var o = {};
    __webpack_require__.r(o), __webpack_require__.d(o, {
      base10: function base10() {
        return he;
      }
    });
    var a = {};
    __webpack_require__.r(a), __webpack_require__.d(a, {
      base16: function base16() {
        return de;
      },
      base16upper: function base16upper() {
        return pe;
      }
    });
    var c = {};
    __webpack_require__.r(c), __webpack_require__.d(c, {
      base36: function base36() {
        return fe;
      },
      base36upper: function base36upper() {
        return ye;
      }
    });
    var l = {};
    __webpack_require__.r(l), __webpack_require__.d(l, {
      base256emoji: function base256emoji() {
        return Ee;
      }
    });
    var u = {};
    __webpack_require__.r(u), __webpack_require__.d(u, {
      sha256: function sha256() {
        return He;
      },
      sha512: function sha512() {
        return ze;
      }
    });
    var h = {};
    __webpack_require__.r(h), __webpack_require__.d(h, {
      identity: function identity() {
        return Ge;
      }
    });
    var d = {};
    __webpack_require__.r(d), __webpack_require__.d(d, {
      code: function code() {
        return Ye;
      },
      decode: function decode() {
        return Xe;
      },
      encode: function encode() {
        return Qe;
      },
      name: function name() {
        return We;
      }
    });
    var p = {};
    __webpack_require__.r(p), __webpack_require__.d(p, {
      code: function code() {
        return tt;
      },
      decode: function decode() {
        return nt;
      },
      encode: function encode() {
        return rt;
      },
      name: function name() {
        return et;
      }
    });
    var f = {};
    __webpack_require__.r(f), __webpack_require__.d(f, {
      RsaPrivateKey: function RsaPrivateKey() {
        return vo;
      },
      RsaPublicKey: function RsaPublicKey() {
        return bo;
      },
      fromJwk: function fromJwk() {
        return Co;
      },
      generateKeyPair: function generateKeyPair() {
        return Ao;
      },
      unmarshalRsaPrivateKey: function unmarshalRsaPrivateKey() {
        return _o;
      },
      unmarshalRsaPublicKey: function unmarshalRsaPublicKey() {
        return So;
      }
    });
    var y = {};
    __webpack_require__.r(y), __webpack_require__.d(y, {
      Ed25519PrivateKey: function Ed25519PrivateKey() {
        return Ca;
      },
      Ed25519PublicKey: function Ed25519PublicKey() {
        return Sa;
      },
      generateKeyPair: function generateKeyPair() {
        return Ta;
      },
      generateKeyPairFromSeed: function generateKeyPairFromSeed() {
        return Ra;
      },
      unmarshalEd25519PrivateKey: function unmarshalEd25519PrivateKey() {
        return Aa;
      },
      unmarshalEd25519PublicKey: function unmarshalEd25519PublicKey() {
        return Ia;
      }
    });
    var g = {};
    __webpack_require__.r(g), __webpack_require__.d(g, {
      Secp256k1PrivateKey: function Secp256k1PrivateKey() {
        return Ba;
      },
      Secp256k1PublicKey: function Secp256k1PublicKey() {
        return Pa;
      },
      generateKeyPair: function generateKeyPair() {
        return Ua;
      },
      unmarshalSecp256k1PrivateKey: function unmarshalSecp256k1PrivateKey() {
        return Oa;
      },
      unmarshalSecp256k1PublicKey: function unmarshalSecp256k1PublicKey() {
        return xa;
      }
    });
    var m = {};
    __webpack_require__.r(m), __webpack_require__.d(m, {
      base58btc: function base58btc() {
        return el;
      },
      base58flickr: function base58flickr() {
        return tl;
      }
    });
    var w = {};
    __webpack_require__.r(w), __webpack_require__.d(w, {
      base32: function base32() {
        return rl;
      },
      base32hex: function base32hex() {
        return ol;
      },
      base32hexpad: function base32hexpad() {
        return cl;
      },
      base32hexpadupper: function base32hexpadupper() {
        return ll;
      },
      base32hexupper: function base32hexupper() {
        return al;
      },
      base32pad: function base32pad() {
        return il;
      },
      base32padupper: function base32padupper() {
        return sl;
      },
      base32upper: function base32upper() {
        return nl;
      },
      base32z: function base32z() {
        return ul;
      }
    });
    var E = {};
    __webpack_require__.r(E), __webpack_require__.d(E, {
      identity: function identity() {
        return vl;
      }
    });
    var b = {};
    __webpack_require__.r(b), __webpack_require__.d(b, {
      base2: function base2() {
        return _l;
      }
    });
    var v = {};
    __webpack_require__.r(v), __webpack_require__.d(v, {
      base8: function base8() {
        return Sl;
      }
    });
    var _ = {};
    __webpack_require__.r(_), __webpack_require__.d(_, {
      base10: function base10() {
        return Cl;
      }
    });
    var S = {};
    __webpack_require__.r(S), __webpack_require__.d(S, {
      base16: function base16() {
        return Al;
      },
      base16upper: function base16upper() {
        return Il;
      }
    });
    var C = {};
    __webpack_require__.r(C), __webpack_require__.d(C, {
      base36: function base36() {
        return Tl;
      },
      base36upper: function base36upper() {
        return Rl;
      }
    });
    var A = {};
    __webpack_require__.r(A), __webpack_require__.d(A, {
      base64: function base64() {
        return kl;
      },
      base64pad: function base64pad() {
        return Nl;
      },
      base64url: function base64url() {
        return Ll;
      },
      base64urlpad: function base64urlpad() {
        return Dl;
      }
    });
    var I = {};
    __webpack_require__.r(I), __webpack_require__.d(I, {
      base256emoji: function base256emoji() {
        return xl;
      }
    });
    var T = {};
    __webpack_require__.r(T), __webpack_require__.d(T, {
      sha256: function sha256() {
        return Kl;
      },
      sha512: function sha512() {
        return Fl;
      }
    });
    var R = {};
    __webpack_require__.r(R), __webpack_require__.d(R, {
      identity: function identity() {
        return jl;
      }
    });
    var k = {};
    __webpack_require__.r(k), __webpack_require__.d(k, {
      code: function code() {
        return zl;
      },
      decode: function decode() {
        return Gl;
      },
      encode: function encode() {
        return $l;
      },
      name: function name() {
        return Hl;
      }
    });
    var N = {};
    __webpack_require__.r(N), __webpack_require__.d(N, {
      code: function code() {
        return Xl;
      },
      decode: function decode() {
        return Jl;
      },
      encode: function encode() {
        return Zl;
      },
      name: function name() {
        return Ql;
      }
    });
    var L = __webpack_require__(1227);
    var D = function D(e, t) {
        if (e.length >= 255) throw new TypeError("Alphabet too long");
        for (var r = new Uint8Array(256), n = 0; n < r.length; n++) r[n] = 255;
        for (var i = 0; i < e.length; i++) {
          var s = e.charAt(i),
            o = s.charCodeAt(0);
          if (255 !== r[o]) throw new TypeError(s + " is ambiguous");
          r[o] = i;
        }
        var a = e.length,
          c = e.charAt(0),
          l = Math.log(a) / Math.log(256),
          u = Math.log(256) / Math.log(a);
        function h(e) {
          if ("string" != typeof e) throw new TypeError("Expected String");
          if (0 === e.length) return new Uint8Array();
          var t = 0;
          if (" " !== e[t]) {
            for (var n = 0, i = 0; e[t] === c;) n++, t++;
            for (var s = (e.length - t) * l + 1 >>> 0, o = new Uint8Array(s); e[t];) {
              var u = r[e.charCodeAt(t)];
              if (255 === u) return;
              for (var h = 0, d = s - 1; (0 !== u || h < i) && -1 !== d; d--, h++) u += a * o[d] >>> 0, o[d] = u % 256 >>> 0, u = u / 256 >>> 0;
              if (0 !== u) throw new Error("Non-zero carry");
              i = h, t++;
            }
            if (" " !== e[t]) {
              for (var p = s - i; p !== s && 0 === o[p];) p++;
              for (var f = new Uint8Array(n + (s - p)), y = n; p !== s;) f[y++] = o[p++];
              return f;
            }
          }
        }
        return {
          encode: function encode(t) {
            if (t instanceof Uint8Array || (ArrayBuffer.isView(t) ? t = new Uint8Array(t.buffer, t.byteOffset, t.byteLength) : Array.isArray(t) && (t = Uint8Array.from(t))), !(t instanceof Uint8Array)) throw new TypeError("Expected Uint8Array");
            if (0 === t.length) return "";
            for (var r = 0, n = 0, i = 0, s = t.length; i !== s && 0 === t[i];) i++, r++;
            for (var o = (s - i) * u + 1 >>> 0, l = new Uint8Array(o); i !== s;) {
              for (var h = t[i], d = 0, p = o - 1; (0 !== h || d < n) && -1 !== p; p--, d++) h += 256 * l[p] >>> 0, l[p] = h % a >>> 0, h = h / a >>> 0;
              if (0 !== h) throw new Error("Non-zero carry");
              n = d, i++;
            }
            for (var f = o - n; f !== o && 0 === l[f];) f++;
            for (var y = c.repeat(r); f < o; ++f) y += e.charAt(l[f]);
            return y;
          },
          decodeUnsafe: h,
          decode: function decode(e) {
            var r = h(e);
            if (r) return r;
            throw new Error("Non-".concat(t, " character"));
          }
        };
      },
      P = (new Uint8Array(0), function (e) {
        if (e instanceof Uint8Array && "Uint8Array" === e.constructor.name) return e;
        if (e instanceof ArrayBuffer) return new Uint8Array(e);
        if (ArrayBuffer.isView(e)) return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
        throw new Error("Unknown type, must be binary type");
      });
    var B = /*#__PURE__*/function () {
      function B(e, t, r) {
        _classCallCheck(this, B);
        this.name = e, this.prefix = t, this.baseEncode = r;
      }
      _createClass(B, [{
        key: "encode",
        value: function encode(e) {
          if (e instanceof Uint8Array) return "".concat(this.prefix).concat(this.baseEncode(e));
          throw Error("Unknown type, must be binary type");
        }
      }]);
      return B;
    }();
    var O = /*#__PURE__*/function () {
      function O(e, t, r) {
        _classCallCheck(this, O);
        if (this.name = e, this.prefix = t, void 0 === t.codePointAt(0)) throw new Error("Invalid prefix character");
        this.prefixCodePoint = t.codePointAt(0), this.baseDecode = r;
      }
      _createClass(O, [{
        key: "decode",
        value: function decode(e) {
          if ("string" == typeof e) {
            if (e.codePointAt(0) !== this.prefixCodePoint) throw Error("Unable to decode multibase string ".concat(JSON.stringify(e), ", ").concat(this.name, " decoder only supports inputs prefixed with ").concat(this.prefix));
            return this.baseDecode(e.slice(this.prefix.length));
          }
          throw Error("Can only multibase decode strings");
        }
      }, {
        key: "or",
        value: function or(e) {
          return U(this, e);
        }
      }]);
      return O;
    }();
    var x = /*#__PURE__*/function () {
      function x(e) {
        _classCallCheck(this, x);
        this.decoders = e;
      }
      _createClass(x, [{
        key: "or",
        value: function or(e) {
          return U(this, e);
        }
      }, {
        key: "decode",
        value: function decode(e) {
          var t = e[0],
            r = this.decoders[t];
          if (r) return r.decode(e);
          throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e), ", only inputs prefixed with ").concat(Object.keys(this.decoders), " are supported"));
        }
      }]);
      return x;
    }();
    var U = function U(e, t) {
      return new x(_objectSpread(_objectSpread({}, e.decoders || _defineProperty({}, e.prefix, e)), t.decoders || _defineProperty({}, t.prefix, t)));
    };
    var M = /*#__PURE__*/function () {
      function M(e, t, r, n) {
        _classCallCheck(this, M);
        this.name = e, this.prefix = t, this.baseEncode = r, this.baseDecode = n, this.encoder = new B(e, t, r), this.decoder = new O(e, t, n);
      }
      _createClass(M, [{
        key: "encode",
        value: function encode(e) {
          return this.encoder.encode(e);
        }
      }, {
        key: "decode",
        value: function decode(e) {
          return this.decoder.decode(e);
        }
      }]);
      return M;
    }();
    var V = function V(_ref26) {
        var e = _ref26.name,
          t = _ref26.prefix,
          r = _ref26.encode,
          n = _ref26.decode;
        return new M(e, t, r, n);
      },
      K = function K(_ref27) {
        var e = _ref27.prefix,
          t = _ref27.name,
          r = _ref27.alphabet;
        var _D = D(r, t),
          n = _D.encode,
          i = _D.decode;
        return V({
          prefix: e,
          name: t,
          encode: n,
          decode: function decode(e) {
            return P(i(e));
          }
        });
      },
      F = function F(_ref28) {
        var e = _ref28.name,
          t = _ref28.prefix,
          r = _ref28.bitsPerChar,
          n = _ref28.alphabet;
        return V({
          prefix: t,
          name: e,
          encode: function encode(e) {
            return function (e, t, r) {
              var n = "=" === t[t.length - 1],
                i = (1 << r) - 1;
              var s = "",
                o = 0,
                a = 0;
              for (var _n23 = 0; _n23 < e.length; ++_n23) for (a = a << 8 | e[_n23], o += 8; o > r;) o -= r, s += t[i & a >> o];
              if (o && (s += t[i & a << r - o]), n) for (; s.length * r & 7;) s += "=";
              return s;
            }(e, n, r);
          },
          decode: function decode(t) {
            return function (e, t, r, n) {
              var i = {};
              for (var _e26 = 0; _e26 < t.length; ++_e26) i[t[_e26]] = _e26;
              var s = e.length;
              for (; "=" === e[s - 1];) --s;
              var o = new Uint8Array(s * r / 8 | 0);
              var a = 0,
                c = 0,
                l = 0;
              for (var _t24 = 0; _t24 < s; ++_t24) {
                var _s9 = i[e[_t24]];
                if (void 0 === _s9) throw new SyntaxError("Non-".concat(n, " character"));
                c = c << r | _s9, a += r, a >= 8 && (a -= 8, o[l++] = 255 & c >> a);
              }
              if (a >= r || 255 & c << 8 - a) throw new SyntaxError("Unexpected end of data");
              return o;
            }(t, n, r, e);
          }
        });
      },
      q = K({
        name: "base58btc",
        prefix: "z",
        alphabet: "123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"
      }),
      j = K({
        name: "base58flickr",
        prefix: "Z",
        alphabet: "123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"
      }),
      H = F({
        prefix: "b",
        name: "base32",
        alphabet: "abcdefghijklmnopqrstuvwxyz234567",
        bitsPerChar: 5
      }),
      z = F({
        prefix: "B",
        name: "base32upper",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",
        bitsPerChar: 5
      }),
      $ = F({
        prefix: "c",
        name: "base32pad",
        alphabet: "abcdefghijklmnopqrstuvwxyz234567=",
        bitsPerChar: 5
      }),
      G = F({
        prefix: "C",
        name: "base32padupper",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",
        bitsPerChar: 5
      }),
      W = F({
        prefix: "v",
        name: "base32hex",
        alphabet: "0123456789abcdefghijklmnopqrstuv",
        bitsPerChar: 5
      }),
      Y = F({
        prefix: "V",
        name: "base32hexupper",
        alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUV",
        bitsPerChar: 5
      }),
      Q = F({
        prefix: "t",
        name: "base32hexpad",
        alphabet: "0123456789abcdefghijklmnopqrstuv=",
        bitsPerChar: 5
      }),
      X = F({
        prefix: "T",
        name: "base32hexpadupper",
        alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUV=",
        bitsPerChar: 5
      }),
      Z = F({
        prefix: "h",
        name: "base32z",
        alphabet: "ybndrfg8ejkmcpqxot1uwisza345h769",
        bitsPerChar: 5
      }),
      J = F({
        prefix: "m",
        name: "base64",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
        bitsPerChar: 6
      }),
      ee = F({
        prefix: "M",
        name: "base64pad",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
        bitsPerChar: 6
      }),
      te = F({
        prefix: "u",
        name: "base64url",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",
        bitsPerChar: 6
      }),
      re = F({
        prefix: "U",
        name: "base64urlpad",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",
        bitsPerChar: 6
      });
    function ne(e) {
      return Object.assign(L(e), {
        error: L("".concat(e, ":error")),
        trace: L("".concat(e, ":trace"))
      });
    }
    L.formatters.b = function (e) {
      return null == e ? "undefined" : q.baseEncode(e);
    }, L.formatters.t = function (e) {
      return null == e ? "undefined" : H.baseEncode(e);
    }, L.formatters.m = function (e) {
      return null == e ? "undefined" : J.baseEncode(e);
    }, L.formatters.p = function (e) {
      return null == e ? "undefined" : e.toString();
    }, L.formatters.c = function (e) {
      return null == e ? "undefined" : e.toString();
    }, L.formatters.k = function (e) {
      return null == e ? "undefined" : e.toString();
    };
    var ie = 45,
      se = 15,
      oe = new ( /*#__PURE__*/function () {
        function _class24() {
          _classCallCheck(this, _class24);
          _defineProperty(this, "index", 0);
          _defineProperty(this, "input", "");
        }
        _createClass(_class24, [{
          key: "new",
          value: function _new(e) {
            return this.index = 0, this.input = e, this;
          }
        }, {
          key: "readAtomically",
          value: function readAtomically(e) {
            var t = this.index,
              r = e();
            return void 0 === r && (this.index = t), r;
          }
        }, {
          key: "parseWith",
          value: function parseWith(e) {
            var t = e();
            if (this.index === this.input.length) return t;
          }
        }, {
          key: "peekChar",
          value: function peekChar() {
            if (!(this.index >= this.input.length)) return this.input[this.index];
          }
        }, {
          key: "readChar",
          value: function readChar() {
            if (!(this.index >= this.input.length)) return this.input[this.index++];
          }
        }, {
          key: "readGivenChar",
          value: function readGivenChar(e) {
            var _this69 = this;
            return this.readAtomically(function () {
              var t = _this69.readChar();
              if (t === e) return t;
            });
          }
        }, {
          key: "readSeparator",
          value: function readSeparator(e, t, r) {
            var _this70 = this;
            return this.readAtomically(function () {
              if (!(t > 0 && void 0 === _this70.readGivenChar(e))) return r();
            });
          }
        }, {
          key: "readNumber",
          value: function readNumber(e, t, r, n) {
            var _this71 = this;
            return this.readAtomically(function () {
              var i = 0,
                s = 0;
              var o = _this71.peekChar();
              if (void 0 === o) return;
              var a = "0" === o,
                c = Math.pow(2, 8 * n) - 1;
              for (;;) {
                var _r20 = _this71.readAtomically(function () {
                  var t = _this71.readChar();
                  if (void 0 === t) return;
                  var r = Number.parseInt(t, e);
                  return Number.isNaN(r) ? void 0 : r;
                });
                if (void 0 === _r20) break;
                if (i *= e, i += _r20, i > c) return;
                if (s += 1, void 0 !== t && s > t) return;
              }
              return 0 === s || !r && a && s > 1 ? void 0 : i;
            });
          }
        }, {
          key: "readIPv4Addr",
          value: function readIPv4Addr() {
            var _this72 = this;
            return this.readAtomically(function () {
              var e = new Uint8Array(4);
              for (var _t25 = 0; _t25 < e.length; _t25++) {
                var _r21 = _this72.readSeparator(".", _t25, function () {
                  return _this72.readNumber(10, 3, !1, 1);
                });
                if (void 0 === _r21) return;
                e[_t25] = _r21;
              }
              return e;
            });
          }
        }, {
          key: "readIPv6Addr",
          value: function readIPv6Addr() {
            var _this73 = this;
            var e = function e(_e27) {
              for (var _t26 = 0; _t26 < _e27.length / 2; _t26++) {
                var _r22 = 2 * _t26;
                if (_t26 < _e27.length - 3) {
                  var _n24 = _this73.readSeparator(":", _t26, function () {
                    return _this73.readIPv4Addr();
                  });
                  if (void 0 !== _n24) return _e27[_r22] = _n24[0], _e27[_r22 + 1] = _n24[1], _e27[_r22 + 2] = _n24[2], _e27[_r22 + 3] = _n24[3], [_r22 + 4, !0];
                }
                var _n25 = _this73.readSeparator(":", _t26, function () {
                  return _this73.readNumber(16, 4, !0, 2);
                });
                if (void 0 === _n25) return [_r22, !1];
                _e27[_r22] = _n25 >> 8, _e27[_r22 + 1] = 255 & _n25;
              }
              return [_e27.length, !1];
            };
            return this.readAtomically(function () {
              var t = new Uint8Array(16),
                _e28 = e(t),
                _e29 = _slicedToArray(_e28, 2),
                r = _e29[0],
                n = _e29[1];
              if (16 === r) return t;
              if (n) return;
              if (void 0 === _this73.readGivenChar(":")) return;
              if (void 0 === _this73.readGivenChar(":")) return;
              var i = new Uint8Array(14),
                s = 16 - (r + 2),
                _e30 = e(i.subarray(0, s)),
                _e31 = _slicedToArray(_e30, 1),
                o = _e31[0];
              return t.set(i.subarray(0, o), 16 - o), t;
            });
          }
        }, {
          key: "readIPAddr",
          value: function readIPAddr() {
            var _this$readIPv4Addr;
            return (_this$readIPv4Addr = this.readIPv4Addr()) !== null && _this$readIPv4Addr !== void 0 ? _this$readIPv4Addr : this.readIPv6Addr();
          }
        }]);
        return _class24;
      }())();
    function ae(e) {
      return Boolean(function (e) {
        if (!(e.length > ie)) return oe.new(e).parseWith(function () {
          return oe.readIPAddr();
        });
      }(e));
    }
    var ce = V({
        prefix: "\0",
        name: "identity",
        encode: function encode(e) {
          return t = e, new TextDecoder().decode(t);
          var t;
        },
        decode: function decode(e) {
          return function (e) {
            return new TextEncoder().encode(e);
          }(e);
        }
      }),
      le = F({
        prefix: "0",
        name: "base2",
        alphabet: "01",
        bitsPerChar: 1
      }),
      ue = F({
        prefix: "7",
        name: "base8",
        alphabet: "01234567",
        bitsPerChar: 3
      }),
      he = K({
        prefix: "9",
        name: "base10",
        alphabet: "0123456789"
      }),
      de = F({
        prefix: "f",
        name: "base16",
        alphabet: "0123456789abcdef",
        bitsPerChar: 4
      }),
      pe = F({
        prefix: "F",
        name: "base16upper",
        alphabet: "0123456789ABCDEF",
        bitsPerChar: 4
      }),
      fe = K({
        prefix: "k",
        name: "base36",
        alphabet: "0123456789abcdefghijklmnopqrstuvwxyz"
      }),
      ye = K({
        prefix: "K",
        name: "base36upper",
        alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"
      }),
      ge = Array.from(""),
      me = ge.reduce(function (e, t, r) {
        return e[r] = t, e;
      }, []),
      we = ge.reduce(function (e, t, r) {
        return e[t.codePointAt(0)] = r, e;
      }, []),
      Ee = V({
        prefix: "",
        name: "base256emoji",
        encode: function encode(e) {
          return e.reduce(function (e, t) {
            return e + me[t];
          }, "");
        },
        decode: function decode(e) {
          var t = [];
          var _iterator37 = _createForOfIteratorHelper(e),
            _step37;
          try {
            for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {
              var _r23 = _step37.value;
              var _e32 = we[_r23.codePointAt(0)];
              if (void 0 === _e32) throw new Error("Non-base256emoji character: ".concat(_r23));
              t.push(_e32);
            }
          } catch (err) {
            _iterator37.e(err);
          } finally {
            _iterator37.f();
          }
          return new Uint8Array(t);
        }
      });
    var be = 128,
      ve = -128,
      _e = Math.pow(2, 31),
      Se = 128,
      Ce = 127,
      Ae = Math.pow(2, 7),
      Ie = Math.pow(2, 14),
      Te = Math.pow(2, 21),
      Re = Math.pow(2, 28),
      ke = Math.pow(2, 35),
      Ne = Math.pow(2, 42),
      Le = Math.pow(2, 49),
      De = Math.pow(2, 56),
      Pe = Math.pow(2, 63);
    var Be = {
        encode: function e(t, r, n) {
          r = r || [];
          for (var i = n = n || 0; t >= _e;) r[n++] = 255 & t | be, t /= 128;
          for (; t & ve;) r[n++] = 255 & t | be, t >>>= 7;
          return r[n] = 0 | t, e.bytes = n - i + 1, r;
        },
        decode: function e(t, r) {
          var n,
            i = 0,
            s = 0,
            o = r = r || 0,
            a = t.length;
          do {
            if (o >= a) throw e.bytes = 0, new RangeError("Could not decode varint");
            n = t[o++], i += s < 28 ? (n & Ce) << s : (n & Ce) * Math.pow(2, s), s += 7;
          } while (n >= Se);
          return e.bytes = o - r, i;
        },
        encodingLength: function encodingLength(e) {
          return e < Ae ? 1 : e < Ie ? 2 : e < Te ? 3 : e < Re ? 4 : e < ke ? 5 : e < Ne ? 6 : e < Le ? 7 : e < De ? 8 : e < Pe ? 9 : 10;
        }
      },
      Oe = function Oe(e) {
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        return [Be.decode(e, t), Be.decode.bytes];
      },
      xe = function xe(e, t) {
        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
        return Be.encode(e, t, r), t;
      },
      Ue = function Ue(e) {
        return Be.encodingLength(e);
      },
      Me = function Me(e, t) {
        var r = t.byteLength,
          n = Ue(e),
          i = n + Ue(r),
          s = new Uint8Array(i + r);
        return xe(e, s, 0), xe(r, s, n), s.set(t, i), new Ke(e, r, t, s);
      },
      Ve = function Ve(e) {
        var t = P(e),
          _Oe = Oe(t),
          _Oe2 = _slicedToArray(_Oe, 2),
          r = _Oe2[0],
          n = _Oe2[1],
          _Oe3 = Oe(t.subarray(n)),
          _Oe4 = _slicedToArray(_Oe3, 2),
          i = _Oe4[0],
          s = _Oe4[1],
          o = t.subarray(n + s);
        if (o.byteLength !== i) throw new Error("Incorrect length");
        return new Ke(r, i, o, t);
      };
    var Ke = /*#__PURE__*/_createClass(function Ke(e, t, r, n) {
      _classCallCheck(this, Ke);
      this.code = e, this.size = t, this.digest = r, this.bytes = n;
    });
    var Fe = function Fe(_ref29) {
      var e = _ref29.name,
        t = _ref29.code,
        r = _ref29.encode;
      return new qe(e, t, r);
    };
    var qe = /*#__PURE__*/function () {
      function qe(e, t, r) {
        _classCallCheck(this, qe);
        this.name = e, this.code = t, this.encode = r;
      }
      _createClass(qe, [{
        key: "digest",
        value: function digest(e) {
          var _this74 = this;
          if (e instanceof Uint8Array) {
            var _t27 = this.encode(e);
            return _t27 instanceof Uint8Array ? Me(this.code, _t27) : _t27.then(function (e) {
              return Me(_this74.code, e);
            });
          }
          throw Error("Unknown type, must be binary type");
        }
      }]);
      return qe;
    }();
    var je = function je(e) {
        return /*#__PURE__*/function () {
          var _ref30 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(t) {
            return _regeneratorRuntime().wrap(function _callee2$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  _context3.t0 = Uint8Array;
                  _context3.next = 3;
                  return crypto.subtle.digest(e, t);
                case 3:
                  _context3.t1 = _context3.sent;
                  return _context3.abrupt("return", new _context3.t0(_context3.t1));
                case 5:
                case "end":
                  return _context3.stop();
              }
            }, _callee2);
          }));
          return function (_x22) {
            return _ref30.apply(this, arguments);
          };
        }();
      },
      He = Fe({
        name: "sha2-256",
        code: 18,
        encode: je("SHA-256")
      }),
      ze = Fe({
        name: "sha2-512",
        code: 19,
        encode: je("SHA-512")
      }),
      $e = P,
      Ge = {
        code: 0,
        name: "identity",
        encode: $e,
        digest: function digest(e) {
          return Me(0, $e(e));
        }
      },
      We = "raw",
      Ye = 85,
      Qe = function Qe(e) {
        return P(e);
      },
      Xe = function Xe(e) {
        return P(e);
      },
      Ze = new TextEncoder(),
      Je = new TextDecoder(),
      et = "json",
      tt = 512,
      rt = function rt(e) {
        return Ze.encode(JSON.stringify(e));
      },
      nt = function nt(e) {
        return JSON.parse(Je.decode(e));
      },
      it = function it(e, t) {
        var r = e.bytes,
          n = e.version;
        return 0 === n ? lt(r, ot(e), t || q.encoder) : ut(r, ot(e), t || H.encoder);
      },
      st = new WeakMap(),
      ot = function ot(e) {
        var t = st.get(e);
        if (null == t) {
          var _t28 = new Map();
          return st.set(e, _t28), _t28;
        }
        return t;
      };
    var at = /*#__PURE__*/function (_Symbol$toStringTag, _Symbol$for2) {
      function at(e, t, r, n) {
        _classCallCheck(this, at);
        this.code = t, this.version = e, this.multihash = r, this.bytes = n, this["/"] = n;
      }
      _createClass(at, [{
        key: "asCID",
        get: function get() {
          return this;
        }
      }, {
        key: "byteOffset",
        get: function get() {
          return this.bytes.byteOffset;
        }
      }, {
        key: "byteLength",
        get: function get() {
          return this.bytes.byteLength;
        }
      }, {
        key: "toV0",
        value: function toV0() {
          switch (this.version) {
            case 0:
              return this;
            case 1:
              {
                var _e33 = this.code,
                  _t29 = this.multihash;
                if (_e33 !== ht) throw new Error("Cannot convert a non dag-pb CID to CIDv0");
                if (_t29.code !== dt) throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");
                return at.createV0(_t29);
              }
            default:
              throw Error("Can not convert CID version ".concat(this.version, " to version 0. This is a bug please report"));
          }
        }
      }, {
        key: "toV1",
        value: function toV1() {
          switch (this.version) {
            case 0:
              {
                var _this$multihash = this.multihash,
                  _e34 = _this$multihash.code,
                  _t30 = _this$multihash.digest,
                  _r24 = Me(_e34, _t30);
                return at.createV1(this.code, _r24);
              }
            case 1:
              return this;
            default:
              throw Error("Can not convert CID version ".concat(this.version, " to version 1. This is a bug please report"));
          }
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return at.equals(this, e);
        }
      }, {
        key: "toString",
        value: function toString(e) {
          return it(this, e);
        }
      }, {
        key: "toJSON",
        value: function toJSON() {
          return {
            "/": it(this)
          };
        }
      }, {
        key: "link",
        value: function link() {
          return this;
        }
      }, {
        key: _Symbol$toStringTag,
        get: function get() {
          return "CID";
        }
      }, {
        key: _Symbol$for2,
        value: function value() {
          return "CID(".concat(this.toString(), ")");
        }
      }], [{
        key: "equals",
        value: function equals(e, t) {
          var r = t;
          return r && e.code === r.code && e.version === r.version && function (e, t) {
            if (e === t) return !0;
            {
              var _r25 = t;
              return e.code === _r25.code && e.size === _r25.size && _r25.bytes instanceof Uint8Array && function (e, t) {
                if (e === t) return !0;
                if (e.byteLength !== t.byteLength) return !1;
                for (var _r26 = 0; _r26 < e.byteLength; _r26++) if (e[_r26] !== t[_r26]) return !1;
                return !0;
              }(e.bytes, _r25.bytes);
            }
          }(e.multihash, r.multihash);
        }
      }, {
        key: "asCID",
        value: function asCID(e) {
          if (null == e) return null;
          var t = e;
          if (t instanceof at) return t;
          if (null != t["/"] && t["/"] === t.bytes || t.asCID === t) {
            var _e35 = t.version,
              _r27 = t.code,
              _n26 = t.multihash,
              _i10 = t.bytes;
            return new at(_e35, _r27, _n26, _i10 || pt(_e35, _r27, _n26.bytes));
          }
          if (!0 === t[ft]) {
            var _e36 = t.version,
              _r28 = t.multihash,
              _n27 = t.code,
              _i11 = Ve(_r28);
            return at.create(_e36, _n27, _i11);
          }
          return null;
        }
      }, {
        key: "create",
        value: function create(e, t, r) {
          if ("number" != typeof t) throw new Error("String codecs are no longer supported");
          if (!(r.bytes instanceof Uint8Array)) throw new Error("Invalid digest");
          switch (e) {
            case 0:
              if (t !== ht) throw new Error("Version 0 CID must use dag-pb (code: ".concat(ht, ") block encoding"));
              return new at(e, t, r, r.bytes);
            case 1:
              {
                var _n28 = pt(e, t, r.bytes);
                return new at(e, t, r, _n28);
              }
            default:
              throw new Error("Invalid version");
          }
        }
      }, {
        key: "createV0",
        value: function createV0(e) {
          return at.create(0, ht, e);
        }
      }, {
        key: "createV1",
        value: function createV1(e, t) {
          return at.create(1, e, t);
        }
      }, {
        key: "decode",
        value: function decode(e) {
          var _at$decodeFirst = at.decodeFirst(e),
            _at$decodeFirst2 = _slicedToArray(_at$decodeFirst, 2),
            t = _at$decodeFirst2[0],
            r = _at$decodeFirst2[1];
          if (r.length) throw new Error("Incorrect length");
          return t;
        }
      }, {
        key: "decodeFirst",
        value: function decodeFirst(e) {
          var t = at.inspectBytes(e),
            r = t.size - t.multihashSize,
            n = P(e.subarray(r, r + t.multihashSize));
          if (n.byteLength !== t.multihashSize) throw new Error("Incorrect length");
          var i = n.subarray(t.multihashSize - t.digestSize),
            s = new Ke(t.multihashCode, t.digestSize, i, n);
          return [0 === t.version ? at.createV0(s) : at.createV1(t.codec, s), e.subarray(t.size)];
        }
      }, {
        key: "inspectBytes",
        value: function inspectBytes(e) {
          var t = 0;
          var r = function r() {
            var _Oe5 = Oe(e.subarray(t)),
              _Oe6 = _slicedToArray(_Oe5, 2),
              r = _Oe6[0],
              n = _Oe6[1];
            return t += n, r;
          };
          var n = r(),
            i = ht;
          if (18 === n ? (n = 0, t = 0) : i = r(), 0 !== n && 1 !== n) throw new RangeError("Invalid CID version ".concat(n));
          var s = t,
            o = r(),
            a = r(),
            c = t + a;
          return {
            version: n,
            codec: i,
            multihashCode: o,
            digestSize: a,
            multihashSize: c - s,
            size: c
          };
        }
      }, {
        key: "parse",
        value: function parse(e, t) {
          var _ct = ct(e, t),
            _ct2 = _slicedToArray(_ct, 2),
            r = _ct2[0],
            n = _ct2[1],
            i = at.decode(n);
          if (0 === i.version && "Q" !== e[0]) throw Error("Version 0 CID string must not include multibase prefix");
          return ot(i).set(r, e), i;
        }
      }]);
      return at;
    }(Symbol.toStringTag, Symbol.for("nodejs.util.inspect.custom"));
    var ct = function ct(e, t) {
        switch (e[0]) {
          case "Q":
            {
              var _r29 = t || q;
              return [q.prefix, _r29.decode("".concat(q.prefix).concat(e))];
            }
          case q.prefix:
            {
              var _r30 = t || q;
              return [q.prefix, _r30.decode(e)];
            }
          case H.prefix:
            {
              var _r31 = t || H;
              return [H.prefix, _r31.decode(e)];
            }
          default:
            if (null == t) throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");
            return [e[0], t.decode(e)];
        }
      },
      lt = function lt(e, t, r) {
        var n = r.prefix;
        if (n !== q.prefix) throw Error("Cannot string encode V0 in ".concat(r.name, " encoding"));
        var i = t.get(n);
        if (null == i) {
          var _i12 = r.encode(e).slice(1);
          return t.set(n, _i12), _i12;
        }
        return i;
      },
      ut = function ut(e, t, r) {
        var n = r.prefix,
          i = t.get(n);
        if (null == i) {
          var _i13 = r.encode(e);
          return t.set(n, _i13), _i13;
        }
        return i;
      },
      ht = 112,
      dt = 18,
      pt = function pt(e, t, r) {
        var n = Ue(e),
          i = n + Ue(t),
          s = new Uint8Array(i + r.byteLength);
        return xe(e, s, 0), xe(t, s, n), s.set(r, i), s;
      },
      ft = Symbol.for("@ipld/js-cid/CID"),
      yt = _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, n), i), s), o), a), t), c), e), r), l);
    function gt(e) {
      return null != globalThis.Buffer ? new Uint8Array(e.buffer, e.byteOffset, e.byteLength) : e;
    }
    function mt() {
      var _globalThis$Buffer;
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      return null != ((_globalThis$Buffer = globalThis.Buffer) === null || _globalThis$Buffer === void 0 ? void 0 : _globalThis$Buffer.alloc) ? gt(globalThis.Buffer.alloc(e)) : new Uint8Array(e);
    }
    function wt() {
      var _globalThis$Buffer2;
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      return null != ((_globalThis$Buffer2 = globalThis.Buffer) === null || _globalThis$Buffer2 === void 0 ? void 0 : _globalThis$Buffer2.allocUnsafe) ? gt(globalThis.Buffer.allocUnsafe(e)) : new Uint8Array(e);
    }
    function Et(e, t, r, n) {
      return {
        name: e,
        prefix: t,
        encoder: {
          name: e,
          prefix: t,
          encode: r
        },
        decoder: {
          decode: n
        }
      };
    }
    var bt = Et("utf8", "u", function (e) {
        return "u" + new TextDecoder("utf8").decode(e);
      }, function (e) {
        return new TextEncoder().encode(e.substring(1));
      }),
      vt = Et("ascii", "a", function (e) {
        var t = "a";
        for (var _r32 = 0; _r32 < e.length; _r32++) t += String.fromCharCode(e[_r32]);
        return t;
      }, function (e) {
        var t = wt((e = e.substring(1)).length);
        for (var _r33 = 0; _r33 < e.length; _r33++) t[_r33] = e.charCodeAt(_r33);
        return t;
      }),
      _t = _objectSpread({
        utf8: bt,
        "utf-8": bt,
        hex: yt.base16,
        latin1: vt,
        ascii: vt,
        binary: vt
      }, yt);
    function St(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "utf8";
      var r = _t[t];
      if (null == r) throw new Error("Unsupported encoding \"".concat(t, "\""));
      return "utf8" !== t && "utf-8" !== t || null == globalThis.Buffer || null == globalThis.Buffer.from ? r.encoder.encode(e).substring(1) : globalThis.Buffer.from(e.buffer, e.byteOffset, e.byteLength).toString("utf8");
    }
    var Ct = function Ct(e) {
        return Boolean(function (e) {
          if (!(e.length > se)) return oe.new(e).parseWith(function () {
            return oe.readIPv4Addr();
          });
        }(e));
      },
      At = function At(e) {
        return Boolean(function (e) {
          if (!(e.length > ie)) return oe.new(e).parseWith(function () {
            return oe.readIPv6Addr();
          });
        }(e));
      },
      It = function It(e) {
        var t = 0;
        if (e = e.toString().trim(), Ct(e)) {
          var _r34 = new Uint8Array(t + 4);
          return e.split(/\./g).forEach(function (e) {
            _r34[t++] = 255 & parseInt(e, 10);
          }), _r34;
        }
        if (At(e)) {
          var _r35 = e.split(":", 8);
          var _n29;
          for (_n29 = 0; _n29 < _r35.length; _n29++) {
            var _e37 = void 0;
            Ct(_r35[_n29]) && (_e37 = It(_r35[_n29]), _r35[_n29] = St(_e37.slice(0, 2), "base16")), null != _e37 && ++_n29 < 8 && _r35.splice(_n29, 0, St(_e37.slice(2, 4), "base16"));
          }
          if ("" === _r35[0]) for (; _r35.length < 8;) _r35.unshift("0");else if ("" === _r35[_r35.length - 1]) for (; _r35.length < 8;) _r35.push("0");else if (_r35.length < 8) {
            for (_n29 = 0; _n29 < _r35.length && "" !== _r35[_n29]; _n29++);
            var _e38 = [_n29, 1];
            for (_n29 = 9 - _r35.length; _n29 > 0; _n29--) _e38.push("0");
            _r35.splice.apply(_r35, _e38);
          }
          var _i14 = new Uint8Array(t + 16);
          for (_n29 = 0; _n29 < _r35.length; _n29++) {
            var _e39 = parseInt(_r35[_n29], 16);
            _i14[t++] = _e39 >> 8 & 255, _i14[t++] = 255 & _e39;
          }
          return _i14;
        }
        throw new Error("invalid ip address");
      },
      Tt = function Tt(e) {
        var _r36;
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        var r = arguments.length > 2 ? arguments[2] : undefined;
        t = ~~t, r = (_r36 = r) !== null && _r36 !== void 0 ? _r36 : e.length - t;
        var n = new DataView(e.buffer);
        if (4 === r) {
          var _n30 = [];
          for (var _i15 = 0; _i15 < r; _i15++) _n30.push(e[t + _i15]);
          return _n30.join(".");
        }
        if (16 === r) {
          var _e40 = [];
          for (var _i16 = 0; _i16 < r; _i16 += 2) _e40.push(n.getUint16(t + _i16).toString(16));
          return _e40.join(":").replace(/(^|:)0(:0)*:0(:|$)/, "$1::$3").replace(/:{3,4}/, "::");
        }
        return "";
      },
      Rt = -1,
      kt = {},
      Nt = {};
    function Lt(e) {
      if ("number" == typeof e) {
        if (null != Nt[e]) return Nt[e];
        throw new Error("no protocol with code: ".concat(e));
      }
      if ("string" == typeof e) {
        if (null != kt[e]) return kt[e];
        throw new Error("no protocol with name: ".concat(e));
      }
      throw new Error("invalid protocol id type: " + _typeof(e));
    }
    [[4, 32, "ip4"], [6, 16, "tcp"], [33, 16, "dccp"], [41, 128, "ip6"], [42, Rt, "ip6zone"], [43, 8, "ipcidr"], [53, Rt, "dns", !0], [54, Rt, "dns4", !0], [55, Rt, "dns6", !0], [56, Rt, "dnsaddr", !0], [132, 16, "sctp"], [273, 16, "udp"], [275, 0, "p2p-webrtc-star"], [276, 0, "p2p-webrtc-direct"], [277, 0, "p2p-stardust"], [280, 0, "webrtc"], [281, 0, "webrtc-w3c"], [290, 0, "p2p-circuit"], [301, 0, "udt"], [302, 0, "utp"], [400, Rt, "unix", !1, !0], [421, Rt, "ipfs"], [421, Rt, "p2p"], [443, 0, "https"], [444, 96, "onion"], [445, 296, "onion3"], [446, Rt, "garlic64"], [448, 0, "tls"], [460, 0, "quic"], [461, 0, "quic-v1"], [465, 0, "webtransport"], [466, Rt, "certhash"], [477, 0, "ws"], [478, 0, "wss"], [479, 0, "p2p-websocket-star"], [480, 0, "http"], [777, Rt, "memory"]].forEach(function (e) {
      var t = function (e, t, r, n, i) {
        return {
          code: e,
          size: t,
          name: r,
          resolvable: Boolean(n),
          path: Boolean(i)
        };
      }.apply(void 0, _toConsumableArray(e));
      Nt[t.code] = t, kt[t.name] = t;
    });
    var Dt = __webpack_require__(4676);
    function Pt(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "utf8";
      var r = _t[t];
      if (null == r) throw new Error("Unsupported encoding \"".concat(t, "\""));
      return "utf8" !== t && "utf-8" !== t || null == globalThis.Buffer || null == globalThis.Buffer.from ? r.decoder.decode("".concat(r.prefix).concat(e)) : gt(globalThis.Buffer.from(e, "utf-8"));
    }
    function Bt(e, t) {
      null == t && (t = e.reduce(function (e, t) {
        return e + t.length;
      }, 0));
      var r = wt(t);
      var n = 0;
      var _iterator38 = _createForOfIteratorHelper(e),
        _step38;
      try {
        for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {
          var _t31 = _step38.value;
          r.set(_t31, n), n += _t31.length;
        }
      } catch (err) {
        _iterator38.e(err);
      } finally {
        _iterator38.f();
      }
      return gt(r);
    }
    function Ot(e, t) {
      switch (Lt(e).code) {
        case 4:
        case 41:
          return function (e) {
            var t = Tt(e, 0, e.length);
            if (null == t) throw new Error("ipBuff is required");
            if (!ae(t)) throw new Error("invalid ip address");
            return t;
          }(t);
        case 42:
        case 53:
        case 54:
        case 55:
        case 56:
        case 400:
        case 777:
          return function (e) {
            var t = Dt.decode(e);
            if ((e = e.slice(Dt.decode.bytes)).length !== t) throw new Error("inconsistent lengths");
            return St(e);
          }(t);
        case 6:
        case 273:
        case 33:
        case 132:
          return Kt(t).toString();
        case 421:
          return function (e) {
            var t = Dt.decode(e),
              r = e.slice(Dt.decode.bytes);
            if (r.length !== t) throw new Error("inconsistent lengths");
            return St(r, "base58btc");
          }(t);
        case 444:
        case 445:
          return function (e) {
            var t = e.slice(0, e.length - 2),
              r = e.slice(e.length - 2);
            return "".concat(St(t, "base32"), ":").concat(Kt(r));
          }(t);
        case 466:
          return function (e) {
            var t = Dt.decode(e),
              r = e.slice(Dt.decode.bytes);
            if (r.length !== t) throw new Error("inconsistent lengths");
            return "u" + St(r, "base64url");
          }(t);
        default:
          return St(t, "base16");
      }
    }
    function xt(e, t) {
      switch (Lt(e).code) {
        case 4:
        case 41:
          return function (e) {
            if (!ae(e)) throw new Error("invalid ip address");
            return It(e);
          }(t);
        case 42:
        case 53:
        case 54:
        case 55:
        case 56:
        case 400:
        case 777:
          return function (e) {
            var t = Pt(e),
              r = Uint8Array.from(Dt.encode(t.length));
            return Bt([r, t], r.length + t.length);
          }(t);
        case 6:
        case 273:
        case 33:
        case 132:
          return Vt(parseInt(t, 10));
        case 421:
          return function (e) {
            var t;
            t = "Q" === e[0] || "1" === e[0] ? Ve(q.decode("z".concat(e))).bytes : at.parse(e).multihash.bytes;
            var r = Uint8Array.from(Dt.encode(t.length));
            return Bt([r, t], r.length + t.length);
          }(t);
        case 444:
          return function (e) {
            var t = e.split(":");
            if (2 !== t.length) throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'), "'\"]' does not contain a port number"));
            if (16 !== t[0].length) throw new Error("failed to parse onion addr: ".concat(t[0], " not a Tor onion address."));
            var r = H.decode("b" + t[0]),
              n = parseInt(t[1], 10);
            if (n < 1 || n > 65536) throw new Error("Port number is not in range(1, 65536)");
            var i = Vt(n);
            return Bt([r, i], r.length + i.length);
          }(t);
        case 445:
          return function (e) {
            var t = e.split(":");
            if (2 !== t.length) throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'), "'\"]' does not contain a port number"));
            if (56 !== t[0].length) throw new Error("failed to parse onion addr: ".concat(t[0], " not a Tor onion3 address."));
            var r = H.decode("b".concat(t[0])),
              n = parseInt(t[1], 10);
            if (n < 1 || n > 65536) throw new Error("Port number is not in range(1, 65536)");
            var i = Vt(n);
            return Bt([r, i], r.length + i.length);
          }(t);
        case 466:
          return function (e) {
            var t = Mt.decode(e),
              r = Uint8Array.from(Dt.encode(t.length));
            return Bt([r, t], r.length + t.length);
          }(t);
        default:
          return Pt(t, "base16");
      }
    }
    var Ut = Object.values(yt).map(function (e) {
        return e.decoder;
      }),
      Mt = function () {
        var e = Ut[0].or(Ut[1]);
        return Ut.slice(2).forEach(function (t) {
          return e = e.or(t);
        }), e;
      }();
    function Vt(e) {
      var t = new ArrayBuffer(2);
      return new DataView(t).setUint16(0, e), new Uint8Array(t);
    }
    function Kt(e) {
      return new DataView(e.buffer).getUint16(e.byteOffset);
    }
    function Ft(e) {
      return e.map(function (e) {
        var t = Yt(e);
        return null != e[1] ? [t.code, Ot(t.code, e[1])] : [t.code];
      });
    }
    function qt(e) {
      return $t(Bt(e.map(function (e) {
        var t = Yt(e);
        var r = Uint8Array.from(Dt.encode(t.code));
        return e.length > 1 && null != e[1] && (r = Bt([r, e[1]])), r;
      })));
    }
    function jt(e, t) {
      var _Dt$decode$bytes;
      return e.size > 0 ? e.size / 8 : 0 === e.size ? 0 : Dt.decode(t) + ((_Dt$decode$bytes = Dt.decode.bytes) !== null && _Dt$decode$bytes !== void 0 ? _Dt$decode$bytes : 0);
    }
    function Ht(e) {
      var t = [];
      var r = 0;
      for (; r < e.length;) {
        var _Dt$decode$bytes2;
        var _n31 = Dt.decode(e, r),
          _i17 = (_Dt$decode$bytes2 = Dt.decode.bytes) !== null && _Dt$decode$bytes2 !== void 0 ? _Dt$decode$bytes2 : 0,
          _s10 = jt(Lt(_n31), e.slice(r + _i17));
        if (0 === _s10) {
          t.push([_n31]), r += _i17;
          continue;
        }
        var _o5 = e.slice(r + _i17, r + _i17 + _s10);
        if (r += _s10 + _i17, r > e.length) throw Wt("Invalid address Uint8Array: " + St(e, "base16"));
        t.push([_n31, _o5]);
      }
      return t;
    }
    function zt(e) {
      return function (e) {
        var t = [];
        return e.map(function (e) {
          var r = Yt(e);
          return t.push(r.name), e.length > 1 && null != e[1] && t.push(e[1]), null;
        }), Gt(t.join("/"));
      }(Ft(Ht(e)));
    }
    function $t(e) {
      var t = function (e) {
        try {
          Ht(e);
        } catch (e) {
          return e;
        }
      }(e);
      if (null != t) throw t;
      return Uint8Array.from(e);
    }
    function Gt(e) {
      return "/" + e.trim().split("/").filter(function (e) {
        return e;
      }).join("/");
    }
    function Wt(e) {
      return new Error("Error parsing address: " + e);
    }
    function Yt(e) {
      return Lt(e[0]);
    }
    var Qt = __webpack_require__(2114);
    function Xt(e, t) {
      if (e === t) return !0;
      if (e.byteLength !== t.byteLength) return !1;
      for (var _r37 = 0; _r37 < e.byteLength; _r37++) if (e[_r37] !== t[_r37]) return !1;
      return !0;
    }
    var Zt,
      Jt,
      er,
      tr,
      rr = function rr(e, t, r, n) {
        if ("a" === r && !n) throw new TypeError("Private accessor was defined without a getter");
        if ("function" == typeof t ? e !== t || !n : !t.has(e)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
        return "m" === r ? n : "a" === r ? n.call(e) : n ? n.value : t.get(e);
      },
      nr = function nr(e, t, r, n, i) {
        if ("m" === n) throw new TypeError("Private method is not writable");
        if ("a" === n && !i) throw new TypeError("Private accessor was defined without a setter");
        if ("function" == typeof t ? e !== t || !i : !t.has(e)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
        return "a" === n ? i.call(e, r) : i ? i.value = r : t.set(e, r), r;
      };
    var ir = Symbol.for("nodejs.util.inspect.custom"),
      sr = [Lt("dns").code, Lt("dns4").code, Lt("dns6").code, Lt("dnsaddr").code],
      or = new Map(),
      ar = Symbol.for("@multiformats/js-multiaddr/multiaddr");
    function cr(e, t) {
      if (null == e) throw new Error("requires node address object");
      if (null == t) throw new Error("requires transport protocol");
      var r,
        n = e.address;
      switch (e.family) {
        case 4:
          r = "ip4";
          break;
        case 6:
          if (r = "ip6", n.includes("%")) {
            var _e41 = n.split("%");
            if (2 !== _e41.length) throw Error("Multiple ip6 zones in multiaddr");
            n = _e41[0], r = "/ip6zone/".concat(_e41[1], "/ip6");
          }
          break;
        default:
          throw Error("Invalid addr family, should be 4 or 6.");
      }
      return new ur("/" + [r, n, t, e.port].join("/"));
    }
    function lr(e) {
      return Boolean(e === null || e === void 0 ? void 0 : e[ar]);
    }
    var ur = /*#__PURE__*/function (_ref31) {
      function ur(e) {
        _classCallCheck(this, ur);
        if (Zt.set(this, void 0), Jt.set(this, void 0), er.set(this, void 0), this[tr] = !0, null == e && (e = ""), e instanceof Uint8Array) this.bytes = $t(e);else if ("string" == typeof e) {
          if (e.length > 0 && "/" !== e.charAt(0)) throw new Error("multiaddr \"".concat(e, "\" must start with a \"/\""));
          this.bytes = qt(function (e) {
            var t = [],
              r = e.split("/").slice(1);
            if (1 === r.length && "" === r[0]) return [];
            for (var _n32 = 0; _n32 < r.length; _n32++) {
              var _i18 = r[_n32],
                _s11 = Lt(_i18);
              if (0 !== _s11.size) {
                if (_n32++, _n32 >= r.length) throw Wt("invalid address: " + e);
                if (!0 === _s11.path) {
                  t.push([_i18, Gt(r.slice(_n32).join("/"))]);
                  break;
                }
                t.push([_i18, r[_n32]]);
              } else t.push([_i18]);
            }
            return t;
          }(Gt(e)).map(function (e) {
            Array.isArray(e) || (e = [e]);
            var t = Yt(e);
            return e.length > 1 ? [t.code, xt(t.code, e[1])] : [t.code];
          }));
        } else {
          if (!lr(e)) throw new Error("addr must be a string, Buffer, or another Multiaddr");
          this.bytes = $t(e.bytes);
        }
      }
      _createClass(ur, [{
        key: "toString",
        value: function toString() {
          return null == rr(this, Zt, "f") && nr(this, Zt, zt(this.bytes), "f"), rr(this, Zt, "f");
        }
      }, {
        key: "toJSON",
        value: function toJSON() {
          return this.toString();
        }
      }, {
        key: "toOptions",
        value: function toOptions() {
          var e,
            t,
            r,
            n,
            i = "";
          var s = Lt("tcp"),
            o = Lt("udp"),
            a = Lt("ip4"),
            c = Lt("ip6"),
            l = Lt("dns6"),
            u = Lt("ip6zone");
          var _iterator39 = _createForOfIteratorHelper(this.stringTuples()),
            _step39;
          try {
            for (_iterator39.s(); !(_step39 = _iterator39.n()).done;) {
              var _step39$value = _slicedToArray(_step39.value, 2),
                _h2 = _step39$value[0],
                _d2 = _step39$value[1];
              _h2 === u.code && (i = "%".concat(_d2 !== null && _d2 !== void 0 ? _d2 : "")), sr.includes(_h2) && (t = s.name, n = 443, r = "".concat(_d2 !== null && _d2 !== void 0 ? _d2 : "").concat(i), e = _h2 === l.code ? 6 : 4), _h2 !== s.code && _h2 !== o.code || (t = Lt(_h2).name, n = parseInt(_d2 !== null && _d2 !== void 0 ? _d2 : "")), _h2 !== a.code && _h2 !== c.code || (t = Lt(_h2).name, r = "".concat(_d2 !== null && _d2 !== void 0 ? _d2 : "").concat(i), e = _h2 === c.code ? 6 : 4);
            }
          } catch (err) {
            _iterator39.e(err);
          } finally {
            _iterator39.f();
          }
          if (null == e || null == t || null == r || null == n) throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');
          return {
            family: e,
            host: r,
            transport: t,
            port: n
          };
        }
      }, {
        key: "protos",
        value: function protos() {
          return this.protoCodes().map(function (e) {
            return Object.assign({}, Lt(e));
          });
        }
      }, {
        key: "protoCodes",
        value: function protoCodes() {
          var e = [],
            t = this.bytes;
          var r = 0;
          for (; r < t.length;) {
            var _Dt$decode$bytes3;
            var _n33 = Dt.decode(t, r),
              _i19 = (_Dt$decode$bytes3 = Dt.decode.bytes) !== null && _Dt$decode$bytes3 !== void 0 ? _Dt$decode$bytes3 : 0;
            r += jt(Lt(_n33), t.slice(r + _i19)) + _i19, e.push(_n33);
          }
          return e;
        }
      }, {
        key: "protoNames",
        value: function protoNames() {
          return this.protos().map(function (e) {
            return e.name;
          });
        }
      }, {
        key: "tuples",
        value: function tuples() {
          return null == rr(this, Jt, "f") && nr(this, Jt, Ht(this.bytes), "f"), rr(this, Jt, "f");
        }
      }, {
        key: "stringTuples",
        value: function stringTuples() {
          return null == rr(this, er, "f") && nr(this, er, Ft(this.tuples()), "f"), rr(this, er, "f");
        }
      }, {
        key: "encapsulate",
        value: function encapsulate(e) {
          return e = new ur(e), new ur(this.toString() + e.toString());
        }
      }, {
        key: "decapsulate",
        value: function decapsulate(e) {
          var t = e.toString(),
            r = this.toString(),
            n = r.lastIndexOf(t);
          if (n < 0) throw new Error("Address ".concat(this.toString(), " does not contain subaddress: ").concat(e.toString()));
          return new ur(r.slice(0, n));
        }
      }, {
        key: "decapsulateCode",
        value: function decapsulateCode(e) {
          var t = this.tuples();
          for (var _r38 = t.length - 1; _r38 >= 0; _r38--) if (t[_r38][0] === e) return new ur(qt(t.slice(0, _r38)));
          return this;
        }
      }, {
        key: "getPeerId",
        value: function getPeerId() {
          try {
            var _e42 = this.stringTuples().filter(function (e) {
                return e[0] === kt.ipfs.code;
              }),
              _t32 = _e42.pop();
            if (null != (_t32 === null || _t32 === void 0 ? void 0 : _t32[1])) {
              var _e43 = _t32[1];
              return "Q" === _e43[0] || "1" === _e43[0] ? St(q.decode("z".concat(_e43)), "base58btc") : St(at.parse(_e43).multihash.bytes, "base58btc");
            }
            return null;
          } catch (e) {
            return null;
          }
        }
      }, {
        key: "getPath",
        value: function getPath() {
          var e = null;
          try {
            e = this.stringTuples().filter(function (e) {
              return !0 === Lt(e[0]).path;
            })[0][1], null == e && (e = null);
          } catch (_unused) {
            e = null;
          }
          return e;
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return Xt(this.bytes, e.bytes);
        }
      }, {
        key: "resolve",
        value: function () {
          var _resolve = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e) {
            var t, r;
            return _regeneratorRuntime().wrap(function _callee3$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  t = this.protos().find(function (e) {
                    return e.resolvable;
                  });
                  if (!(null == t)) {
                    _context4.next = 3;
                    break;
                  }
                  return _context4.abrupt("return", [this]);
                case 3:
                  r = or.get(t.name);
                  if (!(null == r)) {
                    _context4.next = 6;
                    break;
                  }
                  throw Qt(new Error("no available resolver for ".concat(t.name)), "ERR_NO_AVAILABLE_RESOLVER");
                case 6:
                  _context4.next = 8;
                  return r(this, e);
                case 8:
                  return _context4.abrupt("return", _context4.sent.map(function (e) {
                    return new ur(e);
                  }));
                case 9:
                case "end":
                  return _context4.stop();
              }
            }, _callee3, this);
          }));
          function resolve(_x23) {
            return _resolve.apply(this, arguments);
          }
          return resolve;
        }()
      }, {
        key: "nodeAddress",
        value: function nodeAddress() {
          var e = this.toOptions();
          if ("tcp" !== e.transport && "udp" !== e.transport) throw new Error("multiaddr must have a valid format - no protocol with name: \"".concat(e.transport, "\". Must have a valid transport protocol: \"{tcp, udp}\""));
          return {
            family: e.family,
            address: e.host,
            port: e.port
          };
        }
      }, {
        key: "isThinWaistAddress",
        value: function isThinWaistAddress(e) {
          var t = (e !== null && e !== void 0 ? e : this).protos();
          return !(2 !== t.length || 4 !== t[0].code && 41 !== t[0].code || 6 !== t[1].code && 273 !== t[1].code);
        }
      }, {
        key: _ref31,
        value: function value() {
          return "Multiaddr(".concat(zt(this.bytes), ")");
        }
      }]);
      return ur;
    }((Zt = new WeakMap(), Jt = new WeakMap(), er = new WeakMap(), tr = ar, ir));
    function hr(e) {
      return new ur(e);
    }
    var dr = Mr("dns4"),
      pr = Mr("dns6"),
      fr = Mr("dnsaddr"),
      yr = Ur(Mr("dns"), fr, dr, pr),
      gr = Ur(Mr("ip4"), Mr("ip6")),
      mr = Ur(xr(gr, Mr("tcp")), xr(yr, Mr("tcp"))),
      wr = xr(gr, Mr("udp")),
      Er = xr(wr, Mr("utp")),
      br = xr(wr, Mr("quic")),
      vr = Ur(xr(mr, Mr("ws")), xr(yr, Mr("ws"))),
      _r = Ur(xr(mr, Mr("wss")), xr(yr, Mr("wss")), xr(mr, Mr("tls"), Mr("ws")), xr(yr, Mr("tls"), Mr("ws"))),
      Sr = Ur(xr(mr, Mr("http")), xr(gr, Mr("http")), xr(yr, Mr("http"))),
      Cr = Ur(xr(mr, Mr("https")), xr(gr, Mr("https")), xr(yr, Mr("https"))),
      Ar = xr(wr, Mr("webrtc"), Mr("certhash")),
      Ir = Ur(xr(Ar, Mr("p2p")), Ar),
      Tr = Ur(xr(vr, Mr("p2p-webrtc-star"), Mr("p2p")), xr(_r, Mr("p2p-webrtc-star"), Mr("p2p")), xr(vr, Mr("p2p-webrtc-star")), xr(_r, Mr("p2p-webrtc-star"))),
      Rr = (Ur(xr(vr, Mr("p2p-websocket-star"), Mr("p2p")), xr(_r, Mr("p2p-websocket-star"), Mr("p2p")), xr(vr, Mr("p2p-websocket-star")), xr(_r, Mr("p2p-websocket-star"))), Ur(xr(Sr, Mr("p2p-webrtc-direct"), Mr("p2p")), xr(Cr, Mr("p2p-webrtc-direct"), Mr("p2p")), xr(Sr, Mr("p2p-webrtc-direct")), xr(Cr, Mr("p2p-webrtc-direct")))),
      kr = Ur(vr, _r, Sr, Cr, Tr, Rr, mr, Er, br, yr, Ir),
      Nr = (Ur(xr(kr, Mr("p2p-stardust"), Mr("p2p")), xr(kr, Mr("p2p-stardust"))), Ur(xr(kr, Mr("p2p")), Tr, Rr, Ir, Mr("p2p"))),
      Lr = Ur(xr(Nr, Mr("p2p-circuit"), Nr), xr(Nr, Mr("p2p-circuit")), xr(Mr("p2p-circuit"), Nr), xr(kr, Mr("p2p-circuit")), xr(Mr("p2p-circuit"), kr), Mr("p2p-circuit")),
      Dr = function Dr() {
        return Ur(xr(Lr, Dr), Lr);
      },
      Pr = Dr(),
      Br = Ur(xr(Pr, Nr, Pr), xr(Nr, Pr), xr(Pr, Nr), Pr, Nr);
    function Or(e) {
      return function (t) {
        var r;
        try {
          r = hr(t);
        } catch (e) {
          return !1;
        }
        var n = e(r.protoNames());
        return null !== n && (!0 === n || !1 === n ? n : 0 === n.length);
      };
    }
    function xr() {
      for (var _len4 = arguments.length, e = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
        e[_key4] = arguments[_key4];
      }
      function t(t) {
        if (t.length < e.length) return null;
        var r = t;
        return e.some(function (e) {
          return r = "function" == typeof e ? e().partialMatch(t) : e.partialMatch(t), Array.isArray(r) && (t = r), null === r;
        }), r;
      }
      return {
        toString: function toString() {
          return "{ " + e.join(" ") + " }";
        },
        input: e,
        matches: Or(t),
        partialMatch: t
      };
    }
    function Ur() {
      for (var _len5 = arguments.length, e = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
        e[_key5] = arguments[_key5];
      }
      function t(t) {
        var r = null;
        return e.some(function (e) {
          var n = "function" == typeof e ? e().partialMatch(t) : e.partialMatch(t);
          return null != n && (r = n, !0);
        }), r;
      }
      return {
        toString: function toString() {
          return "{ " + e.join(" ") + " }";
        },
        input: e,
        matches: Or(t),
        partialMatch: t
      };
    }
    function Mr(e) {
      var t = e;
      return {
        toString: function toString() {
          return t;
        },
        matches: function matches(e) {
          var r;
          try {
            r = hr(e);
          } catch (e) {
            return !1;
          }
          var n = r.protoNames();
          return 1 === n.length && n[0] === t;
        },
        partialMatch: function partialMatch(e) {
          return 0 === e.length ? null : e[0] === t ? e.slice(1) : null;
        }
      };
    }
    var Vr = globalThis.fetch,
      Kr = globalThis.Headers;
    globalThis.Request, globalThis.Response;
    var Fr = /*#__PURE__*/function (_Error2) {
      _inherits(Fr, _Error2);
      var _super11 = _createSuper(Fr);
      function Fr(e, t) {
        var _this75;
        _classCallCheck(this, Fr);
        _this75 = _super11.call(this, e !== null && e !== void 0 ? e : "The operation was aborted"), _this75.type = "aborted", _this75.code = t !== null && t !== void 0 ? t : "ABORT_ERR";
        return _this75;
      }
      return _createClass(Fr);
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    function qr(e, t, r) {
      var n = r !== null && r !== void 0 ? r : {},
        i = function (e) {
          if (null != e) {
            if ("function" == typeof e[Symbol.iterator]) return e[Symbol.iterator]();
            if ("function" == typeof e[Symbol.asyncIterator]) return e[Symbol.asyncIterator]();
            if ("function" == typeof e.next) return e;
          }
          throw new Error("argument is not an iterator or iterable");
        }(e);
      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var r, s, _o6, _e44, _t33, _e45, _o7, _e46;
        return _regeneratorRuntime().wrap(function _callee4$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              s = function s() {
                null != r && r();
              };
              t.addEventListener("abort", s);
            case 2:
              _o6 = void 0;
              _context5.prev = 3;
              if (!t.aborted) {
                _context5.next = 7;
                break;
              }
              _e44 = n.abortMessage, _t33 = n.abortCode;
              throw new Fr(_e44, _t33);
            case 7:
              _e45 = new Promise(function (e, t) {
                r = function r() {
                  var e = n.abortMessage,
                    r = n.abortCode;
                  t(new Fr(e, r));
                };
              });
              _context5.next = 10;
              return _awaitAsyncGenerator(Promise.race([_e45, i.next()]));
            case 10:
              _o6 = _context5.sent;
              r = null;
              _context5.next = 27;
              break;
            case 14:
              _context5.prev = 14;
              _context5.t0 = _context5["catch"](3);
              t.removeEventListener("abort", s);
              _o7 = "aborted" === _context5.t0.type && t.aborted;
              _context5.t1 = _o7 && null != n.onAbort;
              if (!_context5.t1) {
                _context5.next = 22;
                break;
              }
              _context5.next = 22;
              return _awaitAsyncGenerator(n.onAbort(e));
            case 22:
              if (!("function" == typeof i.return)) {
                _context5.next = 24;
                break;
              }
              try {
                _e46 = i.return();
                _e46 instanceof Promise && _e46.catch(function (e) {
                  null != n.onReturnError && n.onReturnError(e);
                });
              } catch (e) {
                null != n.onReturnError && n.onReturnError(e);
              }
            case 24:
              if (!(_o7 && !0 === n.returnOnAbort)) {
                _context5.next = 26;
                break;
              }
              return _context5.abrupt("return");
            case 26:
              throw _context5.t0;
            case 27:
              if (!(!0 === _o6.done)) {
                _context5.next = 29;
                break;
              }
              return _context5.abrupt("break", 33);
            case 29:
              _context5.next = 31;
              return _o6.value;
            case 31:
              _context5.next = 2;
              break;
            case 33:
              t.removeEventListener("abort", s);
            case 34:
            case "end":
              return _context5.stop();
          }
        }, _callee4, null, [[3, 14]]);
      }))();
    }
    function jr(e, t, r) {
      return function (n) {
        return e(qr(n, t, r));
      };
    }
    function Hr(e, t, r) {
      return {
        sink: jr(e.sink, t, _objectSpread(_objectSpread({}, r), {}, {
          onAbort: void 0
        })),
        source: qr(e.source, t, r)
      };
    }
    var zr = ne("libp2p:webrtc-direct:socket");
    var $r,
      Gr = function Gr(e, t, r, n) {
        if ("a" === r && !n) throw new TypeError("Private accessor was defined without a getter");
        if ("function" == typeof t ? e !== t || !n : !t.has(e)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
        return "m" === r ? n : "a" === r ? n.call(e) : n ? n.value : t.get(e);
      };
    var Wr = /*#__PURE__*/function (_EventTarget) {
      _inherits(Wr, _EventTarget);
      var _super12 = _createSuper(Wr);
      function Wr() {
        var _this76;
        _classCallCheck(this, Wr);
        _this76 = _super12.apply(this, arguments), $r.set(_assertThisInitialized(_this76), new Map());
        return _this76;
      }
      _createClass(Wr, [{
        key: "listenerCount",
        value: function listenerCount(e) {
          var t = Gr(this, $r, "f").get(e);
          return null == t ? 0 : t.length;
        }
      }, {
        key: "addEventListener",
        value: function addEventListener(e, t, r) {
          var _ref32;
          _get2(_getPrototypeOf(Wr.prototype), "addEventListener", this).call(this, e, t, r);
          var n = Gr(this, $r, "f").get(e);
          null == n && (n = [], Gr(this, $r, "f").set(e, n)), n.push({
            callback: t,
            once: (_ref32 = !0 !== r && !1 !== r && (r === null || r === void 0 ? void 0 : r.once)) !== null && _ref32 !== void 0 ? _ref32 : !1
          });
        }
      }, {
        key: "removeEventListener",
        value: function removeEventListener(e, t, r) {
          _get2(_getPrototypeOf(Wr.prototype), "removeEventListener", this).call(this, e.toString(), t !== null && t !== void 0 ? t : null, r);
          var n = Gr(this, $r, "f").get(e);
          null != n && (n = n.filter(function (_ref33) {
            var e = _ref33.callback;
            return e !== t;
          }), Gr(this, $r, "f").set(e, n));
        }
      }, {
        key: "dispatchEvent",
        value: function dispatchEvent(e) {
          var t = _get2(_getPrototypeOf(Wr.prototype), "dispatchEvent", this).call(this, e);
          var r = Gr(this, $r, "f").get(e.type);
          return null == r || (r = r.filter(function (_ref34) {
            var e = _ref34.once;
            return !e;
          }), Gr(this, $r, "f").set(e.type, r)), t;
        }
      }, {
        key: "safeDispatchEvent",
        value: function safeDispatchEvent(e, t) {
          return this.dispatchEvent(new Qr(e, t));
        }
      }]);
      return Wr;
    }( /*#__PURE__*/_wrapNativeSuper(EventTarget));
    $r = new WeakMap();
    var Yr = /*#__PURE__*/function (_Event) {
      _inherits(Yr, _Event);
      var _super13 = _createSuper(Yr);
      function Yr(e, t) {
        var _this77;
        _classCallCheck(this, Yr);
        _this77 = _super13.call(this, e, t), _this77.detail = t === null || t === void 0 ? void 0 : t.detail;
        return _this77;
      }
      return _createClass(Yr);
    }( /*#__PURE__*/_wrapNativeSuper(Event));
    var Qr = (_globalThis$CustomEve = globalThis.CustomEvent) !== null && _globalThis$CustomEve !== void 0 ? _globalThis$CustomEve : Yr;
    var Xr = __webpack_require__(1914);
    var Zr = /*#__PURE__*/function () {
      function Zr(e) {
        _classCallCheck(this, Zr);
        if (!(e > 0) || 0 != (e - 1 & e)) throw new Error("Max size for a FixedFIFO should be a power of two");
        this.buffer = new Array(e), this.mask = e - 1, this.top = 0, this.btm = 0, this.next = null;
      }
      _createClass(Zr, [{
        key: "push",
        value: function push(e) {
          return void 0 === this.buffer[this.top] && (this.buffer[this.top] = e, this.top = this.top + 1 & this.mask, !0);
        }
      }, {
        key: "shift",
        value: function shift() {
          var e = this.buffer[this.btm];
          if (void 0 !== e) return this.buffer[this.btm] = void 0, this.btm = this.btm + 1 & this.mask, e;
        }
      }, {
        key: "isEmpty",
        value: function isEmpty() {
          return void 0 === this.buffer[this.btm];
        }
      }]);
      return Zr;
    }();
    var Jr = /*#__PURE__*/function () {
      function Jr() {
        var _e$splitLimit;
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        _classCallCheck(this, Jr);
        this.hwm = (_e$splitLimit = e.splitLimit) !== null && _e$splitLimit !== void 0 ? _e$splitLimit : 16, this.head = new Zr(this.hwm), this.tail = this.head, this.size = 0;
      }
      _createClass(Jr, [{
        key: "calculateSize",
        value: function calculateSize(e) {
          return null != (e === null || e === void 0 ? void 0 : e.byteLength) ? e.byteLength : 1;
        }
      }, {
        key: "push",
        value: function push(e) {
          if (null != (e === null || e === void 0 ? void 0 : e.value) && (this.size += this.calculateSize(e.value)), !this.head.push(e)) {
            var _t34 = this.head;
            this.head = _t34.next = new Zr(2 * this.head.buffer.length), this.head.push(e);
          }
        }
      }, {
        key: "shift",
        value: function shift() {
          var _e47;
          var e = this.tail.shift();
          if (void 0 === e && null != this.tail.next) {
            var _t35 = this.tail.next;
            this.tail.next = null, this.tail = _t35, e = this.tail.shift();
          }
          return null != ((_e47 = e) === null || _e47 === void 0 ? void 0 : _e47.value) && (this.size -= this.calculateSize(e.value)), e;
        }
      }, {
        key: "isEmpty",
        value: function isEmpty() {
          return this.head.isEmpty();
        }
      }]);
      return Jr;
    }();
    function en() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return tn(function (e) {
        var t = e.shift();
        if (null == t) return {
          done: !0
        };
        if (null != t.error) throw t.error;
        return {
          done: !0 === t.done,
          value: t.value
        };
      }, e);
    }
    function tn(e, t) {
      var _t36, _r39, _r40;
      var r,
        _n34,
        i,
        s = (t = (_t36 = t) !== null && _t36 !== void 0 ? _t36 : {}).onEnd,
        o = new Jr();
      var a = function a(e) {
          return null != _n34 ? _n34(e) : (o.push(e), r);
        },
        c = function c(e) {
          var _t37;
          if (i) return r;
          if (!0 !== ((_t37 = t) === null || _t37 === void 0 ? void 0 : _t37.objectMode) && null == (e === null || e === void 0 ? void 0 : e.byteLength)) throw new Error("objectMode was not true but tried to push non-Uint8Array value");
          return a({
            done: !1,
            value: e
          });
        },
        l = function l(e) {
          return i ? r : (i = !0, null != e ? function (e) {
            return o = new Jr(), null != _n34 ? _n34({
              error: e
            }) : (o.push({
              error: e
            }), r);
          }(e) : a({
            done: !0
          }));
        };
      if (r = (_r39 = {}, _defineProperty(_r39, Symbol.asyncIterator, function () {
        return this;
      }), _defineProperty(_r39, "next", function () {
        var _next2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
          return _regeneratorRuntime().wrap(function _callee5$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                if (!o.isEmpty()) {
                  _context6.next = 11;
                  break;
                }
                if (!i) {
                  _context6.next = 5;
                  break;
                }
                _context6.t1 = {
                  done: !0
                };
                _context6.next = 8;
                break;
              case 5:
                _context6.next = 7;
                return new Promise(function (t, i) {
                  _n34 = function n(s) {
                    _n34 = null, o.push(s);
                    try {
                      t(e(o));
                    } catch (e) {
                      i(e);
                    }
                    return r;
                  };
                });
              case 7:
                _context6.t1 = _context6.sent;
              case 8:
                _context6.t0 = _context6.t1;
                _context6.next = 12;
                break;
              case 11:
                _context6.t0 = e(o);
              case 12:
                return _context6.abrupt("return", _context6.t0);
              case 13:
              case "end":
                return _context6.stop();
            }
          }, _callee5);
        }));
        function next() {
          return _next2.apply(this, arguments);
        }
        return next;
      }()), _defineProperty(_r39, "return", function _return() {
        return o = new Jr(), l(), {
          done: !0
        };
      }), _defineProperty(_r39, "throw", function _throw(e) {
        return l(e), {
          done: !0
        };
      }), _defineProperty(_r39, "push", c), _defineProperty(_r39, "end", l), _defineAccessor("get", _r39, "readableLength", function () {
        return o.size;
      }), _r39), null == s) return r;
      var u = r;
      return r = (_r40 = {}, _defineProperty(_r40, Symbol.asyncIterator, function () {
        return this;
      }), _defineProperty(_r40, "next", function next() {
        return u.next();
      }), _defineProperty(_r40, "throw", function _throw(e) {
        return u.throw(e), null != s && (s(e), s = void 0), {
          done: !0
        };
      }), _defineProperty(_r40, "return", function _return() {
        return u.return(), null != s && (s(), s = void 0), {
          done: !0
        };
      }), _defineProperty(_r40, "push", c), _defineProperty(_r40, "end", function end(e) {
        return u.end(e), null != s && (s(e), s = void 0), r;
      }), _defineAccessor("get", _r40, "readableLength", function () {
        return u.readableLength;
      }), _r40), r;
    }
    function rn() {
      var e = {};
      return e.promise = new Promise(function (t, r) {
        e.resolve = t, e.reject = r;
      }), e;
    }
    var nn = /*#__PURE__*/function () {
      function nn(e, t) {
        var _this78 = this;
        _classCallCheck(this, nn);
        this.label = e.label, this.open = rn(), this.channel = e, this.channel.binaryType = "arraybuffer", this.log = t.log, "number" == typeof this.channel.bufferedAmountLowThreshold && (this.channel.bufferedAmountLowThreshold = 65536), e.addEventListener("message", function (e) {
          t.onMessage(e);
        }), e.addEventListener("bufferedamountlow", function () {
          _this78.log("stop backpressure: bufferedAmount %d", _this78.channel.bufferedAmount), _this78.open.resolve();
        }), e.addEventListener("open", function () {
          _this78.open.resolve(), t.onOpen();
        }), e.addEventListener("close", function () {
          t.onClose();
        }), e.addEventListener("error", function (r) {
          var _r$error, _r$error2, _r$error3, _r$error4, _r$error5;
          if ("Transport channel closed" === ((_r$error = r.error) === null || _r$error === void 0 ? void 0 : _r$error.message)) return _this78.close();
          t.log.error('channel encounter an error in state "%s" message: "%s" detail: "%s', e.readyState, (_r$error2 = r.error) === null || _r$error2 === void 0 ? void 0 : _r$error2.message, (_r$error3 = r.error) === null || _r$error3 === void 0 ? void 0 : _r$error3.errorDetail);
          var n = r.error instanceof Error ? r.error : new Error("datachannel error: ".concat((_r$error4 = r.error) === null || _r$error4 === void 0 ? void 0 : _r$error4.message, " ").concat((_r$error5 = r.error) === null || _r$error5 === void 0 ? void 0 : _r$error5.errorDetail));
          t.onError(Qt(n, "ERR_DATA_CHANNEL"));
        });
        var r = !1;
        this.closingInterval = setInterval(function () {
          "closing" === e.readyState ? (r && t.onClose(), r = !0) : r = !1;
        }, 5e3);
      }
      _createClass(nn, [{
        key: "send",
        value: function () {
          var _send = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(e) {
            return _regeneratorRuntime().wrap(function _callee6$(_context7) {
              while (1) switch (_context7.prev = _context7.next) {
                case 0:
                  _context7.next = 2;
                  return this.open.promise;
                case 2:
                  this.channel.send(e);
                  this.channel.bufferedAmount > 65536 && (this.log("start backpressure: bufferedAmount %d", this.channel.bufferedAmount), this.open = rn());
                case 4:
                case "end":
                  return _context7.stop();
              }
            }, _callee6, this);
          }));
          function send(_x24) {
            return _send.apply(this, arguments);
          }
          return send;
        }()
      }, {
        key: "close",
        value: function close() {
          clearInterval(this.closingInterval), this.channel.close();
        }
      }, {
        key: "bufferedAmount",
        get: function get() {
          return this.channel.bufferedAmount;
        }
      }]);
      return nn;
    }();
    var sn = __webpack_require__(5780);
    var on = {
      iceServers: [{
        urls: ["stun:stun.l.google.com:19302", "stun:global.stun.twilio.com:3478"]
      }]
    };
    var an = /*#__PURE__*/function (_Wr) {
      _inherits(an, _Wr);
      var _super14 = _createSuper(an);
      function an(e) {
        var _e$id, _e$wrtc;
        var _this79;
        _classCallCheck(this, an);
        _this79 = _super14.call(this), _this79.id = (_e$id = e.id) !== null && _e$id !== void 0 ? _e$id : St(Xr(4), "hex").slice(0, 7), _this79.log = ne("libp2p:webrtc-peer:".concat(e.logPrefix, ":").concat(_this79.id)), _this79.wrtc = (_e$wrtc = e.wrtc) !== null && _e$wrtc !== void 0 ? _e$wrtc : function () {
          var _ref35, _globalThis$RTCPeerCo, _ref36, _globalThis$RTCSessio, _ref37, _globalThis$RTCIceCan;
          if ("undefined" == typeof globalThis) throw Qt(new Error("No WebRTC support detected"), "ERR_WEBRTC_SUPPORT");
          var e = {
            RTCPeerConnection: (_ref35 = (_globalThis$RTCPeerCo = globalThis.RTCPeerConnection) !== null && _globalThis$RTCPeerCo !== void 0 ? _globalThis$RTCPeerCo : globalThis.mozRTCPeerConnection) !== null && _ref35 !== void 0 ? _ref35 : globalThis.webkitRTCPeerConnection,
            RTCSessionDescription: (_ref36 = (_globalThis$RTCSessio = globalThis.RTCSessionDescription) !== null && _globalThis$RTCSessio !== void 0 ? _globalThis$RTCSessio : globalThis.mozRTCSessionDescription) !== null && _ref36 !== void 0 ? _ref36 : globalThis.webkitRTCSessionDescription,
            RTCIceCandidate: (_ref37 = (_globalThis$RTCIceCan = globalThis.RTCIceCandidate) !== null && _globalThis$RTCIceCan !== void 0 ? _globalThis$RTCIceCan : globalThis.mozRTCIceCandidate) !== null && _ref37 !== void 0 ? _ref37 : globalThis.webkitRTCIceCandidate
          };
          if (null == e.RTCPeerConnection) throw Qt(new Error("No WebRTC support detected"), "ERR_WEBRTC_SUPPORT");
          return e;
        }(), _this79.peerConnection = new _this79.wrtc.RTCPeerConnection(Object.assign({}, on, e.peerConnectionConfig)), _this79.closed = !1, _this79.connected = rn(), _this79.source = en(), _this79.sink = /*#__PURE__*/function () {
          var _ref38 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(e) {
            var _iteratorAbruptCompletion, _didIteratorError, _iteratorError, _iterator, _step, _t38;
            return _regeneratorRuntime().wrap(function _callee7$(_context8) {
              while (1) switch (_context8.prev = _context8.next) {
                case 0:
                  _context8.next = 2;
                  return _this79.connected.promise;
                case 2:
                  if (!(null == _this79.channel)) {
                    _context8.next = 4;
                    break;
                  }
                  throw Qt(new Error("Connected but no channel?!"), "ERR_DATA_CHANNEL");
                case 4:
                  _iteratorAbruptCompletion = false;
                  _didIteratorError = false;
                  _context8.prev = 6;
                  _iterator = _asyncIterator(e);
                case 8:
                  _context8.next = 10;
                  return _iterator.next();
                case 10:
                  if (!(_iteratorAbruptCompletion = !(_step = _context8.sent).done)) {
                    _context8.next = 17;
                    break;
                  }
                  _t38 = _step.value;
                  _context8.next = 14;
                  return _this79.channel.send(_t38);
                case 14:
                  _iteratorAbruptCompletion = false;
                  _context8.next = 8;
                  break;
                case 17:
                  _context8.next = 23;
                  break;
                case 19:
                  _context8.prev = 19;
                  _context8.t0 = _context8["catch"](6);
                  _didIteratorError = true;
                  _iteratorError = _context8.t0;
                case 23:
                  _context8.prev = 23;
                  _context8.prev = 24;
                  if (!(_iteratorAbruptCompletion && _iterator.return != null)) {
                    _context8.next = 28;
                    break;
                  }
                  _context8.next = 28;
                  return _iterator.return();
                case 28:
                  _context8.prev = 28;
                  if (!_didIteratorError) {
                    _context8.next = 31;
                    break;
                  }
                  throw _iteratorError;
                case 31:
                  return _context8.finish(28);
                case 32:
                  return _context8.finish(23);
                case 33:
                  _context8.next = 35;
                  return _this79.close();
                case 35:
                case "end":
                  return _context8.stop();
              }
            }, _callee7, null, [[6, 19, 23, 33], [24,, 28, 32]]);
          }));
          return function (_x25) {
            return _ref38.apply(this, arguments);
          };
        }();
        return _this79;
      }
      _createClass(an, [{
        key: "handleDataChannelEvent",
        value: function handleDataChannelEvent(e) {
          var _this80 = this;
          var t = e.channel;
          null != t ? this.channel = new nn(t, {
            log: this.log,
            onMessage: function onMessage(e) {
              _this80.source.push(new Uint8Array(e.data));
            },
            onOpen: function onOpen() {
              _this80.connected.resolve(), _this80.dispatchEvent(new Qr("ready"));
            },
            onClose: function onClose() {
              _this80.close().catch(function (e) {
                _this80.log("error closing connection after channel close", e);
              });
            },
            onError: function onError(e) {
              _this80.close(e).catch(function (e) {
                _this80.log("error closing connection after channel error", e);
              });
            }
          }) : this.close(Qt(new Error("Data channel event is missing `channel` property"), "ERR_DATA_CHANNEL")).catch(function (e) {
            _this80.log("Error closing after event channel was found to be null", e);
          });
        }
      }, {
        key: "close",
        value: function () {
          var _close = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(e) {
            var _this$channel;
            return _regeneratorRuntime().wrap(function _callee8$(_context9) {
              while (1) switch (_context9.prev = _context9.next) {
                case 0:
                  if (!(this.closed = !0, null == e && null != this.channel)) {
                    _context9.next = 6;
                    break;
                  }
                case 1:
                  if (!(this.channel.bufferedAmount > 0)) {
                    _context9.next = 6;
                    break;
                  }
                  _context9.next = 4;
                  return sn(100);
                case 4:
                  _context9.next = 1;
                  break;
                case 6:
                  (_this$channel = this.channel) !== null && _this$channel !== void 0 && _this$channel.close(), this.peerConnection.close(), this.source.end(e), this.dispatchEvent(new Qr("close"));
                case 7:
                case "end":
                  return _context9.stop();
              }
            }, _callee8, this);
          }));
          function close(_x26) {
            return _close.apply(this, arguments);
          }
          return close;
        }()
      }]);
      return an;
    }(Wr);
    var cn = /*#__PURE__*/function (_Wr2) {
      _inherits(cn, _Wr2);
      var _super15 = _createSuper(cn);
      function cn(e) {
        var _this81;
        _classCallCheck(this, cn);
        _this81 = _super15.call(this), _this81.log = e.log, _this81.peerConnection = e.peerConnection, _this81.wrtc = e.wrtc, _this81.status = "idle", _this81.peerConnection.addEventListener("negotiationneeded", function () {
          _this81.log("peer connection negotiation needed"), _this81.handleRenegotiate({
            type: "renegotiate"
          }).catch(function (e) {
            _this81.log.error("could not renegotiate %o", e);
          });
        });
        return _this81;
      }
      _createClass(cn, [{
        key: "handleSignal",
        value: function () {
          var _handleSignal = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(e) {
            return _regeneratorRuntime().wrap(function _callee9$(_context10) {
              while (1) switch (_context10.prev = _context10.next) {
                case 0:
                  this.log('incoming signal "%s"', e.type);
                  if (!("offer" === e.type)) {
                    _context10.next = 7;
                    break;
                  }
                  _context10.next = 4;
                  return this.handleOffer(e);
                case 4:
                  _context10.t0 = _context10.sent;
                  _context10.next = 36;
                  break;
                case 7:
                  if (!("answer" === e.type)) {
                    _context10.next = 13;
                    break;
                  }
                  _context10.next = 10;
                  return this.handleAnswer(e);
                case 10:
                  _context10.t1 = _context10.sent;
                  _context10.next = 35;
                  break;
                case 13:
                  if (!("candidate" === e.type)) {
                    _context10.next = 19;
                    break;
                  }
                  _context10.next = 16;
                  return this.handleCandidate(e);
                case 16:
                  _context10.t2 = _context10.sent;
                  _context10.next = 34;
                  break;
                case 19:
                  if (!("renegotiate" === e.type)) {
                    _context10.next = 25;
                    break;
                  }
                  _context10.next = 22;
                  return this.handleRenegotiate(e);
                case 22:
                  _context10.t3 = _context10.sent;
                  _context10.next = 33;
                  break;
                case 25:
                  if (!("goodbye" === e.type)) {
                    _context10.next = 31;
                    break;
                  }
                  _context10.next = 28;
                  return this.handleGoodye(e);
                case 28:
                  _context10.t4 = _context10.sent;
                  _context10.next = 32;
                  break;
                case 31:
                  _context10.t4 = void this.log("Unknown signal type ".concat(e.type));
                case 32:
                  _context10.t3 = _context10.t4;
                case 33:
                  _context10.t2 = _context10.t3;
                case 34:
                  _context10.t1 = _context10.t2;
                case 35:
                  _context10.t0 = _context10.t1;
                case 36:
                  return _context10.abrupt("return", _context10.t0);
                case 37:
                case "end":
                  return _context10.stop();
              }
            }, _callee9, this);
          }));
          function handleSignal(_x27) {
            return _handleSignal.apply(this, arguments);
          }
          return handleSignal;
        }()
      }, {
        key: "handleOffer",
        value: function () {
          var _handleOffer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(e) {
            return _regeneratorRuntime().wrap(function _callee10$(_context11) {
              while (1) switch (_context11.prev = _context11.next) {
                case 0:
                case "end":
                  return _context11.stop();
              }
            }, _callee10);
          }));
          function handleOffer(_x28) {
            return _handleOffer.apply(this, arguments);
          }
          return handleOffer;
        }()
      }, {
        key: "handleAnswer",
        value: function () {
          var _handleAnswer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(e) {
            return _regeneratorRuntime().wrap(function _callee11$(_context12) {
              while (1) switch (_context12.prev = _context12.next) {
                case 0:
                case "end":
                  return _context12.stop();
              }
            }, _callee11);
          }));
          function handleAnswer(_x29) {
            return _handleAnswer.apply(this, arguments);
          }
          return handleAnswer;
        }()
      }, {
        key: "handleRenegotiate",
        value: function () {
          var _handleRenegotiate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(e) {
            return _regeneratorRuntime().wrap(function _callee12$(_context13) {
              while (1) switch (_context13.prev = _context13.next) {
                case 0:
                case "end":
                  return _context13.stop();
              }
            }, _callee12);
          }));
          function handleRenegotiate(_x30) {
            return _handleRenegotiate.apply(this, arguments);
          }
          return handleRenegotiate;
        }()
      }, {
        key: "handleGoodye",
        value: function () {
          var _handleGoodye = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(e) {
            return _regeneratorRuntime().wrap(function _callee13$(_context14) {
              while (1) switch (_context14.prev = _context14.next) {
                case 0:
                  this.peerConnection.close();
                case 1:
                case "end":
                  return _context14.stop();
              }
            }, _callee13, this);
          }));
          function handleGoodye(_x31) {
            return _handleGoodye.apply(this, arguments);
          }
          return handleGoodye;
        }()
      }, {
        key: "handleCandidate",
        value: function () {
          var _handleCandidate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee14$(_context15) {
              while (1) switch (_context15.prev = _context15.next) {
                case 0:
                  t = new this.wrtc.RTCIceCandidate(e.candidate);
                  _context15.prev = 1;
                  _context15.next = 4;
                  return this.peerConnection.addIceCandidate(t);
                case 4:
                  _context15.next = 11;
                  break;
                case 6:
                  _context15.prev = 6;
                  _context15.t0 = _context15["catch"](1);
                  if (!(null != t.address && !t.address.endsWith(".local"))) {
                    _context15.next = 10;
                    break;
                  }
                  throw Qt(_context15.t0, "ERR_ADD_ICE_CANDIDATE");
                case 10:
                  this.log("ignoring unsupported ICE candidate.");
                case 11:
                case "end":
                  return _context15.stop();
              }
            }, _callee14, this, [[1, 6]]);
          }));
          function handleCandidate(_x32) {
            return _handleCandidate.apply(this, arguments);
          }
          return handleCandidate;
        }()
      }]);
      return cn;
    }(Wr);
    ne("libp2p:webrtc-peer:receiver");
    var ln = /*#__PURE__*/function (_Error3) {
      _inherits(ln, _Error3);
      var _super16 = _createSuper(ln);
      function ln(e) {
        var _this82;
        _classCallCheck(this, ln);
        _this82 = _super16.call(this, e), _this82.name = "TimeoutError";
        return _this82;
      }
      return _createClass(ln);
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    var un = /*#__PURE__*/function (_Error4) {
      _inherits(un, _Error4);
      var _super17 = _createSuper(un);
      function un(e) {
        var _this83;
        _classCallCheck(this, un);
        _this83 = _super17.call(this), _this83.name = "AbortError", _this83.message = e;
        return _this83;
      }
      return _createClass(un);
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    var hn = function hn(e) {
        return void 0 === globalThis.DOMException ? new un(e) : new DOMException(e);
      },
      dn = function dn(e) {
        var t = void 0 === e.reason ? hn("This operation was aborted.") : e.reason;
        return t instanceof Error ? t : hn(t);
      };
    function pn(e, t, r, n) {
      var i;
      var s = new Promise(function (s, o) {
        if ("number" != typeof t || 1 !== Math.sign(t)) throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(t, "`"));
        if (t !== Number.POSITIVE_INFINITY) {
          if ((n = _objectSpread({
            customTimers: {
              setTimeout: setTimeout,
              clearTimeout: clearTimeout
            }
          }, n)).signal) {
            var _n35 = n,
              _e48 = _n35.signal;
            _e48.aborted && o(dn(_e48)), _e48.addEventListener("abort", function () {
              o(dn(_e48));
            });
          }
          i = n.customTimers.setTimeout.call(void 0, function () {
            if ("function" == typeof r) {
              try {
                s(r());
              } catch (e) {
                o(e);
              }
              return;
            }
            var n = r instanceof Error ? r : new ln("string" == typeof r ? r : "Promise timed out after ".concat(t, " milliseconds"));
            "function" == typeof e.cancel && e.cancel(), o(n);
          }, t), _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15() {
            return _regeneratorRuntime().wrap(function _callee15$(_context16) {
              while (1) switch (_context16.prev = _context16.next) {
                case 0:
                  _context16.prev = 0;
                  _context16.t0 = s;
                  _context16.next = 4;
                  return e;
                case 4:
                  _context16.t1 = _context16.sent;
                  (0, _context16.t0)(_context16.t1);
                  _context16.next = 11;
                  break;
                case 8:
                  _context16.prev = 8;
                  _context16.t2 = _context16["catch"](0);
                  o(_context16.t2);
                case 11:
                  _context16.prev = 11;
                  n.customTimers.clearTimeout.call(void 0, i);
                  return _context16.finish(11);
                case 14:
                case "end":
                  return _context16.stop();
              }
            }, _callee15, null, [[0, 8, 11, 14]]);
          }))();
        } else s(e);
      });
      return s.clear = function () {
        clearTimeout(i), i = void 0;
      }, s;
    }
    var fn = function fn(e) {
      var t = e.on || e.addListener || e.addEventListener,
        r = e.off || e.removeListener || e.removeEventListener;
      if (!t || !r) throw new TypeError("Emitter is not compatible");
      return {
        addListener: t.bind(e),
        removeListener: r.bind(e)
      };
    };
    var yn = ne("libp2p:webrtc-peer:initator");
    var gn = /*#__PURE__*/function (_an) {
      _inherits(gn, _an);
      var _super18 = _createSuper(gn);
      function gn() {
        var _e$dataChannelLabel;
        var _this84;
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        _classCallCheck(this, gn);
        _this84 = _super18.call(this, _objectSpread(_objectSpread({}, e), {}, {
          logPrefix: "initiator"
        })), _this84.handleDataChannelEvent({
          channel: _this84.peerConnection.createDataChannel((_e$dataChannelLabel = e.dataChannelLabel) !== null && _e$dataChannelLabel !== void 0 ? _e$dataChannelLabel : St(Xr(20), "hex").slice(0, 7), e.dataChannelInit)
        }), _this84.handshake = new mn({
          log: _this84.log,
          peerConnection: _this84.peerConnection,
          wrtc: _this84.wrtc,
          offerOptions: e.offerOptions
        }), _this84.handshake.addEventListener("signal", function (e) {
          _this84.dispatchEvent(new Qr("signal", {
            detail: e.detail
          }));
        });
        return _this84;
      }
      _createClass(gn, [{
        key: "handleSignal",
        value: function handleSignal(e) {
          var _this85 = this;
          this.handshake.handleSignal(e).catch(function (t) {
            _this85.log("error handling signal %o %o", e, t);
          });
        }
      }]);
      return gn;
    }(an);
    var mn = /*#__PURE__*/function (_cn) {
      _inherits(mn, _cn);
      var _super19 = _createSuper(mn);
      function mn(e) {
        var _this86;
        _classCallCheck(this, mn);
        _this86 = _super19.call(this, e), _this86.options = e, _this86.status = "idle", _this86.peerConnection.addEventListener("icecandidate", function (e) {
          if (null == e.candidate) return;
          var t = {
            type: "candidate",
            candidate: {
              candidate: e.candidate.candidate,
              sdpMLineIndex: e.candidate.sdpMLineIndex,
              sdpMid: e.candidate.sdpMid
            }
          };
          yn.trace("create candidate", t), _this86.dispatchEvent(new Qr("signal", {
            detail: t
          })), _this86.dispatchEvent(new Qr("ice-candidate"));
        });
        return _this86;
      }
      _createClass(mn, [{
        key: "handleRenegotiate",
        value: function () {
          var _handleRenegotiate2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee16() {
            var _this$peerConnection$;
            var e;
            return _regeneratorRuntime().wrap(function _callee16$(_context17) {
              while (1) switch (_context17.prev = _context17.next) {
                case 0:
                  if (!("negotiating" === this.status)) {
                    _context17.next = 2;
                    break;
                  }
                  return _context17.abrupt("return", void this.log("already negotiating, queueing"));
                case 2:
                  this.status = "negotiating";
                  _context17.next = 5;
                  return this.peerConnection.createOffer(this.options.offerOptions);
                case 5:
                  e = _context17.sent;
                  _context17.next = 8;
                  return this.peerConnection.setLocalDescription(e);
                case 8:
                  _context17.next = 10;
                  return function (e, t, r) {
                    "function" == typeof r && (r = {
                      filter: r
                    });
                    var n = function (e, t, r) {
                        var n;
                        var i = new Promise(function (i, s) {
                          if (!((r = _objectSpread({
                            rejectionEvents: ["error"],
                            multiArgs: !1,
                            resolveImmediately: !1
                          }, r)).count >= 0) || r.count !== Number.POSITIVE_INFINITY && !Number.isInteger(r.count)) throw new TypeError("The `count` option should be at least 0 or more");
                          var o = [t].flat(),
                            a = [],
                            _fn = fn(e),
                            c = _fn.addListener,
                            l = _fn.removeListener,
                            u = function u() {
                              for (var _len6 = arguments.length, e = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
                                e[_key6] = arguments[_key6];
                              }
                              var t = r.multiArgs ? e : e[0];
                              r.filter && !r.filter(t) || (a.push(t), r.count === a.length && (n(), i(a)));
                            },
                            h = function h(e) {
                              n(), s(e);
                            };
                          n = function n() {
                            var _iterator40 = _createForOfIteratorHelper(o),
                              _step40;
                            try {
                              for (_iterator40.s(); !(_step40 = _iterator40.n()).done;) {
                                var _e49 = _step40.value;
                                l(_e49, u);
                              }
                            } catch (err) {
                              _iterator40.e(err);
                            } finally {
                              _iterator40.f();
                            }
                            var _iterator41 = _createForOfIteratorHelper(r.rejectionEvents),
                              _step41;
                            try {
                              for (_iterator41.s(); !(_step41 = _iterator41.n()).done;) {
                                var _e50 = _step41.value;
                                l(_e50, h);
                              }
                            } catch (err) {
                              _iterator41.e(err);
                            } finally {
                              _iterator41.f();
                            }
                          };
                          var _iterator42 = _createForOfIteratorHelper(o),
                            _step42;
                          try {
                            for (_iterator42.s(); !(_step42 = _iterator42.n()).done;) {
                              var _e51 = _step42.value;
                              c(_e51, u);
                            }
                          } catch (err) {
                            _iterator42.e(err);
                          } finally {
                            _iterator42.f();
                          }
                          var _iterator43 = _createForOfIteratorHelper(r.rejectionEvents),
                            _step43;
                          try {
                            for (_iterator43.s(); !(_step43 = _iterator43.n()).done;) {
                              var _e52 = _step43.value;
                              c(_e52, h);
                            }
                          } catch (err) {
                            _iterator43.e(err);
                          } finally {
                            _iterator43.f();
                          }
                          r.resolveImmediately && i(a);
                        });
                        if (i.cancel = n, "number" == typeof r.timeout) {
                          var _e53 = pn(i, r.timeout);
                          return _e53.cancel = n, _e53;
                        }
                        return i;
                      }(e, t, r = _objectSpread(_objectSpread({}, r), {}, {
                        count: 1,
                        resolveImmediately: !1
                      })),
                      i = n.then(function (e) {
                        return e[0];
                      });
                    return i.cancel = n.cancel, i;
                  }(this, "ice-candidate");
                case 10:
                  _context17.next = 12;
                  return sn(1e3);
                case 12:
                  yn.trace("renegotiate", this.peerConnection.localDescription);
                  this.dispatchEvent(new Qr("signal", {
                    detail: (_this$peerConnection$ = this.peerConnection.localDescription) !== null && _this$peerConnection$ !== void 0 ? _this$peerConnection$ : e
                  }));
                case 14:
                case "end":
                  return _context17.stop();
              }
            }, _callee16, this);
          }));
          function handleRenegotiate() {
            return _handleRenegotiate2.apply(this, arguments);
          }
          return handleRenegotiate;
        }()
      }, {
        key: "handleAnswer",
        value: function () {
          var _handleAnswer2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee17(e) {
            return _regeneratorRuntime().wrap(function _callee17$(_context18) {
              while (1) switch (_context18.prev = _context18.next) {
                case 0:
                  yn.trace("handle answer", e);
                  _context18.next = 3;
                  return this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(e));
                case 3:
                  this.status = "idle";
                case 4:
                case "end":
                  return _context18.stop();
              }
            }, _callee17, this);
          }));
          function handleAnswer(_x33) {
            return _handleAnswer2.apply(this, arguments);
          }
          return handleAnswer;
        }()
      }]);
      return mn;
    }(cn);
    var wn = Symbol.for("@libp2p/transport");
    var En;
    !function (e) {
      e[e.FATAL_ALL = 0] = "FATAL_ALL", e[e.NO_FATAL = 1] = "NO_FATAL";
    }(En || (En = {}));
    var bn = ne("libp2p:webrtc-direct");
    var vn = /*#__PURE__*/function (_Symbol$toStringTag2) {
      function vn(e) {
        _classCallCheck(this, vn);
        this.initiatorOptions = e === null || e === void 0 ? void 0 : e.initiatorOptions, this.recieverOptions = e === null || e === void 0 ? void 0 : e.recieverOptions, this.wrtc = e === null || e === void 0 ? void 0 : e.wrtc;
      }
      _createClass(vn, [{
        key: wn,
        get: function get() {
          return !0;
        }
      }, {
        key: _Symbol$toStringTag2,
        get: function get() {
          return "@libp2p/webrtc-direct";
        }
      }, {
        key: "dial",
        value: function () {
          var _dial = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee20(e, t) {
            var r, n;
            return _regeneratorRuntime().wrap(function _callee20$(_context21) {
              while (1) switch (_context21.prev = _context21.next) {
                case 0:
                  _context21.t0 = function (e, t) {
                    var r = e.sink,
                      n = e.source,
                      i = {
                        remoteAddr: t.remoteAddr,
                        sink: function sink(e) {
                          return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee18() {
                            return _regeneratorRuntime().wrap(function _callee18$(_context19) {
                              while (1) switch (_context19.prev = _context19.next) {
                                case 0:
                                  null != t.signal && (e = qr(e, t.signal));
                                  _context19.prev = 1;
                                  _context19.next = 4;
                                  return r(e);
                                case 4:
                                  _context19.next = 9;
                                  break;
                                case 6:
                                  _context19.prev = 6;
                                  _context19.t0 = _context19["catch"](1);
                                  "aborted" !== _context19.t0.type && zr.error(_context19.t0);
                                case 9:
                                case "end":
                                  return _context19.stop();
                              }
                            }, _callee18, null, [[1, 6]]);
                          }))();
                        },
                        source: null != t.signal ? qr(n, t.signal) : n,
                        timeline: {
                          open: Date.now()
                        },
                        close: function close() {
                          return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee19() {
                            var t, r;
                            return _regeneratorRuntime().wrap(function _callee19$(_context20) {
                              while (1) switch (_context20.prev = _context20.next) {
                                case 0:
                                  if (!e.closed) {
                                    _context20.next = 2;
                                    break;
                                  }
                                  return _context20.abrupt("return");
                                case 2:
                                  t = Date.now(), r = setTimeout(function () {
                                    if (null != i.remoteAddr) {
                                      var _i$remoteAddr$toOptio = i.remoteAddr.toOptions(),
                                        _e54 = _i$remoteAddr$toOptio.host,
                                        _r41 = _i$remoteAddr$toOptio.port;
                                      zr("timeout closing socket to %s:%s after %dms, destroying it manually", _e54, _r41, Date.now() - t);
                                    }
                                    e.closed || e.close().catch(function (e) {
                                      zr.error("could not close socket", e);
                                    });
                                  }, 2e3);
                                  _context20.prev = 3;
                                  _context20.next = 6;
                                  return e.close();
                                case 6:
                                  _context20.prev = 6;
                                  clearTimeout(r);
                                  return _context20.finish(6);
                                case 9:
                                case "end":
                                  return _context20.stop();
                              }
                            }, _callee19, null, [[3,, 6, 9]]);
                          }))();
                        }
                      };
                    return e.addEventListener("close", function () {
                      null == i.timeline.close && (i.timeline.close = Date.now());
                    }, {
                      once: !0
                    }), i;
                  };
                  _context21.next = 3;
                  return this._connect(e, t);
                case 3:
                  _context21.t1 = _context21.sent;
                  _context21.t2 = {
                    remoteAddr: e,
                    signal: t.signal
                  };
                  r = (0, _context21.t0)(_context21.t1, _context21.t2);
                  bn("new outbound connection %s", r.remoteAddr);
                  _context21.next = 9;
                  return t.upgrader.upgradeOutbound(r);
                case 9:
                  n = _context21.sent;
                  return _context21.abrupt("return", (bn("outbound connection %s upgraded", r.remoteAddr), n));
                case 11:
                case "end":
                  return _context21.stop();
              }
            }, _callee20, this);
          }));
          function dial(_x34, _x35) {
            return _dial.apply(this, arguments);
          }
          return dial;
        }()
      }, {
        key: "_connect",
        value: function () {
          var _connect2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee23(e, t) {
            var _t$signal;
            var r;
            return _regeneratorRuntime().wrap(function _callee23$(_context24) {
              while (1) switch (_context24.prev = _context24.next) {
                case 0:
                  if (!(!0 === ((_t$signal = t.signal) === null || _t$signal === void 0 ? void 0 : _t$signal.aborted))) {
                    _context24.next = 2;
                    break;
                  }
                  throw new Fr();
                case 2:
                  r = _objectSpread({
                    initiator: !0,
                    trickle: !1
                  }, this.initiatorOptions);
                  null != this.wrtc && (r.wrtc = this.wrtc);
                  _context24.next = 6;
                  return new Promise(function (n, i) {
                    var _t$signal3;
                    var s;
                    var o = e.toOptions();
                    bn("Dialing %s:%s", o.host, o.port);
                    var a = new gn(r),
                      c = function c(e) {
                        var t = e.detail;
                        if (!s) {
                          var _e55 = "connection error ".concat(o.host, ":").concat(o.port, ": ").concat(t.message);
                          bn.error(_e55), t.message = _e55, h(t);
                        }
                      },
                      l = function l() {
                        s = !0, bn("connection opened %s:%s", o.host, o.port), h();
                      },
                      u = function u() {
                        bn.error("connection aborted %s:%s", o.host, o.port), a.close().finally(function () {
                          h(new Fr());
                        });
                      },
                      h = function h(e) {
                        var _t$signal2;
                        a.removeEventListener("error", c), a.removeEventListener("ready", l), (_t$signal2 = t.signal) !== null && _t$signal2 !== void 0 && _t$signal2.removeEventListener("abort", u), null != e ? i(e) : n(a);
                      };
                    a.addEventListener("error", c, {
                      once: !0
                    }), a.addEventListener("ready", l, {
                      once: !0
                    }), a.addEventListener("close", function () {
                      a.removeEventListener("error", c);
                    }), (_t$signal3 = t.signal) !== null && _t$signal3 !== void 0 && _t$signal3.addEventListener("abort", u), a.addEventListener("signal", function (e) {
                      (function () {
                        var _ref40 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee21(e) {
                          var t, r, n, _e56, _t39, _r42, _i20;
                          return _regeneratorRuntime().wrap(function _callee21$(_context22) {
                            while (1) switch (_context22.prev = _context22.next) {
                              case 0:
                                if (!("offer" !== e.type)) {
                                  _context22.next = 2;
                                  break;
                                }
                                return _context22.abrupt("return");
                              case 2:
                                t = JSON.stringify(e);
                                r = o.host;
                                6 !== o.family || r.startsWith("[") || (r = "[".concat(r, "]"));
                                n = "http://".concat(r, ":").concat(o.port, "/?signal=").concat(q.encode(Pt(t)));
                                _context22.prev = 6;
                                _context22.next = 9;
                                return Vr(n);
                              case 9:
                                _e56 = _context22.sent;
                                _context22.next = 12;
                                return _e56.text();
                              case 12:
                                _t39 = _context22.sent;
                                if (!("" === _t39.trim())) {
                                  _context22.next = 15;
                                  break;
                                }
                                return _context22.abrupt("return");
                              case 15:
                                _r42 = St(q.decode(_t39)), _i20 = JSON.parse(_r42);
                                a.handleSignal(_i20);
                                _context22.next = 24;
                                break;
                              case 19:
                                _context22.prev = 19;
                                _context22.t0 = _context22["catch"](6);
                                _context22.next = 23;
                                return a.close(_context22.t0);
                              case 23:
                                i(_context22.t0);
                              case 24:
                              case "end":
                                return _context22.stop();
                            }
                          }, _callee21, null, [[6, 19]]);
                        }));
                        return function (_x38) {
                          return _ref40.apply(this, arguments);
                        };
                      })()(e.detail).catch( /*#__PURE__*/function () {
                        var _ref41 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee22(e) {
                          return _regeneratorRuntime().wrap(function _callee22$(_context23) {
                            while (1) switch (_context23.prev = _context23.next) {
                              case 0:
                                _context23.next = 2;
                                return a.close(e);
                              case 2:
                              case "end":
                                return _context23.stop();
                            }
                          }, _callee22);
                        }));
                        return function (_x39) {
                          return _ref41.apply(this, arguments);
                        };
                      }());
                    });
                  });
                case 6:
                  return _context24.abrupt("return", _context24.sent);
                case 7:
                case "end":
                  return _context24.stop();
              }
            }, _callee23, this);
          }));
          function _connect(_x36, _x37) {
            return _connect2.apply(this, arguments);
          }
          return _connect;
        }()
      }, {
        key: "createListener",
        value: function createListener(e) {
          return function () {
            throw new Error("WebRTCDirect Servers can not be created in the browser!");
          }((this.recieverOptions, this.wrtc));
        }
      }, {
        key: "filter",
        value: function filter(e) {
          return (e = Array.isArray(e) ? e : [e]).filter(function (e) {
            return !e.protoCodes().includes(290) && Rr.matches(e.decapsulateCode(421));
          });
        }
      }]);
      return vn;
    }(Symbol.toStringTag);
    function _n() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return function () {
        return new vn(e);
      };
    }
    var Sn = Symbol.for("@achingbrain/uint8arraylist");
    function Cn(e, t) {
      if (null == t || t < 0) throw new RangeError("index is out of bounds");
      var r = 0;
      var _iterator44 = _createForOfIteratorHelper(e),
        _step44;
      try {
        for (_iterator44.s(); !(_step44 = _iterator44.n()).done;) {
          var _n36 = _step44.value;
          var _e57 = r + _n36.byteLength;
          if (t < _e57) return {
            buf: _n36,
            index: t - r
          };
          r = _e57;
        }
      } catch (err) {
        _iterator44.e(err);
      } finally {
        _iterator44.f();
      }
      throw new RangeError("index is out of bounds");
    }
    function An(e) {
      return Boolean(e === null || e === void 0 ? void 0 : e[Sn]);
    }
    var In = /*#__PURE__*/function (_Symbol$iterator) {
      function In() {
        _classCallCheck(this, In);
        for (var _len7 = arguments.length, e = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
          e[_key7] = arguments[_key7];
        }
        Object.defineProperty(this, Sn, {
          value: !0
        }), this.bufs = [], this.length = 0, e.length > 0 && this.appendAll(e);
      }
      _createClass(In, [{
        key: _Symbol$iterator,
        value: /*#__PURE__*/_regeneratorRuntime().mark(function value() {
          return _regeneratorRuntime().wrap(function value$(_context25) {
            while (1) switch (_context25.prev = _context25.next) {
              case 0:
                return _context25.delegateYield(this.bufs, "t0", 1);
              case 1:
              case "end":
                return _context25.stop();
            }
          }, value, this);
        })
      }, {
        key: "byteLength",
        get: function get() {
          return this.length;
        }
      }, {
        key: "append",
        value: function append() {
          for (var _len8 = arguments.length, e = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
            e[_key8] = arguments[_key8];
          }
          this.appendAll(e);
        }
      }, {
        key: "appendAll",
        value: function appendAll(e) {
          var t = 0;
          var _iterator45 = _createForOfIteratorHelper(e),
            _step45;
          try {
            for (_iterator45.s(); !(_step45 = _iterator45.n()).done;) {
              var _r43 = _step45.value;
              if (_r43 instanceof Uint8Array) t += _r43.byteLength, this.bufs.push(_r43);else {
                var _this$bufs;
                if (!An(_r43)) throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");
                t += _r43.byteLength, (_this$bufs = this.bufs).push.apply(_this$bufs, _toConsumableArray(_r43.bufs));
              }
            }
          } catch (err) {
            _iterator45.e(err);
          } finally {
            _iterator45.f();
          }
          this.length += t;
        }
      }, {
        key: "prepend",
        value: function prepend() {
          for (var _len9 = arguments.length, e = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
            e[_key9] = arguments[_key9];
          }
          this.prependAll(e);
        }
      }, {
        key: "prependAll",
        value: function prependAll(e) {
          var t = 0;
          var _iterator46 = _createForOfIteratorHelper(e.reverse()),
            _step46;
          try {
            for (_iterator46.s(); !(_step46 = _iterator46.n()).done;) {
              var _r44 = _step46.value;
              if (_r44 instanceof Uint8Array) t += _r44.byteLength, this.bufs.unshift(_r44);else {
                var _this$bufs2;
                if (!An(_r44)) throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");
                t += _r44.byteLength, (_this$bufs2 = this.bufs).unshift.apply(_this$bufs2, _toConsumableArray(_r44.bufs));
              }
            }
          } catch (err) {
            _iterator46.e(err);
          } finally {
            _iterator46.f();
          }
          this.length += t;
        }
      }, {
        key: "get",
        value: function get(e) {
          var t = Cn(this.bufs, e);
          return t.buf[t.index];
        }
      }, {
        key: "set",
        value: function set(e, t) {
          var r = Cn(this.bufs, e);
          r.buf[r.index] = t;
        }
      }, {
        key: "write",
        value: function write(e) {
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
          if (e instanceof Uint8Array) for (var _r45 = 0; _r45 < e.length; _r45++) this.set(t + _r45, e[_r45]);else {
            if (!An(e)) throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");
            for (var _r46 = 0; _r46 < e.length; _r46++) this.set(t + _r46, e.get(_r46));
          }
        }
      }, {
        key: "consume",
        value: function consume(e) {
          if (e = Math.trunc(e), !(Number.isNaN(e) || e <= 0)) {
            if (e === this.byteLength) return this.bufs = [], void (this.length = 0);
            for (; this.bufs.length > 0;) {
              if (!(e >= this.bufs[0].byteLength)) {
                this.bufs[0] = this.bufs[0].subarray(e), this.length -= e;
                break;
              }
              e -= this.bufs[0].byteLength, this.length -= this.bufs[0].byteLength, this.bufs.shift();
            }
          }
        }
      }, {
        key: "slice",
        value: function slice(e, t) {
          var _this$_subList = this._subList(e, t),
            r = _this$_subList.bufs,
            n = _this$_subList.length;
          return Bt(r, n);
        }
      }, {
        key: "subarray",
        value: function subarray(e, t) {
          var _this$_subList2 = this._subList(e, t),
            r = _this$_subList2.bufs,
            n = _this$_subList2.length;
          return 1 === r.length ? r[0] : Bt(r, n);
        }
      }, {
        key: "sublist",
        value: function sublist(e, t) {
          var _this$_subList3 = this._subList(e, t),
            r = _this$_subList3.bufs,
            n = _this$_subList3.length,
            i = new In();
          return i.length = n, i.bufs = r, i;
        }
      }, {
        key: "_subList",
        value: function _subList(e, t) {
          var _e58, _t40;
          if (e = (_e58 = e) !== null && _e58 !== void 0 ? _e58 : 0, t = (_t40 = t) !== null && _t40 !== void 0 ? _t40 : this.length, e < 0 && (e = this.length + e), t < 0 && (t = this.length + t), e < 0 || t > this.length) throw new RangeError("index is out of bounds");
          if (e === t) return {
            bufs: [],
            length: 0
          };
          if (0 === e && t === this.length) return {
            bufs: _toConsumableArray(this.bufs),
            length: this.length
          };
          var r = [];
          var n = 0;
          for (var _i21 = 0; _i21 < this.bufs.length; _i21++) {
            var _s12 = this.bufs[_i21],
              _o8 = n,
              _a4 = _o8 + _s12.byteLength;
            if (n = _a4, e >= _a4) continue;
            var _c2 = e >= _o8 && e < _a4,
              _l2 = t > _o8 && t <= _a4;
            if (_c2 && _l2) {
              if (e === _o8 && t === _a4) {
                r.push(_s12);
                break;
              }
              var _n37 = e - _o8;
              r.push(_s12.subarray(_n37, _n37 + (t - e)));
              break;
            }
            if (_c2) {
              if (0 === e) {
                r.push(_s12);
                continue;
              }
              r.push(_s12.subarray(e - _o8));
            } else {
              if (_l2) {
                if (t === _a4) {
                  r.push(_s12);
                  break;
                }
                r.push(_s12.subarray(0, t - _o8));
                break;
              }
              r.push(_s12);
            }
          }
          return {
            bufs: r,
            length: t - e
          };
        }
      }, {
        key: "indexOf",
        value: function indexOf(e) {
          var _t41;
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
          if (!(An(e) || e instanceof Uint8Array)) throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');
          var r = e instanceof Uint8Array ? e : e.subarray();
          if (t = Number((_t41 = t) !== null && _t41 !== void 0 ? _t41 : 0), isNaN(t) && (t = 0), t < 0 && (t = this.length + t), t < 0 && (t = 0), 0 === e.length) return t > this.length ? this.length : t;
          var n = r.byteLength;
          if (0 === n) throw new TypeError("search must be at least 1 byte long");
          var i = new Int32Array(256);
          for (var _e59 = 0; _e59 < 256; _e59++) i[_e59] = -1;
          for (var _e60 = 0; _e60 < n; _e60++) i[r[_e60]] = _e60;
          var s = i,
            o = this.byteLength - r.byteLength,
            a = r.byteLength - 1;
          var c;
          for (var _e61 = t; _e61 <= o; _e61 += c) {
            c = 0;
            for (var _t42 = a; _t42 >= 0; _t42--) {
              var _n38 = this.get(_e61 + _t42);
              if (r[_t42] !== _n38) {
                c = Math.max(1, _t42 - s[_n38]);
                break;
              }
            }
            if (0 === c) return _e61;
          }
          return -1;
        }
      }, {
        key: "getInt8",
        value: function getInt8(e) {
          var t = this.subarray(e, e + 1);
          return new DataView(t.buffer, t.byteOffset, t.byteLength).getInt8(0);
        }
      }, {
        key: "setInt8",
        value: function setInt8(e, t) {
          var r = wt(1);
          new DataView(r.buffer, r.byteOffset, r.byteLength).setInt8(0, t), this.write(r, e);
        }
      }, {
        key: "getInt16",
        value: function getInt16(e, t) {
          var r = this.subarray(e, e + 2);
          return new DataView(r.buffer, r.byteOffset, r.byteLength).getInt16(0, t);
        }
      }, {
        key: "setInt16",
        value: function setInt16(e, t, r) {
          var n = mt(2);
          new DataView(n.buffer, n.byteOffset, n.byteLength).setInt16(0, t, r), this.write(n, e);
        }
      }, {
        key: "getInt32",
        value: function getInt32(e, t) {
          var r = this.subarray(e, e + 4);
          return new DataView(r.buffer, r.byteOffset, r.byteLength).getInt32(0, t);
        }
      }, {
        key: "setInt32",
        value: function setInt32(e, t, r) {
          var n = mt(4);
          new DataView(n.buffer, n.byteOffset, n.byteLength).setInt32(0, t, r), this.write(n, e);
        }
      }, {
        key: "getBigInt64",
        value: function getBigInt64(e, t) {
          var r = this.subarray(e, e + 8);
          return new DataView(r.buffer, r.byteOffset, r.byteLength).getBigInt64(0, t);
        }
      }, {
        key: "setBigInt64",
        value: function setBigInt64(e, t, r) {
          var n = mt(8);
          new DataView(n.buffer, n.byteOffset, n.byteLength).setBigInt64(0, t, r), this.write(n, e);
        }
      }, {
        key: "getUint8",
        value: function getUint8(e) {
          var t = this.subarray(e, e + 1);
          return new DataView(t.buffer, t.byteOffset, t.byteLength).getUint8(0);
        }
      }, {
        key: "setUint8",
        value: function setUint8(e, t) {
          var r = wt(1);
          new DataView(r.buffer, r.byteOffset, r.byteLength).setUint8(0, t), this.write(r, e);
        }
      }, {
        key: "getUint16",
        value: function getUint16(e, t) {
          var r = this.subarray(e, e + 2);
          return new DataView(r.buffer, r.byteOffset, r.byteLength).getUint16(0, t);
        }
      }, {
        key: "setUint16",
        value: function setUint16(e, t, r) {
          var n = mt(2);
          new DataView(n.buffer, n.byteOffset, n.byteLength).setUint16(0, t, r), this.write(n, e);
        }
      }, {
        key: "getUint32",
        value: function getUint32(e, t) {
          var r = this.subarray(e, e + 4);
          return new DataView(r.buffer, r.byteOffset, r.byteLength).getUint32(0, t);
        }
      }, {
        key: "setUint32",
        value: function setUint32(e, t, r) {
          var n = mt(4);
          new DataView(n.buffer, n.byteOffset, n.byteLength).setUint32(0, t, r), this.write(n, e);
        }
      }, {
        key: "getBigUint64",
        value: function getBigUint64(e, t) {
          var r = this.subarray(e, e + 8);
          return new DataView(r.buffer, r.byteOffset, r.byteLength).getBigUint64(0, t);
        }
      }, {
        key: "setBigUint64",
        value: function setBigUint64(e, t, r) {
          var n = mt(8);
          new DataView(n.buffer, n.byteOffset, n.byteLength).setBigUint64(0, t, r), this.write(n, e);
        }
      }, {
        key: "getFloat32",
        value: function getFloat32(e, t) {
          var r = this.subarray(e, e + 4);
          return new DataView(r.buffer, r.byteOffset, r.byteLength).getFloat32(0, t);
        }
      }, {
        key: "setFloat32",
        value: function setFloat32(e, t, r) {
          var n = mt(4);
          new DataView(n.buffer, n.byteOffset, n.byteLength).setFloat32(0, t, r), this.write(n, e);
        }
      }, {
        key: "getFloat64",
        value: function getFloat64(e, t) {
          var r = this.subarray(e, e + 8);
          return new DataView(r.buffer, r.byteOffset, r.byteLength).getFloat64(0, t);
        }
      }, {
        key: "setFloat64",
        value: function setFloat64(e, t, r) {
          var n = mt(8);
          new DataView(n.buffer, n.byteOffset, n.byteLength).setFloat64(0, t, r), this.write(n, e);
        }
      }, {
        key: "equals",
        value: function equals(e) {
          if (null == e) return !1;
          if (!(e instanceof In)) return !1;
          if (e.bufs.length !== this.bufs.length) return !1;
          for (var _t43 = 0; _t43 < this.bufs.length; _t43++) if (!Xt(this.bufs[_t43], e.bufs[_t43])) return !1;
          return !0;
        }
      }], [{
        key: "fromUint8Arrays",
        value: function fromUint8Arrays(e, t) {
          var r = new In();
          return r.bufs = e, null == t && (t = e.reduce(function (e, t) {
            return e + t.byteLength;
          }, 0)), r.length = t, r;
        }
      }]);
      return In;
    }(Symbol.iterator);
    function Tn(e) {
      return new Uint8Array(e);
    }
    var Rn;
    !function (e) {
      e[e.NEW_STREAM = 0] = "NEW_STREAM", e[e.MESSAGE_RECEIVER = 1] = "MESSAGE_RECEIVER", e[e.MESSAGE_INITIATOR = 2] = "MESSAGE_INITIATOR", e[e.CLOSE_RECEIVER = 3] = "CLOSE_RECEIVER", e[e.CLOSE_INITIATOR = 4] = "CLOSE_INITIATOR", e[e.RESET_RECEIVER = 5] = "RESET_RECEIVER", e[e.RESET_INITIATOR = 6] = "RESET_INITIATOR";
    }(Rn || (Rn = {}));
    var kn = Object.freeze({
        0: "NEW_STREAM",
        1: "MESSAGE_RECEIVER",
        2: "MESSAGE_INITIATOR",
        3: "CLOSE_RECEIVER",
        4: "CLOSE_INITIATOR",
        5: "RESET_RECEIVER",
        6: "RESET_INITIATOR"
      }),
      Nn = Object.freeze({
        NEW_STREAM: Rn.NEW_STREAM,
        MESSAGE: Rn.MESSAGE_INITIATOR,
        CLOSE: Rn.CLOSE_INITIATOR,
        RESET: Rn.RESET_INITIATOR
      }),
      Ln = Object.freeze({
        MESSAGE: Rn.MESSAGE_RECEIVER,
        CLOSE: Rn.CLOSE_RECEIVER,
        RESET: Rn.RESET_RECEIVER
      }),
      Dn = 1048576,
      Pn = function Pn(e, t) {
        t.append(e);
      },
      Bn = 10240,
      On = new ( /*#__PURE__*/function () {
        function _class25() {
          _classCallCheck(this, _class25);
          this._pool = Tn(Bn), this._poolOffset = 0;
        }
        _createClass(_class25, [{
          key: "write",
          value: function write(e, t) {
            var _Dt$encode$bytes, _Dt$encode$bytes2;
            var r = this._pool;
            var n = this._poolOffset;
            Dt.encode(e.id << 3 | e.type, r, n), n += (_Dt$encode$bytes = Dt.encode.bytes) !== null && _Dt$encode$bytes !== void 0 ? _Dt$encode$bytes : 0, e.type !== Rn.NEW_STREAM && e.type !== Rn.MESSAGE_INITIATOR && e.type !== Rn.MESSAGE_RECEIVER || null == e.data ? Dt.encode(0, r, n) : Dt.encode(e.data.length, r, n), n += (_Dt$encode$bytes2 = Dt.encode.bytes) !== null && _Dt$encode$bytes2 !== void 0 ? _Dt$encode$bytes2 : 0;
            var i = r.subarray(this._poolOffset, n);
            Bn - n < 100 ? (this._pool = Tn(Bn), this._poolOffset = 0) : this._poolOffset = n, t.append(i), e.type !== Rn.NEW_STREAM && e.type !== Rn.MESSAGE_INITIATOR && e.type !== Rn.MESSAGE_RECEIVER || null == e.data || t.append(e.data);
          }
        }]);
        return _class25;
      }())(),
      xn = 1 << 20;
    var Un = /*#__PURE__*/function () {
      function Un() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : xn;
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 4194304;
        _classCallCheck(this, Un);
        this._buffer = new In(), this._headerInfo = null, this._maxMessageSize = e, this._maxUnprocessedMessageQueueSize = t;
      }
      _createClass(Un, [{
        key: "write",
        value: function write(e) {
          if (null == e || 0 === e.length) return [];
          if (this._buffer.append(e), this._buffer.byteLength > this._maxUnprocessedMessageQueueSize) throw Object.assign(new Error("unprocessed message queue size too large!"), {
            code: "ERR_MSG_QUEUE_TOO_BIG"
          });
          var t = [];
          for (; 0 !== this._buffer.length;) {
            if (null == this._headerInfo) try {
              this._headerInfo = this._decodeHeader(this._buffer);
            } catch (e) {
              if ("ERR_MSG_TOO_BIG" === e.code) throw e;
              break;
            }
            var _this$_headerInfo = this._headerInfo,
              _e62 = _this$_headerInfo.id,
              _r47 = _this$_headerInfo.type,
              _n39 = _this$_headerInfo.length,
              _i22 = _this$_headerInfo.offset;
            if (this._buffer.length - _i22 < _n39) break;
            var _s13 = {
              id: _e62,
              type: _r47
            };
            _r47 !== Rn.NEW_STREAM && _r47 !== Rn.MESSAGE_INITIATOR && _r47 !== Rn.MESSAGE_RECEIVER || (_s13.data = this._buffer.sublist(_i22, _i22 + _n39)), t.push(_s13), this._buffer.consume(_i22 + _n39), this._headerInfo = null;
          }
          return t;
        }
      }, {
        key: "_decodeHeader",
        value: function _decodeHeader(e) {
          var _Kn = Kn(e),
            t = _Kn.value,
            r = _Kn.offset,
            _Kn2 = Kn(e, r),
            n = _Kn2.value,
            i = _Kn2.offset,
            s = 7 & t;
          if (null == kn[s]) throw new Error("Invalid type received: ".concat(s));
          if (n > this._maxMessageSize) throw Object.assign(new Error("message size too large!"), {
            code: "ERR_MSG_TOO_BIG"
          });
          return {
            id: t >> 3,
            type: s,
            offset: r + i,
            length: n
          };
        }
      }]);
      return Un;
    }();
    var Mn = 128,
      Vn = 127;
    function Kn(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var r,
        n = 0,
        i = 0,
        s = t;
      var o = e.length;
      do {
        if (s >= o || i > 49) throw t = 0, new RangeError("Could not decode varint");
        r = e.get(s++), n += i < 28 ? (r & Vn) << i : (r & Vn) * Math.pow(2, i), i += 7;
      } while (r >= Mn);
      return {
        value: n,
        offset: t = s - t
      };
    }
    var Fn = __webpack_require__(2044);
    var qn = ne("libp2p:mplex:stream"),
      jn = "ERR_STREAM_RESET";
    var Hn = __webpack_require__(8558);
    var zn = ne("libp2p:mplex");
    function $n(e) {
      var t = _objectSpread(_objectSpread({}, e), {}, {
        type: "".concat(kn[e.type], " (").concat(e.type, ")")
      });
      return e.type === Rn.NEW_STREAM && (t.data = St(e.data instanceof Uint8Array ? e.data : e.data.subarray())), e.type !== Rn.MESSAGE_INITIATOR && e.type !== Rn.MESSAGE_RECEIVER || (t.data = St(e.data instanceof Uint8Array ? e.data : e.data.subarray(), "base16")), t;
    }
    var Gn = /*#__PURE__*/function () {
      function Gn(e) {
        var _e63, _e$disconnectThreshol;
        _classCallCheck(this, Gn);
        this.protocol = "/mplex/6.7.0", e = (_e63 = e) !== null && _e63 !== void 0 ? _e63 : {}, this._streamId = 0, this._streams = {
          initiators: new Map(),
          receivers: new Map()
        }, this._init = e, this.sink = this._createSink();
        var t = this._createSource();
        this._source = t, this.source = t, this.closeController = new AbortController(), this.rateLimiter = new Hn.RateLimiterMemory({
          points: (_e$disconnectThreshol = e.disconnectThreshold) !== null && _e$disconnectThreshol !== void 0 ? _e$disconnectThreshol : 5,
          duration: 1
        });
      }
      _createClass(Gn, [{
        key: "streams",
        get: function get() {
          var e = [];
          var _iterator47 = _createForOfIteratorHelper(this._streams.initiators.values()),
            _step47;
          try {
            for (_iterator47.s(); !(_step47 = _iterator47.n()).done;) {
              var _t44 = _step47.value;
              e.push(_t44);
            }
          } catch (err) {
            _iterator47.e(err);
          } finally {
            _iterator47.f();
          }
          var _iterator48 = _createForOfIteratorHelper(this._streams.receivers.values()),
            _step48;
          try {
            for (_iterator48.s(); !(_step48 = _iterator48.n()).done;) {
              var _t45 = _step48.value;
              e.push(_t45);
            }
          } catch (err) {
            _iterator48.e(err);
          } finally {
            _iterator48.f();
          }
          return e;
        }
      }, {
        key: "newStream",
        value: function newStream(e) {
          if (this.closeController.signal.aborted) throw new Error("Muxer already closed");
          var t = this._streamId++;
          e = null == e ? t.toString() : e.toString();
          var r = this._streams.initiators;
          return this._newStream({
            id: t,
            name: e,
            type: "initiator",
            registry: r
          });
        }
      }, {
        key: "close",
        value: function close(e) {
          this.closeController.signal.aborted || (null != e ? this.streams.forEach(function (t) {
            return t.abort(e);
          }) : this.streams.forEach(function (e) {
            return e.close();
          }), this.closeController.abort());
        }
      }, {
        key: "_newReceiverStream",
        value: function _newReceiverStream(e) {
          var t = e.id,
            r = e.name,
            n = this._streams.receivers;
          return this._newStream({
            id: t,
            name: r,
            type: "receiver",
            registry: n
          });
        }
      }, {
        key: "_newStream",
        value: function _newStream(e) {
          var _this$_init$maxOutbou,
            _this87 = this;
          var t = e.id,
            r = e.name,
            n = e.type,
            i = e.registry;
          if (zn("new %s stream %s", n, t), "initiator" === n && this._streams.initiators.size === ((_this$_init$maxOutbou = this._init.maxOutboundStreams) !== null && _this$_init$maxOutbou !== void 0 ? _this$_init$maxOutbou : 1024)) throw Qt(new Error("Too many outbound streams open"), "ERR_TOO_MANY_OUTBOUND_STREAMS");
          if (i.has(t)) throw new Error("".concat(n, " stream ").concat(t, " already exists!"));
          var s = function (e) {
            var t = e.id,
              r = e.name,
              n = e.send,
              i = e.onEnd,
              _e$type = e.type,
              s = _e$type === void 0 ? "initiator" : _e$type,
              _e$maxMsgSize = e.maxMsgSize,
              o = _e$maxMsgSize === void 0 ? xn : _e$maxMsgSize,
              a = new AbortController(),
              c = new AbortController(),
              l = new AbortController(),
              u = "initiator" === s ? Nn : Ln,
              h = "initiator" === s ? "i".concat(t) : "r".concat(t),
              d = "".concat(null == r ? t : r);
            var p,
              f = !1,
              y = !1,
              g = !1;
            var m = {
                open: Date.now()
              },
              w = function w(e) {
                y || (y = !0, qn.trace("%s stream %s sink end - err: %o", s, d, e), null != e && null == p && (p = e), f && (m.close = Date.now(), null != i && i(p)));
              },
              E = en({
                onEnd: function onEnd(e) {
                  f || (f = !0, qn.trace("%s stream %s source end - err: %o", s, d, e), null != e && null == p && (p = e), y && (b.stat.timeline.close = Date.now(), null != i && i(p)));
                }
              }),
              b = {
                close: function close() {
                  qn.trace("%s stream %s close", s, d), b.closeRead(), b.closeWrite();
                },
                closeRead: function closeRead() {
                  qn.trace("%s stream %s closeRead", s, d), f || E.end();
                },
                closeWrite: function closeWrite() {
                  if (qn.trace("%s stream %s closeWrite", s, d), !y) {
                    l.abort();
                    try {
                      n({
                        id: t,
                        type: u.CLOSE
                      });
                    } catch (e) {
                      qn.trace("%s stream %s error sending close", s, r, e);
                    }
                    w();
                  }
                },
                abort: function abort(e) {
                  qn.trace("%s stream %s abort", s, d, e), E.end(e), a.abort(), w(e);
                },
                reset: function reset() {
                  var e = Qt(new Error("stream reset"), jn);
                  c.abort(), E.end(e), w(e);
                },
                sink: function () {
                  var _sink = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee24(e) {
                    var _iteratorAbruptCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _r48;
                    return _regeneratorRuntime().wrap(function _callee24$(_context26) {
                      while (1) switch (_context26.prev = _context26.next) {
                        case 0:
                          if (!g) {
                            _context26.next = 2;
                            break;
                          }
                          throw Qt(new Error("sink already called on stream"), "ERR_DOUBLE_SINK");
                        case 2:
                          if (!(g = !0, y)) {
                            _context26.next = 4;
                            break;
                          }
                          throw Qt(new Error("stream closed for writing"), "ERR_SINK_ENDED");
                        case 4:
                          e = qr(e, (0, Fn.anySignal)([a.signal, c.signal, l.signal]));
                          _context26.prev = 5;
                          "initiator" === s && n({
                            id: t,
                            type: Nn.NEW_STREAM,
                            data: new In(Pt(d))
                          });
                          _iteratorAbruptCompletion2 = false;
                          _didIteratorError2 = false;
                          _context26.prev = 9;
                          _iterator2 = _asyncIterator(e);
                        case 11:
                          _context26.next = 13;
                          return _iterator2.next();
                        case 13:
                          if (!(_iteratorAbruptCompletion2 = !(_step2 = _context26.sent).done)) {
                            _context26.next = 25;
                            break;
                          }
                          _r48 = _step2.value;
                        case 15:
                          if (!(_r48.length > 0)) {
                            _context26.next = 22;
                            break;
                          }
                          if (!(_r48.length <= o)) {
                            _context26.next = 19;
                            break;
                          }
                          n({
                            id: t,
                            type: u.MESSAGE,
                            data: _r48 instanceof Uint8Array ? new In(_r48) : _r48
                          });
                          return _context26.abrupt("break", 22);
                        case 19:
                          _r48 = _r48 instanceof Uint8Array ? new In(_r48) : _r48, n({
                            id: t,
                            type: u.MESSAGE,
                            data: _r48.sublist(0, o)
                          }), _r48.consume(o);
                        case 20:
                          _context26.next = 15;
                          break;
                        case 22:
                          _iteratorAbruptCompletion2 = false;
                          _context26.next = 11;
                          break;
                        case 25:
                          _context26.next = 31;
                          break;
                        case 27:
                          _context26.prev = 27;
                          _context26.t0 = _context26["catch"](9);
                          _didIteratorError2 = true;
                          _iteratorError2 = _context26.t0;
                        case 31:
                          _context26.prev = 31;
                          _context26.prev = 32;
                          if (!(_iteratorAbruptCompletion2 && _iterator2.return != null)) {
                            _context26.next = 36;
                            break;
                          }
                          _context26.next = 36;
                          return _iterator2.return();
                        case 36:
                          _context26.prev = 36;
                          if (!_didIteratorError2) {
                            _context26.next = 39;
                            break;
                          }
                          throw _iteratorError2;
                        case 39:
                          return _context26.finish(36);
                        case 40:
                          return _context26.finish(31);
                        case 41:
                          _context26.next = 51;
                          break;
                        case 43:
                          _context26.prev = 43;
                          _context26.t1 = _context26["catch"](5);
                          if (!("aborted" === _context26.t1.type && "The operation was aborted" === _context26.t1.message)) {
                            _context26.next = 49;
                            break;
                          }
                          if (!l.signal.aborted) {
                            _context26.next = 48;
                            break;
                          }
                          return _context26.abrupt("return");
                        case 48:
                          c.signal.aborted && (_context26.t1.message = "stream reset", _context26.t1.code = jn), a.signal.aborted && (_context26.t1.message = "stream aborted", _context26.t1.code = "ERR_STREAM_ABORT");
                        case 49:
                          if (_context26.t1.code === jn) qn.trace("%s stream %s reset", s, r);else {
                            qn.trace("%s stream %s error", s, r, _context26.t1);
                            try {
                              n({
                                id: t,
                                type: u.RESET
                              });
                            } catch (e) {
                              qn.trace("%s stream %s error sending reset", s, r, e);
                            }
                          }
                          return _context26.abrupt("return", (E.end(_context26.t1), void w(_context26.t1)));
                        case 51:
                          try {
                            n({
                              id: t,
                              type: u.CLOSE
                            });
                          } catch (e) {
                            qn.trace("%s stream %s error sending close", s, r, e);
                          }
                          w();
                        case 53:
                        case "end":
                          return _context26.stop();
                      }
                    }, _callee24, null, [[5, 43], [9, 27, 31, 41], [32,, 36, 40]]);
                  }));
                  function sink(_x40) {
                    return _sink.apply(this, arguments);
                  }
                  return sink;
                }(),
                source: E,
                sourcePush: function sourcePush(e) {
                  E.push(e);
                },
                sourceReadableLength: function sourceReadableLength() {
                  return E.readableLength;
                },
                stat: {
                  direction: "initiator" === s ? "outbound" : "inbound",
                  timeline: m
                },
                metadata: {},
                id: h
              };
            return b;
          }({
            id: t,
            name: r,
            send: function send(e) {
              zn.enabled && zn.trace("%s stream %s send", n, t, $n(e)), _this87._source.push(e);
            },
            type: n,
            onEnd: function onEnd() {
              zn("%s stream with id %s and protocol %s ended", n, t, s.stat.protocol), i.delete(t), null != _this87._init.onStreamEnd && _this87._init.onStreamEnd(s);
            },
            maxMsgSize: this._init.maxMsgSize
          });
          return i.set(t, s), s;
        }
      }, {
        key: "_createSink",
        value: function _createSink() {
          var _this88 = this;
          return /*#__PURE__*/function () {
            var _ref42 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee25(e) {
              var t, _t46, _iteratorAbruptCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, _r49, _iterator49, _step49, _e64;
              return _regeneratorRuntime().wrap(function _callee25$(_context27) {
                while (1) switch (_context27.prev = _context27.next) {
                  case 0:
                    t = [_this88.closeController.signal];
                    null != _this88._init.signal && t.push(_this88._init.signal), e = qr(e, Fn(t));
                    _context27.prev = 2;
                    _t46 = new Un(_this88._init.maxMsgSize, _this88._init.maxUnprocessedMessageQueueSize);
                    _iteratorAbruptCompletion3 = false;
                    _didIteratorError3 = false;
                    _context27.prev = 6;
                    _iterator3 = _asyncIterator(e);
                  case 8:
                    _context27.next = 10;
                    return _iterator3.next();
                  case 10:
                    if (!(_iteratorAbruptCompletion3 = !(_step3 = _context27.sent).done)) {
                      _context27.next = 32;
                      break;
                    }
                    _r49 = _step3.value;
                    _iterator49 = _createForOfIteratorHelper(_t46.write(_r49));
                    _context27.prev = 13;
                    _iterator49.s();
                  case 15:
                    if ((_step49 = _iterator49.n()).done) {
                      _context27.next = 21;
                      break;
                    }
                    _e64 = _step49.value;
                    _context27.next = 19;
                    return _this88._handleIncoming(_e64);
                  case 19:
                    _context27.next = 15;
                    break;
                  case 21:
                    _context27.next = 26;
                    break;
                  case 23:
                    _context27.prev = 23;
                    _context27.t0 = _context27["catch"](13);
                    _iterator49.e(_context27.t0);
                  case 26:
                    _context27.prev = 26;
                    _iterator49.f();
                    return _context27.finish(26);
                  case 29:
                    _iteratorAbruptCompletion3 = false;
                    _context27.next = 8;
                    break;
                  case 32:
                    _context27.next = 38;
                    break;
                  case 34:
                    _context27.prev = 34;
                    _context27.t1 = _context27["catch"](6);
                    _didIteratorError3 = true;
                    _iteratorError3 = _context27.t1;
                  case 38:
                    _context27.prev = 38;
                    _context27.prev = 39;
                    if (!(_iteratorAbruptCompletion3 && _iterator3.return != null)) {
                      _context27.next = 43;
                      break;
                    }
                    _context27.next = 43;
                    return _iterator3.return();
                  case 43:
                    _context27.prev = 43;
                    if (!_didIteratorError3) {
                      _context27.next = 46;
                      break;
                    }
                    throw _iteratorError3;
                  case 46:
                    return _context27.finish(43);
                  case 47:
                    return _context27.finish(38);
                  case 48:
                    _this88._source.end();
                    _context27.next = 54;
                    break;
                  case 51:
                    _context27.prev = 51;
                    _context27.t2 = _context27["catch"](2);
                    zn("error in sink", _context27.t2), _this88._source.end(_context27.t2);
                  case 54:
                  case "end":
                    return _context27.stop();
                }
              }, _callee25, null, [[2, 51], [6, 34, 38, 48], [13, 23, 26, 29], [39,, 43, 47]]);
            }));
            return function (_x41) {
              return _ref42.apply(this, arguments);
            };
          }();
        }
      }, {
        key: "_createSource",
        value: function _createSource() {
          var _this89 = this;
          var e = function () {
            var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
            return tn(function (e) {
              var t;
              var r = [];
              for (; !e.isEmpty() && (t = e.shift(), null != t);) {
                if (null != t.error) throw t.error;
                !1 === t.done && r.push(t.value);
              }
              return null == t ? {
                done: !0
              } : {
                done: !0 === t.done,
                value: r
              };
            }, e);
          }({
            objectMode: !0,
            onEnd: function onEnd(e) {
              _this89.close(e);
            }
          });
          return Object.assign(function () {
            var _ref2 = _wrapAsyncGenerator(function (e) {
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
              return /*#__PURE__*/_regeneratorRuntime().mark(function _callee28() {
                var _iteratorAbruptCompletion4, _didIteratorError4, _iteratorError4, _iterator4, _step4, _t48, _e66, _iterator51, _step51, _r51;
                return _regeneratorRuntime().wrap(function _callee28$(_context30) {
                  while (1) switch (_context30.prev = _context30.next) {
                    case 0:
                      if (!(null != t && 0 !== t)) {
                        _context30.next = 4;
                        break;
                      }
                      return _context30.delegateYield(_asyncGeneratorDelegate(_asyncIterator(function () {
                        var _ref3 = _wrapAsyncGenerator(function (e) {
                          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                          return /*#__PURE__*/_regeneratorRuntime().mark(function _callee27() {
                            var _t$size, _t$yieldAfter, _t$serialize;
                            var r, n, i, s, o, a, _e65;
                            return _regeneratorRuntime().wrap(function _callee27$(_context29) {
                              while (1) switch (_context29.prev = _context29.next) {
                                case 0:
                                  r = new In(), n = !1, i = rn(), s = Number((_t$size = t.size) !== null && _t$size !== void 0 ? _t$size : Dn);
                                  (isNaN(s) || 0 === s || s < 0) && (s = Dn);
                                  o = (_t$yieldAfter = t.yieldAfter) !== null && _t$yieldAfter !== void 0 ? _t$yieldAfter : 0, a = (_t$serialize = t.serialize) !== null && _t$serialize !== void 0 ? _t$serialize : Pn;
                                  Promise.resolve().then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee26() {
                                    var _t47, _iteratorAbruptCompletion5, _didIteratorError5, _iteratorError5, _iterator5, _step5, _n40;
                                    return _regeneratorRuntime().wrap(function _callee26$(_context28) {
                                      while (1) switch (_context28.prev = _context28.next) {
                                        case 0:
                                          _context28.prev = 0;
                                          _iteratorAbruptCompletion5 = false;
                                          _didIteratorError5 = false;
                                          _context28.prev = 3;
                                          _iterator5 = _asyncIterator(e);
                                        case 5:
                                          _context28.next = 7;
                                          return _iterator5.next();
                                        case 7:
                                          if (!(_iteratorAbruptCompletion5 = !(_step5 = _context28.sent).done)) {
                                            _context28.next = 13;
                                            break;
                                          }
                                          _n40 = _step5.value;
                                          a(_n40, r), r.byteLength >= s ? (clearTimeout(_t47), i.resolve()) : _t47 = setTimeout(function () {
                                            i.resolve();
                                          }, o);
                                        case 10:
                                          _iteratorAbruptCompletion5 = false;
                                          _context28.next = 5;
                                          break;
                                        case 13:
                                          _context28.next = 19;
                                          break;
                                        case 15:
                                          _context28.prev = 15;
                                          _context28.t0 = _context28["catch"](3);
                                          _didIteratorError5 = true;
                                          _iteratorError5 = _context28.t0;
                                        case 19:
                                          _context28.prev = 19;
                                          _context28.prev = 20;
                                          if (!(_iteratorAbruptCompletion5 && _iterator5.return != null)) {
                                            _context28.next = 24;
                                            break;
                                          }
                                          _context28.next = 24;
                                          return _iterator5.return();
                                        case 24:
                                          _context28.prev = 24;
                                          if (!_didIteratorError5) {
                                            _context28.next = 27;
                                            break;
                                          }
                                          throw _iteratorError5;
                                        case 27:
                                          return _context28.finish(24);
                                        case 28:
                                          return _context28.finish(19);
                                        case 29:
                                          clearTimeout(_t47), i.resolve();
                                          _context28.next = 35;
                                          break;
                                        case 32:
                                          _context28.prev = 32;
                                          _context28.t1 = _context28["catch"](0);
                                          i.reject(_context28.t1);
                                        case 35:
                                          _context28.prev = 35;
                                          n = !0;
                                          return _context28.finish(35);
                                        case 38:
                                        case "end":
                                          return _context28.stop();
                                      }
                                    }, _callee26, null, [[0, 32, 35, 38], [3, 15, 19, 29], [20,, 24, 28]]);
                                  })));
                                case 4:
                                  if (n) {
                                    _context29.next = 15;
                                    break;
                                  }
                                  _context29.next = 7;
                                  return _awaitAsyncGenerator(i.promise);
                                case 7:
                                  i = rn();
                                  if (!(r.byteLength > 0)) {
                                    _context29.next = 13;
                                    break;
                                  }
                                  _e65 = r;
                                  r = new In();
                                  _context29.next = 13;
                                  return _e65.subarray();
                                case 13:
                                  _context29.next = 4;
                                  break;
                                case 15:
                                case "end":
                                  return _context29.stop();
                              }
                            }, _callee27);
                          })();
                        });
                        return function (_x2) {
                          return _ref3.apply(this, arguments);
                        };
                      }()(e, {
                        size: t,
                        serialize: function serialize(e, t) {
                          var _iterator50 = _createForOfIteratorHelper(e),
                            _step50;
                          try {
                            for (_iterator50.s(); !(_step50 = _iterator50.n()).done;) {
                              var _r50 = _step50.value;
                              On.write(_r50, t);
                            }
                          } catch (err) {
                            _iterator50.e(err);
                          } finally {
                            _iterator50.f();
                          }
                        }
                      })), _awaitAsyncGenerator), "t0", 2);
                    case 2:
                      _context30.next = 36;
                      break;
                    case 4:
                      _iteratorAbruptCompletion4 = false;
                      _didIteratorError4 = false;
                      _context30.prev = 6;
                      _iterator4 = _asyncIterator(e);
                    case 8:
                      _context30.next = 10;
                      return _awaitAsyncGenerator(_iterator4.next());
                    case 10:
                      if (!(_iteratorAbruptCompletion4 = !(_step4 = _context30.sent).done)) {
                        _context30.next = 20;
                        break;
                      }
                      _t48 = _step4.value;
                      _e66 = new In();
                      _iterator51 = _createForOfIteratorHelper(_t48);
                      try {
                        for (_iterator51.s(); !(_step51 = _iterator51.n()).done;) {
                          _r51 = _step51.value;
                          On.write(_r51, _e66);
                        }
                      } catch (err) {
                        _iterator51.e(err);
                      } finally {
                        _iterator51.f();
                      }
                      _context30.next = 17;
                      return _e66.subarray();
                    case 17:
                      _iteratorAbruptCompletion4 = false;
                      _context30.next = 8;
                      break;
                    case 20:
                      _context30.next = 26;
                      break;
                    case 22:
                      _context30.prev = 22;
                      _context30.t1 = _context30["catch"](6);
                      _didIteratorError4 = true;
                      _iteratorError4 = _context30.t1;
                    case 26:
                      _context30.prev = 26;
                      _context30.prev = 27;
                      if (!(_iteratorAbruptCompletion4 && _iterator4.return != null)) {
                        _context30.next = 31;
                        break;
                      }
                      _context30.next = 31;
                      return _awaitAsyncGenerator(_iterator4.return());
                    case 31:
                      _context30.prev = 31;
                      if (!_didIteratorError4) {
                        _context30.next = 34;
                        break;
                      }
                      throw _iteratorError4;
                    case 34:
                      return _context30.finish(31);
                    case 35:
                      return _context30.finish(26);
                    case 36:
                    case "end":
                      return _context30.stop();
                  }
                }, _callee28, null, [[6, 22, 26, 36], [27,, 31, 35]]);
              })();
            });
            return function (_x) {
              return _ref2.apply(this, arguments);
            };
          }()(e, this._init.minSendBytes), {
            push: e.push,
            end: e.end,
            return: e.return
          });
        }
      }, {
        key: "_handleIncoming",
        value: function () {
          var _handleIncoming2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee29(e) {
            var _this$_init$maxStream;
            var t, r, _this$_init$maxInboun, _r52, n, i, _t49;
            return _regeneratorRuntime().wrap(function _callee29$(_context31) {
              while (1) switch (_context31.prev = _context31.next) {
                case 0:
                  t = e.id, r = e.type;
                  if (!(zn.enabled && zn.trace("incoming message", $n(e)), e.type === Rn.NEW_STREAM)) {
                    _context31.next = 15;
                    break;
                  }
                  if (!(this._streams.receivers.size === ((_this$_init$maxInboun = this._init.maxInboundStreams) !== null && _this$_init$maxInboun !== void 0 ? _this$_init$maxInboun : 1024))) {
                    _context31.next = 13;
                    break;
                  }
                  zn("too many inbound streams open"), this._source.push({
                    id: t,
                    type: Rn.RESET_RECEIVER
                  });
                  _context31.prev = 4;
                  _context31.next = 7;
                  return this.rateLimiter.consume("new-stream", 1);
                case 7:
                  _context31.next = 12;
                  break;
                case 9:
                  _context31.prev = 9;
                  _context31.t0 = _context31["catch"](4);
                  return _context31.abrupt("return", (zn("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"), void this._source.end(new Error("Too many open streams"))));
                case 12:
                  return _context31.abrupt("return");
                case 13:
                  _r52 = this._newReceiverStream({
                    id: t,
                    name: St(e.data instanceof Uint8Array ? e.data : e.data.subarray())
                  });
                  return _context31.abrupt("return", void (null != this._init.onIncomingStream && this._init.onIncomingStream(_r52)));
                case 15:
                  n = (1 == (1 & r) ? this._streams.initiators : this._streams.receivers).get(t);
                  if (!(null == n)) {
                    _context31.next = 18;
                    break;
                  }
                  return _context31.abrupt("return", void zn("missing stream %s for message type %s", t, kn[r]));
                case 18:
                  i = (_this$_init$maxStream = this._init.maxStreamBufferSize) !== null && _this$_init$maxStream !== void 0 ? _this$_init$maxStream : 4194304;
                  _context31.t1 = r;
                  _context31.next = _context31.t1 === Rn.MESSAGE_INITIATOR ? 22 : _context31.t1 === Rn.MESSAGE_RECEIVER ? 22 : _context31.t1 === Rn.CLOSE_INITIATOR ? 28 : _context31.t1 === Rn.CLOSE_RECEIVER ? 28 : _context31.t1 === Rn.RESET_INITIATOR ? 30 : _context31.t1 === Rn.RESET_RECEIVER ? 30 : 32;
                  break;
                case 22:
                  if (!(n.sourceReadableLength() > i)) {
                    _context31.next = 26;
                    break;
                  }
                  this._source.push({
                    id: e.id,
                    type: r === Rn.MESSAGE_INITIATOR ? Rn.RESET_RECEIVER : Rn.RESET_INITIATOR
                  });
                  _t49 = Qt(new Error("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers"), "ERR_STREAM_INPUT_BUFFER_FULL");
                  return _context31.abrupt("return", void n.abort(_t49));
                case 26:
                  n.sourcePush(e.data);
                  return _context31.abrupt("break", 33);
                case 28:
                  n.closeRead();
                  return _context31.abrupt("break", 33);
                case 30:
                  n.reset();
                  return _context31.abrupt("break", 33);
                case 32:
                  zn("unknown message type %s", r);
                case 33:
                case "end":
                  return _context31.stop();
              }
            }, _callee29, this, [[4, 9]]);
          }));
          function _handleIncoming(_x42) {
            return _handleIncoming2.apply(this, arguments);
          }
          return _handleIncoming;
        }()
      }]);
      return Gn;
    }();
    var Wn = /*#__PURE__*/function () {
      function Wn() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        _classCallCheck(this, Wn);
        this.protocol = "/mplex/6.7.0", this._init = e;
      }
      _createClass(Wn, [{
        key: "createStreamMuxer",
        value: function createStreamMuxer() {
          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
          return new Gn(_objectSpread(_objectSpread({}, e), this._init));
        }
      }]);
      return Wn;
    }();
    function Yn() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return function () {
        return new Wn(e);
      };
    }
    function Qn(e) {
      var t = en(),
        r = function (e) {
          var t = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee30() {
            var t, r, _iteratorAbruptCompletion6, _didIteratorError6, _iteratorError6, _iterator6, _step6, _n41, _e67;
            return _regeneratorRuntime().wrap(function _callee30$(_context32) {
              while (1) switch (_context32.prev = _context32.next) {
                case 0:
                  _context32.next = 2;
                  return;
                case 2:
                  t = _context32.sent;
                  r = new In();
                  _iteratorAbruptCompletion6 = false;
                  _didIteratorError6 = false;
                  _context32.prev = 6;
                  _iterator6 = _asyncIterator(e);
                case 8:
                  _context32.next = 10;
                  return _awaitAsyncGenerator(_iterator6.next());
                case 10:
                  if (!(_iteratorAbruptCompletion6 = !(_step6 = _context32.sent).done)) {
                    _context32.next = 40;
                    break;
                  }
                  _n41 = _step6.value;
                  if (!(null != t)) {
                    _context32.next = 32;
                    break;
                  }
                  r.append(_n41);
                case 14:
                  if (!(r.length >= t)) {
                    _context32.next = 30;
                    break;
                  }
                  _e67 = r.sublist(0, t);
                  r.consume(t);
                  _context32.next = 19;
                  return _e67;
                case 19:
                  t = _context32.sent;
                  if (!(null == t)) {
                    _context32.next = 28;
                    break;
                  }
                  _context32.t0 = r.length > 0;
                  if (!_context32.t0) {
                    _context32.next = 27;
                    break;
                  }
                  _context32.next = 25;
                  return r;
                case 25:
                  t = _context32.sent;
                  r = new In();
                case 27:
                  return _context32.abrupt("break", 30);
                case 28:
                  _context32.next = 14;
                  break;
                case 30:
                  _context32.next = 37;
                  break;
                case 32:
                  r.append(_n41);
                  _context32.next = 35;
                  return r;
                case 35:
                  t = _context32.sent;
                  r = new In();
                case 37:
                  _iteratorAbruptCompletion6 = false;
                  _context32.next = 8;
                  break;
                case 40:
                  _context32.next = 46;
                  break;
                case 42:
                  _context32.prev = 42;
                  _context32.t1 = _context32["catch"](6);
                  _didIteratorError6 = true;
                  _iteratorError6 = _context32.t1;
                case 46:
                  _context32.prev = 46;
                  _context32.prev = 47;
                  if (!(_iteratorAbruptCompletion6 && _iterator6.return != null)) {
                    _context32.next = 51;
                    break;
                  }
                  _context32.next = 51;
                  return _awaitAsyncGenerator(_iterator6.return());
                case 51:
                  _context32.prev = 51;
                  if (!_didIteratorError6) {
                    _context32.next = 54;
                    break;
                  }
                  throw _iteratorError6;
                case 54:
                  return _context32.finish(51);
                case 55:
                  return _context32.finish(46);
                case 56:
                  if (!(null != t)) {
                    _context32.next = 58;
                    break;
                  }
                  throw Object.assign(new Error("stream ended before ".concat(t, " bytes became available")), {
                    code: "ERR_UNDER_READ",
                    buffer: r
                  });
                case 58:
                case "end":
                  return _context32.stop();
              }
            }, _callee30, null, [[6, 42, 46, 56], [47,, 51, 55]]);
          }))();
          return t.next(), t;
        }(e.source),
        n = rn();
      var i;
      var s = e.sink(_wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee31() {
        var e;
        return _regeneratorRuntime().wrap(function _callee31$(_context33) {
          while (1) switch (_context33.prev = _context33.next) {
            case 0:
              return _context33.delegateYield(_asyncGeneratorDelegate(_asyncIterator(t), _awaitAsyncGenerator), "t0", 1);
            case 1:
              _context33.next = 3;
              return _awaitAsyncGenerator(n.promise);
            case 3:
              e = _context33.sent;
              return _context33.delegateYield(_asyncGeneratorDelegate(_asyncIterator(e), _awaitAsyncGenerator), "t1", 5);
            case 5:
            case "end":
              return _context33.stop();
          }
        }, _callee31);
      }))());
      return s.catch(function (e) {
        i = e;
      }), {
        reader: r,
        writer: t,
        stream: {
          sink: function () {
            var _sink2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee32(e) {
              return _regeneratorRuntime().wrap(function _callee32$(_context34) {
                while (1) switch (_context34.prev = _context34.next) {
                  case 0:
                    if (!(null != i)) {
                      _context34.next = 6;
                      break;
                    }
                    _context34.next = 3;
                    return Promise.reject(i);
                  case 3:
                    _context34.t0 = _context34.sent;
                    _context34.next = 10;
                    break;
                  case 6:
                    n.resolve(e);
                    _context34.next = 9;
                    return s;
                  case 9:
                    _context34.t0 = _context34.sent;
                  case 10:
                    return _context34.abrupt("return", _context34.t0);
                  case 11:
                  case "end":
                    return _context34.stop();
                }
              }, _callee32);
            }));
            function sink(_x43) {
              return _sink2.apply(this, arguments);
            }
            return sink;
          }(),
          source: r
        },
        rest: function rest() {
          return t.end();
        },
        write: t.push,
        read: function () {
          var _read = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee33() {
            var e;
            return _regeneratorRuntime().wrap(function _callee33$(_context35) {
              while (1) switch (_context35.prev = _context35.next) {
                case 0:
                  _context35.next = 2;
                  return r.next();
                case 2:
                  e = _context35.sent;
                  if (!(null != e.value)) {
                    _context35.next = 5;
                    break;
                  }
                  return _context35.abrupt("return", e.value);
                case 5:
                case "end":
                  return _context35.stop();
              }
            }, _callee33);
          }));
          function read() {
            return _read.apply(this, arguments);
          }
          return read;
        }()
      };
    }
    function Xn(e) {
      return e instanceof Uint8Array ? {
        get: function get(t) {
          return e[t];
        },
        set: function set(t, r) {
          e[t] = r;
        }
      } : {
        get: function get(t) {
          return e.get(t);
        },
        set: function set(t, r) {
          e.set(t, r);
        }
      };
    }
    var Zn = 4294967296;
    var Jn = /*#__PURE__*/function () {
      function Jn() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        _classCallCheck(this, Jn);
        this.hi = e, this.lo = t;
      }
      _createClass(Jn, [{
        key: "toBigInt",
        value: function toBigInt(e) {
          if (!0 === e) return BigInt(this.lo >>> 0) + (BigInt(this.hi >>> 0) << 32n);
          if (this.hi >>> 31 != 0) {
            var _e68 = 1 + ~this.lo >>> 0;
            var _t50 = ~this.hi >>> 0;
            return 0 === _e68 && (_t50 = _t50 + 1 >>> 0), -(BigInt(_e68) + (BigInt(_t50) << 32n));
          }
          return BigInt(this.lo >>> 0) + (BigInt(this.hi >>> 0) << 32n);
        }
      }, {
        key: "toNumber",
        value: function toNumber(e) {
          return Number(this.toBigInt(e));
        }
      }, {
        key: "zzDecode",
        value: function zzDecode() {
          var e = -(1 & this.lo),
            t = ((this.lo >>> 1 | this.hi << 31) ^ e) >>> 0,
            r = (this.hi >>> 1 ^ e) >>> 0;
          return new Jn(r, t);
        }
      }, {
        key: "zzEncode",
        value: function zzEncode() {
          var e = this.hi >> 31,
            t = ((this.hi << 1 | this.lo >>> 31) ^ e) >>> 0,
            r = (this.lo << 1 ^ e) >>> 0;
          return new Jn(t, r);
        }
      }, {
        key: "toBytes",
        value: function toBytes(e) {
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
          var r = Xn(e);
          for (; this.hi > 0;) r.set(t++, 127 & this.lo | 128), this.lo = (this.lo >>> 7 | this.hi << 25) >>> 0, this.hi >>>= 7;
          for (; this.lo > 127;) r.set(t++, 127 & this.lo | 128), this.lo = this.lo >>> 7;
          r.set(t++, this.lo);
        }
      }], [{
        key: "fromBigInt",
        value: function fromBigInt(e) {
          if (0n === e) return new Jn();
          var t = e < 0;
          t && (e = -e);
          var r = 0 | Number(e >> 32n),
            n = 0 | Number(e - (BigInt(r) << 32n));
          return t && (r = ~r >>> 0, n = ~n >>> 0, ++n > Zn && (n = 0, ++r > Zn && (r = 0))), new Jn(r, n);
        }
      }, {
        key: "fromNumber",
        value: function fromNumber(e) {
          if (0 === e) return new Jn();
          var t = e < 0;
          t && (e = -e);
          var r = e >>> 0,
            n = (e - r) / 4294967296 >>> 0;
          return t && (n = ~n >>> 0, r = ~r >>> 0, ++r > 4294967295 && (r = 0, ++n > 4294967295 && (n = 0))), new Jn(n, r);
        }
      }, {
        key: "fromBytes",
        value: function fromBytes(e) {
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
          var r = Xn(e),
            n = new Jn();
          var i = 0;
          if (e.length - t > 4) {
            for (; i < 4; ++i) if (n.lo = (n.lo | (127 & r.get(t)) << 7 * i) >>> 0, r.get(t++) < 128) return n;
            if (n.lo = (n.lo | (127 & r.get(t)) << 28) >>> 0, n.hi = (n.hi | (127 & r.get(t)) >> 4) >>> 0, r.get(t++) < 128) return n;
            i = 0;
          } else for (; i < 4; ++i) {
            if (t >= e.length) throw RangeError("index out of range: ".concat(t, " > ").concat(e.length));
            if (n.lo = (n.lo | (127 & r.get(t)) << 7 * i) >>> 0, r.get(t++) < 128) return n;
          }
          if (e.length - t > 4) {
            for (; i < 5; ++i) if (n.hi = (n.hi | (127 & r.get(t)) << 7 * i + 3) >>> 0, r.get(t++) < 128) return n;
          } else if (t < e.byteLength) for (; i < 5; ++i) {
            if (t >= e.length) throw RangeError("index out of range: ".concat(t, " > ").concat(e.length));
            if (n.hi = (n.hi | (127 & r.get(t)) << 7 * i + 3) >>> 0, r.get(t++) < 128) return n;
          }
          throw RangeError("invalid varint encoding");
        }
      }]);
      return Jn;
    }();
    var ei = Math.pow(2, 7),
      ti = Math.pow(2, 14),
      ri = Math.pow(2, 21),
      ni = Math.pow(2, 28),
      ii = Math.pow(2, 35),
      si = Math.pow(2, 42),
      oi = Math.pow(2, 49),
      ai = Math.pow(2, 56),
      ci = Math.pow(2, 63),
      li = {
        encodingLength: function encodingLength(e) {
          return e < ei ? 1 : e < ti ? 2 : e < ri ? 3 : e < ni ? 4 : e < ii ? 5 : e < si ? 6 : e < oi ? 7 : e < ai ? 8 : e < ci ? 9 : 10;
        },
        encode: function encode(e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
          if (null != Number.MAX_SAFE_INTEGER && e > Number.MAX_SAFE_INTEGER) throw new RangeError("Could not encode varint");
          return null == t && (t = wt(li.encodingLength(e))), Jn.fromNumber(e).toBytes(t, r), t;
        },
        decode: function decode(e) {
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
          return Jn.fromBytes(e, t).toNumber(!0);
        }
      },
      ui = function ui(e) {
        var _globalThis$Buffer3;
        var t = li.encodingLength(e),
          r = (n = t, null != (globalThis === null || globalThis === void 0 ? void 0 : (_globalThis$Buffer3 = globalThis.Buffer) === null || _globalThis$Buffer3 === void 0 ? void 0 : _globalThis$Buffer3.allocUnsafe) ? globalThis.Buffer.allocUnsafe(n) : new Uint8Array(n));
        var n;
        return li.encode(e, r), ui.bytes = t, r;
      };
    function hi(e) {
      var _e$lengthEncoder, _e69;
      var t = (_e$lengthEncoder = (e = (_e69 = e) !== null && _e69 !== void 0 ? _e69 : {}).lengthEncoder) !== null && _e$lengthEncoder !== void 0 ? _e$lengthEncoder : ui;
      return /*#__PURE__*/function () {
        var _ref6 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee34(e) {
          var _iteratorAbruptCompletion7, _didIteratorError7, _iteratorError7, _iterator7, _step7, _r53, _e70;
          return _regeneratorRuntime().wrap(function _callee34$(_context36) {
            while (1) switch (_context36.prev = _context36.next) {
              case 0:
                _iteratorAbruptCompletion7 = false;
                _didIteratorError7 = false;
                _context36.prev = 2;
                _iterator7 = _asyncIterator(e);
              case 4:
                _context36.next = 6;
                return _awaitAsyncGenerator(_iterator7.next());
              case 6:
                if (!(_iteratorAbruptCompletion7 = !(_step7 = _context36.sent).done)) {
                  _context36.next = 24;
                  break;
                }
                _r53 = _step7.value;
                _e70 = t(_r53.byteLength);
                if (!(_e70 instanceof Uint8Array)) {
                  _context36.next = 14;
                  break;
                }
                _context36.next = 12;
                return _e70;
              case 12:
                _context36.next = 15;
                break;
              case 14:
                return _context36.delegateYield(_asyncGeneratorDelegate(_asyncIterator(_e70), _awaitAsyncGenerator), "t0", 15);
              case 15:
                if (!(_r53 instanceof Uint8Array)) {
                  _context36.next = 20;
                  break;
                }
                _context36.next = 18;
                return _r53;
              case 18:
                _context36.next = 21;
                break;
              case 20:
                return _context36.delegateYield(_asyncGeneratorDelegate(_asyncIterator(_r53), _awaitAsyncGenerator), "t1", 21);
              case 21:
                _iteratorAbruptCompletion7 = false;
                _context36.next = 4;
                break;
              case 24:
                _context36.next = 30;
                break;
              case 26:
                _context36.prev = 26;
                _context36.t2 = _context36["catch"](2);
                _didIteratorError7 = true;
                _iteratorError7 = _context36.t2;
              case 30:
                _context36.prev = 30;
                _context36.prev = 31;
                if (!(_iteratorAbruptCompletion7 && _iterator7.return != null)) {
                  _context36.next = 35;
                  break;
                }
                _context36.next = 35;
                return _awaitAsyncGenerator(_iterator7.return());
              case 35:
                _context36.prev = 35;
                if (!_didIteratorError7) {
                  _context36.next = 38;
                  break;
                }
                throw _iteratorError7;
              case 38:
                return _context36.finish(35);
              case 39:
                return _context36.finish(30);
              case 40:
              case "end":
                return _context36.stop();
            }
          }, _callee34, null, [[2, 26, 30, 40], [31,, 35, 39]]);
        }));
        return function (_x3) {
          return _ref6.apply(this, arguments);
        };
      }();
    }
    ui.bytes = 0, hi.single = function (e, t) {
      var _t$lengthEncoder, _t51;
      var r = (_t$lengthEncoder = (t = (_t51 = t) !== null && _t51 !== void 0 ? _t51 : {}).lengthEncoder) !== null && _t$lengthEncoder !== void 0 ? _t$lengthEncoder : ui;
      return new In(r(e.byteLength), e);
    };
    var di = 8,
      pi = 4194304;
    var fi;
    !function (e) {
      e[e.LENGTH = 0] = "LENGTH", e[e.DATA = 1] = "DATA";
    }(fi || (fi = {}));
    var yi = function yi(e) {
      var t = li.decode(e);
      return yi.bytes = li.encodingLength(t), t;
    };
    function gi(e) {
      return /*#__PURE__*/function () {
        var _ref7 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee35(t) {
          var _e$lengthDecoder, _e$maxLengthLength, _e$maxDataLength;
          var r, n, i, s, o, a, _iteratorAbruptCompletion8, _didIteratorError8, _iteratorError8, _iterator8, _step8, _c3, _t52, _t53;
          return _regeneratorRuntime().wrap(function _callee35$(_context37) {
            while (1) switch (_context37.prev = _context37.next) {
              case 0:
                r = new In();
                n = fi.LENGTH, i = -1;
                s = (_e$lengthDecoder = e === null || e === void 0 ? void 0 : e.lengthDecoder) !== null && _e$lengthDecoder !== void 0 ? _e$lengthDecoder : yi, o = (_e$maxLengthLength = e === null || e === void 0 ? void 0 : e.maxLengthLength) !== null && _e$maxLengthLength !== void 0 ? _e$maxLengthLength : di, a = (_e$maxDataLength = e === null || e === void 0 ? void 0 : e.maxDataLength) !== null && _e$maxDataLength !== void 0 ? _e$maxDataLength : pi;
                _iteratorAbruptCompletion8 = false;
                _didIteratorError8 = false;
                _context37.prev = 5;
                _iterator8 = _asyncIterator(t);
              case 7:
                _context37.next = 9;
                return _awaitAsyncGenerator(_iterator8.next());
              case 9:
                if (!(_iteratorAbruptCompletion8 = !(_step8 = _context37.sent).done)) {
                  _context37.next = 44;
                  break;
                }
                _c3 = _step8.value;
                r.append(_c3);
              case 12:
                if (!(r.byteLength > 0)) {
                  _context37.next = 41;
                  break;
                }
                if (!(n === fi.LENGTH)) {
                  _context37.next = 30;
                  break;
                }
                _context37.prev = 14;
                if (!(i = s(r), i < 0)) {
                  _context37.next = 17;
                  break;
                }
                throw Qt(new Error("invalid message length"), "ERR_INVALID_MSG_LENGTH");
              case 17:
                if (!(i > a)) {
                  _context37.next = 19;
                  break;
                }
                throw Qt(new Error("message length too long"), "ERR_MSG_DATA_TOO_LONG");
              case 19:
                _t52 = s.bytes;
                r.consume(_t52), null != (e === null || e === void 0 ? void 0 : e.onLength) && e.onLength(i), n = fi.DATA;
                _context37.next = 30;
                break;
              case 23:
                _context37.prev = 23;
                _context37.t0 = _context37["catch"](14);
                if (!(_context37.t0 instanceof RangeError)) {
                  _context37.next = 29;
                  break;
                }
                if (!(r.byteLength > o)) {
                  _context37.next = 28;
                  break;
                }
                throw Qt(new Error("message length length too long"), "ERR_MSG_LENGTH_TOO_LONG");
              case 28:
                return _context37.abrupt("break", 41);
              case 29:
                throw _context37.t0;
              case 30:
                if (!(n === fi.DATA)) {
                  _context37.next = 39;
                  break;
                }
                if (!(r.byteLength < i)) {
                  _context37.next = 33;
                  break;
                }
                return _context37.abrupt("break", 41);
              case 33:
                _t53 = r.sublist(0, i);
                r.consume(i);
                null != (e === null || e === void 0 ? void 0 : e.onData) && e.onData(_t53);
                _context37.next = 38;
                return _t53;
              case 38:
                n = fi.LENGTH;
              case 39:
                _context37.next = 12;
                break;
              case 41:
                _iteratorAbruptCompletion8 = false;
                _context37.next = 7;
                break;
              case 44:
                _context37.next = 50;
                break;
              case 46:
                _context37.prev = 46;
                _context37.t1 = _context37["catch"](5);
                _didIteratorError8 = true;
                _iteratorError8 = _context37.t1;
              case 50:
                _context37.prev = 50;
                _context37.prev = 51;
                if (!(_iteratorAbruptCompletion8 && _iterator8.return != null)) {
                  _context37.next = 55;
                  break;
                }
                _context37.next = 55;
                return _awaitAsyncGenerator(_iterator8.return());
              case 55:
                _context37.prev = 55;
                if (!_didIteratorError8) {
                  _context37.next = 58;
                  break;
                }
                throw _iteratorError8;
              case 58:
                return _context37.finish(55);
              case 59:
                return _context37.finish(50);
              case 60:
                if (!(r.byteLength > 0)) {
                  _context37.next = 62;
                  break;
                }
                throw Qt(new Error("unexpected end of input"), "ERR_UNEXPECTED_EOF");
              case 62:
              case "end":
                return _context37.stop();
            }
          }, _callee35, null, [[5, 46, 50, 60], [14, 23], [51,, 55, 59]]);
        }));
        return function (_x4) {
          return _ref7.apply(this, arguments);
        };
      }();
    }
    function mi(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var r = Qn(e),
        n = gi.fromReader(r.reader, t),
        i = {
          read: function () {
            var _read2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee36(e) {
              var _yield$r$reader$next, t;
              return _regeneratorRuntime().wrap(function _callee36$(_context38) {
                while (1) switch (_context38.prev = _context38.next) {
                  case 0:
                    _context38.next = 2;
                    return r.reader.next(e);
                  case 2:
                    _yield$r$reader$next = _context38.sent;
                    t = _yield$r$reader$next.value;
                    if (!(null == t)) {
                      _context38.next = 6;
                      break;
                    }
                    throw new Error("Value is null");
                  case 6:
                    return _context38.abrupt("return", t);
                  case 7:
                  case "end":
                    return _context38.stop();
                }
              }, _callee36);
            }));
            function read(_x44) {
              return _read2.apply(this, arguments);
            }
            return read;
          }(),
          readLP: function () {
            var _readLP = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee37() {
              var _yield$n$next, e;
              return _regeneratorRuntime().wrap(function _callee37$(_context39) {
                while (1) switch (_context39.prev = _context39.next) {
                  case 0:
                    _context39.next = 2;
                    return n.next();
                  case 2:
                    _yield$n$next = _context39.sent;
                    e = _yield$n$next.value;
                    if (!(null == e)) {
                      _context39.next = 6;
                      break;
                    }
                    throw new Error("Value is null");
                  case 6:
                    return _context39.abrupt("return", e);
                  case 7:
                  case "end":
                    return _context39.stop();
                }
              }, _callee37);
            }));
            function readLP() {
              return _readLP.apply(this, arguments);
            }
            return readLP;
          }(),
          readPB: function () {
            var _readPB = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee38(e) {
              var t, r;
              return _regeneratorRuntime().wrap(function _callee38$(_context40) {
                while (1) switch (_context40.prev = _context40.next) {
                  case 0:
                    _context40.next = 2;
                    return i.readLP();
                  case 2:
                    t = _context40.sent;
                    if (!(null == t)) {
                      _context40.next = 5;
                      break;
                    }
                    throw new Error("Value is null");
                  case 5:
                    r = t instanceof Uint8Array ? t : t.subarray();
                    return _context40.abrupt("return", e.decode(r));
                  case 7:
                  case "end":
                    return _context40.stop();
                }
              }, _callee38);
            }));
            function readPB(_x45) {
              return _readPB.apply(this, arguments);
            }
            return readPB;
          }(),
          write: function write(e) {
            e instanceof Uint8Array ? r.writer.push(e) : r.writer.push(e.subarray());
          },
          writeLP: function writeLP(e) {
            i.write(hi.single(e, t));
          },
          writePB: function writePB(e, t) {
            i.writeLP(t.encode(e));
          },
          pb: function pb(e) {
            return {
              read: function () {
                var _read3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee39() {
                  return _regeneratorRuntime().wrap(function _callee39$(_context41) {
                    while (1) switch (_context41.prev = _context41.next) {
                      case 0:
                        _context41.next = 2;
                        return i.readPB(e);
                      case 2:
                        return _context41.abrupt("return", _context41.sent);
                      case 3:
                      case "end":
                        return _context41.stop();
                    }
                  }, _callee39);
                }));
                function read() {
                  return _read3.apply(this, arguments);
                }
                return read;
              }(),
              write: function write(t) {
                i.writePB(t, e);
              }
            };
          },
          unwrap: function unwrap() {
            return r.rest(), r.stream;
          }
        };
      return i;
    }
    function wi() {
      var e = rn();
      var t = !1;
      return {
        sink: function () {
          var _sink3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee40(r) {
            return _regeneratorRuntime().wrap(function _callee40$(_context42) {
              while (1) switch (_context42.prev = _context42.next) {
                case 0:
                  if (!t) {
                    _context42.next = 2;
                    break;
                  }
                  throw new Error("already piped");
                case 2:
                  t = !0, e.resolve(r);
                case 3:
                case "end":
                  return _context42.stop();
              }
            }, _callee40);
          }));
          function sink(_x46) {
            return _sink3.apply(this, arguments);
          }
          return sink;
        }(),
        source: _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee41() {
          var t;
          return _regeneratorRuntime().wrap(function _callee41$(_context43) {
            while (1) switch (_context43.prev = _context43.next) {
              case 0:
                _context43.next = 2;
                return _awaitAsyncGenerator(e.promise);
              case 2:
                t = _context43.sent;
                return _context43.delegateYield(_asyncGeneratorDelegate(_asyncIterator(t), _awaitAsyncGenerator), "t0", 4);
              case 4:
              case "end":
                return _context43.stop();
            }
          }, _callee41);
        }))()
      };
    }
    function Ei() {
      return _Ei.apply(this, arguments);
    }
    function _Ei() {
      _Ei = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee44() {
        var _len10,
          e,
          _key10,
          t,
          _args46 = arguments;
        return _regeneratorRuntime().wrap(function _callee44$(_context46) {
          while (1) switch (_context46.prev = _context46.next) {
            case 0:
              for (_len10 = _args46.length, e = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
                e[_key10] = _args46[_key10];
              }
              t = en({
                objectMode: !0
              });
              Promise.resolve().then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee43() {
                return _regeneratorRuntime().wrap(function _callee43$(_context45) {
                  while (1) switch (_context45.prev = _context45.next) {
                    case 0:
                      _context45.prev = 0;
                      _context45.next = 3;
                      return Promise.all(e.map( /*#__PURE__*/function () {
                        var _ref45 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee42(e) {
                          var _iteratorAbruptCompletion32, _didIteratorError32, _iteratorError32, _iterator32, _step32, _r54;
                          return _regeneratorRuntime().wrap(function _callee42$(_context44) {
                            while (1) switch (_context44.prev = _context44.next) {
                              case 0:
                                _iteratorAbruptCompletion32 = false;
                                _didIteratorError32 = false;
                                _context44.prev = 2;
                                _iterator32 = _asyncIterator(e);
                              case 4:
                                _context44.next = 6;
                                return _iterator32.next();
                              case 6:
                                if (!(_iteratorAbruptCompletion32 = !(_step32 = _context44.sent).done)) {
                                  _context44.next = 12;
                                  break;
                                }
                                _r54 = _step32.value;
                                t.push(_r54);
                              case 9:
                                _iteratorAbruptCompletion32 = false;
                                _context44.next = 4;
                                break;
                              case 12:
                                _context44.next = 18;
                                break;
                              case 14:
                                _context44.prev = 14;
                                _context44.t0 = _context44["catch"](2);
                                _didIteratorError32 = true;
                                _iteratorError32 = _context44.t0;
                              case 18:
                                _context44.prev = 18;
                                _context44.prev = 19;
                                if (!(_iteratorAbruptCompletion32 && _iterator32.return != null)) {
                                  _context44.next = 23;
                                  break;
                                }
                                _context44.next = 23;
                                return _iterator32.return();
                              case 23:
                                _context44.prev = 23;
                                if (!_didIteratorError32) {
                                  _context44.next = 26;
                                  break;
                                }
                                throw _iteratorError32;
                              case 26:
                                return _context44.finish(23);
                              case 27:
                                return _context44.finish(18);
                              case 28:
                              case "end":
                                return _context44.stop();
                            }
                          }, _callee42, null, [[2, 14, 18, 28], [19,, 23, 27]]);
                        }));
                        return function (_x47) {
                          return _ref45.apply(this, arguments);
                        };
                      }()));
                    case 3:
                      t.end();
                      _context45.next = 9;
                      break;
                    case 6:
                      _context45.prev = 6;
                      _context45.t0 = _context45["catch"](0);
                      t.end(_context45.t0);
                    case 9:
                    case "end":
                      return _context45.stop();
                  }
                }, _callee43, null, [[0, 6]]);
              })));
              return _context46.delegateYield(_asyncGeneratorDelegate(_asyncIterator(t), _awaitAsyncGenerator), "t0", 4);
            case 4:
            case "end":
              return _context46.stop();
          }
        }, _callee44);
      }));
      return _Ei.apply(this, arguments);
    }
    yi.bytes = 0, gi.fromReader = function (e, t) {
      var r = 1;
      var n = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee45() {
        var _yield$_awaitAsyncGen, _t54, _n42;
        return _regeneratorRuntime().wrap(function _callee45$(_context47) {
          while (1) switch (_context47.prev = _context47.next) {
            case 0:
              _context47.prev = 0;
              _context47.next = 3;
              return _awaitAsyncGenerator(e.next(r));
            case 3:
              _yield$_awaitAsyncGen = _context47.sent;
              _t54 = _yield$_awaitAsyncGen.done;
              _n42 = _yield$_awaitAsyncGen.value;
              if (!(!0 === _t54)) {
                _context47.next = 8;
                break;
              }
              return _context47.abrupt("return");
            case 8:
              _context47.t0 = null != _n42;
              if (!_context47.t0) {
                _context47.next = 12;
                break;
              }
              _context47.next = 12;
              return _n42;
            case 12:
              _context47.next = 19;
              break;
            case 14:
              _context47.prev = 14;
              _context47.t1 = _context47["catch"](0);
              if (!("ERR_UNDER_READ" === _context47.t1.code)) {
                _context47.next = 18;
                break;
              }
              return _context47.abrupt("return", {
                done: !0,
                value: null
              });
            case 18:
              throw _context47.t1;
            case 19:
              _context47.prev = 19;
              r = 1;
              return _context47.finish(19);
            case 22:
              _context47.next = 0;
              break;
            case 24:
            case "end":
              return _context47.stop();
          }
        }, _callee45, null, [[0, 14, 19, 22]]);
      }))();
      return gi(_objectSpread(_objectSpread({}, t !== null && t !== void 0 ? t : {}), {}, {
        onLength: function onLength(e) {
          r = e;
        }
      }))(n);
    };
    var bi = function bi() {
        var t;
        for (var _len11 = arguments.length, e = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {
          e[_key11] = arguments[_key11];
        }
        for (; e.length > 0;) t = e.shift()(t);
        return t;
      },
      vi = function vi(e) {
        return null != e && ("function" == typeof e[Symbol.asyncIterator] || "function" == typeof e[Symbol.iterator] || "function" == typeof e.next);
      },
      _i = function _i(e) {
        return null != e && "function" == typeof e.sink && vi(e.source);
      },
      Si = function Si(e) {
        return function (t) {
          var r = e.sink(t);
          if (null != r.then) {
            var _t55 = en({
              objectMode: !0
            });
            r.then(function () {
              _t55.end();
            }, function (e) {
              _t55.end(e);
            });
            var _n43 = /*#__PURE__*/function () {
              var _ref10 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee46() {
                return _regeneratorRuntime().wrap(function _callee46$(_context48) {
                  while (1) switch (_context48.prev = _context48.next) {
                    case 0:
                      return _context48.delegateYield(_asyncGeneratorDelegate(_asyncIterator(e.source), _awaitAsyncGenerator), "t0", 1);
                    case 1:
                      _t55.end();
                    case 2:
                    case "end":
                      return _context48.stop();
                  }
                }, _callee46);
              }));
              return function n() {
                return _ref10.apply(this, arguments);
              };
            }();
            return Ei(_t55, _n43());
          }
          return e.source;
        };
      };
    function Ci(e) {
      if (_i(e)) {
        var _t56 = e;
        e = function e() {
          return _t56.source;
        };
      } else if (vi(e)) {
        var _t57 = e;
        e = function e() {
          return _t57;
        };
      }
      for (var _len12 = arguments.length, t = new Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {
        t[_key12 - 1] = arguments[_key12];
      }
      var r = [e].concat(t);
      if (r.length > 1 && _i(r[r.length - 1]) && (r[r.length - 1] = r[r.length - 1].sink), r.length > 2) for (var _e71 = 1; _e71 < r.length - 1; _e71++) _i(r[_e71]) && (r[_e71] = Si(r[_e71]));
      return bi.apply(void 0, _toConsumableArray(r));
    }
    var Ai = 65535,
      Ii = Boolean((_globalThis$process = globalThis.process) === null || _globalThis$process === void 0 ? void 0 : (_globalThis$process$e = _globalThis$process.env) === null || _globalThis$process$e === void 0 ? void 0 : _globalThis$process$e.DUMP_SESSION_KEYS);
    var Ti = __webpack_require__(512),
      Ri = __webpack_require__(7664),
      ki = __webpack_require__(3294),
      Ni = __webpack_require__(5501);
    var Li = {
        hashSHA256: function hashSHA256(e) {
          return (0, ki.vp)(e);
        },
        getHKDF: function getHKDF(e, t) {
          var r = new Ti.t(ki.mE, t, e).expand(96);
          return [r.subarray(0, 32), r.subarray(32, 64), r.subarray(64, 96)];
        },
        generateX25519KeyPair: function generateX25519KeyPair() {
          var e = Ri.Au();
          return {
            publicKey: e.publicKey,
            privateKey: e.secretKey
          };
        },
        generateX25519KeyPairFromSeed: function generateX25519KeyPairFromSeed(e) {
          var t = Ri._w(e);
          return {
            publicKey: t.publicKey,
            privateKey: t.secretKey
          };
        },
        generateX25519SharedKey: function generateX25519SharedKey(e, t) {
          return Ri.gi(e, t);
        },
        chaCha20Poly1305Encrypt: function chaCha20Poly1305Encrypt(e, t, r, n) {
          return new Ni.OK(n).seal(t, e, r);
        },
        chaCha20Poly1305Decrypt: function chaCha20Poly1305Decrypt(e, t, r, n, i) {
          return new Ni.OK(n).open(t, e, r, i);
        }
      },
      Di = function Di(e) {
        var t = (2, globalThis.Buffer ? globalThis.Buffer.allocUnsafe(2) : new Uint8Array(2));
        return new DataView(t.buffer, t.byteOffset, t.byteLength).setUint16(0, e, !1), t;
      };
    Di.bytes = 2;
    var Pi = function Pi(e) {
      if (e.length < 2) throw RangeError("Could not decode int16BE");
      return e instanceof Uint8Array ? new DataView(e.buffer, e.byteOffset, e.byteLength).getUint16(0, !1) : e.getUint16(0);
    };
    Pi.bytes = 2;
    var Bi = /*#__PURE__*/function (_Error5) {
      _inherits(Bi, _Error5);
      var _super20 = _createSuper(Bi);
      function Bi() {
        var _this90;
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "Unexpected Peer";
        _classCallCheck(this, Bi);
        _this90 = _super20.call(this, e), _this90.code = Bi.code;
        return _this90;
      }
      _createClass(Bi, null, [{
        key: "code",
        get: function get() {
          return "ERR_UNEXPECTED_PEER";
        }
      }]);
      return Bi;
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    var Oi = /*#__PURE__*/function (_Error6) {
      _inherits(Oi, _Error6);
      var _super21 = _createSuper(Oi);
      function Oi() {
        var _this91;
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "Invalid crypto exchange";
        _classCallCheck(this, Oi);
        _this91 = _super21.call(this, e), _this91.code = Oi.code;
        return _this91;
      }
      _createClass(Oi, null, [{
        key: "code",
        get: function get() {
          return "ERR_INVALID_CRYPTO_EXCHANGE";
        }
      }]);
      return Oi;
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    var xi = /*#__PURE__*/function (_Error7) {
      _inherits(xi, _Error7);
      var _super22 = _createSuper(xi);
      function xi() {
        var _this92;
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "Invalid crypto transmission";
        _classCallCheck(this, xi);
        _this92 = _super22.call(this, e), _this92.code = xi.code;
        return _this92;
      }
      _createClass(xi, null, [{
        key: "code",
        get: function get() {
          return "ERR_INVALID_CRYPTO_TRANSMISSION";
        }
      }]);
      return xi;
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    var Ui = __webpack_require__(1408),
      Mi = __webpack_require__(593),
      Vi = __webpack_require__(1173),
      Ki = __webpack_require__(3155),
      Fi = __webpack_require__(9693);
    Fi._configure(), Ui._configure(Mi), Vi._configure(Ki);
    var qi = ["uint64", "int64", "sint64", "fixed64", "sfixed64"];
    function ji(e, t) {
      var r = function (e) {
        return function (e) {
          var _loop2 = function _loop2() {
            var t = _qi[_i23];
            if (null == e[t]) return "continue";
            var r = e[t];
            e[t] = function () {
              return BigInt(r.call(this).toString());
            };
          };
          for (var _i23 = 0, _qi = qi; _i23 < _qi.length; _i23++) {
            var _ret2 = _loop2();
            if (_ret2 === "continue") continue;
          }
          return e;
        }(new Ui(e));
      }(e instanceof Uint8Array ? e : e.subarray());
      return t.decode(r);
    }
    function Hi(e, t) {
      var r = function (e) {
        var _loop3 = function _loop3() {
          var t = _qi2[_i24];
          if (null == e[t]) return "continue";
          var r = e[t];
          e[t] = function (e) {
            return r.call(this, e.toString());
          };
        };
        for (var _i24 = 0, _qi2 = qi; _i24 < _qi2.length; _i24++) {
          var _ret3 = _loop3();
          if (_ret3 === "continue") continue;
        }
        return e;
      }(Vi.create());
      return t.encode(e, r, {
        lengthDelimited: !1
      }), r.finish();
    }
    var zi, $i, Gi, Wi, Yi, Qi;
    function Xi(e, t, r, n) {
      return {
        name: e,
        type: t,
        encode: r,
        decode: n
      };
    }
    function Zi(e) {
      function t(t) {
        if (null == e[t.toString()]) throw new Error("Invalid enum value");
        return e[t];
      }
      return Xi("enum", zi.VARINT, function (e, r) {
        var n = t(e);
        r.int32(n);
      }, function (e) {
        return t(e.int32());
      });
    }
    function Ji(e, t) {
      return Xi("message", zi.LENGTH_DELIMITED, e, t);
    }
    (Qi = zi || (zi = {}))[Qi.VARINT = 0] = "VARINT", Qi[Qi.BIT64 = 1] = "BIT64", Qi[Qi.LENGTH_DELIMITED = 2] = "LENGTH_DELIMITED", Qi[Qi.START_GROUP = 3] = "START_GROUP", Qi[Qi.END_GROUP = 4] = "END_GROUP", Qi[Qi.BIT32 = 5] = "BIT32", function (e) {
      e.RSA = "RSA", e.Ed25519 = "Ed25519", e.Secp256k1 = "Secp256k1";
    }($i || ($i = {})), function (e) {
      e[e.RSA = 0] = "RSA", e[e.Ed25519 = 1] = "Ed25519", e[e.Secp256k1 = 2] = "Secp256k1";
    }(Gi || (Gi = {})), function (e) {
      e.codec = function () {
        return Zi(Gi);
      };
    }($i || ($i = {})), function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = Ji(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          !1 !== r.lengthDelimited && t.fork(), null != e.Type && (t.uint32(8), $i.codec().encode(e.Type, t)), null != e.Data && (t.uint32(18), t.bytes(e.Data)), !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {},
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t58 = e.uint32();
            switch (_t58 >>> 3) {
              case 1:
                r.Type = $i.codec().decode(e);
                break;
              case 2:
                r.Data = e.bytes();
                break;
              default:
                e.skipType(7 & _t58);
            }
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Hi(t, e.codec());
      }, e.decode = function (t) {
        return ji(t, e.codec());
      };
    }(Wi || (Wi = {})), function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = Ji(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          !1 !== r.lengthDelimited && t.fork(), null != e.Type && (t.uint32(8), $i.codec().encode(e.Type, t)), null != e.Data && (t.uint32(18), t.bytes(e.Data)), !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {},
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t59 = e.uint32();
            switch (_t59 >>> 3) {
              case 1:
                r.Type = $i.codec().decode(e);
                break;
              case 2:
                r.Data = e.bytes();
                break;
              default:
                e.skipType(7 & _t59);
            }
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Hi(t, e.codec());
      }, e.decode = function (t) {
        return ji(t, e.codec());
      };
    }(Yi || (Yi = {})), __webpack_require__(3068), __webpack_require__(7450);
    var es = __webpack_require__(3832);
    var ts = /*#__PURE__*/function (_Error8) {
      _inherits(ts, _Error8);
      var _super23 = _createSuper(ts);
      function ts() {
        var _this93;
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "The operation was aborted";
        _classCallCheck(this, ts);
        _this93 = _super23.call(this, e), _this93.code = ts.code, _this93.type = ts.type;
        return _this93;
      }
      _createClass(ts, null, [{
        key: "code",
        get: function get() {
          return "ABORT_ERR";
        }
      }, {
        key: "type",
        get: function get() {
          return "aborted";
        }
      }]);
      return ts;
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    var rs = /*#__PURE__*/function (_Error9) {
      _inherits(rs, _Error9);
      var _super24 = _createSuper(rs);
      function rs(e, t, r) {
        var _r$name;
        var _this94;
        _classCallCheck(this, rs);
        _this94 = _super24.call(this, e), _this94.code = t, _this94.name = (_r$name = r === null || r === void 0 ? void 0 : r.name) !== null && _r$name !== void 0 ? _r$name : "CodeError", _this94.props = r !== null && r !== void 0 ? r : {};
        return _this94;
      }
      return _createClass(rs);
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    var ns = {
      get: function get() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : globalThis;
        var t = e.crypto;
        if (null == t || null == t.subtle) throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"), {
          code: "ERR_MISSING_WEB_CRYPTO"
        });
        return t;
      }
    };
    var is = __webpack_require__(7116);
    function ss(e, t) {
      var r = Uint8Array.from(e.abs().toByteArray());
      if (r = 0 === r[0] ? r.subarray(1) : r, null != t) {
        if (r.length > t) throw new Error("byte array longer than desired length");
        r = Bt([new Uint8Array(t - r.length), r]);
      }
      return St(r, "base64url");
    }
    function os(e) {
      var t = function (e, t) {
        var r = Pt(e, "base64urlpad");
        return r;
      }(e);
      return new es.jsbn.BigInteger(St(t, "base16"), 16);
    }
    __webpack_require__(5764);
    function as(e) {
      var _e$algorithm, _e$keyLength, _e$nonceLength, _e$digest, _e$saltLength, _e$iterations;
      var t = (_e$algorithm = e === null || e === void 0 ? void 0 : e.algorithm) !== null && _e$algorithm !== void 0 ? _e$algorithm : "AES-GCM";
      var r = (_e$keyLength = e === null || e === void 0 ? void 0 : e.keyLength) !== null && _e$keyLength !== void 0 ? _e$keyLength : 16;
      var n = (_e$nonceLength = e === null || e === void 0 ? void 0 : e.nonceLength) !== null && _e$nonceLength !== void 0 ? _e$nonceLength : 12,
        i = (_e$digest = e === null || e === void 0 ? void 0 : e.digest) !== null && _e$digest !== void 0 ? _e$digest : "SHA-256",
        s = (_e$saltLength = e === null || e === void 0 ? void 0 : e.saltLength) !== null && _e$saltLength !== void 0 ? _e$saltLength : 16,
        o = (_e$iterations = e === null || e === void 0 ? void 0 : e.iterations) !== null && _e$iterations !== void 0 ? _e$iterations : 32767,
        a = ns.get();
      return r *= 8, {
        encrypt: function () {
          var _encrypt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee47(e, c) {
            var l, u, h, d, p, f, y;
            return _regeneratorRuntime().wrap(function _callee47$(_context49) {
              while (1) switch (_context49.prev = _context49.next) {
                case 0:
                  l = a.getRandomValues(new Uint8Array(s)), u = a.getRandomValues(new Uint8Array(n)), h = {
                    name: t,
                    iv: u
                  };
                  "string" == typeof c && (c = Pt(c));
                  d = {
                    name: "PBKDF2",
                    salt: l,
                    iterations: o,
                    hash: {
                      name: i
                    }
                  };
                  _context49.next = 5;
                  return a.subtle.importKey("raw", c, {
                    name: "PBKDF2"
                  }, !1, ["deriveKey", "deriveBits"]);
                case 5:
                  p = _context49.sent;
                  _context49.next = 8;
                  return a.subtle.deriveKey(d, p, {
                    name: t,
                    length: r
                  }, !0, ["encrypt"]);
                case 8:
                  f = _context49.sent;
                  _context49.next = 11;
                  return a.subtle.encrypt(h, f, e);
                case 11:
                  y = _context49.sent;
                  return _context49.abrupt("return", Bt([l, h.iv, new Uint8Array(y)]));
                case 13:
                case "end":
                  return _context49.stop();
              }
            }, _callee47);
          }));
          function encrypt(_x48, _x49) {
            return _encrypt.apply(this, arguments);
          }
          return encrypt;
        }(),
        decrypt: function () {
          var _decrypt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee48(e, c) {
            var l, u, h, d, p, f, y, g;
            return _regeneratorRuntime().wrap(function _callee48$(_context50) {
              while (1) switch (_context50.prev = _context50.next) {
                case 0:
                  l = e.subarray(0, s), u = e.subarray(s, s + n), h = e.subarray(s + n), d = {
                    name: t,
                    iv: u
                  };
                  "string" == typeof c && (c = Pt(c));
                  p = {
                    name: "PBKDF2",
                    salt: l,
                    iterations: o,
                    hash: {
                      name: i
                    }
                  };
                  _context50.next = 5;
                  return a.subtle.importKey("raw", c, {
                    name: "PBKDF2"
                  }, !1, ["deriveKey", "deriveBits"]);
                case 5:
                  f = _context50.sent;
                  _context50.next = 8;
                  return a.subtle.deriveKey(p, f, {
                    name: t,
                    length: r
                  }, !0, ["decrypt"]);
                case 8:
                  y = _context50.sent;
                  _context50.next = 11;
                  return a.subtle.decrypt(d, y, h);
                case 11:
                  g = _context50.sent;
                  return _context50.abrupt("return", new Uint8Array(g));
                case 13:
                case "end":
                  return _context50.stop();
              }
            }, _callee48);
          }));
          function decrypt(_x50, _x51) {
            return _decrypt.apply(this, arguments);
          }
          return decrypt;
        }()
      };
    }
    Object.keys({
      "P-256": 256,
      "P-384": 384,
      "P-521": 521
    }).join(" / "), __webpack_require__(3219);
    var cs = __webpack_require__(5856),
      ls = __webpack_require__.t(cs, 2);
    var us = BigInt(0),
      hs = BigInt(1),
      ds = BigInt(2),
      ps = BigInt(3),
      fs = BigInt(8),
      ys = Object.freeze({
        a: us,
        b: BigInt(7),
        P: BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),
        n: BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),
        h: hs,
        Gx: BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),
        Gy: BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),
        beta: BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")
      }),
      gs = function gs(e, t) {
        return (e + t / ds) / t;
      },
      ms = {
        beta: BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),
        splitScalar: function splitScalar(e) {
          var t = ys.n,
            r = BigInt("0x3086d221a7d46bcde86c90e49284eb15"),
            n = -hs * BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),
            i = BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),
            s = r,
            o = BigInt("0x100000000000000000000000000000000"),
            a = gs(s * e, t),
            c = gs(-n * e, t);
          var l = $s(e - a * r - c * i, t),
            u = $s(-a * n - c * s, t);
          var h = l > o,
            d = u > o;
          if (h && (l = t - l), d && (u = t - u), l > o || u > o) throw new Error("splitScalarEndo: Endomorphism failed, k=" + e);
          return {
            k1neg: h,
            k1: l,
            k2neg: d,
            k2: u
          };
        }
      },
      ws = 32,
      Es = 32,
      bs = 32,
      vs = ws + 1,
      _s = 2 * ws + 1;
    function Ss(e) {
      var t = ys.a,
        r = ys.b,
        n = $s(e * e),
        i = $s(n * e);
      return $s(i + t * e + r);
    }
    var Cs = ys.a === us;
    var As = /*#__PURE__*/function (_Error10) {
      _inherits(As, _Error10);
      var _super25 = _createSuper(As);
      function As(e) {
        _classCallCheck(this, As);
        return _super25.call(this, e);
      }
      return _createClass(As);
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    function Is(e) {
      if (!(e instanceof Ts)) throw new TypeError("JacobianPoint expected");
    }
    var Ts = /*#__PURE__*/function () {
      function Ts(e, t, r) {
        _classCallCheck(this, Ts);
        this.x = e, this.y = t, this.z = r;
      }
      _createClass(Ts, [{
        key: "equals",
        value: function equals(e) {
          Is(e);
          var t = this.x,
            r = this.y,
            n = this.z,
            i = e.x,
            s = e.y,
            o = e.z,
            a = $s(n * n),
            c = $s(o * o),
            l = $s(t * c),
            u = $s(i * a),
            h = $s($s(r * o) * c),
            d = $s($s(s * n) * a);
          return l === u && h === d;
        }
      }, {
        key: "negate",
        value: function negate() {
          return new Ts(this.x, $s(-this.y), this.z);
        }
      }, {
        key: "double",
        value: function double() {
          var e = this.x,
            t = this.y,
            r = this.z,
            n = $s(e * e),
            i = $s(t * t),
            s = $s(i * i),
            o = e + i,
            a = $s(ds * ($s(o * o) - n - s)),
            c = $s(ps * n),
            l = $s(c * c),
            u = $s(l - ds * a),
            h = $s(c * (a - u) - fs * s),
            d = $s(ds * t * r);
          return new Ts(u, h, d);
        }
      }, {
        key: "add",
        value: function add(e) {
          Is(e);
          var t = this.x,
            r = this.y,
            n = this.z,
            i = e.x,
            s = e.y,
            o = e.z;
          if (i === us || s === us) return this;
          if (t === us || r === us) return e;
          var a = $s(n * n),
            c = $s(o * o),
            l = $s(t * c),
            u = $s(i * a),
            h = $s($s(r * o) * c),
            d = $s($s(s * n) * a),
            p = $s(u - l),
            f = $s(d - h);
          if (p === us) return f === us ? this.double() : Ts.ZERO;
          var y = $s(p * p),
            g = $s(p * y),
            m = $s(l * y),
            w = $s(f * f - g - ds * m),
            E = $s(f * (m - w) - h * g),
            b = $s(n * o * p);
          return new Ts(w, E, b);
        }
      }, {
        key: "subtract",
        value: function subtract(e) {
          return this.add(e.negate());
        }
      }, {
        key: "multiplyUnsafe",
        value: function multiplyUnsafe(e) {
          var t = Ts.ZERO;
          if ("bigint" == typeof e && e === us) return t;
          var r = zs(e);
          if (r === hs) return this;
          if (!Cs) {
            var _e72 = t,
              _n44 = this;
            for (; r > us;) r & hs && (_e72 = _e72.add(_n44)), _n44 = _n44.double(), r >>= hs;
            return _e72;
          }
          var _ms$splitScalar = ms.splitScalar(r),
            n = _ms$splitScalar.k1neg,
            i = _ms$splitScalar.k1,
            s = _ms$splitScalar.k2neg,
            o = _ms$splitScalar.k2,
            a = t,
            c = t,
            l = this;
          for (; i > us || o > us;) i & hs && (a = a.add(l)), o & hs && (c = c.add(l)), l = l.double(), i >>= hs, o >>= hs;
          return n && (a = a.negate()), s && (c = c.negate()), c = new Ts($s(c.x * ms.beta), c.y, c.z), a.add(c);
        }
      }, {
        key: "precomputeWindow",
        value: function precomputeWindow(e) {
          var t = Cs ? 128 / e + 1 : 256 / e + 1,
            r = [];
          var n = this,
            i = n;
          for (var _s14 = 0; _s14 < t; _s14++) {
            i = n, r.push(i);
            for (var _t60 = 1; _t60 < Math.pow(2, e - 1); _t60++) i = i.add(n), r.push(i);
            n = i.double();
          }
          return r;
        }
      }, {
        key: "wNAF",
        value: function wNAF(e, t) {
          !t && this.equals(Ts.BASE) && (t = Ns.BASE);
          var r = t && t._WINDOW_SIZE || 1;
          if (256 % r) throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");
          var n = t && ks.get(t);
          n || (n = this.precomputeWindow(r), t && 1 !== r && (n = Ts.normalizeZ(n), ks.set(t, n)));
          var i = Ts.ZERO,
            s = Ts.BASE;
          var o = 1 + (Cs ? 128 / r : 256 / r),
            a = Math.pow(2, r - 1),
            c = BigInt(Math.pow(2, r) - 1),
            l = Math.pow(2, r),
            u = BigInt(r);
          for (var _t61 = 0; _t61 < o; _t61++) {
            var _r55 = _t61 * a;
            var _o9 = Number(e & c);
            e >>= u, _o9 > a && (_o9 -= l, e += hs);
            var _h3 = _r55,
              _d3 = _r55 + Math.abs(_o9) - 1,
              _p2 = _t61 % 2 != 0,
              _f2 = _o9 < 0;
            0 === _o9 ? s = s.add(Rs(_p2, n[_h3])) : i = i.add(Rs(_f2, n[_d3]));
          }
          return {
            p: i,
            f: s
          };
        }
      }, {
        key: "multiply",
        value: function multiply(e, t) {
          var r,
            n,
            i = zs(e);
          if (Cs) {
            var _ms$splitScalar2 = ms.splitScalar(i),
              _e73 = _ms$splitScalar2.k1neg,
              _s15 = _ms$splitScalar2.k1,
              _o10 = _ms$splitScalar2.k2neg,
              _a5 = _ms$splitScalar2.k2;
            var _this$wNAF = this.wNAF(_s15, t),
              _c4 = _this$wNAF.p,
              _l3 = _this$wNAF.f,
              _this$wNAF2 = this.wNAF(_a5, t),
              _u2 = _this$wNAF2.p,
              _h4 = _this$wNAF2.f;
            _c4 = Rs(_e73, _c4), _u2 = Rs(_o10, _u2), _u2 = new Ts($s(_u2.x * ms.beta), _u2.y, _u2.z), r = _c4.add(_u2), n = _l3.add(_h4);
          } else {
            var _this$wNAF3 = this.wNAF(i, t),
              _e74 = _this$wNAF3.p,
              _s16 = _this$wNAF3.f;
            r = _e74, n = _s16;
          }
          return Ts.normalizeZ([r, n])[0];
        }
      }, {
        key: "toAffine",
        value: function toAffine(e) {
          var t = this.x,
            r = this.y,
            n = this.z,
            i = this.equals(Ts.ZERO);
          null == e && (e = i ? fs : Ws(n));
          var s = e,
            o = $s(s * s),
            a = $s(o * s),
            c = $s(t * o),
            l = $s(r * a),
            u = $s(n * s);
          if (i) return Ns.ZERO;
          if (u !== hs) throw new Error("invZ was invalid");
          return new Ns(c, l);
        }
      }], [{
        key: "fromAffine",
        value: function fromAffine(e) {
          if (!(e instanceof Ns)) throw new TypeError("JacobianPoint#fromAffine: expected Point");
          return e.equals(Ns.ZERO) ? Ts.ZERO : new Ts(e.x, e.y, hs);
        }
      }, {
        key: "toAffineBatch",
        value: function toAffineBatch(e) {
          var t = function (e) {
            var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ys.P;
            var r = new Array(e.length),
              n = Ws(e.reduce(function (e, n, i) {
                return n === us ? e : (r[i] = e, $s(e * n, t));
              }, hs), t);
            return e.reduceRight(function (e, n, i) {
              return n === us ? e : (r[i] = $s(e * r[i], t), $s(e * n, t));
            }, n), r;
          }(e.map(function (e) {
            return e.z;
          }));
          return e.map(function (e, r) {
            return e.toAffine(t[r]);
          });
        }
      }, {
        key: "normalizeZ",
        value: function normalizeZ(e) {
          return Ts.toAffineBatch(e).map(Ts.fromAffine);
        }
      }]);
      return Ts;
    }();
    function Rs(e, t) {
      var r = t.negate();
      return e ? r : t;
    }
    Ts.BASE = new Ts(ys.Gx, ys.Gy, hs), Ts.ZERO = new Ts(us, hs, us);
    var ks = new WeakMap();
    var Ns = /*#__PURE__*/function () {
      function Ns(e, t) {
        _classCallCheck(this, Ns);
        this.x = e, this.y = t;
      }
      _createClass(Ns, [{
        key: "_setWindowSize",
        value: function _setWindowSize(e) {
          this._WINDOW_SIZE = e, ks.delete(this);
        }
      }, {
        key: "hasEvenY",
        value: function hasEvenY() {
          return this.y % ds === us;
        }
      }, {
        key: "toRawBytes",
        value: function toRawBytes() {
          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
          return qs(this.toHex(e));
        }
      }, {
        key: "toHex",
        value: function toHex() {
          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
          var t = Ms(this.x);
          return e ? "".concat(this.hasEvenY() ? "02" : "03").concat(t) : "04".concat(t).concat(Ms(this.y));
        }
      }, {
        key: "toHexX",
        value: function toHexX() {
          return this.toHex(!0).slice(2);
        }
      }, {
        key: "toRawX",
        value: function toRawX() {
          return this.toRawBytes(!0).slice(1);
        }
      }, {
        key: "assertValidity",
        value: function assertValidity() {
          var e = "Point is not on elliptic curve",
            t = this.x,
            r = this.y;
          if (!eo(t) || !eo(r)) throw new Error(e);
          var n = $s(r * r);
          if ($s(n - Ss(t)) !== us) throw new Error(e);
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return this.x === e.x && this.y === e.y;
        }
      }, {
        key: "negate",
        value: function negate() {
          return new Ns(this.x, $s(-this.y));
        }
      }, {
        key: "double",
        value: function double() {
          return Ts.fromAffine(this).double().toAffine();
        }
      }, {
        key: "add",
        value: function add(e) {
          return Ts.fromAffine(this).add(Ts.fromAffine(e)).toAffine();
        }
      }, {
        key: "subtract",
        value: function subtract(e) {
          return this.add(e.negate());
        }
      }, {
        key: "multiply",
        value: function multiply(e) {
          return Ts.fromAffine(this).multiply(e, this).toAffine();
        }
      }, {
        key: "multiplyAndAddUnsafe",
        value: function multiplyAndAddUnsafe(e, t, r) {
          var n = Ts.fromAffine(this),
            i = t === us || t === hs || this !== Ns.BASE ? n.multiplyUnsafe(t) : n.multiply(t),
            s = Ts.fromAffine(e).multiplyUnsafe(r),
            o = i.add(s);
          return o.equals(Ts.ZERO) ? void 0 : o.toAffine();
        }
      }], [{
        key: "fromCompressedHex",
        value: function fromCompressedHex(e) {
          var t = 32 === e.length,
            r = js(t ? e : e.subarray(1));
          if (!eo(r)) throw new Error("Point is not on curve");
          var n = function (e) {
            var t = ys.P,
              r = BigInt(6),
              n = BigInt(11),
              i = BigInt(22),
              s = BigInt(23),
              o = BigInt(44),
              a = BigInt(88),
              c = e * e * e % t,
              l = c * c * e % t,
              u = Gs(l, ps) * l % t,
              h = Gs(u, ps) * l % t,
              d = Gs(h, ds) * c % t,
              p = Gs(d, n) * d % t,
              f = Gs(p, i) * p % t,
              y = Gs(f, o) * f % t,
              g = Gs(y, a) * y % t,
              m = Gs(g, o) * f % t,
              w = Gs(m, ps) * l % t,
              E = Gs(w, s) * p % t,
              b = Gs(E, r) * c % t,
              v = Gs(b, ds);
            if (v * v % t !== e) throw new Error("Cannot find square root");
            return v;
          }(Ss(r));
          var i = (n & hs) === hs;
          t ? i && (n = $s(-n)) : 1 == (1 & e[0]) !== i && (n = $s(-n));
          var s = new Ns(r, n);
          return s.assertValidity(), s;
        }
      }, {
        key: "fromUncompressedHex",
        value: function fromUncompressedHex(e) {
          var t = js(e.subarray(1, ws + 1)),
            r = js(e.subarray(ws + 1, 2 * ws + 1)),
            n = new Ns(t, r);
          return n.assertValidity(), n;
        }
      }, {
        key: "fromHex",
        value: function fromHex(e) {
          var t = Hs(e),
            r = t.length,
            n = t[0];
          if (r === ws) return this.fromCompressedHex(t);
          if (r === vs && (2 === n || 3 === n)) return this.fromCompressedHex(t);
          if (r === _s && 4 === n) return this.fromUncompressedHex(t);
          throw new Error("Point.fromHex: received invalid point. Expected 32-".concat(vs, " compressed bytes or ").concat(_s, " uncompressed bytes, not ").concat(r));
        }
      }, {
        key: "fromPrivateKey",
        value: function fromPrivateKey(e) {
          return Ns.BASE.multiply(ro(e));
        }
      }, {
        key: "fromSignature",
        value: function fromSignature(e, t, r) {
          var _no = no(t),
            n = _no.r,
            i = _no.s;
          if (![0, 1, 2, 3].includes(r)) throw new Error("Cannot recover: invalid recovery bit");
          var s = Ys(Hs(e)),
            o = ys.n,
            a = 2 === r || 3 === r ? n + o : n,
            c = Ws(a, o),
            l = $s(-s * c, o),
            u = $s(i * c, o),
            h = 1 & r ? "03" : "02",
            d = Ns.fromHex(h + Ms(a)),
            p = Ns.BASE.multiplyAndAddUnsafe(d, l, u);
          if (!p) throw new Error("Cannot recover signature: point at infinify");
          return p.assertValidity(), p;
        }
      }]);
      return Ns;
    }();
    function Ls(e) {
      return Number.parseInt(e[0], 16) >= 8 ? "00" + e : e;
    }
    function Ds(e) {
      if (e.length < 2 || 2 !== e[0]) throw new Error("Invalid signature integer tag: ".concat(xs(e)));
      var t = e[1],
        r = e.subarray(2, t + 2);
      if (!t || r.length !== t) throw new Error("Invalid signature integer: wrong length");
      if (0 === r[0] && r[1] <= 127) throw new Error("Invalid signature integer: trailing length");
      return {
        data: js(r),
        left: e.subarray(t + 2)
      };
    }
    Ns.BASE = new Ns(ys.Gx, ys.Gy), Ns.ZERO = new Ns(us, us);
    var Ps = /*#__PURE__*/function () {
      function Ps(e, t) {
        _classCallCheck(this, Ps);
        this.r = e, this.s = t, this.assertValidity();
      }
      _createClass(Ps, [{
        key: "assertValidity",
        value: function assertValidity() {
          var e = this.r,
            t = this.s;
          if (!Js(e)) throw new Error("Invalid Signature: r must be 0 < r < n");
          if (!Js(t)) throw new Error("Invalid Signature: s must be 0 < s < n");
        }
      }, {
        key: "hasHighS",
        value: function hasHighS() {
          var e = ys.n >> hs;
          return this.s > e;
        }
      }, {
        key: "normalizeS",
        value: function normalizeS() {
          return this.hasHighS() ? new Ps(this.r, $s(-this.s, ys.n)) : this;
        }
      }, {
        key: "toDERRawBytes",
        value: function toDERRawBytes() {
          return qs(this.toDERHex());
        }
      }, {
        key: "toDERHex",
        value: function toDERHex() {
          var e = Ls(Ks(this.s)),
            t = Ls(Ks(this.r)),
            r = e.length / 2,
            n = t.length / 2,
            i = Ks(r),
            s = Ks(n);
          return "30".concat(Ks(n + r + 4), "02").concat(s).concat(t, "02").concat(i).concat(e);
        }
      }, {
        key: "toRawBytes",
        value: function toRawBytes() {
          return this.toDERRawBytes();
        }
      }, {
        key: "toHex",
        value: function toHex() {
          return this.toDERHex();
        }
      }, {
        key: "toCompactRawBytes",
        value: function toCompactRawBytes() {
          return qs(this.toCompactHex());
        }
      }, {
        key: "toCompactHex",
        value: function toCompactHex() {
          return Ms(this.r) + Ms(this.s);
        }
      }], [{
        key: "fromCompact",
        value: function fromCompact(e) {
          var t = e instanceof Uint8Array,
            r = "Signature.fromCompact";
          if ("string" != typeof e && !t) throw new TypeError("".concat(r, ": Expected string or Uint8Array"));
          var n = t ? xs(e) : e;
          if (128 !== n.length) throw new Error("".concat(r, ": Expected 64-byte hex"));
          return new Ps(Fs(n.slice(0, 64)), Fs(n.slice(64, 128)));
        }
      }, {
        key: "fromDER",
        value: function fromDER(e) {
          var t = e instanceof Uint8Array;
          if ("string" != typeof e && !t) throw new TypeError("Signature.fromDER: Expected string or Uint8Array");
          var _ref46 = function (e) {
              if (e.length < 2 || 48 != e[0]) throw new Error("Invalid signature tag: ".concat(xs(e)));
              if (e[1] !== e.length - 2) throw new Error("Invalid signature: incorrect length");
              var _Ds = Ds(e.subarray(2)),
                t = _Ds.data,
                r = _Ds.left,
                _Ds2 = Ds(r),
                n = _Ds2.data,
                i = _Ds2.left;
              if (i.length) throw new Error("Invalid signature: left bytes after parsing: ".concat(xs(i)));
              return {
                r: t,
                s: n
              };
            }(t ? e : qs(e)),
            r = _ref46.r,
            n = _ref46.s;
          return new Ps(r, n);
        }
      }, {
        key: "fromHex",
        value: function fromHex(e) {
          return this.fromDER(e);
        }
      }]);
      return Ps;
    }();
    function Bs() {
      for (var _len13 = arguments.length, e = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {
        e[_key13] = arguments[_key13];
      }
      if (!e.every(function (e) {
        return e instanceof Uint8Array;
      })) throw new Error("Uint8Array list expected");
      if (1 === e.length) return e[0];
      var t = e.reduce(function (e, t) {
          return e + t.length;
        }, 0),
        r = new Uint8Array(t);
      for (var _t62 = 0, _n45 = 0; _t62 < e.length; _t62++) {
        var _i25 = e[_t62];
        r.set(_i25, _n45), _n45 += _i25.length;
      }
      return r;
    }
    var Os = Array.from({
      length: 256
    }, function (e, t) {
      return t.toString(16).padStart(2, "0");
    });
    function xs(e) {
      if (!(e instanceof Uint8Array)) throw new Error("Expected Uint8Array");
      var t = "";
      for (var _r56 = 0; _r56 < e.length; _r56++) t += Os[e[_r56]];
      return t;
    }
    var Us = BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");
    function Ms(e) {
      if ("bigint" != typeof e) throw new Error("Expected bigint");
      if (!(us <= e && e < Us)) throw new Error("Expected number 0 <= n < 2^256");
      return e.toString(16).padStart(64, "0");
    }
    function Vs(e) {
      var t = qs(Ms(e));
      if (32 !== t.length) throw new Error("Error: expected 32 bytes");
      return t;
    }
    function Ks(e) {
      var t = e.toString(16);
      return 1 & t.length ? "0".concat(t) : t;
    }
    function Fs(e) {
      if ("string" != typeof e) throw new TypeError("hexToNumber: expected string, got " + _typeof(e));
      return BigInt("0x".concat(e));
    }
    function qs(e) {
      if ("string" != typeof e) throw new TypeError("hexToBytes: expected string, got " + _typeof(e));
      if (e.length % 2) throw new Error("hexToBytes: received invalid unpadded hex" + e.length);
      var t = new Uint8Array(e.length / 2);
      for (var _r57 = 0; _r57 < t.length; _r57++) {
        var _n46 = 2 * _r57,
          _i26 = e.slice(_n46, _n46 + 2),
          _s17 = Number.parseInt(_i26, 16);
        if (Number.isNaN(_s17) || _s17 < 0) throw new Error("Invalid byte sequence");
        t[_r57] = _s17;
      }
      return t;
    }
    function js(e) {
      return Fs(xs(e));
    }
    function Hs(e) {
      return e instanceof Uint8Array ? Uint8Array.from(e) : qs(e);
    }
    function zs(e) {
      if ("number" == typeof e && Number.isSafeInteger(e) && e > 0) return BigInt(e);
      if ("bigint" == typeof e && Js(e)) return e;
      throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n");
    }
    function $s(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ys.P;
      var r = e % t;
      return r >= us ? r : t + r;
    }
    function Gs(e, t) {
      var r = ys.P;
      var n = e;
      for (; t-- > us;) n *= n, n %= r;
      return n;
    }
    function Ws(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ys.P;
      if (e === us || t <= us) throw new Error("invert: expected positive integers, got n=".concat(e, " mod=").concat(t));
      var r = $s(e, t),
        n = t,
        i = us,
        s = hs,
        o = hs,
        a = us;
      for (; r !== us;) {
        var _e75 = n / r,
          _t63 = n % r,
          _c5 = i - o * _e75,
          _l4 = s - a * _e75;
        n = r, r = _t63, i = o, s = a, o = _c5, a = _l4;
      }
      if (n !== hs) throw new Error("invert: does not exist");
      return $s(i, t);
    }
    function Ys(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
      var r = function (e) {
        var t = 8 * e.length - 8 * Es,
          r = js(e);
        return t > 0 ? r >> BigInt(t) : r;
      }(e);
      if (t) return r;
      var n = ys.n;
      return r >= n ? r - n : r;
    }
    var Qs, Xs;
    var Zs = /*#__PURE__*/function () {
      function Zs(e, t) {
        _classCallCheck(this, Zs);
        if (this.hashLen = e, this.qByteLen = t, "number" != typeof e || e < 2) throw new Error("hashLen must be a number");
        if ("number" != typeof t || t < 2) throw new Error("qByteLen must be a number");
        this.v = new Uint8Array(e).fill(1), this.k = new Uint8Array(e).fill(0), this.counter = 0;
      }
      _createClass(Zs, [{
        key: "hmac",
        value: function hmac() {
          for (var _len14 = arguments.length, e = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {
            e[_key14] = arguments[_key14];
          }
          return ho.hmacSha256.apply(ho, [this.k].concat(e));
        }
      }, {
        key: "hmacSync",
        value: function hmacSync() {
          for (var _len15 = arguments.length, e = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {
            e[_key15] = arguments[_key15];
          }
          return Xs.apply(void 0, [this.k].concat(e));
        }
      }, {
        key: "checkSync",
        value: function checkSync() {
          if ("function" != typeof Xs) throw new As("hmacSha256Sync needs to be set");
        }
      }, {
        key: "incr",
        value: function incr() {
          if (this.counter >= 1e3) throw new Error("Tried 1,000 k values for sign(), all were invalid");
          this.counter += 1;
        }
      }, {
        key: "reseed",
        value: function () {
          var _reseed = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee49() {
            var e,
              _args51 = arguments;
            return _regeneratorRuntime().wrap(function _callee49$(_context51) {
              while (1) switch (_context51.prev = _context51.next) {
                case 0:
                  e = _args51.length > 0 && _args51[0] !== undefined ? _args51[0] : new Uint8Array();
                  _context51.next = 3;
                  return this.hmac(this.v, Uint8Array.from([0]), e);
                case 3:
                  this.k = _context51.sent;
                  _context51.next = 6;
                  return this.hmac(this.v);
                case 6:
                  this.v = _context51.sent;
                  _context51.t0 = 0 !== e.length;
                  if (!_context51.t0) {
                    _context51.next = 15;
                    break;
                  }
                  _context51.next = 11;
                  return this.hmac(this.v, Uint8Array.from([1]), e);
                case 11:
                  this.k = _context51.sent;
                  _context51.next = 14;
                  return this.hmac(this.v);
                case 14:
                  this.v = _context51.sent;
                case 15:
                case "end":
                  return _context51.stop();
              }
            }, _callee49, this);
          }));
          function reseed() {
            return _reseed.apply(this, arguments);
          }
          return reseed;
        }()
      }, {
        key: "reseedSync",
        value: function reseedSync() {
          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Uint8Array();
          this.checkSync(), this.k = this.hmacSync(this.v, Uint8Array.from([0]), e), this.v = this.hmacSync(this.v), 0 !== e.length && (this.k = this.hmacSync(this.v, Uint8Array.from([1]), e), this.v = this.hmacSync(this.v));
        }
      }, {
        key: "generate",
        value: function () {
          var _generate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee50() {
            var e, t, _r58;
            return _regeneratorRuntime().wrap(function _callee50$(_context52) {
              while (1) switch (_context52.prev = _context52.next) {
                case 0:
                  this.incr();
                  e = 0;
                  t = [];
                case 3:
                  if (!(e < this.qByteLen)) {
                    _context52.next = 11;
                    break;
                  }
                  _context52.next = 6;
                  return this.hmac(this.v);
                case 6:
                  this.v = _context52.sent;
                  _r58 = this.v.slice();
                  t.push(_r58), e += this.v.length;
                case 9:
                  _context52.next = 3;
                  break;
                case 11:
                  return _context52.abrupt("return", Bs.apply(void 0, t));
                case 12:
                case "end":
                  return _context52.stop();
              }
            }, _callee50, this);
          }));
          function generate() {
            return _generate.apply(this, arguments);
          }
          return generate;
        }()
      }, {
        key: "generateSync",
        value: function generateSync() {
          this.checkSync(), this.incr();
          var e = 0;
          var t = [];
          for (; e < this.qByteLen;) {
            this.v = this.hmacSync(this.v);
            var _r59 = this.v.slice();
            t.push(_r59), e += this.v.length;
          }
          return Bs.apply(void 0, t);
        }
      }]);
      return Zs;
    }();
    function Js(e) {
      return us < e && e < ys.n;
    }
    function eo(e) {
      return us < e && e < ys.P;
    }
    function to(e, t, r) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
      var i = ys.n,
        s = Ys(e, !0);
      if (!Js(s)) return;
      var o = Ws(s, i),
        a = Ns.BASE.multiply(s),
        c = $s(a.x, i);
      if (c === us) return;
      var l = $s(o * $s(t + r * c, i), i);
      if (l === us) return;
      var u = new Ps(c, l),
        h = (a.x === u.r ? 0 : 2) | Number(a.y & hs);
      return n && u.hasHighS() && (u = u.normalizeS(), h ^= 1), {
        sig: u,
        recovery: h
      };
    }
    function ro(e) {
      var t;
      if ("bigint" == typeof e) t = e;else if ("number" == typeof e && Number.isSafeInteger(e) && e > 0) t = BigInt(e);else if ("string" == typeof e) {
        if (e.length !== 2 * Es) throw new Error("Expected 32 bytes of private key");
        t = Fs(e);
      } else {
        if (!(e instanceof Uint8Array)) throw new TypeError("Expected valid private key");
        if (e.length !== Es) throw new Error("Expected 32 bytes of private key");
        t = js(e);
      }
      if (!Js(t)) throw new Error("Expected private key: 0 < key < n");
      return t;
    }
    function no(e) {
      if (e instanceof Ps) return e.assertValidity(), e;
      try {
        return Ps.fromDER(e);
      } catch (t) {
        return Ps.fromCompact(e);
      }
    }
    function io(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
      return Ns.fromPrivateKey(e).toRawBytes(t);
    }
    function so(e) {
      return js(e.length > ws ? e.slice(0, ws) : e);
    }
    function oo(e) {
      var t = so(e),
        r = $s(t, ys.n);
      return ao(r < us ? t : r);
    }
    function ao(e) {
      return Vs(e);
    }
    var co = {
      strict: !0
    };
    Ns.BASE._setWindowSize(8);
    var lo = {
        node: ls,
        web: "object" == (typeof self === "undefined" ? "undefined" : _typeof(self)) && "crypto" in self ? self.crypto : void 0
      },
      uo = {},
      ho = {
        bytesToHex: xs,
        hexToBytes: qs,
        concatBytes: Bs,
        mod: $s,
        invert: Ws,
        isValidPrivateKey: function isValidPrivateKey(e) {
          try {
            return ro(e), !0;
          } catch (e) {
            return !1;
          }
        },
        _bigintTo32Bytes: Vs,
        _normalizePrivateKey: ro,
        hashToPrivateKey: function hashToPrivateKey(e) {
          e = Hs(e);
          var t = Es + 8;
          if (e.length < t || e.length > 1024) throw new Error("Expected valid bytes of private key as per FIPS 186");
          return Vs($s(js(e), ys.n - hs) + hs);
        },
        randomBytes: function randomBytes() {
          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 32;
          if (lo.web) return lo.web.getRandomValues(new Uint8Array(e));
          if (lo.node) {
            var _t64 = lo.node.randomBytes;
            return Uint8Array.from(_t64(e));
          }
          throw new Error("The environment doesn't have randomBytes function");
        },
        randomPrivateKey: function randomPrivateKey() {
          return ho.hashToPrivateKey(ho.randomBytes(Es + 8));
        },
        precompute: function precompute() {
          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 8;
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Ns.BASE;
          var r = t === Ns.BASE ? t : new Ns(t.x, t.y);
          return r._setWindowSize(e), r.multiply(ps), r;
        },
        sha256: function () {
          var _sha = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee51() {
            var _len16,
              e,
              _key16,
              _t65,
              _t66,
              _r60,
              _args53 = arguments;
            return _regeneratorRuntime().wrap(function _callee51$(_context53) {
              while (1) switch (_context53.prev = _context53.next) {
                case 0:
                  for (_len16 = _args53.length, e = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {
                    e[_key16] = _args53[_key16];
                  }
                  if (!lo.web) {
                    _context53.next = 6;
                    break;
                  }
                  _context53.next = 4;
                  return lo.web.subtle.digest("SHA-256", Bs.apply(void 0, e));
                case 4:
                  _t65 = _context53.sent;
                  return _context53.abrupt("return", new Uint8Array(_t65));
                case 6:
                  if (!lo.node) {
                    _context53.next = 9;
                    break;
                  }
                  _t66 = lo.node.createHash, _r60 = _t66("sha256");
                  return _context53.abrupt("return", (e.forEach(function (e) {
                    return _r60.update(e);
                  }), Uint8Array.from(_r60.digest())));
                case 9:
                  throw new Error("The environment doesn't have sha256 function");
                case 10:
                case "end":
                  return _context53.stop();
              }
            }, _callee51);
          }));
          function sha256() {
            return _sha.apply(this, arguments);
          }
          return sha256;
        }(),
        hmacSha256: function () {
          var _hmacSha = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee52(e) {
            var _len17,
              t,
              _key17,
              _r61,
              _n47,
              _i27,
              _r62,
              _n48,
              _args54 = arguments;
            return _regeneratorRuntime().wrap(function _callee52$(_context54) {
              while (1) switch (_context54.prev = _context54.next) {
                case 0:
                  for (_len17 = _args54.length, t = new Array(_len17 > 1 ? _len17 - 1 : 0), _key17 = 1; _key17 < _len17; _key17++) {
                    t[_key17 - 1] = _args54[_key17];
                  }
                  if (!lo.web) {
                    _context54.next = 10;
                    break;
                  }
                  _context54.next = 4;
                  return lo.web.subtle.importKey("raw", e, {
                    name: "HMAC",
                    hash: {
                      name: "SHA-256"
                    }
                  }, !1, ["sign"]);
                case 4:
                  _r61 = _context54.sent;
                  _n47 = Bs.apply(void 0, t);
                  _context54.next = 8;
                  return lo.web.subtle.sign("HMAC", _r61, _n47);
                case 8:
                  _i27 = _context54.sent;
                  return _context54.abrupt("return", new Uint8Array(_i27));
                case 10:
                  if (!lo.node) {
                    _context54.next = 13;
                    break;
                  }
                  _r62 = lo.node.createHmac, _n48 = _r62("sha256", e);
                  return _context54.abrupt("return", (t.forEach(function (e) {
                    return _n48.update(e);
                  }), Uint8Array.from(_n48.digest())));
                case 13:
                  throw new Error("The environment doesn't have hmac-sha256 function");
                case 14:
                case "end":
                  return _context54.stop();
              }
            }, _callee52);
          }));
          function hmacSha256(_x52) {
            return _hmacSha.apply(this, arguments);
          }
          return hmacSha256;
        }(),
        sha256Sync: void 0,
        hmacSha256Sync: void 0,
        taggedHash: function () {
          var _taggedHash = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee53(e) {
            var r,
              _t67,
              _len18,
              t,
              _key18,
              _args55 = arguments;
            return _regeneratorRuntime().wrap(function _callee53$(_context55) {
              while (1) switch (_context55.prev = _context55.next) {
                case 0:
                  r = uo[e];
                  if (!(void 0 === r)) {
                    _context55.next = 6;
                    break;
                  }
                  _context55.next = 4;
                  return ho.sha256(Uint8Array.from(e, function (e) {
                    return e.charCodeAt(0);
                  }));
                case 4:
                  _t67 = _context55.sent;
                  r = Bs(_t67, _t67), uo[e] = r;
                case 6:
                  for (_len18 = _args55.length, t = new Array(_len18 > 1 ? _len18 - 1 : 0), _key18 = 1; _key18 < _len18; _key18++) {
                    t[_key18 - 1] = _args55[_key18];
                  }
                  return _context55.abrupt("return", ho.sha256.apply(ho, [r].concat(t)));
                case 8:
                case "end":
                  return _context55.stop();
              }
            }, _callee53);
          }));
          function taggedHash(_x53) {
            return _taggedHash.apply(this, arguments);
          }
          return taggedHash;
        }(),
        taggedHashSync: function taggedHashSync(e) {
          if ("function" != typeof Qs) throw new As("sha256Sync is undefined, you need to set it");
          var r = uo[e];
          if (void 0 === r) {
            var _t68 = Qs(Uint8Array.from(e, function (e) {
              return e.charCodeAt(0);
            }));
            r = Bs(_t68, _t68), uo[e] = r;
          }
          for (var _len19 = arguments.length, t = new Array(_len19 > 1 ? _len19 - 1 : 0), _key19 = 1; _key19 < _len19; _key19++) {
            t[_key19 - 1] = arguments[_key19];
          }
          return Qs.apply(void 0, [r].concat(t));
        },
        _JacobianPoint: Ts
      };
    function po(e) {
      if (isNaN(e) || e <= 0) throw new rs("random bytes length must be a Number bigger than 0", "ERR_INVALID_LENGTH");
      return ho.randomBytes(e);
    }
    function fo(e, t) {
      return t.map(function (t) {
        return os(e[t]);
      });
    }
    function yo(_x54) {
      return _yo.apply(this, arguments);
    }
    function _yo() {
      _yo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee374(e) {
        var t, r;
        return _regeneratorRuntime().wrap(function _callee374$(_context382) {
          while (1) switch (_context382.prev = _context382.next) {
            case 0:
              _context382.next = 2;
              return ns.get().subtle.importKey("jwk", e, {
                name: "RSASSA-PKCS1-v1_5",
                hash: {
                  name: "SHA-256"
                }
              }, !0, ["sign"]);
            case 2:
              _context382.t0 = _context382.sent;
              _context382.next = 5;
              return mo(e);
            case 5:
              _context382.t1 = _context382.sent;
              t = [_context382.t0, _context382.t1];
              _context382.next = 9;
              return go({
                privateKey: t[0],
                publicKey: t[1]
              });
            case 9:
              r = _context382.sent;
              return _context382.abrupt("return", {
                privateKey: r[0],
                publicKey: r[1]
              });
            case 11:
            case "end":
              return _context382.stop();
          }
        }, _callee374);
      }));
      return _yo.apply(this, arguments);
    }
    function go(_x55) {
      return _go.apply(this, arguments);
    }
    function _go() {
      _go = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee375(e) {
        return _regeneratorRuntime().wrap(function _callee375$(_context383) {
          while (1) switch (_context383.prev = _context383.next) {
            case 0:
              if (!(null == e.privateKey || null == e.publicKey)) {
                _context383.next = 2;
                break;
              }
              throw new rs("Private and public key are required", "ERR_INVALID_PARAMETERS");
            case 2:
              _context383.next = 4;
              return Promise.all([ns.get().subtle.exportKey("jwk", e.privateKey), ns.get().subtle.exportKey("jwk", e.publicKey)]);
            case 4:
              return _context383.abrupt("return", _context383.sent);
            case 5:
            case "end":
              return _context383.stop();
          }
        }, _callee375);
      }));
      return _go.apply(this, arguments);
    }
    function mo(_x56) {
      return _mo.apply(this, arguments);
    }
    function _mo() {
      _mo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee376(e) {
        return _regeneratorRuntime().wrap(function _callee376$(_context384) {
          while (1) switch (_context384.prev = _context384.next) {
            case 0:
              _context384.next = 2;
              return ns.get().subtle.importKey("jwk", {
                kty: e.kty,
                n: e.n,
                e: e.e
              }, {
                name: "RSASSA-PKCS1-v1_5",
                hash: {
                  name: "SHA-256"
                }
              }, !0, ["verify"]);
            case 2:
              return _context384.abrupt("return", _context384.sent);
            case 3:
            case "end":
              return _context384.stop();
          }
        }, _callee376);
      }));
      return _mo.apply(this, arguments);
    }
    function wo(e, t, r, n) {
      var i = t ? function (e) {
        var _es$pki;
        return (_es$pki = es.pki).setRsaPublicKey.apply(_es$pki, _toConsumableArray(fo(e, ["n", "e"])));
      }(e) : function (e) {
        var _es$pki2;
        return (_es$pki2 = es.pki).setRsaPrivateKey.apply(_es$pki2, _toConsumableArray(fo(e, ["n", "e", "d", "p", "q", "dp", "dq", "qi"])));
      }(e);
      return Pt(n(St(Uint8Array.from(r), "ascii"), i), "ascii");
    }
    function Eo(_x57, _x58) {
      return _Eo.apply(this, arguments);
    }
    function _Eo() {
      _Eo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee377(e, t) {
        var r, n;
        return _regeneratorRuntime().wrap(function _callee377$(_context385) {
          while (1) switch (_context385.prev = _context385.next) {
            case 0:
              r = as();
              _context385.next = 3;
              return r.encrypt(e, t);
            case 3:
              n = _context385.sent;
              return _context385.abrupt("return", J.encode(n));
            case 5:
            case "end":
              return _context385.stop();
          }
        }, _callee377);
      }));
      return _Eo.apply(this, arguments);
    }
    Object.defineProperties(ho, {
      sha256Sync: {
        configurable: !1,
        get: function get() {
          return Qs;
        },
        set: function set(e) {
          Qs || (Qs = e);
        }
      },
      hmacSha256Sync: {
        configurable: !1,
        get: function get() {
          return Xs;
        },
        set: function set(e) {
          Xs || (Xs = e);
        }
      }
    }), __webpack_require__(8095);
    var bo = /*#__PURE__*/function () {
      function bo(e) {
        _classCallCheck(this, bo);
        this._key = e;
      }
      _createClass(bo, [{
        key: "verify",
        value: function () {
          var _verify = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee55(e, t) {
            return _regeneratorRuntime().wrap(function _callee55$(_context57) {
              while (1) switch (_context57.prev = _context57.next) {
                case 0:
                  _context57.next = 2;
                  return function () {
                    var _ref47 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee54(e, t, r) {
                      var n;
                      return _regeneratorRuntime().wrap(function _callee54$(_context56) {
                        while (1) switch (_context56.prev = _context56.next) {
                          case 0:
                            _context56.next = 2;
                            return ns.get().subtle.importKey("jwk", e, {
                              name: "RSASSA-PKCS1-v1_5",
                              hash: {
                                name: "SHA-256"
                              }
                            }, !1, ["verify"]);
                          case 2:
                            n = _context56.sent;
                            _context56.next = 5;
                            return ns.get().subtle.verify({
                              name: "RSASSA-PKCS1-v1_5"
                            }, n, t, r);
                          case 5:
                            return _context56.abrupt("return", _context56.sent);
                          case 6:
                          case "end":
                            return _context56.stop();
                        }
                      }, _callee54);
                    }));
                    return function (_x61, _x62, _x63) {
                      return _ref47.apply(this, arguments);
                    };
                  }()(this._key, t, e);
                case 2:
                  return _context57.abrupt("return", _context57.sent);
                case 3:
                case "end":
                  return _context57.stop();
              }
            }, _callee55, this);
          }));
          function verify(_x59, _x60) {
            return _verify.apply(this, arguments);
          }
          return verify;
        }()
      }, {
        key: "marshal",
        value: function marshal() {
          return function (e) {
            if (null == e.n || null == e.e) throw new rs("JWK was missing components", "ERR_INVALID_PARAMETERS");
            var t = es.pki.publicKeyToAsn1({
              n: os(e.n),
              e: os(e.e)
            });
            return Pt(es.asn1.toDer(t).getBytes(), "ascii");
          }(this._key);
        }
      }, {
        key: "bytes",
        get: function get() {
          return Wi.encode({
            Type: $i.RSA,
            Data: this.marshal()
          }).subarray();
        }
      }, {
        key: "encrypt",
        value: function encrypt(e) {
          return wo(this._key, !0, e, function (e, t) {
            return t.encrypt(e);
          });
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return Xt(this.bytes, e.bytes);
        }
      }, {
        key: "hash",
        value: function () {
          var _hash = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee56() {
            var _yield$He$digest, e;
            return _regeneratorRuntime().wrap(function _callee56$(_context58) {
              while (1) switch (_context58.prev = _context58.next) {
                case 0:
                  _context58.next = 2;
                  return He.digest(this.bytes);
                case 2:
                  _yield$He$digest = _context58.sent;
                  e = _yield$He$digest.bytes;
                  return _context58.abrupt("return", e);
                case 5:
                case "end":
                  return _context58.stop();
              }
            }, _callee56, this);
          }));
          function hash() {
            return _hash.apply(this, arguments);
          }
          return hash;
        }()
      }]);
      return bo;
    }();
    var vo = /*#__PURE__*/function () {
      function vo(e, t) {
        _classCallCheck(this, vo);
        this._key = e, this._publicKey = t;
      }
      _createClass(vo, [{
        key: "genSecret",
        value: function genSecret() {
          return po(16);
        }
      }, {
        key: "sign",
        value: function () {
          var _sign = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee58(e) {
            return _regeneratorRuntime().wrap(function _callee58$(_context60) {
              while (1) switch (_context60.prev = _context60.next) {
                case 0:
                  _context60.next = 2;
                  return function () {
                    var _ref48 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee57(e, t) {
                      var r, n;
                      return _regeneratorRuntime().wrap(function _callee57$(_context59) {
                        while (1) switch (_context59.prev = _context59.next) {
                          case 0:
                            _context59.next = 2;
                            return ns.get().subtle.importKey("jwk", e, {
                              name: "RSASSA-PKCS1-v1_5",
                              hash: {
                                name: "SHA-256"
                              }
                            }, !1, ["sign"]);
                          case 2:
                            r = _context59.sent;
                            _context59.next = 5;
                            return ns.get().subtle.sign({
                              name: "RSASSA-PKCS1-v1_5"
                            }, r, Uint8Array.from(t));
                          case 5:
                            n = _context59.sent;
                            return _context59.abrupt("return", new Uint8Array(n, 0, n.byteLength));
                          case 7:
                          case "end":
                            return _context59.stop();
                        }
                      }, _callee57);
                    }));
                    return function (_x65, _x66) {
                      return _ref48.apply(this, arguments);
                    };
                  }()(this._key, e);
                case 2:
                  return _context60.abrupt("return", _context60.sent);
                case 3:
                case "end":
                  return _context60.stop();
              }
            }, _callee58, this);
          }));
          function sign(_x64) {
            return _sign.apply(this, arguments);
          }
          return sign;
        }()
      }, {
        key: "public",
        get: function get() {
          if (null == this._publicKey) throw new rs("public key not provided", "ERR_PUBKEY_NOT_PROVIDED");
          return new bo(this._publicKey);
        }
      }, {
        key: "decrypt",
        value: function decrypt(e) {
          return wo(this._key, !1, e, function (e, t) {
            return t.decrypt(e);
          });
        }
      }, {
        key: "marshal",
        value: function marshal() {
          return function (e) {
            if (null == e.n || null == e.e || null == e.d || null == e.p || null == e.q || null == e.dp || null == e.dq || null == e.qi) throw new rs("JWK was missing components", "ERR_INVALID_PARAMETERS");
            var t = es.pki.privateKeyToAsn1({
              n: os(e.n),
              e: os(e.e),
              d: os(e.d),
              p: os(e.p),
              q: os(e.q),
              dP: os(e.dp),
              dQ: os(e.dq),
              qInv: os(e.qi)
            });
            return Pt(es.asn1.toDer(t).getBytes(), "ascii");
          }(this._key);
        }
      }, {
        key: "bytes",
        get: function get() {
          return Yi.encode({
            Type: $i.RSA,
            Data: this.marshal()
          }).subarray();
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return Xt(this.bytes, e.bytes);
        }
      }, {
        key: "hash",
        value: function () {
          var _hash2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee59() {
            var _yield$He$digest2, e;
            return _regeneratorRuntime().wrap(function _callee59$(_context61) {
              while (1) switch (_context61.prev = _context61.next) {
                case 0:
                  _context61.next = 2;
                  return He.digest(this.bytes);
                case 2:
                  _yield$He$digest2 = _context61.sent;
                  e = _yield$He$digest2.bytes;
                  return _context61.abrupt("return", e);
                case 5:
                case "end":
                  return _context61.stop();
              }
            }, _callee59, this);
          }));
          function hash() {
            return _hash2.apply(this, arguments);
          }
          return hash;
        }()
      }, {
        key: "id",
        value: function () {
          var _id = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee60() {
            return _regeneratorRuntime().wrap(function _callee60$(_context62) {
              while (1) switch (_context62.prev = _context62.next) {
                case 0:
                  _context62.t0 = St;
                  _context62.next = 3;
                  return this.public.hash();
                case 3:
                  _context62.t1 = _context62.sent;
                  return _context62.abrupt("return", (0, _context62.t0)(_context62.t1, "base58btc"));
                case 5:
                case "end":
                  return _context62.stop();
              }
            }, _callee60, this);
          }));
          function id() {
            return _id.apply(this, arguments);
          }
          return id;
        }()
      }, {
        key: "export",
        value: function () {
          var _export2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee61(e) {
            var t,
              _t69,
              _r63,
              _n49,
              _i28,
              _args63 = arguments;
            return _regeneratorRuntime().wrap(function _callee61$(_context63) {
              while (1) switch (_context63.prev = _context63.next) {
                case 0:
                  t = _args63.length > 1 && _args63[1] !== undefined ? _args63[1] : "pkcs-8";
                  if (!("pkcs-8" === t)) {
                    _context63.next = 4;
                    break;
                  }
                  _t69 = new es.util.ByteBuffer(this.marshal()), _r63 = es.asn1.fromDer(_t69), _n49 = es.pki.privateKeyFromAsn1(_r63), _i28 = {
                    algorithm: "aes256",
                    count: 1e4,
                    saltSize: 16,
                    prfAlgorithm: "sha512"
                  };
                  return _context63.abrupt("return", es.pki.encryptRsaPrivateKey(_n49, e, _i28));
                case 4:
                  if (!("libp2p-key" === t)) {
                    _context63.next = 8;
                    break;
                  }
                  _context63.next = 7;
                  return Eo(this.bytes, e);
                case 7:
                  return _context63.abrupt("return", _context63.sent);
                case 8:
                  throw new rs("export format '".concat(t, "' is not supported"), "ERR_INVALID_EXPORT_FORMAT");
                case 9:
                case "end":
                  return _context63.stop();
              }
            }, _callee61, this);
          }));
          function _export(_x67) {
            return _export2.apply(this, arguments);
          }
          return _export;
        }()
      }]);
      return vo;
    }();
    function _o(_x68) {
      return _o11.apply(this, arguments);
    }
    function _o11() {
      _o11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee378(e) {
        var t, r;
        return _regeneratorRuntime().wrap(function _callee378$(_context386) {
          while (1) switch (_context386.prev = _context386.next) {
            case 0:
              t = function (e) {
                var t = es.asn1.fromDer(St(e, "ascii")),
                  r = es.pki.privateKeyFromAsn1(t);
                return {
                  kty: "RSA",
                  n: ss(r.n),
                  e: ss(r.e),
                  d: ss(r.d),
                  p: ss(r.p),
                  q: ss(r.q),
                  dp: ss(r.dP),
                  dq: ss(r.dQ),
                  qi: ss(r.qInv),
                  alg: "RS256"
                };
              }(e);
              _context386.next = 3;
              return yo(t);
            case 3:
              r = _context386.sent;
              return _context386.abrupt("return", new vo(r.privateKey, r.publicKey));
            case 5:
            case "end":
              return _context386.stop();
          }
        }, _callee378);
      }));
      return _o11.apply(this, arguments);
    }
    function So(e) {
      var t = function (e) {
        var t = es.asn1.fromDer(St(e, "ascii")),
          r = es.pki.publicKeyFromAsn1(t);
        return {
          kty: "RSA",
          n: ss(r.n),
          e: ss(r.e)
        };
      }(e);
      return new bo(t);
    }
    function Co(_x69) {
      return _Co.apply(this, arguments);
    }
    function _Co() {
      _Co = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee379(e) {
        var t;
        return _regeneratorRuntime().wrap(function _callee379$(_context387) {
          while (1) switch (_context387.prev = _context387.next) {
            case 0:
              _context387.next = 2;
              return yo(e);
            case 2:
              t = _context387.sent;
              return _context387.abrupt("return", new vo(t.privateKey, t.publicKey));
            case 4:
            case "end":
              return _context387.stop();
          }
        }, _callee379);
      }));
      return _Co.apply(this, arguments);
    }
    function Ao(_x70) {
      return _Ao.apply(this, arguments);
    }
    function _Ao() {
      _Ao = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee381(e) {
        var t;
        return _regeneratorRuntime().wrap(function _callee381$(_context389) {
          while (1) switch (_context389.prev = _context389.next) {
            case 0:
              _context389.next = 2;
              return function () {
                var _ref163 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee380(e) {
                  var t, r;
                  return _regeneratorRuntime().wrap(function _callee380$(_context388) {
                    while (1) switch (_context388.prev = _context388.next) {
                      case 0:
                        _context388.next = 2;
                        return ns.get().subtle.generateKey({
                          name: "RSASSA-PKCS1-v1_5",
                          modulusLength: e,
                          publicExponent: new Uint8Array([1, 0, 1]),
                          hash: {
                            name: "SHA-256"
                          }
                        }, !0, ["sign", "verify"]);
                      case 2:
                        t = _context388.sent;
                        _context388.next = 5;
                        return go(t);
                      case 5:
                        r = _context388.sent;
                        return _context388.abrupt("return", {
                          privateKey: r[0],
                          publicKey: r[1]
                        });
                      case 7:
                      case "end":
                        return _context388.stop();
                    }
                  }, _callee380);
                }));
                return function (_x381) {
                  return _ref163.apply(this, arguments);
                };
              }()(e);
            case 2:
              t = _context389.sent;
              return _context389.abrupt("return", new vo(t.privateKey, t.publicKey));
            case 4:
            case "end":
              return _context389.stop();
          }
        }, _callee381);
      }));
      return _Ao.apply(this, arguments);
    }
    var Io = __webpack_require__(7420),
      To = __webpack_require__.t(Io, 2);
    var Ro = BigInt(0),
      ko = BigInt(1),
      No = BigInt(2),
      Lo = BigInt(8),
      Do = BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),
      Po = Object.freeze({
        a: BigInt(-1),
        d: BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),
        P: BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),
        l: Do,
        n: Do,
        h: BigInt(8),
        Gx: BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),
        Gy: BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")
      }),
      Bo = BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),
      Oo = BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),
      xo = (BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"), BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),
      Uo = BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),
      Mo = BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),
      Vo = BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");
    var Ko = /*#__PURE__*/function () {
      function Ko(e, t, r, n) {
        _classCallCheck(this, Ko);
        this.x = e, this.y = t, this.z = r, this.t = n;
      }
      _createClass(Ko, [{
        key: "equals",
        value: function equals(e) {
          qo(e);
          var t = this.x,
            r = this.y,
            n = this.z,
            i = e.x,
            s = e.y,
            o = e.z,
            a = sa(t * o),
            c = sa(i * n),
            l = sa(r * o),
            u = sa(s * n);
          return a === c && l === u;
        }
      }, {
        key: "negate",
        value: function negate() {
          return new Ko(sa(-this.x), this.y, this.z, sa(-this.t));
        }
      }, {
        key: "double",
        value: function double() {
          var e = this.x,
            t = this.y,
            r = this.z,
            n = Po.a,
            i = sa(e * e),
            s = sa(t * t),
            o = sa(No * sa(r * r)),
            a = sa(n * i),
            c = e + t,
            l = sa(sa(c * c) - i - s),
            u = a + s,
            h = u - o,
            d = a - s,
            p = sa(l * h),
            f = sa(u * d),
            y = sa(l * d),
            g = sa(h * u);
          return new Ko(p, f, g, y);
        }
      }, {
        key: "add",
        value: function add(e) {
          qo(e);
          var t = this.x,
            r = this.y,
            n = this.z,
            i = this.t,
            s = e.x,
            o = e.y,
            a = e.z,
            c = e.t,
            l = sa((r - t) * (o + s)),
            u = sa((r + t) * (o - s)),
            h = sa(u - l);
          if (h === Ro) return this.double();
          var d = sa(n * No * c),
            p = sa(i * No * a),
            f = p + d,
            y = u + l,
            g = p - d,
            m = sa(f * h),
            w = sa(y * g),
            E = sa(f * g),
            b = sa(h * y);
          return new Ko(m, w, b, E);
        }
      }, {
        key: "subtract",
        value: function subtract(e) {
          return this.add(e.negate());
        }
      }, {
        key: "precomputeWindow",
        value: function precomputeWindow(e) {
          var t = 1 + 256 / e,
            r = [];
          var n = this,
            i = n;
          for (var _s18 = 0; _s18 < t; _s18++) {
            i = n, r.push(i);
            for (var _t70 = 1; _t70 < Math.pow(2, e - 1); _t70++) i = i.add(n), r.push(i);
            n = i.double();
          }
          return r;
        }
      }, {
        key: "wNAF",
        value: function wNAF(e, t) {
          !t && this.equals(Ko.BASE) && (t = Go.BASE);
          var r = t && t._WINDOW_SIZE || 1;
          if (256 % r) throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");
          var n = t && $o.get(t);
          n || (n = this.precomputeWindow(r), t && 1 !== r && (n = Ko.normalizeZ(n), $o.set(t, n)));
          var i = Ko.ZERO,
            s = Ko.BASE;
          var o = 1 + 256 / r,
            a = Math.pow(2, r - 1),
            c = BigInt(Math.pow(2, r) - 1),
            l = Math.pow(2, r),
            u = BigInt(r);
          for (var _t71 = 0; _t71 < o; _t71++) {
            var _r64 = _t71 * a;
            var _o12 = Number(e & c);
            e >>= u, _o12 > a && (_o12 -= l, e += ko);
            var _h5 = _r64,
              _d4 = _r64 + Math.abs(_o12) - 1,
              _p3 = _t71 % 2 != 0,
              _f3 = _o12 < 0;
            0 === _o12 ? s = s.add(Fo(_p3, n[_h5])) : i = i.add(Fo(_f3, n[_d4]));
          }
          return Ko.normalizeZ([i, s])[0];
        }
      }, {
        key: "multiply",
        value: function multiply(e, t) {
          return this.wNAF(da(e, Po.l), t);
        }
      }, {
        key: "multiplyUnsafe",
        value: function multiplyUnsafe(e) {
          var t = da(e, Po.l, !1);
          var r = Ko.BASE,
            n = Ko.ZERO;
          if (t === Ro) return n;
          if (this.equals(n) || t === ko) return this;
          if (this.equals(r)) return this.wNAF(t);
          var i = n,
            s = this;
          for (; t > Ro;) t & ko && (i = i.add(s)), s = s.double(), t >>= ko;
          return i;
        }
      }, {
        key: "isSmallOrder",
        value: function isSmallOrder() {
          return this.multiplyUnsafe(Po.h).equals(Ko.ZERO);
        }
      }, {
        key: "isTorsionFree",
        value: function isTorsionFree() {
          var e = this.multiplyUnsafe(Po.l / No).double();
          return Po.l % No && (e = e.add(this)), e.equals(Ko.ZERO);
        }
      }, {
        key: "toAffine",
        value: function toAffine(e) {
          var t = this.x,
            r = this.y,
            n = this.z,
            i = this.equals(Ko.ZERO);
          null == e && (e = i ? Lo : oa(n));
          var s = sa(t * e),
            o = sa(r * e),
            a = sa(n * e);
          if (i) return Go.ZERO;
          if (a !== ko) throw new Error("invZ was invalid");
          return new Go(s, o);
        }
      }, {
        key: "fromRistrettoBytes",
        value: function fromRistrettoBytes() {
          Ho();
        }
      }, {
        key: "toRistrettoBytes",
        value: function toRistrettoBytes() {
          Ho();
        }
      }, {
        key: "fromRistrettoHash",
        value: function fromRistrettoHash() {
          Ho();
        }
      }], [{
        key: "fromAffine",
        value: function fromAffine(e) {
          if (!(e instanceof Go)) throw new TypeError("ExtendedPoint#fromAffine: expected Point");
          return e.equals(Go.ZERO) ? Ko.ZERO : new Ko(e.x, e.y, ko, sa(e.x * e.y));
        }
      }, {
        key: "toAffineBatch",
        value: function toAffineBatch(e) {
          var t = function (e) {
            var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Po.P;
            var r = new Array(e.length),
              n = oa(e.reduce(function (e, n, i) {
                return n === Ro ? e : (r[i] = e, sa(e * n, t));
              }, ko), t);
            return e.reduceRight(function (e, n, i) {
              return n === Ro ? e : (r[i] = sa(e * r[i], t), sa(e * n, t));
            }, n), r;
          }(e.map(function (e) {
            return e.z;
          }));
          return e.map(function (e, r) {
            return e.toAffine(t[r]);
          });
        }
      }, {
        key: "normalizeZ",
        value: function normalizeZ(e) {
          return this.toAffineBatch(e).map(this.fromAffine);
        }
      }]);
      return Ko;
    }();
    function Fo(e, t) {
      var r = t.negate();
      return e ? r : t;
    }
    function qo(e) {
      if (!(e instanceof Ko)) throw new TypeError("ExtendedPoint expected");
    }
    function jo(e) {
      if (!(e instanceof zo)) throw new TypeError("RistrettoPoint expected");
    }
    function Ho() {
      throw new Error("Legacy method: switch to RistrettoPoint");
    }
    Ko.BASE = new Ko(Po.Gx, Po.Gy, ko, sa(Po.Gx * Po.Gy)), Ko.ZERO = new Ko(Ro, ko, ko, Ro);
    var zo = /*#__PURE__*/function () {
      function zo(e) {
        _classCallCheck(this, zo);
        this.ep = e;
      }
      _createClass(zo, [{
        key: "toRawBytes",
        value: function toRawBytes() {
          var _this$ep = this.ep,
            e = _this$ep.x,
            t = _this$ep.y,
            r = _this$ep.z,
            n = _this$ep.t;
          var i = sa(sa(r + t) * sa(r - t)),
            s = sa(e * t),
            o = sa(s * s),
            _la = la(sa(i * o)),
            a = _la.value,
            c = sa(a * i),
            l = sa(a * s),
            u = sa(c * l * n);
          var h;
          if (ta(n * u)) {
            var _r65 = sa(t * Oo),
              _n50 = sa(e * Oo);
            e = _r65, t = _n50, h = sa(c * Uo);
          } else h = l;
          ta(e * u) && (t = sa(-t));
          var d = sa((r - t) * h);
          return ta(d) && (d = sa(-d)), ea(d);
        }
      }, {
        key: "toHex",
        value: function toHex() {
          return Xo(this.toRawBytes());
        }
      }, {
        key: "toString",
        value: function toString() {
          return this.toHex();
        }
      }, {
        key: "equals",
        value: function equals(e) {
          jo(e);
          var t = this.ep,
            r = e.ep,
            n = sa(t.x * r.y) === sa(t.y * r.x),
            i = sa(t.y * r.y) === sa(t.x * r.x);
          return n || i;
        }
      }, {
        key: "add",
        value: function add(e) {
          return jo(e), new zo(this.ep.add(e.ep));
        }
      }, {
        key: "subtract",
        value: function subtract(e) {
          return jo(e), new zo(this.ep.subtract(e.ep));
        }
      }, {
        key: "multiply",
        value: function multiply(e) {
          return new zo(this.ep.multiply(e));
        }
      }, {
        key: "multiplyUnsafe",
        value: function multiplyUnsafe(e) {
          return new zo(this.ep.multiplyUnsafe(e));
        }
      }], [{
        key: "calcElligatorRistrettoMap",
        value: function calcElligatorRistrettoMap(e) {
          var t = Po.d,
            r = sa(Oo * e * e),
            n = sa((r + ko) * Mo);
          var i = BigInt(-1);
          var s = sa((i - t * r) * sa(r + t));
          var _ca = ca(n, s),
            o = _ca.isValid,
            a = _ca.value,
            c = sa(a * e);
          ta(c) || (c = sa(-c)), o || (a = c), o || (i = r);
          var l = sa(i * (r - ko) * Vo - s),
            u = a * a,
            h = sa((a + a) * s),
            d = sa(l * xo),
            p = sa(ko - u),
            f = sa(ko + u);
          return new Ko(sa(h * f), sa(p * d), sa(d * f), sa(h * p));
        }
      }, {
        key: "hashToCurve",
        value: function hashToCurve(e) {
          var t = ia((e = ha(e, 64)).slice(0, 32)),
            r = this.calcElligatorRistrettoMap(t),
            n = ia(e.slice(32, 64)),
            i = this.calcElligatorRistrettoMap(n);
          return new zo(r.add(i));
        }
      }, {
        key: "fromHex",
        value: function fromHex(e) {
          e = ha(e, 32);
          var t = Po.a,
            r = Po.d,
            n = "RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",
            i = ia(e);
          if (!function (e, t) {
            if (e.length !== t.length) return !1;
            for (var _r66 = 0; _r66 < e.length; _r66++) if (e[_r66] !== t[_r66]) return !1;
            return !0;
          }(ea(i), e) || ta(i)) throw new Error(n);
          var s = sa(i * i),
            o = sa(ko + t * s),
            a = sa(ko - t * s),
            c = sa(o * o),
            l = sa(a * a),
            u = sa(t * r * c - l),
            _la2 = la(sa(u * l)),
            h = _la2.isValid,
            d = _la2.value,
            p = sa(d * a),
            f = sa(d * p * u);
          var y = sa((i + i) * p);
          ta(y) && (y = sa(-y));
          var g = sa(o * f),
            m = sa(y * g);
          if (!h || ta(m) || g === Ro) throw new Error(n);
          return new zo(new Ko(y, g, ko, m));
        }
      }]);
      return zo;
    }();
    zo.BASE = new zo(Ko.BASE), zo.ZERO = new zo(Ko.ZERO);
    var $o = new WeakMap();
    var Go = /*#__PURE__*/function () {
      function Go(e, t) {
        _classCallCheck(this, Go);
        this.x = e, this.y = t;
      }
      _createClass(Go, [{
        key: "_setWindowSize",
        value: function _setWindowSize(e) {
          this._WINDOW_SIZE = e, $o.delete(this);
        }
      }, {
        key: "toRawBytes",
        value: function toRawBytes() {
          var e = ea(this.y);
          return e[31] |= this.x & ko ? 128 : 0, e;
        }
      }, {
        key: "toHex",
        value: function toHex() {
          return Xo(this.toRawBytes());
        }
      }, {
        key: "toX25519",
        value: function toX25519() {
          var e = this.y;
          return ea(sa((ko + e) * oa(ko - e)));
        }
      }, {
        key: "isTorsionFree",
        value: function isTorsionFree() {
          return Ko.fromAffine(this).isTorsionFree();
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return this.x === e.x && this.y === e.y;
        }
      }, {
        key: "negate",
        value: function negate() {
          return new Go(sa(-this.x), this.y);
        }
      }, {
        key: "add",
        value: function add(e) {
          return Ko.fromAffine(this).add(Ko.fromAffine(e)).toAffine();
        }
      }, {
        key: "subtract",
        value: function subtract(e) {
          return this.add(e.negate());
        }
      }, {
        key: "multiply",
        value: function multiply(e) {
          return Ko.fromAffine(this).multiply(e, this).toAffine();
        }
      }], [{
        key: "fromHex",
        value: function fromHex(e) {
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
          var r = Po.d,
            n = Po.P,
            i = (e = ha(e, 32)).slice();
          i[31] = -129 & e[31];
          var s = ra(i);
          if (t && s >= n) throw new Error("Expected 0 < hex < P");
          if (!t && s >= Bo) throw new Error("Expected 0 < hex < 2**256");
          var o = sa(s * s),
            a = sa(o - ko),
            c = sa(r * o + ko);
          var _ca2 = ca(a, c),
            l = _ca2.isValid,
            u = _ca2.value;
          if (!l) throw new Error("Point.fromHex: invalid y coordinate");
          var h = (u & ko) === ko;
          return 0 != (128 & e[31]) !== h && (u = sa(-u)), new Go(u, s);
        }
      }, {
        key: "fromPrivateKey",
        value: function () {
          var _fromPrivateKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee62(e) {
            return _regeneratorRuntime().wrap(function _callee62$(_context64) {
              while (1) switch (_context64.prev = _context64.next) {
                case 0:
                  _context64.next = 2;
                  return fa(e);
                case 2:
                  return _context64.abrupt("return", _context64.sent.point);
                case 3:
                case "end":
                  return _context64.stop();
              }
            }, _callee62);
          }));
          function fromPrivateKey(_x71) {
            return _fromPrivateKey.apply(this, arguments);
          }
          return fromPrivateKey;
        }()
      }]);
      return Go;
    }();
    Go.BASE = new Go(Po.Gx, Po.Gy), Go.ZERO = new Go(Ro, ko);
    var Wo = /*#__PURE__*/function () {
      function Wo(e, t) {
        _classCallCheck(this, Wo);
        this.r = e, this.s = t, this.assertValidity();
      }
      _createClass(Wo, [{
        key: "assertValidity",
        value: function assertValidity() {
          var e = this.r,
            t = this.s;
          if (!(e instanceof Go)) throw new Error("Expected Point instance");
          return da(t, Po.l, !1), this;
        }
      }, {
        key: "toRawBytes",
        value: function toRawBytes() {
          var e = new Uint8Array(64);
          return e.set(this.r.toRawBytes()), e.set(ea(this.s), 32), e;
        }
      }, {
        key: "toHex",
        value: function toHex() {
          return Xo(this.toRawBytes());
        }
      }], [{
        key: "fromHex",
        value: function fromHex(e) {
          var t = ha(e, 64),
            r = Go.fromHex(t.slice(0, 32), !1),
            n = ra(t.slice(32, 64));
          return new Wo(r, n);
        }
      }]);
      return Wo;
    }();
    function Yo() {
      for (var _len20 = arguments.length, e = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {
        e[_key20] = arguments[_key20];
      }
      if (!e.every(function (e) {
        return e instanceof Uint8Array;
      })) throw new Error("Expected Uint8Array list");
      if (1 === e.length) return e[0];
      var t = e.reduce(function (e, t) {
          return e + t.length;
        }, 0),
        r = new Uint8Array(t);
      for (var _t72 = 0, _n51 = 0; _t72 < e.length; _t72++) {
        var _i29 = e[_t72];
        r.set(_i29, _n51), _n51 += _i29.length;
      }
      return r;
    }
    var Qo = Array.from({
      length: 256
    }, function (e, t) {
      return t.toString(16).padStart(2, "0");
    });
    function Xo(e) {
      if (!(e instanceof Uint8Array)) throw new Error("Uint8Array expected");
      var t = "";
      for (var _r67 = 0; _r67 < e.length; _r67++) t += Qo[e[_r67]];
      return t;
    }
    function Zo(e) {
      if ("string" != typeof e) throw new TypeError("hexToBytes: expected string, got " + _typeof(e));
      if (e.length % 2) throw new Error("hexToBytes: received invalid unpadded hex");
      var t = new Uint8Array(e.length / 2);
      for (var _r68 = 0; _r68 < t.length; _r68++) {
        var _n52 = 2 * _r68,
          _i30 = e.slice(_n52, _n52 + 2),
          _s19 = Number.parseInt(_i30, 16);
        if (Number.isNaN(_s19) || _s19 < 0) throw new Error("Invalid byte sequence");
        t[_r68] = _s19;
      }
      return t;
    }
    function Jo(e) {
      return Zo(e.toString(16).padStart(64, "0"));
    }
    function ea(e) {
      return Jo(e).reverse();
    }
    function ta(e) {
      return (sa(e) & ko) === ko;
    }
    function ra(e) {
      if (!(e instanceof Uint8Array)) throw new Error("Expected Uint8Array");
      return BigInt("0x" + Xo(Uint8Array.from(e).reverse()));
    }
    var na = BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");
    function ia(e) {
      return sa(ra(e) & na);
    }
    function sa(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Po.P;
      var r = e % t;
      return r >= Ro ? r : t + r;
    }
    function oa(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Po.P;
      if (e === Ro || t <= Ro) throw new Error("invert: expected positive integers, got n=".concat(e, " mod=").concat(t));
      var r = sa(e, t),
        n = t,
        i = Ro,
        s = ko,
        o = ko,
        a = Ro;
      for (; r !== Ro;) {
        var _e76 = n / r,
          _t73 = n % r,
          _c6 = i - o * _e76,
          _l5 = s - a * _e76;
        n = r, r = _t73, i = o, s = a, o = _c6, a = _l5;
      }
      if (n !== ko) throw new Error("invert: does not exist");
      return sa(i, t);
    }
    function aa(e, t) {
      var r = Po.P;
      var n = e;
      for (; t-- > Ro;) n *= n, n %= r;
      return n;
    }
    function ca(e, t) {
      var r = sa(t * t * t),
        n = sa(r * r * t);
      var i = sa(e * r * function (e) {
        var t = Po.P,
          r = BigInt(5),
          n = BigInt(10),
          i = BigInt(20),
          s = BigInt(40),
          o = BigInt(80),
          a = e * e % t * e % t,
          c = aa(a, No) * a % t,
          l = aa(c, ko) * e % t,
          u = aa(l, r) * l % t,
          h = aa(u, n) * u % t,
          d = aa(h, i) * h % t,
          p = aa(d, s) * d % t,
          f = aa(p, o) * p % t,
          y = aa(f, o) * p % t,
          g = aa(y, n) * u % t;
        return {
          pow_p_5_8: aa(g, No) * e % t,
          b2: a
        };
      }(e * n).pow_p_5_8);
      var s = sa(t * i * i),
        o = i,
        a = sa(i * Oo),
        c = s === e,
        l = s === sa(-e),
        u = s === sa(-e * Oo);
      return c && (i = o), (l || u) && (i = a), ta(i) && (i = sa(-i)), {
        isValid: c || l,
        value: i
      };
    }
    function la(e) {
      return ca(ko, e);
    }
    function ua(e) {
      return sa(ra(e), Po.l);
    }
    function ha(e, t) {
      var r = e instanceof Uint8Array ? Uint8Array.from(e) : Zo(e);
      if ("number" == typeof t && r.length !== t) throw new Error("Expected ".concat(t, " bytes"));
      return r;
    }
    function da(e, t) {
      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
      if (!t) throw new TypeError("Specify max value");
      if ("number" == typeof e && Number.isSafeInteger(e) && (e = BigInt(e)), "bigint" == typeof e && e < t) if (r) {
        if (Ro < e) return e;
      } else if (Ro <= e) return e;
      throw new TypeError("Expected valid scalar: 0 < scalar < max");
    }
    var pa;
    function fa(_x72) {
      return _fa.apply(this, arguments);
    }
    function _fa() {
      _fa = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee382(e) {
        return _regeneratorRuntime().wrap(function _callee382$(_context390) {
          while (1) switch (_context390.prev = _context390.next) {
            case 0:
              _context390.t0 = function (e) {
                var t = ((o = e.slice(0, 32))[0] &= 248, o[31] &= 127, o[31] |= 64, o),
                  r = e.slice(32, 64),
                  n = ua(t),
                  i = Go.BASE.multiply(n),
                  s = i.toRawBytes();
                var o;
                return {
                  head: t,
                  prefix: r,
                  scalar: n,
                  point: i,
                  pointBytes: s
                };
              };
              _context390.next = 3;
              return ma.sha512(function (e) {
                if (32 !== (e = "bigint" == typeof e || "number" == typeof e ? Jo(da(e, Bo)) : ha(e)).length) throw new Error("Expected 32 bytes");
                return e;
              }(e));
            case 3:
              _context390.t1 = _context390.sent;
              return _context390.abrupt("return", (0, _context390.t0)(_context390.t1));
            case 5:
            case "end":
              return _context390.stop();
          }
        }, _callee382);
      }));
      return _fa.apply(this, arguments);
    }
    function ya(_x73) {
      return _ya.apply(this, arguments);
    }
    function _ya() {
      _ya = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee383(e) {
        return _regeneratorRuntime().wrap(function _callee383$(_context391) {
          while (1) switch (_context391.prev = _context391.next) {
            case 0:
              _context391.next = 2;
              return fa(e);
            case 2:
              return _context391.abrupt("return", _context391.sent.pointBytes);
            case 3:
            case "end":
              return _context391.stop();
          }
        }, _callee383);
      }));
      return _ya.apply(this, arguments);
    }
    Go.BASE._setWindowSize(8);
    var ga = {
        node: To,
        web: "object" == (typeof self === "undefined" ? "undefined" : _typeof(self)) && "crypto" in self ? self.crypto : void 0
      },
      ma = {
        bytesToHex: Xo,
        hexToBytes: Zo,
        concatBytes: Yo,
        getExtendedPublicKey: fa,
        mod: sa,
        invert: oa,
        TORSION_SUBGROUP: ["0100000000000000000000000000000000000000000000000000000000000000", "c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a", "0000000000000000000000000000000000000000000000000000000000000080", "26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05", "ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f", "26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85", "0000000000000000000000000000000000000000000000000000000000000000", "c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],
        hashToPrivateScalar: function hashToPrivateScalar(e) {
          if ((e = ha(e)).length < 40 || e.length > 1024) throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");
          return sa(ra(e), Po.l - ko) + ko;
        },
        randomBytes: function randomBytes() {
          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 32;
          if (ga.web) return ga.web.getRandomValues(new Uint8Array(e));
          if (ga.node) {
            var _t74 = ga.node.randomBytes;
            return new Uint8Array(_t74(e).buffer);
          }
          throw new Error("The environment doesn't have randomBytes function");
        },
        randomPrivateKey: function randomPrivateKey() {
          return ma.randomBytes(32);
        },
        sha512: function () {
          var _sha2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee63() {
            var t,
              _e77,
              _args65 = arguments;
            return _regeneratorRuntime().wrap(function _callee63$(_context65) {
              while (1) switch (_context65.prev = _context65.next) {
                case 0:
                  t = Yo.apply(void 0, _args65);
                  if (!ga.web) {
                    _context65.next = 6;
                    break;
                  }
                  _context65.next = 4;
                  return ga.web.subtle.digest("SHA-512", t.buffer);
                case 4:
                  _e77 = _context65.sent;
                  return _context65.abrupt("return", new Uint8Array(_e77));
                case 6:
                  if (!ga.node) {
                    _context65.next = 8;
                    break;
                  }
                  return _context65.abrupt("return", Uint8Array.from(ga.node.createHash("sha512").update(t).digest()));
                case 8:
                  throw new Error("The environment doesn't have sha512 function");
                case 9:
                case "end":
                  return _context65.stop();
              }
            }, _callee63);
          }));
          function sha512() {
            return _sha2.apply(this, arguments);
          }
          return sha512;
        }(),
        precompute: function precompute() {
          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 8;
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Go.BASE;
          var r = t.equals(Go.BASE) ? t : new Go(t.x, t.y);
          return r._setWindowSize(e), r.multiply(No), r;
        },
        sha512Sync: void 0
      };
    Object.defineProperties(ma, {
      sha512Sync: {
        configurable: !1,
        get: function get() {
          return pa;
        },
        set: function set(e) {
          pa || (pa = e);
        }
      }
    });
    var wa = 32,
      Ea = 64,
      ba = 32;
    function va(_x74, _x75, _x76) {
      return _va.apply(this, arguments);
    }
    function _va() {
      _va = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee385(e, t, r) {
        return _regeneratorRuntime().wrap(function _callee385$(_context393) {
          while (1) switch (_context393.prev = _context393.next) {
            case 0:
              _context393.next = 2;
              return function () {
                var _ref164 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee384(e, t, r) {
                  var _ref165, n, i, s, o, a;
                  return _regeneratorRuntime().wrap(function _callee384$(_context392) {
                    while (1) switch (_context392.prev = _context392.next) {
                      case 0:
                        _ref165 = function (e, t, r) {
                          t = ha(t), r instanceof Go || (r = Go.fromHex(r, !1));
                          var _ref166 = e instanceof Wo ? e.assertValidity() : Wo.fromHex(e),
                            n = _ref166.r,
                            i = _ref166.s;
                          return {
                            r: n,
                            s: i,
                            SB: Ko.BASE.multiplyUnsafe(i),
                            pub: r,
                            msg: t
                          };
                        }(e, t, r);
                        n = _ref165.r;
                        i = _ref165.SB;
                        s = _ref165.msg;
                        o = _ref165.pub;
                        _context392.next = 7;
                        return ma.sha512(n.toRawBytes(), o.toRawBytes(), s);
                      case 7:
                        a = _context392.sent;
                        return _context392.abrupt("return", function (e, t, r, n) {
                          var i = ua(n),
                            s = Ko.fromAffine(e).multiplyUnsafe(i);
                          return Ko.fromAffine(t).add(s).subtract(r).multiplyUnsafe(Po.h).equals(Ko.ZERO);
                        }(o, n, i, a));
                      case 9:
                      case "end":
                        return _context392.stop();
                    }
                  }, _callee384);
                }));
                return function (_x382, _x383, _x384) {
                  return _ref164.apply(this, arguments);
                };
              }()(t, r, e);
            case 2:
              return _context393.abrupt("return", _context393.sent);
            case 3:
            case "end":
              return _context393.stop();
          }
        }, _callee385);
      }));
      return _va.apply(this, arguments);
    }
    function _a(e, t) {
      var r = new Uint8Array(Ea);
      for (var _n53 = 0; _n53 < ba; _n53++) r[_n53] = e[_n53], r[ba + _n53] = t[_n53];
      return r;
    }
    var Sa = /*#__PURE__*/function () {
      function Sa(e) {
        _classCallCheck(this, Sa);
        this._key = ka(e, wa);
      }
      _createClass(Sa, [{
        key: "verify",
        value: function () {
          var _verify2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee64(e, t) {
            return _regeneratorRuntime().wrap(function _callee64$(_context66) {
              while (1) switch (_context66.prev = _context66.next) {
                case 0:
                  _context66.next = 2;
                  return va(this._key, t, e);
                case 2:
                  return _context66.abrupt("return", _context66.sent);
                case 3:
                case "end":
                  return _context66.stop();
              }
            }, _callee64, this);
          }));
          function verify(_x77, _x78) {
            return _verify2.apply(this, arguments);
          }
          return verify;
        }()
      }, {
        key: "marshal",
        value: function marshal() {
          return this._key;
        }
      }, {
        key: "bytes",
        get: function get() {
          return Wi.encode({
            Type: $i.Ed25519,
            Data: this.marshal()
          }).subarray();
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return Xt(this.bytes, e.bytes);
        }
      }, {
        key: "hash",
        value: function () {
          var _hash3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee65() {
            var _yield$He$digest3, e;
            return _regeneratorRuntime().wrap(function _callee65$(_context67) {
              while (1) switch (_context67.prev = _context67.next) {
                case 0:
                  _context67.next = 2;
                  return He.digest(this.bytes);
                case 2:
                  _yield$He$digest3 = _context67.sent;
                  e = _yield$He$digest3.bytes;
                  return _context67.abrupt("return", e);
                case 5:
                case "end":
                  return _context67.stop();
              }
            }, _callee65, this);
          }));
          function hash() {
            return _hash3.apply(this, arguments);
          }
          return hash;
        }()
      }]);
      return Sa;
    }();
    var Ca = /*#__PURE__*/function () {
      function Ca(e, t) {
        _classCallCheck(this, Ca);
        this._key = ka(e, Ea), this._publicKey = ka(t, wa);
      }
      _createClass(Ca, [{
        key: "sign",
        value: function () {
          var _sign2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee68(e) {
            return _regeneratorRuntime().wrap(function _callee68$(_context70) {
              while (1) switch (_context70.prev = _context70.next) {
                case 0:
                  _context70.next = 2;
                  return function () {
                    var _ref49 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee67(e, t) {
                      var r;
                      return _regeneratorRuntime().wrap(function _callee67$(_context69) {
                        while (1) switch (_context69.prev = _context69.next) {
                          case 0:
                            r = e.subarray(0, ba);
                            _context69.next = 3;
                            return function () {
                              var _ref50 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee66(e, t) {
                                var _yield$fa, r, n, i, s, o, a;
                                return _regeneratorRuntime().wrap(function _callee66$(_context68) {
                                  while (1) switch (_context68.prev = _context68.next) {
                                    case 0:
                                      e = ha(e);
                                      _context68.next = 3;
                                      return fa(t);
                                    case 3:
                                      _yield$fa = _context68.sent;
                                      r = _yield$fa.prefix;
                                      n = _yield$fa.scalar;
                                      i = _yield$fa.pointBytes;
                                      _context68.t0 = ua;
                                      _context68.next = 10;
                                      return ma.sha512(r, e);
                                    case 10:
                                      _context68.t1 = _context68.sent;
                                      s = (0, _context68.t0)(_context68.t1);
                                      o = Go.BASE.multiply(s);
                                      _context68.t2 = sa;
                                      _context68.t3 = s;
                                      _context68.t4 = ua;
                                      _context68.next = 18;
                                      return ma.sha512(o.toRawBytes(), i, e);
                                    case 18:
                                      _context68.t5 = _context68.sent;
                                      _context68.t6 = (0, _context68.t4)(_context68.t5);
                                      _context68.t7 = n;
                                      _context68.t8 = _context68.t6 * _context68.t7;
                                      _context68.t9 = _context68.t3 + _context68.t8;
                                      _context68.t10 = Po.l;
                                      a = (0, _context68.t2)(_context68.t9, _context68.t10);
                                      return _context68.abrupt("return", new Wo(o, a).toRawBytes());
                                    case 26:
                                    case "end":
                                      return _context68.stop();
                                  }
                                }, _callee66);
                              }));
                              return function (_x82, _x83) {
                                return _ref50.apply(this, arguments);
                              };
                            }()(t, r);
                          case 3:
                            return _context69.abrupt("return", _context69.sent);
                          case 4:
                          case "end":
                            return _context69.stop();
                        }
                      }, _callee67);
                    }));
                    return function (_x80, _x81) {
                      return _ref49.apply(this, arguments);
                    };
                  }()(this._key, e);
                case 2:
                  return _context70.abrupt("return", _context70.sent);
                case 3:
                case "end":
                  return _context70.stop();
              }
            }, _callee68, this);
          }));
          function sign(_x79) {
            return _sign2.apply(this, arguments);
          }
          return sign;
        }()
      }, {
        key: "public",
        get: function get() {
          return new Sa(this._publicKey);
        }
      }, {
        key: "marshal",
        value: function marshal() {
          return this._key;
        }
      }, {
        key: "bytes",
        get: function get() {
          return Yi.encode({
            Type: $i.Ed25519,
            Data: this.marshal()
          }).subarray();
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return Xt(this.bytes, e.bytes);
        }
      }, {
        key: "hash",
        value: function () {
          var _hash4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee69() {
            var _yield$He$digest4, e;
            return _regeneratorRuntime().wrap(function _callee69$(_context71) {
              while (1) switch (_context71.prev = _context71.next) {
                case 0:
                  _context71.next = 2;
                  return He.digest(this.bytes);
                case 2:
                  _yield$He$digest4 = _context71.sent;
                  e = _yield$He$digest4.bytes;
                  return _context71.abrupt("return", e);
                case 5:
                case "end":
                  return _context71.stop();
              }
            }, _callee69, this);
          }));
          function hash() {
            return _hash4.apply(this, arguments);
          }
          return hash;
        }()
      }, {
        key: "id",
        value: function () {
          var _id2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee70() {
            var e;
            return _regeneratorRuntime().wrap(function _callee70$(_context72) {
              while (1) switch (_context72.prev = _context72.next) {
                case 0:
                  _context72.next = 2;
                  return Ge.digest(this.public.bytes);
                case 2:
                  e = _context72.sent;
                  return _context72.abrupt("return", q.encode(e.bytes).substring(1));
                case 4:
                case "end":
                  return _context72.stop();
              }
            }, _callee70, this);
          }));
          function id() {
            return _id2.apply(this, arguments);
          }
          return id;
        }()
      }, {
        key: "export",
        value: function () {
          var _export3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee71(e) {
            var t,
              _args73 = arguments;
            return _regeneratorRuntime().wrap(function _callee71$(_context73) {
              while (1) switch (_context73.prev = _context73.next) {
                case 0:
                  t = _args73.length > 1 && _args73[1] !== undefined ? _args73[1] : "libp2p-key";
                  if (!("libp2p-key" === t)) {
                    _context73.next = 5;
                    break;
                  }
                  _context73.next = 4;
                  return Eo(this.bytes, e);
                case 4:
                  return _context73.abrupt("return", _context73.sent);
                case 5:
                  throw new rs("export format '".concat(t, "' is not supported"), "ERR_INVALID_EXPORT_FORMAT");
                case 6:
                case "end":
                  return _context73.stop();
              }
            }, _callee71, this);
          }));
          function _export(_x84) {
            return _export3.apply(this, arguments);
          }
          return _export;
        }()
      }]);
      return Ca;
    }();
    function Aa(e) {
      if (e.length > Ea) {
        var _t75 = (e = ka(e, Ea + wa)).subarray(0, Ea),
          _r69 = e.subarray(Ea, e.length);
        return new Ca(_t75, _r69);
      }
      var t = (e = ka(e, Ea)).subarray(0, Ea),
        r = e.subarray(wa);
      return new Ca(t, r);
    }
    function Ia(e) {
      return e = ka(e, wa), new Sa(e);
    }
    function Ta() {
      return _Ta.apply(this, arguments);
    }
    function _Ta() {
      _Ta = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee387() {
        var _yield, e, t;
        return _regeneratorRuntime().wrap(function _callee387$(_context395) {
          while (1) switch (_context395.prev = _context395.next) {
            case 0:
              _context395.next = 2;
              return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee386() {
                var e, t;
                return _regeneratorRuntime().wrap(function _callee386$(_context394) {
                  while (1) switch (_context394.prev = _context394.next) {
                    case 0:
                      e = ma.randomPrivateKey();
                      _context394.next = 3;
                      return ya(e);
                    case 3:
                      t = _context394.sent;
                      return _context394.abrupt("return", {
                        privateKey: _a(e, t),
                        publicKey: t
                      });
                    case 5:
                    case "end":
                      return _context394.stop();
                  }
                }, _callee386);
              }))();
            case 2:
              _yield = _context395.sent;
              e = _yield.privateKey;
              t = _yield.publicKey;
              return _context395.abrupt("return", new Ca(e, t));
            case 6:
            case "end":
              return _context395.stop();
          }
        }, _callee387);
      }));
      return _Ta.apply(this, arguments);
    }
    function Ra(_x85) {
      return _Ra.apply(this, arguments);
    }
    function _Ra() {
      _Ra = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee389(e) {
        var _yield2, t, r;
        return _regeneratorRuntime().wrap(function _callee389$(_context397) {
          while (1) switch (_context397.prev = _context397.next) {
            case 0:
              _context397.next = 2;
              return function () {
                var _ref168 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee388(e) {
                  var t, r;
                  return _regeneratorRuntime().wrap(function _callee388$(_context396) {
                    while (1) switch (_context396.prev = _context396.next) {
                      case 0:
                        if (!(e.length !== ba)) {
                          _context396.next = 2;
                          break;
                        }
                        throw new TypeError('"seed" must be 32 bytes in length.');
                      case 2:
                        if (e instanceof Uint8Array) {
                          _context396.next = 4;
                          break;
                        }
                        throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');
                      case 4:
                        t = e;
                        _context396.next = 7;
                        return ya(t);
                      case 7:
                        r = _context396.sent;
                        return _context396.abrupt("return", {
                          privateKey: _a(t, r),
                          publicKey: r
                        });
                      case 9:
                      case "end":
                        return _context396.stop();
                    }
                  }, _callee388);
                }));
                return function (_x385) {
                  return _ref168.apply(this, arguments);
                };
              }()(e);
            case 2:
              _yield2 = _context397.sent;
              t = _yield2.privateKey;
              r = _yield2.publicKey;
              return _context397.abrupt("return", new Ca(t, r));
            case 6:
            case "end":
              return _context397.stop();
          }
        }, _callee389);
      }));
      return _Ra.apply(this, arguments);
    }
    function ka(e, t) {
      var _e78;
      if ((e = Uint8Array.from((_e78 = e) !== null && _e78 !== void 0 ? _e78 : [])).length !== t) throw new rs("Key must be a Uint8Array of length ".concat(t, ", got ").concat(e.length), "ERR_INVALID_KEY_TYPE");
      return e;
    }
    function Na(_x86, _x87) {
      return _Na.apply(this, arguments);
    }
    function _Na() {
      _Na = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee391(e, t) {
        var _yield$He$digest7, r;
        return _regeneratorRuntime().wrap(function _callee391$(_context399) {
          while (1) switch (_context399.prev = _context399.next) {
            case 0:
              _context399.next = 2;
              return He.digest(t);
            case 2:
              _yield$He$digest7 = _context399.sent;
              r = _yield$He$digest7.digest;
              _context399.prev = 4;
              _context399.next = 7;
              return function () {
                var _ref169 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee390(e, t) {
                  var r,
                    _ref170,
                    n,
                    i,
                    s,
                    o,
                    a,
                    _args398 = arguments;
                  return _regeneratorRuntime().wrap(function _callee390$(_context398) {
                    while (1) switch (_context398.prev = _context398.next) {
                      case 0:
                        r = _args398.length > 2 && _args398[2] !== undefined ? _args398[2] : {};
                        _ref170 = function (e, t, r) {
                          if (null == e) throw new Error("sign: expected valid message hash, not \"".concat(e, "\""));
                          var n = Hs(e),
                            i = ro(t),
                            s = [ao(i), oo(n)];
                          if (null != r) {
                            !0 === r && (r = ho.randomBytes(ws));
                            var _e153 = Hs(r);
                            if (_e153.length !== ws) throw new Error("sign: Expected ".concat(ws, " bytes of extra data"));
                            s.push(_e153);
                          }
                          return {
                            seed: Bs.apply(void 0, s),
                            m: so(n),
                            d: i
                          };
                        }(e, t, r.extraEntropy), n = _ref170.seed, i = _ref170.m, s = _ref170.d, o = new Zs(bs, Es);
                        _context398.next = 4;
                        return o.reseed(n);
                      case 4:
                        _context398.t0 = to;
                        _context398.next = 7;
                        return o.generate();
                      case 7:
                        _context398.t1 = _context398.sent;
                        _context398.t2 = i;
                        _context398.t3 = s;
                        _context398.t4 = r.canonical;
                        if (a = (0, _context398.t0)(_context398.t1, _context398.t2, _context398.t3, _context398.t4)) {
                          _context398.next = 16;
                          break;
                        }
                        _context398.next = 14;
                        return o.reseed();
                      case 14:
                        _context398.next = 4;
                        break;
                      case 16:
                        return _context398.abrupt("return", function (e, t) {
                          var r = e.sig,
                            n = e.recovery,
                            _Object$assign = Object.assign({
                              canonical: !0,
                              der: !0
                            }, t),
                            i = _Object$assign.der,
                            s = _Object$assign.recovered,
                            o = i ? r.toDERRawBytes() : r.toCompactRawBytes();
                          return s ? [o, n] : o;
                        }(a, r));
                      case 17:
                      case "end":
                        return _context398.stop();
                    }
                  }, _callee390);
                }));
                return function (_x386, _x387) {
                  return _ref169.apply(this, arguments);
                };
              }()(r, e);
            case 7:
              return _context399.abrupt("return", _context399.sent);
            case 10:
              _context399.prev = 10;
              _context399.t0 = _context399["catch"](4);
              throw new rs(String(_context399.t0), "ERR_INVALID_INPUT");
            case 13:
            case "end":
              return _context399.stop();
          }
        }, _callee391, null, [[4, 10]]);
      }));
      return _Na.apply(this, arguments);
    }
    function La(_x88, _x89, _x90) {
      return _La.apply(this, arguments);
    }
    function _La() {
      _La = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee392(e, t, r) {
        var _yield$He$digest8, _n85;
        return _regeneratorRuntime().wrap(function _callee392$(_context400) {
          while (1) switch (_context400.prev = _context400.next) {
            case 0:
              _context400.prev = 0;
              _context400.next = 3;
              return He.digest(r);
            case 3:
              _yield$He$digest8 = _context400.sent;
              _n85 = _yield$He$digest8.digest;
              return _context400.abrupt("return", function (e, t, r) {
                var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : co;
                var i;
                try {
                  i = no(e), t = Hs(t);
                } catch (e) {
                  return !1;
                }
                var _i52 = i,
                  s = _i52.r,
                  o = _i52.s;
                if (n.strict && i.hasHighS()) return !1;
                var a = Ys(t);
                var c;
                try {
                  c = function (e) {
                    return e instanceof Ns ? (e.assertValidity(), e) : Ns.fromHex(e);
                  }(r);
                } catch (e) {
                  return !1;
                }
                var l = ys.n,
                  u = Ws(o, l),
                  h = $s(a * u, l),
                  d = $s(s * u, l),
                  p = Ns.BASE.multiplyAndAddUnsafe(c, h, d);
                return !!p && $s(p.x, l) === s;
              }(t, _n85, e));
            case 8:
              _context400.prev = 8;
              _context400.t0 = _context400["catch"](0);
              throw new rs(String(_context400.t0), "ERR_INVALID_INPUT");
            case 11:
            case "end":
              return _context400.stop();
          }
        }, _callee392, null, [[0, 8]]);
      }));
      return _La.apply(this, arguments);
    }
    function Da(e) {
      try {
        Ns.fromHex(e);
      } catch (e) {
        throw new rs(String(e), "ERR_INVALID_PUBLIC_KEY");
      }
    }
    var Pa = /*#__PURE__*/function () {
      function Pa(e) {
        _classCallCheck(this, Pa);
        Da(e), this._key = e;
      }
      _createClass(Pa, [{
        key: "verify",
        value: function () {
          var _verify3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee72(e, t) {
            return _regeneratorRuntime().wrap(function _callee72$(_context74) {
              while (1) switch (_context74.prev = _context74.next) {
                case 0:
                  _context74.next = 2;
                  return La(this._key, t, e);
                case 2:
                  return _context74.abrupt("return", _context74.sent);
                case 3:
                case "end":
                  return _context74.stop();
              }
            }, _callee72, this);
          }));
          function verify(_x91, _x92) {
            return _verify3.apply(this, arguments);
          }
          return verify;
        }()
      }, {
        key: "marshal",
        value: function marshal() {
          return e = this._key, Ns.fromHex(e).toRawBytes(!0);
          var e;
        }
      }, {
        key: "bytes",
        get: function get() {
          return Wi.encode({
            Type: $i.Secp256k1,
            Data: this.marshal()
          }).subarray();
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return Xt(this.bytes, e.bytes);
        }
      }, {
        key: "hash",
        value: function () {
          var _hash5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee73() {
            var _yield$He$digest5, e;
            return _regeneratorRuntime().wrap(function _callee73$(_context75) {
              while (1) switch (_context75.prev = _context75.next) {
                case 0:
                  _context75.next = 2;
                  return He.digest(this.bytes);
                case 2:
                  _yield$He$digest5 = _context75.sent;
                  e = _yield$He$digest5.bytes;
                  return _context75.abrupt("return", e);
                case 5:
                case "end":
                  return _context75.stop();
              }
            }, _callee73, this);
          }));
          function hash() {
            return _hash5.apply(this, arguments);
          }
          return hash;
        }()
      }]);
      return Pa;
    }();
    var Ba = /*#__PURE__*/function () {
      function Ba(e, t) {
        _classCallCheck(this, Ba);
        this._key = e, this._publicKey = t !== null && t !== void 0 ? t : function (e) {
          try {
            return io(e, !0);
          } catch (e) {
            throw new rs(String(e), "ERR_INVALID_PRIVATE_KEY");
          }
        }(e), function (e) {
          try {
            io(e, !0);
          } catch (e) {
            throw new rs(String(e), "ERR_INVALID_PRIVATE_KEY");
          }
        }(this._key), Da(this._publicKey);
      }
      _createClass(Ba, [{
        key: "sign",
        value: function () {
          var _sign3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee74(e) {
            return _regeneratorRuntime().wrap(function _callee74$(_context76) {
              while (1) switch (_context76.prev = _context76.next) {
                case 0:
                  _context76.next = 2;
                  return Na(this._key, e);
                case 2:
                  return _context76.abrupt("return", _context76.sent);
                case 3:
                case "end":
                  return _context76.stop();
              }
            }, _callee74, this);
          }));
          function sign(_x93) {
            return _sign3.apply(this, arguments);
          }
          return sign;
        }()
      }, {
        key: "public",
        get: function get() {
          return new Pa(this._publicKey);
        }
      }, {
        key: "marshal",
        value: function marshal() {
          return this._key;
        }
      }, {
        key: "bytes",
        get: function get() {
          return Yi.encode({
            Type: $i.Secp256k1,
            Data: this.marshal()
          }).subarray();
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return Xt(this.bytes, e.bytes);
        }
      }, {
        key: "hash",
        value: function () {
          var _hash6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee75() {
            var _yield$He$digest6, e;
            return _regeneratorRuntime().wrap(function _callee75$(_context77) {
              while (1) switch (_context77.prev = _context77.next) {
                case 0:
                  _context77.next = 2;
                  return He.digest(this.bytes);
                case 2:
                  _yield$He$digest6 = _context77.sent;
                  e = _yield$He$digest6.bytes;
                  return _context77.abrupt("return", e);
                case 5:
                case "end":
                  return _context77.stop();
              }
            }, _callee75, this);
          }));
          function hash() {
            return _hash6.apply(this, arguments);
          }
          return hash;
        }()
      }, {
        key: "id",
        value: function () {
          var _id3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee76() {
            return _regeneratorRuntime().wrap(function _callee76$(_context78) {
              while (1) switch (_context78.prev = _context78.next) {
                case 0:
                  _context78.t0 = St;
                  _context78.next = 3;
                  return this.public.hash();
                case 3:
                  _context78.t1 = _context78.sent;
                  return _context78.abrupt("return", (0, _context78.t0)(_context78.t1, "base58btc"));
                case 5:
                case "end":
                  return _context78.stop();
              }
            }, _callee76, this);
          }));
          function id() {
            return _id3.apply(this, arguments);
          }
          return id;
        }()
      }, {
        key: "export",
        value: function () {
          var _export4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee77(e) {
            var t,
              _args79 = arguments;
            return _regeneratorRuntime().wrap(function _callee77$(_context79) {
              while (1) switch (_context79.prev = _context79.next) {
                case 0:
                  t = _args79.length > 1 && _args79[1] !== undefined ? _args79[1] : "libp2p-key";
                  if (!("libp2p-key" === t)) {
                    _context79.next = 5;
                    break;
                  }
                  _context79.next = 4;
                  return Eo(this.bytes, e);
                case 4:
                  return _context79.abrupt("return", _context79.sent);
                case 5:
                  throw new rs("export format '".concat(t, "' is not supported"), "ERR_INVALID_EXPORT_FORMAT");
                case 6:
                case "end":
                  return _context79.stop();
              }
            }, _callee77, this);
          }));
          function _export(_x94) {
            return _export4.apply(this, arguments);
          }
          return _export;
        }()
      }]);
      return Ba;
    }();
    function Oa(e) {
      return new Ba(e);
    }
    function xa(e) {
      return new Pa(e);
    }
    function Ua() {
      return _Ua.apply(this, arguments);
    }
    function _Ua() {
      _Ua = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee393() {
        var e;
        return _regeneratorRuntime().wrap(function _callee393$(_context401) {
          while (1) switch (_context401.prev = _context401.next) {
            case 0:
              _context401.next = 2;
              return ho.randomPrivateKey();
            case 2:
              e = _context401.sent;
              return _context401.abrupt("return", new Ba(e));
            case 4:
            case "end":
              return _context401.stop();
          }
        }, _callee393);
      }));
      return _Ua.apply(this, arguments);
    }
    var Ma = {
      rsa: f,
      ed25519: y,
      secp256k1: g
    };
    function Va(e) {
      var t = Object.keys(Ma).join(" / ");
      return new rs("invalid or unsupported key type ".concat(e, ". Must be ").concat(t), "ERR_UNSUPPORTED_KEY_TYPE");
    }
    function Ka(e) {
      if ("rsa" === (e = e.toLowerCase()) || "ed25519" === e || "secp256k1" === e) return Ma[e];
      throw Va(e);
    }
    function Fa(_x95, _x96) {
      return _Fa.apply(this, arguments);
    }
    function _Fa() {
      _Fa = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee394(e, t) {
        return _regeneratorRuntime().wrap(function _callee394$(_context402) {
          while (1) switch (_context402.prev = _context402.next) {
            case 0:
              _context402.next = 2;
              return Ka(e).generateKeyPair(t !== null && t !== void 0 ? t : 2048);
            case 2:
              return _context402.abrupt("return", _context402.sent);
            case 3:
            case "end":
              return _context402.stop();
          }
        }, _callee394);
      }));
      return _Fa.apply(this, arguments);
    }
    function qa(e) {
      var _t$Data, _t$Type;
      var t = Wi.decode(e),
        r = (_t$Data = t.Data) !== null && _t$Data !== void 0 ? _t$Data : new Uint8Array();
      switch (t.Type) {
        case $i.RSA:
          return Ma.rsa.unmarshalRsaPublicKey(r);
        case $i.Ed25519:
          return Ma.ed25519.unmarshalEd25519PublicKey(r);
        case $i.Secp256k1:
          return Ma.secp256k1.unmarshalSecp256k1PublicKey(r);
        default:
          throw Va((_t$Type = t.Type) !== null && _t$Type !== void 0 ? _t$Type : "RSA");
      }
    }
    function ja(_x97) {
      return _ja.apply(this, arguments);
    }
    function _ja() {
      _ja = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee395(e) {
        var _t$Data2, _t$Type2;
        var t, r;
        return _regeneratorRuntime().wrap(function _callee395$(_context403) {
          while (1) switch (_context403.prev = _context403.next) {
            case 0:
              t = Yi.decode(e), r = (_t$Data2 = t.Data) !== null && _t$Data2 !== void 0 ? _t$Data2 : new Uint8Array();
              _context403.t0 = t.Type;
              _context403.next = _context403.t0 === $i.RSA ? 4 : _context403.t0 === $i.Ed25519 ? 7 : _context403.t0 === $i.Secp256k1 ? 8 : 9;
              break;
            case 4:
              _context403.next = 6;
              return Ma.rsa.unmarshalRsaPrivateKey(r);
            case 6:
              return _context403.abrupt("return", _context403.sent);
            case 7:
              return _context403.abrupt("return", Ma.ed25519.unmarshalEd25519PrivateKey(r));
            case 8:
              return _context403.abrupt("return", Ma.secp256k1.unmarshalSecp256k1PrivateKey(r));
            case 9:
              throw Va((_t$Type2 = t.Type) !== null && _t$Type2 !== void 0 ? _t$Type2 : "RSA");
            case 10:
            case "end":
              return _context403.stop();
          }
        }, _callee395);
      }));
      return _ja.apply(this, arguments);
    }
    function Ha(_x98, _x99) {
      return _Ha.apply(this, arguments);
    }
    function _Ha() {
      _Ha = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee397(e, t) {
        var _r152, r, n;
        return _regeneratorRuntime().wrap(function _callee397$(_context405) {
          while (1) switch (_context405.prev = _context405.next) {
            case 0:
              _context405.prev = 0;
              _context405.next = 3;
              return function () {
                var _ref171 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee396(e, t) {
                  var r, n;
                  return _regeneratorRuntime().wrap(function _callee396$(_context404) {
                    while (1) switch (_context404.prev = _context404.next) {
                      case 0:
                        r = J.decode(e), n = as();
                        _context404.next = 3;
                        return n.decrypt(r, t);
                      case 3:
                        return _context404.abrupt("return", _context404.sent);
                      case 4:
                      case "end":
                        return _context404.stop();
                    }
                  }, _callee396);
                }));
                return function (_x388, _x389) {
                  return _ref171.apply(this, arguments);
                };
              }()(e, t);
            case 3:
              _r152 = _context405.sent;
              _context405.next = 6;
              return ja(_r152);
            case 6:
              return _context405.abrupt("return", _context405.sent);
            case 9:
              _context405.prev = 9;
              _context405.t0 = _context405["catch"](0);
            case 11:
              r = es.pki.decryptRsaPrivateKey(e, t);
              if (!(null === r)) {
                _context405.next = 14;
                break;
              }
              throw new rs("Cannot read the key, most likely the password is wrong or not a RSA key", "ERR_CANNOT_DECRYPT_PEM");
            case 14:
              n = es.asn1.toDer(es.pki.privateKeyToAsn1(r));
              n = Pt(n.getBytes(), "ascii");
              _context405.next = 18;
              return Ma.rsa.unmarshalRsaPrivateKey(n);
            case 18:
              return _context405.abrupt("return", _context405.sent);
            case 19:
            case "end":
              return _context405.stop();
          }
        }, _callee397, null, [[0, 9]]);
      }));
      return _Ha.apply(this, arguments);
    }
    var za = Symbol.for("@libp2p/peer-id");
    function $a(e) {
      return null != e && Boolean(e[za]);
    }
    var Ga = Symbol.for("nodejs.util.inspect.custom"),
      Wa = Object.values(yt).map(function (e) {
        return e.decoder;
      }).reduce(function (e, t) {
        return e.or(t);
      }, yt.identity.decoder),
      Ya = 114,
      Qa = 36,
      Xa = 37;
    var Za = /*#__PURE__*/function (_Symbol$toStringTag3) {
      function Za(e) {
        _classCallCheck(this, Za);
        this.type = e.type, this.multihash = e.multihash, this.privateKey = e.privateKey, Object.defineProperty(this, "string", {
          enumerable: !1,
          writable: !0
        });
      }
      _createClass(Za, [{
        key: _Symbol$toStringTag3,
        get: function get() {
          return "PeerId(".concat(this.toString(), ")");
        }
      }, {
        key: za,
        get: function get() {
          return !0;
        }
      }, {
        key: "toString",
        value: function toString() {
          return null == this.string && (this.string = q.encode(this.multihash.bytes).slice(1)), this.string;
        }
      }, {
        key: "toCID",
        value: function toCID() {
          return at.createV1(Ya, this.multihash);
        }
      }, {
        key: "toBytes",
        value: function toBytes() {
          return this.multihash.bytes;
        }
      }, {
        key: "toJSON",
        value: function toJSON() {
          return this.toString();
        }
      }, {
        key: "equals",
        value: function equals(e) {
          var _e$multihash;
          if (e instanceof Uint8Array) return Xt(this.multihash.bytes, e);
          if ("string" == typeof e) return nc(e).equals(this);
          if (null != (e === null || e === void 0 ? void 0 : (_e$multihash = e.multihash) === null || _e$multihash === void 0 ? void 0 : _e$multihash.bytes)) return Xt(this.multihash.bytes, e.multihash.bytes);
          throw new Error("not valid Id");
        }
      }, {
        key: Ga,
        value: function value() {
          return "PeerId(".concat(this.toString(), ")");
        }
      }]);
      return Za;
    }(Symbol.toStringTag);
    var Ja = /*#__PURE__*/function (_Za) {
      _inherits(Ja, _Za);
      var _super26 = _createSuper(Ja);
      function Ja(e) {
        var _this95;
        _classCallCheck(this, Ja);
        _this95 = _super26.call(this, _objectSpread(_objectSpread({}, e), {}, {
          type: "RSA"
        })), _this95.type = "RSA", _this95.publicKey = e.publicKey;
        return _this95;
      }
      return _createClass(Ja);
    }(Za);
    var ec = /*#__PURE__*/function (_Za2) {
      _inherits(ec, _Za2);
      var _super27 = _createSuper(ec);
      function ec(e) {
        var _this96;
        _classCallCheck(this, ec);
        _this96 = _super27.call(this, _objectSpread(_objectSpread({}, e), {}, {
          type: "Ed25519"
        })), _this96.type = "Ed25519", _this96.publicKey = e.multihash.digest;
        return _this96;
      }
      return _createClass(ec);
    }(Za);
    var tc = /*#__PURE__*/function (_Za3) {
      _inherits(tc, _Za3);
      var _super28 = _createSuper(tc);
      function tc(e) {
        var _this97;
        _classCallCheck(this, tc);
        _this97 = _super28.call(this, _objectSpread(_objectSpread({}, e), {}, {
          type: "secp256k1"
        })), _this97.type = "secp256k1", _this97.publicKey = e.multihash.digest;
        return _this97;
      }
      return _createClass(tc);
    }(Za);
    function rc(e) {
      if ("RSA" === e.type) return new Ja(e);
      if ("Ed25519" === e.type) return new ec(e);
      if ("secp256k1" === e.type) return new tc(e);
      throw new rs("Not a PeerId", "ERR_INVALID_PARAMETERS");
    }
    function nc(e, t) {
      var _t76;
      if (t = (_t76 = t) !== null && _t76 !== void 0 ? _t76 : Wa, "1" === e.charAt(0) || "Q" === e.charAt(0)) {
        var _t77 = Ve(q.decode("z".concat(e)));
        return e.startsWith("12D") ? new ec({
          multihash: _t77
        }) : e.startsWith("16U") ? new tc({
          multihash: _t77
        }) : new Ja({
          multihash: _t77
        });
      }
      return ic(Wa.decode(e));
    }
    function ic(e) {
      try {
        var _t78 = Ve(e);
        if (_t78.code === Ge.code) {
          if (_t78.digest.length === Qa) return new ec({
            multihash: _t78
          });
          if (_t78.digest.length === Xa) return new tc({
            multihash: _t78
          });
        }
        if (_t78.code === He.code) return new Ja({
          multihash: _t78
        });
      } catch (_unused3) {
        return function (e) {
          if (null == e || null == e.multihash || null == e.version || 1 === e.version && e.code !== Ya) throw new Error("Supplied PeerID CID is invalid");
          var t = e.multihash;
          if (t.code === He.code) return new Ja({
            multihash: e.multihash
          });
          if (t.code === Ge.code) {
            if (t.digest.length === Qa) return new ec({
              multihash: e.multihash
            });
            if (t.digest.length === Xa) return new tc({
              multihash: e.multihash
            });
          }
          throw new Error("Supplied PeerID CID is invalid");
        }(at.decode(e));
      }
      throw new Error("Supplied PeerID CID is invalid");
    }
    function sc(_x100, _x101) {
      return _sc.apply(this, arguments);
    }
    function _sc() {
      _sc = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee398(e, t) {
        return _regeneratorRuntime().wrap(function _callee398$(_context406) {
          while (1) switch (_context406.prev = _context406.next) {
            case 0:
              if (!(e.length === Qa)) {
                _context406.next = 4;
                break;
              }
              _context406.t0 = new ec({
                multihash: Me(Ge.code, e),
                privateKey: t
              });
              _context406.next = 17;
              break;
            case 4:
              if (!(e.length === Xa)) {
                _context406.next = 8;
                break;
              }
              _context406.t1 = new tc({
                multihash: Me(Ge.code, e),
                privateKey: t
              });
              _context406.next = 16;
              break;
            case 8:
              _context406.t2 = Ja;
              _context406.next = 11;
              return He.digest(e);
            case 11:
              _context406.t3 = _context406.sent;
              _context406.t4 = e;
              _context406.t5 = t;
              _context406.t6 = {
                multihash: _context406.t3,
                publicKey: _context406.t4,
                privateKey: _context406.t5
              };
              _context406.t1 = new _context406.t2(_context406.t6);
            case 16:
              _context406.t0 = _context406.t1;
            case 17:
              return _context406.abrupt("return", _context406.t0);
            case 18:
            case "end":
              return _context406.stop();
          }
        }, _callee398);
      }));
      return _sc.apply(this, arguments);
    }
    var oc, ac;
    function cc(_x102) {
      return _cc.apply(this, arguments);
    }
    function _cc() {
      _cc = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee399(e) {
        return _regeneratorRuntime().wrap(function _callee399$(_context407) {
          while (1) switch (_context407.prev = _context407.next) {
            case 0:
              _context407.next = 2;
              return sc(e.identityKey);
            case 2:
              return _context407.abrupt("return", _context407.sent);
            case 3:
            case "end":
              return _context407.stop();
          }
        }, _callee399);
      }));
      return _cc.apply(this, arguments);
    }
    function lc(e) {
      return ac.decode(e);
    }
    function uc(e) {
      var t = Pt("noise-libp2p-static-key:");
      return Bt([t, e], t.length + e.length);
    }
    function hc(_x103, _x104, _x105) {
      return _hc.apply(this, arguments);
    }
    function _hc() {
      _hc = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee400(e, t, r) {
        var n, i, s;
        return _regeneratorRuntime().wrap(function _callee400$(_context408) {
          while (1) switch (_context408.prev = _context408.next) {
            case 0:
              _context408.next = 2;
              return sc(t.identityKey);
            case 2:
              n = _context408.sent;
              if (n.equals(r)) {
                _context408.next = 5;
                break;
              }
              throw new Error("Payload identity key ".concat(n.toString(), " does not match expected remote peer ").concat(r.toString()));
            case 5:
              i = uc(e);
              if (!(null == n.publicKey)) {
                _context408.next = 8;
                break;
              }
              throw new Error("PublicKey was missing from PeerId");
            case 8:
              if (!(null == t.identitySig)) {
                _context408.next = 10;
                break;
              }
              throw new Error("Signature was missing from message");
            case 10:
              s = qa(n.publicKey);
              _context408.next = 13;
              return s.verify(i, t.identitySig);
            case 13:
              if (_context408.sent) {
                _context408.next = 15;
                break;
              }
              throw new Error("Static key doesn't match to peer that signed payload!");
            case 15:
              return _context408.abrupt("return", n);
            case 16:
            case "end":
              return _context408.stop();
          }
        }, _callee400);
      }));
      return _hc.apply(this, arguments);
    }
    function dc(e) {
      return e instanceof Uint8Array && 32 === e.length;
    }
    !function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = Ji(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          if (!1 !== r.lengthDelimited && t.fork(), null != e.webtransportCerthashes) {
            var _iterator52 = _createForOfIteratorHelper(e.webtransportCerthashes),
              _step52;
            try {
              for (_iterator52.s(); !(_step52 = _iterator52.n()).done;) {
                var _r70 = _step52.value;
                t.uint32(10), t.bytes(_r70);
              }
            } catch (err) {
              _iterator52.e(err);
            } finally {
              _iterator52.f();
            }
          }
          !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {
              webtransportCerthashes: []
            },
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t79 = e.uint32();
            _t79 >>> 3 == 1 ? r.webtransportCerthashes.push(e.bytes()) : e.skipType(7 & _t79);
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Hi(t, e.codec());
      }, e.decode = function (t) {
        return ji(t, e.codec());
      };
    }(oc || (oc = {})), function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = Ji(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          !1 !== r.lengthDelimited && t.fork(), (!0 === r.writeDefaults || null != e.identityKey && e.identityKey.byteLength > 0) && (t.uint32(10), t.bytes(e.identityKey)), (!0 === r.writeDefaults || null != e.identitySig && e.identitySig.byteLength > 0) && (t.uint32(18), t.bytes(e.identitySig)), null != e.extensions && (t.uint32(34), oc.codec().encode(e.extensions, t, {
            writeDefaults: !1
          })), !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {
              identityKey: new Uint8Array(0),
              identitySig: new Uint8Array(0)
            },
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t80 = e.uint32();
            switch (_t80 >>> 3) {
              case 1:
                r.identityKey = e.bytes();
                break;
              case 2:
                r.identitySig = e.bytes();
                break;
              case 4:
                r.extensions = oc.codec().decode(e, e.uint32());
                break;
              default:
                e.skipType(7 & _t80);
            }
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Hi(t, e.codec());
      }, e.decode = function (t) {
        return ji(t, e.codec());
      };
    }(ac || (ac = {}));
    var pc = ne("libp2p:noise");
    var fc;
    function yc(e) {
      e ? (fc("LOCAL_PUBLIC_EPHEMERAL_KEY ".concat(St(e.publicKey, "hex"))), fc("LOCAL_PRIVATE_EPHEMERAL_KEY ".concat(St(e.privateKey, "hex")))) : fc("Missing local ephemeral keys.");
    }
    function gc(e) {
      fc("REMOTE_EPHEMERAL_PUBLIC_KEY ".concat(St(e, "hex")));
    }
    fc = Ii ? pc : Object.assign(function () {}, {
      enabled: !1,
      trace: function trace() {},
      error: function error() {}
    });
    var mc = /*#__PURE__*/function () {
      function mc() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
        _classCallCheck(this, mc);
        this.n = e, this.bytes = new Uint8Array(12), this.view = new DataView(this.bytes.buffer, this.bytes.byteOffset, this.bytes.byteLength), this.view.setUint32(4, e, !0);
      }
      _createClass(mc, [{
        key: "increment",
        value: function increment() {
          this.n++, this.view.setUint32(4, this.n, !0);
        }
      }, {
        key: "getBytes",
        value: function getBytes() {
          return this.bytes;
        }
      }, {
        key: "getUint64",
        value: function getUint64() {
          return this.n;
        }
      }, {
        key: "assertValue",
        value: function assertValue() {
          if (this.n > 4294967295) throw new Error("Cipherstate has reached maximum n, a new handshake must be performed");
        }
      }]);
      return mc;
    }();
    var wc = /*#__PURE__*/function () {
      function wc(e) {
        _classCallCheck(this, wc);
        this.crypto = e;
      }
      _createClass(wc, [{
        key: "encryptWithAd",
        value: function encryptWithAd(e, t, r) {
          var n = this.encrypt(e.k, e.n, t, r);
          return e.n.increment(), n;
        }
      }, {
        key: "decryptWithAd",
        value: function decryptWithAd(e, t, r, n) {
          var _this$decrypt = this.decrypt(e.k, e.n, t, r, n),
            i = _this$decrypt.plaintext,
            s = _this$decrypt.valid;
          return s && e.n.increment(), {
            plaintext: i,
            valid: s
          };
        }
      }, {
        key: "hasKey",
        value: function hasKey(e) {
          return !this.isEmptyKey(e.k);
        }
      }, {
        key: "createEmptyKey",
        value: function createEmptyKey() {
          return new Uint8Array(32);
        }
      }, {
        key: "isEmptyKey",
        value: function isEmptyKey(e) {
          return Xt(this.createEmptyKey(), e);
        }
      }, {
        key: "encrypt",
        value: function encrypt(e, t, r, n) {
          return t.assertValue(), this.crypto.chaCha20Poly1305Encrypt(n, t.getBytes(), r, e);
        }
      }, {
        key: "encryptAndHash",
        value: function encryptAndHash(e, t) {
          var r;
          return r = this.hasKey(e.cs) ? this.encryptWithAd(e.cs, e.h, t) : t, this.mixHash(e, r), r;
        }
      }, {
        key: "decrypt",
        value: function decrypt(e, t, r, n, i) {
          t.assertValue();
          var s = this.crypto.chaCha20Poly1305Decrypt(n, t.getBytes(), r, e, i);
          return s ? {
            plaintext: s,
            valid: !0
          } : {
            plaintext: new Uint8Array(0),
            valid: !1
          };
        }
      }, {
        key: "decryptAndHash",
        value: function decryptAndHash(e, t) {
          var _this$decryptWithAd;
          var r,
            n = !0;
          return this.hasKey(e.cs) ? (_this$decryptWithAd = this.decryptWithAd(e.cs, e.h, t), r = _this$decryptWithAd.plaintext, n = _this$decryptWithAd.valid, _this$decryptWithAd) : r = t, this.mixHash(e, t), {
            plaintext: r,
            valid: n
          };
        }
      }, {
        key: "dh",
        value: function dh(e, t) {
          try {
            var _r71 = this.crypto.generateX25519SharedKey(e, t);
            return 32 === _r71.length ? _r71 : _r71.subarray(0, 32);
          } catch (e) {
            return pc(e.message), new Uint8Array(32);
          }
        }
      }, {
        key: "mixHash",
        value: function mixHash(e, t) {
          e.h = this.getHash(e.h, t);
        }
      }, {
        key: "getHash",
        value: function getHash(e, t) {
          return this.crypto.hashSHA256(Bt([e, t], e.length + t.length));
        }
      }, {
        key: "mixKey",
        value: function mixKey(e, t) {
          var _this$crypto$getHKDF = this.crypto.getHKDF(e.ck, t),
            _this$crypto$getHKDF2 = _slicedToArray(_this$crypto$getHKDF, 2),
            r = _this$crypto$getHKDF2[0],
            n = _this$crypto$getHKDF2[1];
          e.cs = this.initializeKey(n), e.ck = r;
        }
      }, {
        key: "initializeKey",
        value: function initializeKey(e) {
          return {
            k: e,
            n: new mc()
          };
        }
      }, {
        key: "initializeSymmetric",
        value: function initializeSymmetric(e) {
          var t = Pt(e, "utf-8"),
            r = this.hashProtocolName(t),
            n = r,
            i = this.createEmptyKey();
          return {
            cs: this.initializeKey(i),
            ck: n,
            h: r
          };
        }
      }, {
        key: "hashProtocolName",
        value: function hashProtocolName(e) {
          if (e.length <= 32) {
            var _t81 = new Uint8Array(32);
            return _t81.set(e), _t81;
          }
          return this.getHash(e, new Uint8Array(0));
        }
      }, {
        key: "split",
        value: function split(e) {
          var _this$crypto$getHKDF3 = this.crypto.getHKDF(e.ck, new Uint8Array(0)),
            _this$crypto$getHKDF4 = _slicedToArray(_this$crypto$getHKDF3, 2),
            t = _this$crypto$getHKDF4[0],
            r = _this$crypto$getHKDF4[1];
          return {
            cs1: this.initializeKey(t),
            cs2: this.initializeKey(r)
          };
        }
      }, {
        key: "writeMessageRegular",
        value: function writeMessageRegular(e, t) {
          var r = this.encryptWithAd(e, new Uint8Array(0), t);
          return {
            ne: this.createEmptyKey(),
            ns: new Uint8Array(0),
            ciphertext: r
          };
        }
      }, {
        key: "readMessageRegular",
        value: function readMessageRegular(e, t) {
          return this.decryptWithAd(e, new Uint8Array(0), t.ciphertext);
        }
      }]);
      return wc;
    }();
    var Ec = /*#__PURE__*/function (_wc) {
      _inherits(Ec, _wc);
      var _super29 = _createSuper(Ec);
      function Ec() {
        _classCallCheck(this, Ec);
        return _super29.apply(this, arguments);
      }
      _createClass(Ec, [{
        key: "initializeInitiator",
        value: function initializeInitiator(e, t, r, n) {
          var i = this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");
          return this.mixHash(i, e), {
            ss: i,
            s: t,
            rs: r,
            psk: n,
            re: new Uint8Array(32)
          };
        }
      }, {
        key: "initializeResponder",
        value: function initializeResponder(e, t, r, n) {
          var i = this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");
          return this.mixHash(i, e), {
            ss: i,
            s: t,
            rs: r,
            psk: n,
            re: new Uint8Array(32)
          };
        }
      }, {
        key: "writeMessageA",
        value: function writeMessageA(e, t, r) {
          var n = new Uint8Array(0);
          e.e = void 0 !== r ? r : this.crypto.generateX25519KeyPair();
          var i = e.e.publicKey;
          return this.mixHash(e.ss, i), {
            ne: i,
            ns: n,
            ciphertext: this.encryptAndHash(e.ss, t)
          };
        }
      }, {
        key: "writeMessageB",
        value: function writeMessageB(e, t) {
          e.e = this.crypto.generateX25519KeyPair();
          var r = e.e.publicKey;
          this.mixHash(e.ss, r), this.mixKey(e.ss, this.dh(e.e.privateKey, e.re));
          var n = e.s.publicKey,
            i = this.encryptAndHash(e.ss, n);
          return this.mixKey(e.ss, this.dh(e.s.privateKey, e.re)), {
            ne: r,
            ns: i,
            ciphertext: this.encryptAndHash(e.ss, t)
          };
        }
      }, {
        key: "writeMessageC",
        value: function writeMessageC(e, t) {
          var r = e.s.publicKey,
            n = this.encryptAndHash(e.ss, r);
          this.mixKey(e.ss, this.dh(e.s.privateKey, e.re));
          var i = this.encryptAndHash(e.ss, t),
            s = {
              ne: this.createEmptyKey(),
              ns: n,
              ciphertext: i
            },
            _this$split = this.split(e.ss),
            o = _this$split.cs1,
            a = _this$split.cs2;
          return {
            h: e.ss.h,
            messageBuffer: s,
            cs1: o,
            cs2: a
          };
        }
      }, {
        key: "readMessageA",
        value: function readMessageA(e, t) {
          return dc(t.ne) && (e.re = t.ne), this.mixHash(e.ss, e.re), this.decryptAndHash(e.ss, t.ciphertext);
        }
      }, {
        key: "readMessageB",
        value: function readMessageB(e, t) {
          if (dc(t.ne) && (e.re = t.ne), this.mixHash(e.ss, e.re), !e.e) throw new Error("Handshake state `e` param is missing.");
          this.mixKey(e.ss, this.dh(e.e.privateKey, e.re));
          var _this$decryptAndHash = this.decryptAndHash(e.ss, t.ns),
            r = _this$decryptAndHash.plaintext,
            n = _this$decryptAndHash.valid;
          n && dc(r) && (e.rs = r), this.mixKey(e.ss, this.dh(e.e.privateKey, e.rs));
          var _this$decryptAndHash2 = this.decryptAndHash(e.ss, t.ciphertext),
            i = _this$decryptAndHash2.plaintext,
            s = _this$decryptAndHash2.valid;
          return {
            plaintext: i,
            valid: n && s
          };
        }
      }, {
        key: "readMessageC",
        value: function readMessageC(e, t) {
          var _this$decryptAndHash3 = this.decryptAndHash(e.ss, t.ns),
            r = _this$decryptAndHash3.plaintext,
            n = _this$decryptAndHash3.valid;
          if (n && dc(r) && (e.rs = r), !e.e) throw new Error("Handshake state `e` param is missing.");
          this.mixKey(e.ss, this.dh(e.e.privateKey, e.rs));
          var _this$decryptAndHash4 = this.decryptAndHash(e.ss, t.ciphertext),
            i = _this$decryptAndHash4.plaintext,
            s = _this$decryptAndHash4.valid,
            _this$split2 = this.split(e.ss),
            o = _this$split2.cs1,
            a = _this$split2.cs2;
          return {
            h: e.ss.h,
            plaintext: i,
            valid: n && s,
            cs1: o,
            cs2: a
          };
        }
      }, {
        key: "initSession",
        value: function initSession(e, t, r) {
          var n = this.createEmptyKey(),
            i = new Uint8Array(32);
          var s;
          return s = e ? this.initializeInitiator(t, r, i, n) : this.initializeResponder(t, r, i, n), {
            hs: s,
            i: e,
            mc: 0
          };
        }
      }, {
        key: "sendMessage",
        value: function sendMessage(e, t, r) {
          var n;
          if (0 === e.mc) n = this.writeMessageA(e.hs, t, r);else if (1 === e.mc) n = this.writeMessageB(e.hs, t);else if (2 === e.mc) {
            var _this$writeMessageC = this.writeMessageC(e.hs, t),
              _r72 = _this$writeMessageC.h,
              _i31 = _this$writeMessageC.messageBuffer,
              _s20 = _this$writeMessageC.cs1,
              _o13 = _this$writeMessageC.cs2;
            n = _i31, e.h = _r72, e.cs1 = _s20, e.cs2 = _o13;
          } else {
            if (!(e.mc > 2)) throw new Error("Session invalid.");
            if (e.i) {
              if (!e.cs1) throw new Error("CS1 (cipher state) is not defined");
              n = this.writeMessageRegular(e.cs1, t);
            } else {
              if (!e.cs2) throw new Error("CS2 (cipher state) is not defined");
              n = this.writeMessageRegular(e.cs2, t);
            }
          }
          return e.mc++, n;
        }
      }, {
        key: "recvMessage",
        value: function recvMessage(e, t) {
          var r = new Uint8Array(0),
            n = !1;
          if (0 === e.mc) {
            var _this$readMessageA = this.readMessageA(e.hs, t);
            r = _this$readMessageA.plaintext;
            n = _this$readMessageA.valid;
          } else if (1 === e.mc) {
            var _this$readMessageB = this.readMessageB(e.hs, t);
            r = _this$readMessageB.plaintext;
            n = _this$readMessageB.valid;
          } else if (2 === e.mc) {
            var _this$readMessageC = this.readMessageC(e.hs, t),
              _i32 = _this$readMessageC.h,
              _s21 = _this$readMessageC.plaintext,
              _o14 = _this$readMessageC.valid,
              _a6 = _this$readMessageC.cs1,
              _c7 = _this$readMessageC.cs2;
            r = _s21, n = _o14, e.h = _i32, e.cs1 = _a6, e.cs2 = _c7;
          }
          return e.mc++, {
            plaintext: r,
            valid: n
          };
        }
      }]);
      return Ec;
    }(wc);
    var bc = /*#__PURE__*/function () {
      function bc(e, t, r, n, i, s, o, a) {
        _classCallCheck(this, bc);
        this.remoteExtensions = {
          webtransportCerthashes: []
        }, this.isInitiator = e, this.payload = t, this.prologue = r, this.staticKeypair = i, this.connection = s, o && (this.remotePeer = o), this.xx = a !== null && a !== void 0 ? a : new Ec(n), this.session = this.xx.initSession(this.isInitiator, this.prologue, this.staticKeypair);
      }
      _createClass(bc, [{
        key: "propose",
        value: function () {
          var _propose = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee78() {
            var e, _e79, _e80, _this$xx$recvMessage, _t82;
            return _regeneratorRuntime().wrap(function _callee78$(_context80) {
              while (1) switch (_context80.prev = _context80.next) {
                case 0:
                  if (!(e = this.session.hs.s, fc("LOCAL_STATIC_PUBLIC_KEY ".concat(St(e.publicKey, "hex"))), fc("LOCAL_STATIC_PRIVATE_KEY ".concat(St(e.privateKey, "hex"))), this.isInitiator)) {
                    _context80.next = 6;
                    break;
                  }
                  pc("Stage 0 - Initiator starting to send first message.");
                  _e79 = this.xx.sendMessage(this.session, new Uint8Array(0));
                  this.connection.writeLP(function (e) {
                    return Bt([e.ne, e.ciphertext], e.ne.length + e.ciphertext.length);
                  }(_e79)), pc("Stage 0 - Initiator finished sending first message."), yc(this.session.hs.e);
                  _context80.next = 17;
                  break;
                case 6:
                  pc("Stage 0 - Responder waiting to receive first message...");
                  _context80.t0 = function (e) {
                    if (e.length < 32) throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");
                    return {
                      ne: e.subarray(0, 32),
                      ciphertext: e.subarray(32, e.length),
                      ns: new Uint8Array(0)
                    };
                  };
                  _context80.next = 10;
                  return this.connection.readLP();
                case 10:
                  _context80.t1 = _context80.sent.subarray();
                  _e80 = (0, _context80.t0)(_context80.t1);
                  _this$xx$recvMessage = this.xx.recvMessage(this.session, _e80);
                  _t82 = _this$xx$recvMessage.valid;
                  if (_t82) {
                    _context80.next = 16;
                    break;
                  }
                  throw new Oi("xx handshake stage 0 validation fail");
                case 16:
                  pc("Stage 0 - Responder received first message."), gc(this.session.hs.re);
                case 17:
                case "end":
                  return _context80.stop();
              }
            }, _callee78, this);
          }));
          function propose() {
            return _propose.apply(this, arguments);
          }
          return propose;
        }()
      }, {
        key: "exchange",
        value: function () {
          var _exchange = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee79() {
            var _t83, _this$xx$recvMessage2, _r73, _n54, _e81, _e82, e;
            return _regeneratorRuntime().wrap(function _callee79$(_context81) {
              while (1) switch (_context81.prev = _context81.next) {
                case 0:
                  if (!this.isInitiator) {
                    _context81.next = 32;
                    break;
                  }
                  pc("Stage 1 - Initiator waiting to receive first message from responder...");
                  _context81.t0 = function (e) {
                    if (e.length < 80) throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");
                    return {
                      ne: e.subarray(0, 32),
                      ns: e.subarray(32, 80),
                      ciphertext: e.subarray(80, e.length)
                    };
                  };
                  _context81.next = 5;
                  return this.connection.readLP();
                case 5:
                  _context81.t1 = _context81.sent.subarray();
                  _t83 = (0, _context81.t0)(_context81.t1);
                  _this$xx$recvMessage2 = this.xx.recvMessage(this.session, _t83);
                  _r73 = _this$xx$recvMessage2.plaintext;
                  _n54 = _this$xx$recvMessage2.valid;
                  if (_n54) {
                    _context81.next = 12;
                    break;
                  }
                  throw new Oi("xx handshake stage 1 validation fail");
                case 12:
                  pc("Stage 1 - Initiator received the message."), gc(this.session.hs.re), e = this.session.hs.rs, fc("REMOTE_STATIC_PUBLIC_KEY ".concat(St(e, "hex"))), pc("Initiator going to check remote's signature...");
                  _context81.prev = 13;
                  _e81 = lc(_r73);
                  _context81.t2 = this.remotePeer;
                  if (_context81.t2) {
                    _context81.next = 20;
                    break;
                  }
                  _context81.next = 19;
                  return cc(_e81);
                case 19:
                  _context81.t2 = _context81.sent;
                case 20:
                  this.remotePeer = _context81.t2;
                  _context81.next = 23;
                  return hc(this.session.hs.rs, _e81, this.remotePeer);
                case 23:
                  this.setRemoteNoiseExtension(_e81.extensions);
                  _context81.next = 29;
                  break;
                case 26:
                  _context81.prev = 26;
                  _context81.t3 = _context81["catch"](13);
                  throw new Bi("Error occurred while verifying signed payload: ".concat(_context81.t3.message));
                case 29:
                  pc("All good with the signature!");
                  _context81.next = 35;
                  break;
                case 32:
                  pc("Stage 1 - Responder sending out first message with signed payload and static key.");
                  _e82 = this.xx.sendMessage(this.session, this.payload);
                  this.connection.writeLP(function (e) {
                    return Bt([e.ne, e.ns, e.ciphertext], e.ne.length + e.ns.length + e.ciphertext.length);
                  }(_e82)), pc("Stage 1 - Responder sent the second handshake message with signed payload."), yc(this.session.hs.e);
                case 35:
                case "end":
                  return _context81.stop();
              }
            }, _callee79, this, [[13, 26]]);
          }));
          function exchange() {
            return _exchange.apply(this, arguments);
          }
          return exchange;
        }()
      }, {
        key: "finish",
        value: function () {
          var _finish = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee80() {
            var _e83, _e84, _this$xx$recvMessage3, _t84, _r74, _e85, e;
            return _regeneratorRuntime().wrap(function _callee80$(_context82) {
              while (1) switch (_context82.prev = _context82.next) {
                case 0:
                  if (!this.isInitiator) {
                    _context82.next = 6;
                    break;
                  }
                  pc("Stage 2 - Initiator sending third handshake message.");
                  _e83 = this.xx.sendMessage(this.session, this.payload);
                  this.connection.writeLP(function (e) {
                    return Bt([e.ns, e.ciphertext], e.ns.length + e.ciphertext.length);
                  }(_e83)), pc("Stage 2 - Initiator sent message with signed payload.");
                  _context82.next = 34;
                  break;
                case 6:
                  pc("Stage 2 - Responder waiting for third handshake message...");
                  _context82.t0 = function (e) {
                    if (e.length < 48) throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");
                    return {
                      ne: new Uint8Array(0),
                      ns: e.subarray(0, 48),
                      ciphertext: e.subarray(48, e.length)
                    };
                  };
                  _context82.next = 10;
                  return this.connection.readLP();
                case 10:
                  _context82.t1 = _context82.sent.subarray();
                  _e84 = (0, _context82.t0)(_context82.t1);
                  _this$xx$recvMessage3 = this.xx.recvMessage(this.session, _e84);
                  _t84 = _this$xx$recvMessage3.plaintext;
                  _r74 = _this$xx$recvMessage3.valid;
                  if (_r74) {
                    _context82.next = 17;
                    break;
                  }
                  throw new Oi("xx handshake stage 2 validation fail");
                case 17:
                  pc("Stage 2 - Responder received the message, finished handshake.");
                  _context82.prev = 18;
                  _e85 = lc(_t84);
                  _context82.t2 = this.remotePeer;
                  if (_context82.t2) {
                    _context82.next = 25;
                    break;
                  }
                  _context82.next = 24;
                  return cc(_e85);
                case 24:
                  _context82.t2 = _context82.sent;
                case 25:
                  this.remotePeer = _context82.t2;
                  _context82.next = 28;
                  return hc(this.session.hs.rs, _e85, this.remotePeer);
                case 28:
                  this.setRemoteNoiseExtension(_e85.extensions);
                  _context82.next = 34;
                  break;
                case 31:
                  _context82.prev = 31;
                  _context82.t3 = _context82["catch"](18);
                  throw new Bi("Error occurred while verifying signed payload: ".concat(_context82.t3.message));
                case 34:
                  (e = this.session).cs1 && e.cs2 ? (fc("CIPHER_STATE_1 ".concat(e.cs1.n.getUint64(), " ").concat(St(e.cs1.k, "hex"))), fc("CIPHER_STATE_2 ".concat(e.cs2.n.getUint64(), " ").concat(St(e.cs2.k, "hex")))) : fc("Missing cipher state.");
                case 35:
                case "end":
                  return _context82.stop();
              }
            }, _callee80, this, [[18, 31]]);
          }));
          function finish() {
            return _finish.apply(this, arguments);
          }
          return finish;
        }()
      }, {
        key: "encrypt",
        value: function encrypt(e, t) {
          var r = this.getCS(t);
          return this.xx.encryptWithAd(r, new Uint8Array(0), e);
        }
      }, {
        key: "decrypt",
        value: function decrypt(e, t, r) {
          var n = this.getCS(t, !1);
          return this.xx.decryptWithAd(n, new Uint8Array(0), e, r);
        }
      }, {
        key: "getRemoteStaticKey",
        value: function getRemoteStaticKey() {
          return this.session.hs.rs;
        }
      }, {
        key: "getCS",
        value: function getCS(e) {
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
          if (!e.cs1 || !e.cs2) throw new Oi("Handshake not completed properly, cipher state does not exist.");
          return this.isInitiator ? t ? e.cs1 : e.cs2 : t ? e.cs2 : e.cs1;
        }
      }, {
        key: "setRemoteNoiseExtension",
        value: function setRemoteNoiseExtension(e) {
          e && (this.remoteExtensions = e);
        }
      }]);
      return bc;
    }();
    var vc = /*#__PURE__*/function () {
      function vc() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        _classCallCheck(this, vc);
        this.protocol = "/noise";
        var t = e.staticNoiseKey,
          r = e.extensions,
          n = e.crypto,
          i = e.prologueBytes,
          s = e.metrics;
        this.crypto = n !== null && n !== void 0 ? n : Li, this.extensions = r, this.metrics = s ? function (e) {
          return {
            xxHandshakeSuccesses: e.registerCounter("libp2p_noise_xxhandshake_successes_total", {
              help: "Total count of noise xxHandshakes successes_"
            }),
            xxHandshakeErrors: e.registerCounter("libp2p_noise_xxhandshake_error_total", {
              help: "Total count of noise xxHandshakes errors"
            }),
            encryptedPackets: e.registerCounter("libp2p_noise_encrypted_packets_total", {
              help: "Total count of noise encrypted packets successfully"
            }),
            decryptedPackets: e.registerCounter("libp2p_noise_decrypted_packets_total", {
              help: "Total count of noise decrypted packets"
            }),
            decryptErrors: e.registerCounter("libp2p_noise_decrypt_errors_total", {
              help: "Total count of noise decrypt errors"
            })
          };
        }(s) : void 0, this.staticKeys = t ? this.crypto.generateX25519KeyPairFromSeed(t) : this.crypto.generateX25519KeyPair(), this.prologue = i !== null && i !== void 0 ? i : new Uint8Array(0);
      }
      _createClass(vc, [{
        key: "secureOutbound",
        value: function () {
          var _secureOutbound = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee81(e, t, r) {
            var n, i;
            return _regeneratorRuntime().wrap(function _callee81$(_context83) {
              while (1) switch (_context83.prev = _context83.next) {
                case 0:
                  n = mi(t, {
                    lengthEncoder: Di,
                    lengthDecoder: Pi,
                    maxDataLength: Ai
                  });
                  _context83.next = 3;
                  return this.performHandshake({
                    connection: n,
                    isInitiator: !0,
                    localPeer: e,
                    remotePeer: r
                  });
                case 3:
                  i = _context83.sent;
                  _context83.next = 6;
                  return this.createSecureConnection(n, i);
                case 6:
                  _context83.t0 = _context83.sent;
                  _context83.t1 = i.remoteExtensions;
                  _context83.t2 = i.remotePeer;
                  return _context83.abrupt("return", {
                    conn: _context83.t0,
                    remoteExtensions: _context83.t1,
                    remotePeer: _context83.t2
                  });
                case 10:
                case "end":
                  return _context83.stop();
              }
            }, _callee81, this);
          }));
          function secureOutbound(_x106, _x107, _x108) {
            return _secureOutbound.apply(this, arguments);
          }
          return secureOutbound;
        }()
      }, {
        key: "secureInbound",
        value: function () {
          var _secureInbound = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee82(e, t, r) {
            var n, i;
            return _regeneratorRuntime().wrap(function _callee82$(_context84) {
              while (1) switch (_context84.prev = _context84.next) {
                case 0:
                  n = mi(t, {
                    lengthEncoder: Di,
                    lengthDecoder: Pi,
                    maxDataLength: Ai
                  });
                  _context84.next = 3;
                  return this.performHandshake({
                    connection: n,
                    isInitiator: !1,
                    localPeer: e,
                    remotePeer: r
                  });
                case 3:
                  i = _context84.sent;
                  _context84.next = 6;
                  return this.createSecureConnection(n, i);
                case 6:
                  _context84.t0 = _context84.sent;
                  _context84.t1 = i.remotePeer;
                  _context84.t2 = i.remoteExtensions;
                  return _context84.abrupt("return", {
                    conn: _context84.t0,
                    remotePeer: _context84.t1,
                    remoteExtensions: _context84.t2
                  });
                case 10:
                case "end":
                  return _context84.stop();
              }
            }, _callee82, this);
          }));
          function secureInbound(_x109, _x110, _x111) {
            return _secureInbound.apply(this, arguments);
          }
          return secureInbound;
        }()
      }, {
        key: "performHandshake",
        value: function () {
          var _performHandshake = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee85(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee85$(_context87) {
              while (1) switch (_context87.prev = _context87.next) {
                case 0:
                  _context87.next = 2;
                  return function () {
                    var _ref51 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee84(e, t, r) {
                      var n;
                      return _regeneratorRuntime().wrap(function _callee84$(_context86) {
                        while (1) switch (_context86.prev = _context86.next) {
                          case 0:
                            _context86.next = 2;
                            return function () {
                              var _ref52 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee83(e, t) {
                                var r;
                                return _regeneratorRuntime().wrap(function _callee83$(_context85) {
                                  while (1) switch (_context85.prev = _context85.next) {
                                    case 0:
                                      if (!(null == e.privateKey)) {
                                        _context85.next = 2;
                                        break;
                                      }
                                      throw new Error("PrivateKey was missing from PeerId");
                                    case 2:
                                      _context85.next = 4;
                                      return ja(e.privateKey);
                                    case 4:
                                      r = _context85.sent;
                                      _context85.next = 7;
                                      return r.sign(t);
                                    case 7:
                                      return _context85.abrupt("return", _context85.sent);
                                    case 8:
                                    case "end":
                                      return _context85.stop();
                                  }
                                }, _callee83);
                              }));
                              return function (_x116, _x117) {
                                return _ref52.apply(this, arguments);
                              };
                            }()(e, uc(t));
                          case 2:
                            n = _context86.sent;
                            if (!(null == e.publicKey)) {
                              _context86.next = 5;
                              break;
                            }
                            throw new Error("PublicKey was missing from local PeerId");
                          case 5:
                            return _context86.abrupt("return", function (e, t, r) {
                              return ac.encode({
                                identityKey: e,
                                identitySig: t,
                                extensions: r !== null && r !== void 0 ? r : {
                                  webtransportCerthashes: []
                                }
                              }).subarray();
                            }(e.publicKey, n, r));
                          case 6:
                          case "end":
                            return _context86.stop();
                        }
                      }, _callee84);
                    }));
                    return function (_x113, _x114, _x115) {
                      return _ref51.apply(this, arguments);
                    };
                  }()(e.localPeer, this.staticKeys.publicKey, this.extensions);
                case 2:
                  t = _context87.sent;
                  _context87.next = 5;
                  return this.performXXHandshake(e, t);
                case 5:
                  return _context87.abrupt("return", _context87.sent);
                case 6:
                case "end":
                  return _context87.stop();
              }
            }, _callee85, this);
          }));
          function performHandshake(_x112) {
            return _performHandshake.apply(this, arguments);
          }
          return performHandshake;
        }()
      }, {
        key: "performXXHandshake",
        value: function () {
          var _performXXHandshake = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee86(e, t) {
            var r, n, i, s, _this$metrics, _this$metrics2;
            return _regeneratorRuntime().wrap(function _callee86$(_context88) {
              while (1) switch (_context88.prev = _context88.next) {
                case 0:
                  r = e.isInitiator, n = e.remotePeer, i = e.connection, s = new bc(r, t, this.prologue, this.crypto, this.staticKeys, i, n);
                  _context88.prev = 1;
                  _context88.next = 4;
                  return s.propose();
                case 4:
                  _context88.next = 6;
                  return s.exchange();
                case 6:
                  _context88.next = 8;
                  return s.finish();
                case 8:
                  (_this$metrics = this.metrics) === null || _this$metrics === void 0 ? void 0 : _this$metrics.xxHandshakeSuccesses.increment();
                  _context88.next = 15;
                  break;
                case 11:
                  _context88.prev = 11;
                  _context88.t0 = _context88["catch"](1);
                  if (!((_this$metrics2 = this.metrics) !== null && _this$metrics2 !== void 0 && _this$metrics2.xxHandshakeErrors.increment(), _context88.t0 instanceof Error)) {
                    _context88.next = 15;
                    break;
                  }
                  throw _context88.t0.message = "Error occurred during XX handshake: ".concat(_context88.t0.message), _context88.t0;
                case 15:
                  return _context88.abrupt("return", s);
                case 16:
                case "end":
                  return _context88.stop();
              }
            }, _callee86, this, [[1, 11]]);
          }));
          function performXXHandshake(_x118, _x119) {
            return _performXXHandshake.apply(this, arguments);
          }
          return performXXHandshake;
        }()
      }, {
        key: "createSecureConnection",
        value: function () {
          var _createSecureConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee89(e, t) {
            var _ref53, _ref54, r, n, i;
            return _regeneratorRuntime().wrap(function _callee89$(_context91) {
              while (1) switch (_context91.prev = _context91.next) {
                case 0:
                  _ref53 = function () {
                    var e = wi(),
                      t = wi();
                    return [{
                      source: e.source,
                      sink: t.sink
                    }, {
                      source: t.source,
                      sink: e.sink
                    }];
                  }(), _ref54 = _slicedToArray(_ref53, 2), r = _ref54[0], n = _ref54[1], i = e.unwrap();
                  _context91.next = 3;
                  return Ci(r, function (e, t) {
                    return /*#__PURE__*/function () {
                      var _ref11 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee87(r) {
                        var _iteratorAbruptCompletion9, _didIteratorError9, _iteratorError9, _iterator9, _step9, _n55, _r75, _i33, _s22;
                        return _regeneratorRuntime().wrap(function _callee87$(_context89) {
                          while (1) switch (_context89.prev = _context89.next) {
                            case 0:
                              _iteratorAbruptCompletion9 = false;
                              _didIteratorError9 = false;
                              _context89.prev = 2;
                              _iterator9 = _asyncIterator(r);
                            case 4:
                              _context89.next = 6;
                              return _awaitAsyncGenerator(_iterator9.next());
                            case 6:
                              if (!(_iteratorAbruptCompletion9 = !(_step9 = _context89.sent).done)) {
                                _context89.next = 24;
                                break;
                              }
                              _n55 = _step9.value;
                              _r75 = 0;
                            case 9:
                              if (!(_r75 < _n55.length)) {
                                _context89.next = 21;
                                break;
                              }
                              _i33 = _r75 + 65519;
                              _i33 > _n55.length && (_i33 = _n55.length);
                              _s22 = e.encrypt(_n55.subarray(_r75, _i33), e.session);
                              t !== null && t !== void 0 && t.encryptedPackets.increment();
                              _context89.next = 16;
                              return Di(_s22.byteLength);
                            case 16:
                              _context89.next = 18;
                              return _s22;
                            case 18:
                              _r75 += 65519;
                              _context89.next = 9;
                              break;
                            case 21:
                              _iteratorAbruptCompletion9 = false;
                              _context89.next = 4;
                              break;
                            case 24:
                              _context89.next = 30;
                              break;
                            case 26:
                              _context89.prev = 26;
                              _context89.t0 = _context89["catch"](2);
                              _didIteratorError9 = true;
                              _iteratorError9 = _context89.t0;
                            case 30:
                              _context89.prev = 30;
                              _context89.prev = 31;
                              if (!(_iteratorAbruptCompletion9 && _iterator9.return != null)) {
                                _context89.next = 35;
                                break;
                              }
                              _context89.next = 35;
                              return _awaitAsyncGenerator(_iterator9.return());
                            case 35:
                              _context89.prev = 35;
                              if (!_didIteratorError9) {
                                _context89.next = 38;
                                break;
                              }
                              throw _iteratorError9;
                            case 38:
                              return _context89.finish(35);
                            case 39:
                              return _context89.finish(30);
                            case 40:
                            case "end":
                              return _context89.stop();
                          }
                        }, _callee87, null, [[2, 26, 30, 40], [31,, 35, 39]]);
                      }));
                      return function (_x5) {
                        return _ref11.apply(this, arguments);
                      };
                    }();
                  }(t, this.metrics), i, gi({
                    lengthDecoder: Pi
                  }), function (e, t) {
                    return /*#__PURE__*/function () {
                      var _ref12 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee88(r) {
                        var _iteratorAbruptCompletion10, _didIteratorError10, _iteratorError10, _iterator10, _step10, _n56, _r76, _i34, _s23, _o15, _e$decrypt, _a7, _c8;
                        return _regeneratorRuntime().wrap(function _callee88$(_context90) {
                          while (1) switch (_context90.prev = _context90.next) {
                            case 0:
                              _iteratorAbruptCompletion10 = false;
                              _didIteratorError10 = false;
                              _context90.prev = 2;
                              _iterator10 = _asyncIterator(r);
                            case 4:
                              _context90.next = 6;
                              return _awaitAsyncGenerator(_iterator10.next());
                            case 6:
                              if (!(_iteratorAbruptCompletion10 = !(_step10 = _context90.sent).done)) {
                                _context90.next = 25;
                                break;
                              }
                              _n56 = _step10.value;
                              _r76 = 0;
                            case 9:
                              if (!(_r76 < _n56.length)) {
                                _context90.next = 22;
                                break;
                              }
                              _i34 = _r76 + Ai;
                              if (!(_i34 > _n56.length && (_i34 = _n56.length), _i34 - Ni.pg < _r76)) {
                                _context90.next = 13;
                                break;
                              }
                              throw new Error("Invalid chunk");
                            case 13:
                              _s23 = _n56.subarray(_r76, _i34), _o15 = _n56.subarray(_r76, _i34 - Ni.pg), _e$decrypt = e.decrypt(_s23, e.session, _o15), _a7 = _e$decrypt.plaintext, _c8 = _e$decrypt.valid;
                              if (_c8) {
                                _context90.next = 16;
                                break;
                              }
                              throw t !== null && t !== void 0 && t.decryptErrors.increment(), new Error("Failed to validate decrypted chunk");
                            case 16:
                              t !== null && t !== void 0 && t.decryptedPackets.increment();
                              _context90.next = 19;
                              return _a7;
                            case 19:
                              _r76 += Ai;
                              _context90.next = 9;
                              break;
                            case 22:
                              _iteratorAbruptCompletion10 = false;
                              _context90.next = 4;
                              break;
                            case 25:
                              _context90.next = 31;
                              break;
                            case 27:
                              _context90.prev = 27;
                              _context90.t0 = _context90["catch"](2);
                              _didIteratorError10 = true;
                              _iteratorError10 = _context90.t0;
                            case 31:
                              _context90.prev = 31;
                              _context90.prev = 32;
                              if (!(_iteratorAbruptCompletion10 && _iterator10.return != null)) {
                                _context90.next = 36;
                                break;
                              }
                              _context90.next = 36;
                              return _awaitAsyncGenerator(_iterator10.return());
                            case 36:
                              _context90.prev = 36;
                              if (!_didIteratorError10) {
                                _context90.next = 39;
                                break;
                              }
                              throw _iteratorError10;
                            case 39:
                              return _context90.finish(36);
                            case 40:
                              return _context90.finish(31);
                            case 41:
                            case "end":
                              return _context90.stop();
                          }
                        }, _callee88, null, [[2, 27, 31, 41], [32,, 36, 40]]);
                      }));
                      return function (_x6) {
                        return _ref12.apply(this, arguments);
                      };
                    }();
                  }(t, this.metrics), r);
                case 3:
                  return _context91.abrupt("return", n);
                case 4:
                case "end":
                  return _context91.stop();
              }
            }, _callee89, this);
          }));
          function createSecureConnection(_x120, _x121) {
            return _createSecureConnection.apply(this, arguments);
          }
          return createSecureConnection;
        }()
      }]);
      return vc;
    }();
    function _c() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return function () {
        return new vc(e);
      };
    }
    var Sc = 128,
      Cc = -128,
      Ac = Math.pow(2, 31),
      Ic = 128,
      Tc = 127,
      Rc = Math.pow(2, 7),
      kc = Math.pow(2, 14),
      Nc = Math.pow(2, 21),
      Lc = Math.pow(2, 28),
      Dc = Math.pow(2, 35),
      Pc = Math.pow(2, 42),
      Bc = Math.pow(2, 49),
      Oc = Math.pow(2, 56),
      xc = Math.pow(2, 63);
    var Uc = {
        encode: function e(t, r, n) {
          r = r || [];
          for (var i = n = n || 0; t >= Ac;) r[n++] = 255 & t | Sc, t /= 128;
          for (; t & Cc;) r[n++] = 255 & t | Sc, t >>>= 7;
          return r[n] = 0 | t, e.bytes = n - i + 1, r;
        },
        decode: function e(t, r) {
          var n,
            i = 0,
            s = 0,
            o = r = r || 0,
            a = t.length;
          do {
            if (o >= a) throw e.bytes = 0, new RangeError("Could not decode varint");
            n = t[o++], i += s < 28 ? (n & Tc) << s : (n & Tc) * Math.pow(2, s), s += 7;
          } while (n >= Ic);
          return e.bytes = o - r, i;
        },
        encodingLength: function encodingLength(e) {
          return e < Rc ? 1 : e < kc ? 2 : e < Nc ? 3 : e < Lc ? 4 : e < Dc ? 5 : e < Pc ? 6 : e < Bc ? 7 : e < Oc ? 8 : e < xc ? 9 : 10;
        }
      },
      Mc = function Mc(e) {
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        return [Uc.decode(e, t), Uc.decode.bytes];
      },
      Vc = function Vc(e, t) {
        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
        return Uc.encode(e, t, r), t;
      },
      Kc = function Kc(e) {
        return Uc.encodingLength(e);
      },
      Fc = (new Uint8Array(0), function (e) {
        if (e instanceof Uint8Array && "Uint8Array" === e.constructor.name) return e;
        if (e instanceof ArrayBuffer) return new Uint8Array(e);
        if (ArrayBuffer.isView(e)) return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
        throw new Error("Unknown type, must be binary type");
      }),
      qc = function qc(e, t) {
        var r = t.byteLength,
          n = Kc(e),
          i = n + Kc(r),
          s = new Uint8Array(i + r);
        return Vc(e, s, 0), Vc(r, s, n), s.set(t, i), new Hc(e, r, t, s);
      },
      jc = function jc(e) {
        var t = Fc(e),
          _Mc = Mc(t),
          _Mc2 = _slicedToArray(_Mc, 2),
          r = _Mc2[0],
          n = _Mc2[1],
          _Mc3 = Mc(t.subarray(n)),
          _Mc4 = _slicedToArray(_Mc3, 2),
          i = _Mc4[0],
          s = _Mc4[1],
          o = t.subarray(n + s);
        if (o.byteLength !== i) throw new Error("Incorrect length");
        return new Hc(r, i, o, t);
      };
    var Hc = /*#__PURE__*/_createClass(function Hc(e, t, r, n) {
      _classCallCheck(this, Hc);
      this.code = e, this.size = t, this.digest = r, this.bytes = n;
    });
    var zc = function zc(e, t) {
      if (e.length >= 255) throw new TypeError("Alphabet too long");
      for (var r = new Uint8Array(256), n = 0; n < r.length; n++) r[n] = 255;
      for (var i = 0; i < e.length; i++) {
        var s = e.charAt(i),
          o = s.charCodeAt(0);
        if (255 !== r[o]) throw new TypeError(s + " is ambiguous");
        r[o] = i;
      }
      var a = e.length,
        c = e.charAt(0),
        l = Math.log(a) / Math.log(256),
        u = Math.log(256) / Math.log(a);
      function h(e) {
        if ("string" != typeof e) throw new TypeError("Expected String");
        if (0 === e.length) return new Uint8Array();
        var t = 0;
        if (" " !== e[t]) {
          for (var n = 0, i = 0; e[t] === c;) n++, t++;
          for (var s = (e.length - t) * l + 1 >>> 0, o = new Uint8Array(s); e[t];) {
            var u = r[e.charCodeAt(t)];
            if (255 === u) return;
            for (var h = 0, d = s - 1; (0 !== u || h < i) && -1 !== d; d--, h++) u += a * o[d] >>> 0, o[d] = u % 256 >>> 0, u = u / 256 >>> 0;
            if (0 !== u) throw new Error("Non-zero carry");
            i = h, t++;
          }
          if (" " !== e[t]) {
            for (var p = s - i; p !== s && 0 === o[p];) p++;
            for (var f = new Uint8Array(n + (s - p)), y = n; p !== s;) f[y++] = o[p++];
            return f;
          }
        }
      }
      return {
        encode: function encode(t) {
          if (t instanceof Uint8Array || (ArrayBuffer.isView(t) ? t = new Uint8Array(t.buffer, t.byteOffset, t.byteLength) : Array.isArray(t) && (t = Uint8Array.from(t))), !(t instanceof Uint8Array)) throw new TypeError("Expected Uint8Array");
          if (0 === t.length) return "";
          for (var r = 0, n = 0, i = 0, s = t.length; i !== s && 0 === t[i];) i++, r++;
          for (var o = (s - i) * u + 1 >>> 0, l = new Uint8Array(o); i !== s;) {
            for (var h = t[i], d = 0, p = o - 1; (0 !== h || d < n) && -1 !== p; p--, d++) h += 256 * l[p] >>> 0, l[p] = h % a >>> 0, h = h / a >>> 0;
            if (0 !== h) throw new Error("Non-zero carry");
            n = d, i++;
          }
          for (var f = o - n; f !== o && 0 === l[f];) f++;
          for (var y = c.repeat(r); f < o; ++f) y += e.charAt(l[f]);
          return y;
        },
        decodeUnsafe: h,
        decode: function decode(e) {
          var r = h(e);
          if (r) return r;
          throw new Error("Non-".concat(t, " character"));
        }
      };
    };
    var $c = /*#__PURE__*/function () {
      function $c(e, t, r) {
        _classCallCheck(this, $c);
        this.name = e, this.prefix = t, this.baseEncode = r;
      }
      _createClass($c, [{
        key: "encode",
        value: function encode(e) {
          if (e instanceof Uint8Array) return "".concat(this.prefix).concat(this.baseEncode(e));
          throw Error("Unknown type, must be binary type");
        }
      }]);
      return $c;
    }();
    var Gc = /*#__PURE__*/function () {
      function Gc(e, t, r) {
        _classCallCheck(this, Gc);
        if (this.name = e, this.prefix = t, void 0 === t.codePointAt(0)) throw new Error("Invalid prefix character");
        this.prefixCodePoint = t.codePointAt(0), this.baseDecode = r;
      }
      _createClass(Gc, [{
        key: "decode",
        value: function decode(e) {
          if ("string" == typeof e) {
            if (e.codePointAt(0) !== this.prefixCodePoint) throw Error("Unable to decode multibase string ".concat(JSON.stringify(e), ", ").concat(this.name, " decoder only supports inputs prefixed with ").concat(this.prefix));
            return this.baseDecode(e.slice(this.prefix.length));
          }
          throw Error("Can only multibase decode strings");
        }
      }, {
        key: "or",
        value: function or(e) {
          return Yc(this, e);
        }
      }]);
      return Gc;
    }();
    var Wc = /*#__PURE__*/function () {
      function Wc(e) {
        _classCallCheck(this, Wc);
        this.decoders = e;
      }
      _createClass(Wc, [{
        key: "or",
        value: function or(e) {
          return Yc(this, e);
        }
      }, {
        key: "decode",
        value: function decode(e) {
          var t = e[0],
            r = this.decoders[t];
          if (r) return r.decode(e);
          throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e), ", only inputs prefixed with ").concat(Object.keys(this.decoders), " are supported"));
        }
      }]);
      return Wc;
    }();
    var Yc = function Yc(e, t) {
      return new Wc(_objectSpread(_objectSpread({}, e.decoders || _defineProperty({}, e.prefix, e)), t.decoders || _defineProperty({}, t.prefix, t)));
    };
    var Qc = /*#__PURE__*/function () {
      function Qc(e, t, r, n) {
        _classCallCheck(this, Qc);
        this.name = e, this.prefix = t, this.baseEncode = r, this.baseDecode = n, this.encoder = new $c(e, t, r), this.decoder = new Gc(e, t, n);
      }
      _createClass(Qc, [{
        key: "encode",
        value: function encode(e) {
          return this.encoder.encode(e);
        }
      }, {
        key: "decode",
        value: function decode(e) {
          return this.decoder.decode(e);
        }
      }]);
      return Qc;
    }();
    var Xc = function Xc(_ref57) {
        var e = _ref57.name,
          t = _ref57.prefix,
          r = _ref57.encode,
          n = _ref57.decode;
        return new Qc(e, t, r, n);
      },
      Zc = function Zc(_ref58) {
        var e = _ref58.prefix,
          t = _ref58.name,
          r = _ref58.alphabet;
        var _zc = zc(r, t),
          n = _zc.encode,
          i = _zc.decode;
        return Xc({
          prefix: e,
          name: t,
          encode: n,
          decode: function decode(e) {
            return Fc(i(e));
          }
        });
      },
      Jc = function Jc(_ref59) {
        var e = _ref59.name,
          t = _ref59.prefix,
          r = _ref59.bitsPerChar,
          n = _ref59.alphabet;
        return Xc({
          prefix: t,
          name: e,
          encode: function encode(e) {
            return function (e, t, r) {
              var n = "=" === t[t.length - 1],
                i = (1 << r) - 1;
              var s = "",
                o = 0,
                a = 0;
              for (var _n57 = 0; _n57 < e.length; ++_n57) for (a = a << 8 | e[_n57], o += 8; o > r;) o -= r, s += t[i & a >> o];
              if (o && (s += t[i & a << r - o]), n) for (; s.length * r & 7;) s += "=";
              return s;
            }(e, n, r);
          },
          decode: function decode(t) {
            return function (e, t, r, n) {
              var i = {};
              for (var _e86 = 0; _e86 < t.length; ++_e86) i[t[_e86]] = _e86;
              var s = e.length;
              for (; "=" === e[s - 1];) --s;
              var o = new Uint8Array(s * r / 8 | 0);
              var a = 0,
                c = 0,
                l = 0;
              for (var _t85 = 0; _t85 < s; ++_t85) {
                var _s24 = i[e[_t85]];
                if (void 0 === _s24) throw new SyntaxError("Non-".concat(n, " character"));
                c = c << r | _s24, a += r, a >= 8 && (a -= 8, o[l++] = 255 & c >> a);
              }
              if (a >= r || 255 & c << 8 - a) throw new SyntaxError("Unexpected end of data");
              return o;
            }(t, n, r, e);
          }
        });
      },
      el = Zc({
        name: "base58btc",
        prefix: "z",
        alphabet: "123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"
      }),
      tl = Zc({
        name: "base58flickr",
        prefix: "Z",
        alphabet: "123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"
      }),
      rl = Jc({
        prefix: "b",
        name: "base32",
        alphabet: "abcdefghijklmnopqrstuvwxyz234567",
        bitsPerChar: 5
      }),
      nl = Jc({
        prefix: "B",
        name: "base32upper",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",
        bitsPerChar: 5
      }),
      il = Jc({
        prefix: "c",
        name: "base32pad",
        alphabet: "abcdefghijklmnopqrstuvwxyz234567=",
        bitsPerChar: 5
      }),
      sl = Jc({
        prefix: "C",
        name: "base32padupper",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",
        bitsPerChar: 5
      }),
      ol = Jc({
        prefix: "v",
        name: "base32hex",
        alphabet: "0123456789abcdefghijklmnopqrstuv",
        bitsPerChar: 5
      }),
      al = Jc({
        prefix: "V",
        name: "base32hexupper",
        alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUV",
        bitsPerChar: 5
      }),
      cl = Jc({
        prefix: "t",
        name: "base32hexpad",
        alphabet: "0123456789abcdefghijklmnopqrstuv=",
        bitsPerChar: 5
      }),
      ll = Jc({
        prefix: "T",
        name: "base32hexpadupper",
        alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUV=",
        bitsPerChar: 5
      }),
      ul = Jc({
        prefix: "h",
        name: "base32z",
        alphabet: "ybndrfg8ejkmcpqxot1uwisza345h769",
        bitsPerChar: 5
      }),
      hl = new WeakMap(),
      dl = function dl(e) {
        var t = hl.get(e);
        if (null == t) {
          var _t86 = new Map();
          return hl.set(e, _t86), _t86;
        }
        return t;
      };
    var pl = /*#__PURE__*/function (_Symbol$toStringTag4, _Symbol$for3) {
      function pl(e, t, r, n) {
        _classCallCheck(this, pl);
        this.code = t, this.version = e, this.multihash = r, this.bytes = n, this["/"] = n;
      }
      _createClass(pl, [{
        key: "asCID",
        get: function get() {
          return this;
        }
      }, {
        key: "byteOffset",
        get: function get() {
          return this.bytes.byteOffset;
        }
      }, {
        key: "byteLength",
        get: function get() {
          return this.bytes.byteLength;
        }
      }, {
        key: "toV0",
        value: function toV0() {
          switch (this.version) {
            case 0:
              return this;
            case 1:
              {
                var e = this.code,
                  _t87 = this.multihash;
                if (e !== ml) throw new Error("Cannot convert a non dag-pb CID to CIDv0");
                if (_t87.code !== wl) throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");
                return pl.createV0(_t87);
              }
            default:
              throw Error("Can not convert CID version ".concat(this.version, " to version 0. This is a bug please report"));
          }
        }
      }, {
        key: "toV1",
        value: function toV1() {
          switch (this.version) {
            case 0:
              {
                var _this$multihash2 = this.multihash,
                  e = _this$multihash2.code,
                  _t88 = _this$multihash2.digest,
                  _r77 = qc(e, _t88);
                return pl.createV1(this.code, _r77);
              }
            case 1:
              return this;
            default:
              throw Error("Can not convert CID version ".concat(this.version, " to version 1. This is a bug please report"));
          }
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return pl.equals(this, e);
        }
      }, {
        key: "toString",
        value: function toString(e) {
          return function (e, t) {
            var r = e.bytes,
              n = e.version;
            return 0 === n ? yl(r, dl(e), t || el.encoder) : gl(r, dl(e), t || rl.encoder);
          }(this, e);
        }
      }, {
        key: "toJSON",
        value: function toJSON() {
          return {
            code: this.code,
            version: this.version,
            hash: this.multihash.bytes
          };
        }
      }, {
        key: "link",
        value: function link() {
          return this;
        }
      }, {
        key: _Symbol$toStringTag4,
        get: function get() {
          return "CID";
        }
      }, {
        key: _Symbol$for3,
        value: function value() {
          return "CID(".concat(this.toString(), ")");
        }
      }], [{
        key: "equals",
        value: function equals(e, t) {
          var r = t;
          return r && e.code === r.code && e.version === r.version && function (e, t) {
            if (e === t) return !0;
            {
              var _r78 = t;
              return e.code === _r78.code && e.size === _r78.size && _r78.bytes instanceof Uint8Array && function (e, t) {
                if (e === t) return !0;
                if (e.byteLength !== t.byteLength) return !1;
                for (var _r79 = 0; _r79 < e.byteLength; _r79++) if (e[_r79] !== t[_r79]) return !1;
                return !0;
              }(e.bytes, _r78.bytes);
            }
          }(e.multihash, r.multihash);
        }
      }, {
        key: "asCID",
        value: function asCID(e) {
          if (null == e) return null;
          var t = e;
          if (t instanceof pl) return t;
          if (null != t["/"] && t["/"] === t.bytes || t.asCID === t) {
            var _e87 = t.version,
              _r80 = t.code,
              _n58 = t.multihash,
              _i35 = t.bytes;
            return new pl(_e87, _r80, _n58, _i35 || El(_e87, _r80, _n58.bytes));
          }
          if (!0 === t[bl]) {
            var _e88 = t.version,
              _r81 = t.multihash,
              _n59 = t.code,
              _i36 = jc(_r81);
            return pl.create(_e88, _n59, _i36);
          }
          return null;
        }
      }, {
        key: "create",
        value: function create(e, t, r) {
          if ("number" != typeof t) throw new Error("String codecs are no longer supported");
          if (!(r.bytes instanceof Uint8Array)) throw new Error("Invalid digest");
          switch (e) {
            case 0:
              if (t !== ml) throw new Error("Version 0 CID must use dag-pb (code: ".concat(ml, ") block encoding"));
              return new pl(e, t, r, r.bytes);
            case 1:
              {
                var _n60 = El(e, t, r.bytes);
                return new pl(e, t, r, _n60);
              }
            default:
              throw new Error("Invalid version");
          }
        }
      }, {
        key: "createV0",
        value: function createV0(e) {
          return pl.create(0, ml, e);
        }
      }, {
        key: "createV1",
        value: function createV1(e, t) {
          return pl.create(1, e, t);
        }
      }, {
        key: "decode",
        value: function decode(e) {
          var _pl$decodeFirst = pl.decodeFirst(e),
            _pl$decodeFirst2 = _slicedToArray(_pl$decodeFirst, 2),
            t = _pl$decodeFirst2[0],
            r = _pl$decodeFirst2[1];
          if (r.length) throw new Error("Incorrect length");
          return t;
        }
      }, {
        key: "decodeFirst",
        value: function decodeFirst(e) {
          var t = pl.inspectBytes(e),
            r = t.size - t.multihashSize,
            n = Fc(e.subarray(r, r + t.multihashSize));
          if (n.byteLength !== t.multihashSize) throw new Error("Incorrect length");
          var i = n.subarray(t.multihashSize - t.digestSize),
            s = new Hc(t.multihashCode, t.digestSize, i, n);
          return [0 === t.version ? pl.createV0(s) : pl.createV1(t.codec, s), e.subarray(t.size)];
        }
      }, {
        key: "inspectBytes",
        value: function inspectBytes(e) {
          var t = 0;
          var r = function r() {
            var _Mc5 = Mc(e.subarray(t)),
              _Mc6 = _slicedToArray(_Mc5, 2),
              r = _Mc6[0],
              n = _Mc6[1];
            return t += n, r;
          };
          var n = r(),
            i = ml;
          if (18 === n ? (n = 0, t = 0) : i = r(), 0 !== n && 1 !== n) throw new RangeError("Invalid CID version ".concat(n));
          var s = t,
            o = r(),
            a = r(),
            c = t + a;
          return {
            version: n,
            codec: i,
            multihashCode: o,
            digestSize: a,
            multihashSize: c - s,
            size: c
          };
        }
      }, {
        key: "parse",
        value: function parse(e, t) {
          var _fl = fl(e, t),
            _fl2 = _slicedToArray(_fl, 2),
            r = _fl2[0],
            n = _fl2[1],
            i = pl.decode(n);
          return dl(i).set(r, e), i;
        }
      }]);
      return pl;
    }(Symbol.toStringTag, Symbol.for("nodejs.util.inspect.custom"));
    var fl = function fl(e, t) {
        switch (e[0]) {
          case "Q":
            {
              var _r82 = t || el;
              return [el.prefix, _r82.decode("".concat(el.prefix).concat(e))];
            }
          case el.prefix:
            {
              var _r83 = t || el;
              return [el.prefix, _r83.decode(e)];
            }
          case rl.prefix:
            {
              var _r84 = t || rl;
              return [rl.prefix, _r84.decode(e)];
            }
          default:
            if (null == t) throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");
            return [e[0], t.decode(e)];
        }
      },
      yl = function yl(e, t, r) {
        var n = r.prefix;
        if (n !== el.prefix) throw Error("Cannot string encode V0 in ".concat(r.name, " encoding"));
        var i = t.get(n);
        if (null == i) {
          var _i37 = r.encode(e).slice(1);
          return t.set(n, _i37), _i37;
        }
        return i;
      },
      gl = function gl(e, t, r) {
        var n = r.prefix,
          i = t.get(n);
        if (null == i) {
          var _i38 = r.encode(e);
          return t.set(n, _i38), _i38;
        }
        return i;
      },
      ml = 112,
      wl = 18,
      El = function El(e, t, r) {
        var n = Kc(e),
          i = n + Kc(t),
          s = new Uint8Array(i + r.byteLength);
        return Vc(e, s, 0), Vc(t, s, n), s.set(r, i), s;
      },
      bl = Symbol.for("@ipld/js-cid/CID"),
      vl = Xc({
        prefix: "\0",
        name: "identity",
        encode: function encode(e) {
          return t = e, new TextDecoder().decode(t);
          var t;
        },
        decode: function decode(e) {
          return function (e) {
            return new TextEncoder().encode(e);
          }(e);
        }
      }),
      _l = Jc({
        prefix: "0",
        name: "base2",
        alphabet: "01",
        bitsPerChar: 1
      }),
      Sl = Jc({
        prefix: "7",
        name: "base8",
        alphabet: "01234567",
        bitsPerChar: 3
      }),
      Cl = Zc({
        prefix: "9",
        name: "base10",
        alphabet: "0123456789"
      }),
      Al = Jc({
        prefix: "f",
        name: "base16",
        alphabet: "0123456789abcdef",
        bitsPerChar: 4
      }),
      Il = Jc({
        prefix: "F",
        name: "base16upper",
        alphabet: "0123456789ABCDEF",
        bitsPerChar: 4
      }),
      Tl = Zc({
        prefix: "k",
        name: "base36",
        alphabet: "0123456789abcdefghijklmnopqrstuvwxyz"
      }),
      Rl = Zc({
        prefix: "K",
        name: "base36upper",
        alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"
      }),
      kl = Jc({
        prefix: "m",
        name: "base64",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
        bitsPerChar: 6
      }),
      Nl = Jc({
        prefix: "M",
        name: "base64pad",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
        bitsPerChar: 6
      }),
      Ll = Jc({
        prefix: "u",
        name: "base64url",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",
        bitsPerChar: 6
      }),
      Dl = Jc({
        prefix: "U",
        name: "base64urlpad",
        alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",
        bitsPerChar: 6
      }),
      Pl = Array.from(""),
      Bl = Pl.reduce(function (e, t, r) {
        return e[r] = t, e;
      }, []),
      Ol = Pl.reduce(function (e, t, r) {
        return e[t.codePointAt(0)] = r, e;
      }, []),
      xl = Xc({
        prefix: "",
        name: "base256emoji",
        encode: function encode(e) {
          return e.reduce(function (e, t) {
            return e + Bl[t];
          }, "");
        },
        decode: function decode(e) {
          var t = [];
          var _iterator53 = _createForOfIteratorHelper(e),
            _step53;
          try {
            for (_iterator53.s(); !(_step53 = _iterator53.n()).done;) {
              var _r85 = _step53.value;
              var _e89 = Ol[_r85.codePointAt(0)];
              if (void 0 === _e89) throw new Error("Non-base256emoji character: ".concat(_r85));
              t.push(_e89);
            }
          } catch (err) {
            _iterator53.e(err);
          } finally {
            _iterator53.f();
          }
          return new Uint8Array(t);
        }
      }),
      Ul = function Ul(_ref60) {
        var e = _ref60.name,
          t = _ref60.code,
          r = _ref60.encode;
        return new Ml(e, t, r);
      };
    var Ml = /*#__PURE__*/function () {
      function Ml(e, t, r) {
        _classCallCheck(this, Ml);
        this.name = e, this.code = t, this.encode = r;
      }
      _createClass(Ml, [{
        key: "digest",
        value: function digest(e) {
          var _this98 = this;
          if (e instanceof Uint8Array) {
            var _t89 = this.encode(e);
            return _t89 instanceof Uint8Array ? qc(this.code, _t89) : _t89.then(function (e) {
              return qc(_this98.code, e);
            });
          }
          throw Error("Unknown type, must be binary type");
        }
      }]);
      return Ml;
    }();
    var Vl = function Vl(e) {
        return /*#__PURE__*/function () {
          var _ref61 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee90(t) {
            return _regeneratorRuntime().wrap(function _callee90$(_context92) {
              while (1) switch (_context92.prev = _context92.next) {
                case 0:
                  _context92.t0 = Uint8Array;
                  _context92.next = 3;
                  return crypto.subtle.digest(e, t);
                case 3:
                  _context92.t1 = _context92.sent;
                  return _context92.abrupt("return", new _context92.t0(_context92.t1));
                case 5:
                case "end":
                  return _context92.stop();
              }
            }, _callee90);
          }));
          return function (_x122) {
            return _ref61.apply(this, arguments);
          };
        }();
      },
      Kl = Ul({
        name: "sha2-256",
        code: 18,
        encode: Vl("SHA-256")
      }),
      Fl = Ul({
        name: "sha2-512",
        code: 19,
        encode: Vl("SHA-512")
      }),
      ql = Fc,
      jl = {
        code: 0,
        name: "identity",
        encode: ql,
        digest: function digest(e) {
          return qc(0, ql(e));
        }
      },
      Hl = "raw",
      zl = 85,
      $l = function $l(e) {
        return Fc(e);
      },
      Gl = function Gl(e) {
        return Fc(e);
      },
      Wl = new TextEncoder(),
      Yl = new TextDecoder(),
      Ql = "json",
      Xl = 512,
      Zl = function Zl(e) {
        return Wl.encode(JSON.stringify(e));
      },
      Jl = function Jl(e) {
        return JSON.parse(Yl.decode(e));
      },
      eu = _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, E), b), v), _), S), w), C), m), A), I),
      tu = Symbol.for("@libp2p/peer-id"),
      ru = Symbol.for("nodejs.util.inspect.custom"),
      nu = Object.values(eu).map(function (e) {
        return e.decoder;
      }).reduce(function (e, t) {
        return e.or(t);
      }, eu.identity.decoder),
      iu = 114,
      su = 36,
      ou = 37;
    var au = /*#__PURE__*/function (_Symbol$toStringTag5) {
      function au(e) {
        _classCallCheck(this, au);
        this.type = e.type, this.multihash = e.multihash, this.privateKey = e.privateKey, Object.defineProperty(this, "string", {
          enumerable: !1,
          writable: !0
        });
      }
      _createClass(au, [{
        key: _Symbol$toStringTag5,
        get: function get() {
          return "PeerId(".concat(this.toString(), ")");
        }
      }, {
        key: tu,
        get: function get() {
          return !0;
        }
      }, {
        key: "toString",
        value: function toString() {
          return null == this.string && (this.string = el.encode(this.multihash.bytes).slice(1)), this.string;
        }
      }, {
        key: "toCID",
        value: function toCID() {
          return pl.createV1(iu, this.multihash);
        }
      }, {
        key: "toBytes",
        value: function toBytes() {
          return this.multihash.bytes;
        }
      }, {
        key: "toJSON",
        value: function toJSON() {
          return this.toString();
        }
      }, {
        key: "equals",
        value: function equals(e) {
          var _e$multihash2;
          if (e instanceof Uint8Array) return Xt(this.multihash.bytes, e);
          if ("string" == typeof e) return hu(e).equals(this);
          if (null != (e === null || e === void 0 ? void 0 : (_e$multihash2 = e.multihash) === null || _e$multihash2 === void 0 ? void 0 : _e$multihash2.bytes)) return Xt(this.multihash.bytes, e.multihash.bytes);
          throw new Error("not valid Id");
        }
      }, {
        key: ru,
        value: function value() {
          return "PeerId(".concat(this.toString(), ")");
        }
      }]);
      return au;
    }(Symbol.toStringTag);
    var cu = /*#__PURE__*/function (_au) {
      _inherits(cu, _au);
      var _super30 = _createSuper(cu);
      function cu(e) {
        var _this99;
        _classCallCheck(this, cu);
        _this99 = _super30.call(this, _objectSpread(_objectSpread({}, e), {}, {
          type: "RSA"
        })), _this99.type = "RSA", _this99.publicKey = e.publicKey;
        return _this99;
      }
      return _createClass(cu);
    }(au);
    var lu = /*#__PURE__*/function (_au2) {
      _inherits(lu, _au2);
      var _super31 = _createSuper(lu);
      function lu(e) {
        var _this100;
        _classCallCheck(this, lu);
        _this100 = _super31.call(this, _objectSpread(_objectSpread({}, e), {}, {
          type: "Ed25519"
        })), _this100.type = "Ed25519", _this100.publicKey = e.multihash.digest;
        return _this100;
      }
      return _createClass(lu);
    }(au);
    var uu = /*#__PURE__*/function (_au3) {
      _inherits(uu, _au3);
      var _super32 = _createSuper(uu);
      function uu(e) {
        var _this101;
        _classCallCheck(this, uu);
        _this101 = _super32.call(this, _objectSpread(_objectSpread({}, e), {}, {
          type: "secp256k1"
        })), _this101.type = "secp256k1", _this101.publicKey = e.multihash.digest;
        return _this101;
      }
      return _createClass(uu);
    }(au);
    function hu(e, t) {
      var _t90;
      if (t = (_t90 = t) !== null && _t90 !== void 0 ? _t90 : nu, "1" === e.charAt(0) || "Q" === e.charAt(0)) {
        var _t91 = jc(el.decode("z".concat(e)));
        return e.startsWith("12D") ? new lu({
          multihash: _t91
        }) : e.startsWith("16U") ? new uu({
          multihash: _t91
        }) : new cu({
          multihash: _t91
        });
      }
      return function (e) {
        try {
          var _t92 = jc(e);
          if (_t92.code === jl.code) {
            if (_t92.digest.length === su) return new lu({
              multihash: _t92
            });
            if (_t92.digest.length === ou) return new uu({
              multihash: _t92
            });
          }
          if (_t92.code === Kl.code) return new cu({
            multihash: _t92
          });
        } catch (_unused4) {
          return function (e) {
            if (null == e || null == e.multihash || null == e.version || 1 === e.version && e.code !== iu) throw new Error("Supplied PeerID CID is invalid");
            var t = e.multihash;
            if (t.code === Kl.code) return new cu({
              multihash: e.multihash
            });
            if (t.code === jl.code) {
              if (t.digest.length === su) return new lu({
                multihash: e.multihash
              });
              if (t.digest.length === ou) return new uu({
                multihash: e.multihash
              });
            }
            throw new Error("Supplied PeerID CID is invalid");
          }(pl.decode(e));
        }
        throw new Error("Supplied PeerID CID is invalid");
      }(nu.decode(e));
    }
    var du = Symbol.for("@libp2p/peer-discovery"),
      pu = ne("libp2p:bootstrap");
    var fu = /*#__PURE__*/function (_Wr3, _Symbol$toStringTag6) {
      _inherits(fu, _Wr3);
      var _super33 = _createSuper(fu);
      function fu(e) {
        var _t$timeout;
        var _this102;
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
          list: []
        };
        _classCallCheck(this, fu);
        if (null == t.list || 0 === t.list.length) throw new Error("Bootstrap requires a list of peer addresses");
        _this102 = _super33.call(this), _this102.components = e, _this102.timeout = (_t$timeout = t.timeout) !== null && _t$timeout !== void 0 ? _t$timeout : 1e3, _this102.list = [];
        var _iterator54 = _createForOfIteratorHelper(t.list),
          _step54;
        try {
          for (_iterator54.s(); !(_step54 = _iterator54.n()).done;) {
            var _e90 = _step54.value;
            if (!Br.matches(_e90)) {
              pu.error("Invalid multiaddr");
              continue;
            }
            var _t93 = hr(_e90),
              _r86 = _t93.getPeerId();
            if (null == _r86) {
              pu.error("Invalid bootstrap multiaddr without peer id");
              continue;
            }
            var _n61 = {
              id: hu(_r86),
              multiaddrs: [_t93],
              protocols: []
            };
            _this102.list.push(_n61);
          }
        } catch (err) {
          _iterator54.e(err);
        } finally {
          _iterator54.f();
        }
        _this102._init = t;
        return _this102;
      }
      _createClass(fu, [{
        key: du,
        get: function get() {
          return !0;
        }
      }, {
        key: _Symbol$toStringTag6,
        get: function get() {
          return "@libp2p/bootstrap";
        }
      }, {
        key: "isStarted",
        value: function isStarted() {
          return Boolean(this.timer);
        }
      }, {
        key: "start",
        value: function start() {
          var _this103 = this;
          this.isStarted() || (pu("Starting bootstrap node discovery, discovering peers after %s ms", this.timeout), this.timer = setTimeout(function () {
            _this103._discoverBootstrapPeers().catch(function (e) {
              pu.error(e);
            });
          }, this.timeout));
        }
      }, {
        key: "_discoverBootstrapPeers",
        value: function () {
          var _discoverBootstrapPeers2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee91() {
            var _iterator55, _step55, _this$_init$tagName, _this$_init$tagValue, _this$_init$tagTTL, e;
            return _regeneratorRuntime().wrap(function _callee91$(_context93) {
              while (1) switch (_context93.prev = _context93.next) {
                case 0:
                  if (!(null != this.timer)) {
                    _context93.next = 21;
                    break;
                  }
                  _iterator55 = _createForOfIteratorHelper(this.list);
                  _context93.prev = 2;
                  _iterator55.s();
                case 4:
                  if ((_step55 = _iterator55.n()).done) {
                    _context93.next = 13;
                    break;
                  }
                  e = _step55.value;
                  _context93.next = 8;
                  return this.components.peerStore.tagPeer(e.id, (_this$_init$tagName = this._init.tagName) !== null && _this$_init$tagName !== void 0 ? _this$_init$tagName : "bootstrap", {
                    value: (_this$_init$tagValue = this._init.tagValue) !== null && _this$_init$tagValue !== void 0 ? _this$_init$tagValue : 50,
                    ttl: (_this$_init$tagTTL = this._init.tagTTL) !== null && _this$_init$tagTTL !== void 0 ? _this$_init$tagTTL : 12e4
                  });
                case 8:
                  if (!(null == this.timer)) {
                    _context93.next = 10;
                    break;
                  }
                  return _context93.abrupt("return");
                case 10:
                  this.dispatchEvent(new Qr("peer", {
                    detail: e
                  }));
                case 11:
                  _context93.next = 4;
                  break;
                case 13:
                  _context93.next = 18;
                  break;
                case 15:
                  _context93.prev = 15;
                  _context93.t0 = _context93["catch"](2);
                  _iterator55.e(_context93.t0);
                case 18:
                  _context93.prev = 18;
                  _iterator55.f();
                  return _context93.finish(18);
                case 21:
                case "end":
                  return _context93.stop();
              }
            }, _callee91, this, [[2, 15, 18, 21]]);
          }));
          function _discoverBootstrapPeers() {
            return _discoverBootstrapPeers2.apply(this, arguments);
          }
          return _discoverBootstrapPeers;
        }()
      }, {
        key: "stop",
        value: function stop() {
          null != this.timer && clearTimeout(this.timer), this.timer = void 0;
        }
      }]);
      return fu;
    }(Wr, Symbol.toStringTag);
    function yu(e) {
      return null != e && "function" == typeof e.start && "function" == typeof e.stop;
    }
    function gu(_x123) {
      return _gu.apply(this, arguments);
    }
    function _gu() {
      _gu = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee401(e) {
        var t, _iteratorAbruptCompletion11, _didIteratorError11, _iteratorError11, _iterator11, _step11, r;
        return _regeneratorRuntime().wrap(function _callee401$(_context409) {
          while (1) switch (_context409.prev = _context409.next) {
            case 0:
              t = [];
              _iteratorAbruptCompletion11 = false;
              _didIteratorError11 = false;
              _context409.prev = 3;
              _iterator11 = _asyncIterator(e);
            case 5:
              _context409.next = 7;
              return _iterator11.next();
            case 7:
              if (!(_iteratorAbruptCompletion11 = !(_step11 = _context409.sent).done)) {
                _context409.next = 13;
                break;
              }
              r = _step11.value;
              t.push(r);
            case 10:
              _iteratorAbruptCompletion11 = false;
              _context409.next = 5;
              break;
            case 13:
              _context409.next = 19;
              break;
            case 15:
              _context409.prev = 15;
              _context409.t0 = _context409["catch"](3);
              _didIteratorError11 = true;
              _iteratorError11 = _context409.t0;
            case 19:
              _context409.prev = 19;
              _context409.prev = 20;
              if (!(_iteratorAbruptCompletion11 && _iterator11.return != null)) {
                _context409.next = 24;
                break;
              }
              _context409.next = 24;
              return _iterator11.return();
            case 24:
              _context409.prev = 24;
              if (!_didIteratorError11) {
                _context409.next = 27;
                break;
              }
              throw _iteratorError11;
            case 27:
              return _context409.finish(24);
            case 28:
              return _context409.finish(19);
            case 29:
              return _context409.abrupt("return", t);
            case 30:
            case "end":
              return _context409.stop();
          }
        }, _callee401, null, [[3, 15, 19, 29], [20,, 24, 28]]);
      }));
      return _gu.apply(this, arguments);
    }
    fu.tag = "bootstrap";
    var mu = function mu(e, t) {
      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee92() {
        var r;
        return _regeneratorRuntime().wrap(function _callee92$(_context94) {
          while (1) switch (_context94.prev = _context94.next) {
            case 0:
              _context94.next = 2;
              return _awaitAsyncGenerator(gu(e));
            case 2:
              r = _context94.sent;
              return _context94.delegateYield(_asyncGeneratorDelegate(_asyncIterator(r.sort(t)), _awaitAsyncGenerator), "t0", 4);
            case 4:
            case "end":
              return _context94.stop();
          }
        }, _callee92);
      }))();
    };
    function wu(_x124) {
      return _wu.apply(this, arguments);
    }
    function _wu() {
      _wu = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee402(e) {
        var _iteratorAbruptCompletion12, _didIteratorError12, _iteratorError12, _iterator12, _step12, t;
        return _regeneratorRuntime().wrap(function _callee402$(_context410) {
          while (1) switch (_context410.prev = _context410.next) {
            case 0:
              _iteratorAbruptCompletion12 = false;
              _didIteratorError12 = false;
              _context410.prev = 2;
              _iterator12 = _asyncIterator(e);
            case 4:
              _context410.next = 6;
              return _iterator12.next();
            case 6:
              if (!(_iteratorAbruptCompletion12 = !(_step12 = _context410.sent).done)) {
                _context410.next = 12;
                break;
              }
              t = _step12.value;
              ;
            case 9:
              _iteratorAbruptCompletion12 = false;
              _context410.next = 4;
              break;
            case 12:
              _context410.next = 18;
              break;
            case 14:
              _context410.prev = 14;
              _context410.t0 = _context410["catch"](2);
              _didIteratorError12 = true;
              _iteratorError12 = _context410.t0;
            case 18:
              _context410.prev = 18;
              _context410.prev = 19;
              if (!(_iteratorAbruptCompletion12 && _iterator12.return != null)) {
                _context410.next = 23;
                break;
              }
              _context410.next = 23;
              return _iterator12.return();
            case 23:
              _context410.prev = 23;
              if (!_didIteratorError12) {
                _context410.next = 26;
                break;
              }
              throw _iteratorError12;
            case 26:
              return _context410.finish(23);
            case 27:
              return _context410.finish(18);
            case 28:
            case "end":
              return _context410.stop();
          }
        }, _callee402, null, [[2, 14, 18, 28], [19,, 23, 27]]);
      }));
      return _wu.apply(this, arguments);
    }
    function Eu(_x7, _x8) {
      return _Eu.apply(this, arguments);
    }
    function _Eu() {
      _Eu = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee93(e, t) {
        var _iteratorAbruptCompletion13, _didIteratorError13, _iteratorError13, _iterator13, _step13, _r87;
        return _regeneratorRuntime().wrap(function _callee93$(_context95) {
          while (1) switch (_context95.prev = _context95.next) {
            case 0:
              _iteratorAbruptCompletion13 = false;
              _didIteratorError13 = false;
              _context95.prev = 2;
              _iterator13 = _asyncIterator(e);
            case 4:
              _context95.next = 6;
              return _awaitAsyncGenerator(_iterator13.next());
            case 6:
              if (!(_iteratorAbruptCompletion13 = !(_step13 = _context95.sent).done)) {
                _context95.next = 17;
                break;
              }
              _r87 = _step13.value;
              _context95.next = 10;
              return _awaitAsyncGenerator(t(_r87));
            case 10:
              _context95.t0 = _context95.sent;
              if (!_context95.t0) {
                _context95.next = 14;
                break;
              }
              _context95.next = 14;
              return _r87;
            case 14:
              _iteratorAbruptCompletion13 = false;
              _context95.next = 4;
              break;
            case 17:
              _context95.next = 23;
              break;
            case 19:
              _context95.prev = 19;
              _context95.t1 = _context95["catch"](2);
              _didIteratorError13 = true;
              _iteratorError13 = _context95.t1;
            case 23:
              _context95.prev = 23;
              _context95.prev = 24;
              if (!(_iteratorAbruptCompletion13 && _iterator13.return != null)) {
                _context95.next = 28;
                break;
              }
              _context95.next = 28;
              return _awaitAsyncGenerator(_iterator13.return());
            case 28:
              _context95.prev = 28;
              if (!_didIteratorError13) {
                _context95.next = 31;
                break;
              }
              throw _iteratorError13;
            case 31:
              return _context95.finish(28);
            case 32:
              return _context95.finish(23);
            case 33:
            case "end":
              return _context95.stop();
          }
        }, _callee93, null, [[2, 19, 23, 33], [24,, 28, 32]]);
      }));
      return _Eu.apply(this, arguments);
    }
    function bu(_x9, _x10) {
      return _bu.apply(this, arguments);
    }
    function _bu() {
      _bu = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee94(e, t) {
        var r, _iteratorAbruptCompletion14, _didIteratorError14, _iteratorError14, _iterator14, _step14, _n62;
        return _regeneratorRuntime().wrap(function _callee94$(_context96) {
          while (1) switch (_context96.prev = _context96.next) {
            case 0:
              r = 0;
              if (t < 1) {
                _context96.next = 34;
                break;
              }
              _iteratorAbruptCompletion14 = false;
              _didIteratorError14 = false;
              _context96.prev = 4;
              _iterator14 = _asyncIterator(e);
            case 6:
              _context96.next = 8;
              return _awaitAsyncGenerator(_iterator14.next());
            case 8:
              if (!(_iteratorAbruptCompletion14 = !(_step14 = _context96.sent).done)) {
                _context96.next = 18;
                break;
              }
              _n62 = _step14.value;
              _context96.next = 12;
              return _n62;
            case 12:
              r++;
              if (!(r === t)) {
                _context96.next = 15;
                break;
              }
              return _context96.abrupt("return");
            case 15:
              _iteratorAbruptCompletion14 = false;
              _context96.next = 6;
              break;
            case 18:
              _context96.next = 24;
              break;
            case 20:
              _context96.prev = 20;
              _context96.t0 = _context96["catch"](4);
              _didIteratorError14 = true;
              _iteratorError14 = _context96.t0;
            case 24:
              _context96.prev = 24;
              _context96.prev = 25;
              if (!(_iteratorAbruptCompletion14 && _iterator14.return != null)) {
                _context96.next = 29;
                break;
              }
              _context96.next = 29;
              return _awaitAsyncGenerator(_iterator14.return());
            case 29:
              _context96.prev = 29;
              if (!_didIteratorError14) {
                _context96.next = 32;
                break;
              }
              throw _iteratorError14;
            case 32:
              return _context96.finish(29);
            case 33:
              return _context96.finish(24);
            case 34:
            case "end":
              return _context96.stop();
          }
        }, _callee94, null, [[4, 20, 24, 34], [25,, 29, 33]]);
      }));
      return _bu.apply(this, arguments);
    }
    var vu = /*#__PURE__*/function () {
      function vu() {
        _classCallCheck(this, vu);
      }
      _createClass(vu, [{
        key: "open",
        value: function open() {
          return Promise.reject(new Error(".open is not implemented"));
        }
      }, {
        key: "close",
        value: function close() {
          return Promise.reject(new Error(".close is not implemented"));
        }
      }, {
        key: "put",
        value: function put(e, t, r) {
          return Promise.reject(new Error(".put is not implemented"));
        }
      }, {
        key: "get",
        value: function get(e, t) {
          return Promise.reject(new Error(".get is not implemented"));
        }
      }, {
        key: "has",
        value: function has(e, t) {
          return Promise.reject(new Error(".has is not implemented"));
        }
      }, {
        key: "delete",
        value: function _delete(e, t) {
          return Promise.reject(new Error(".delete is not implemented"));
        }
      }, {
        key: "putMany",
        value: function putMany(e) {
          var _this = this;
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee95() {
            var _iteratorAbruptCompletion15, _didIteratorError15, _iteratorError15, _iterator15, _step15, _step15$value, _r88, _n63;
            return _regeneratorRuntime().wrap(function _callee95$(_context97) {
              while (1) switch (_context97.prev = _context97.next) {
                case 0:
                  _iteratorAbruptCompletion15 = false;
                  _didIteratorError15 = false;
                  _context97.prev = 2;
                  _iterator15 = _asyncIterator(e);
                case 4:
                  _context97.next = 6;
                  return _awaitAsyncGenerator(_iterator15.next());
                case 6:
                  if (!(_iteratorAbruptCompletion15 = !(_step15 = _context97.sent).done)) {
                    _context97.next = 15;
                    break;
                  }
                  _step15$value = _step15.value, _r88 = _step15$value.key, _n63 = _step15$value.value;
                  _context97.next = 10;
                  return _awaitAsyncGenerator(_this.put(_r88, _n63, t));
                case 10:
                  _context97.next = 12;
                  return {
                    key: _r88,
                    value: _n63
                  };
                case 12:
                  _iteratorAbruptCompletion15 = false;
                  _context97.next = 4;
                  break;
                case 15:
                  _context97.next = 21;
                  break;
                case 17:
                  _context97.prev = 17;
                  _context97.t0 = _context97["catch"](2);
                  _didIteratorError15 = true;
                  _iteratorError15 = _context97.t0;
                case 21:
                  _context97.prev = 21;
                  _context97.prev = 22;
                  if (!(_iteratorAbruptCompletion15 && _iterator15.return != null)) {
                    _context97.next = 26;
                    break;
                  }
                  _context97.next = 26;
                  return _awaitAsyncGenerator(_iterator15.return());
                case 26:
                  _context97.prev = 26;
                  if (!_didIteratorError15) {
                    _context97.next = 29;
                    break;
                  }
                  throw _iteratorError15;
                case 29:
                  return _context97.finish(26);
                case 30:
                  return _context97.finish(21);
                case 31:
                case "end":
                  return _context97.stop();
              }
            }, _callee95, null, [[2, 17, 21, 31], [22,, 26, 30]]);
          }))();
        }
      }, {
        key: "getMany",
        value: function getMany(e) {
          var _this2 = this;
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee96() {
            var _iteratorAbruptCompletion16, _didIteratorError16, _iteratorError16, _iterator16, _step16, _r89;
            return _regeneratorRuntime().wrap(function _callee96$(_context98) {
              while (1) switch (_context98.prev = _context98.next) {
                case 0:
                  _iteratorAbruptCompletion16 = false;
                  _didIteratorError16 = false;
                  _context98.prev = 2;
                  _iterator16 = _asyncIterator(e);
                case 4:
                  _context98.next = 6;
                  return _awaitAsyncGenerator(_iterator16.next());
                case 6:
                  if (!(_iteratorAbruptCompletion16 = !(_step16 = _context98.sent).done)) {
                    _context98.next = 13;
                    break;
                  }
                  _r89 = _step16.value;
                  _context98.next = 10;
                  return _this2.get(_r89, t);
                case 10:
                  _iteratorAbruptCompletion16 = false;
                  _context98.next = 4;
                  break;
                case 13:
                  _context98.next = 19;
                  break;
                case 15:
                  _context98.prev = 15;
                  _context98.t0 = _context98["catch"](2);
                  _didIteratorError16 = true;
                  _iteratorError16 = _context98.t0;
                case 19:
                  _context98.prev = 19;
                  _context98.prev = 20;
                  if (!(_iteratorAbruptCompletion16 && _iterator16.return != null)) {
                    _context98.next = 24;
                    break;
                  }
                  _context98.next = 24;
                  return _awaitAsyncGenerator(_iterator16.return());
                case 24:
                  _context98.prev = 24;
                  if (!_didIteratorError16) {
                    _context98.next = 27;
                    break;
                  }
                  throw _iteratorError16;
                case 27:
                  return _context98.finish(24);
                case 28:
                  return _context98.finish(19);
                case 29:
                case "end":
                  return _context98.stop();
              }
            }, _callee96, null, [[2, 15, 19, 29], [20,, 24, 28]]);
          }))();
        }
      }, {
        key: "deleteMany",
        value: function deleteMany(e) {
          var _this3 = this;
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee97() {
            var _iteratorAbruptCompletion17, _didIteratorError17, _iteratorError17, _iterator17, _step17, _r90;
            return _regeneratorRuntime().wrap(function _callee97$(_context99) {
              while (1) switch (_context99.prev = _context99.next) {
                case 0:
                  _iteratorAbruptCompletion17 = false;
                  _didIteratorError17 = false;
                  _context99.prev = 2;
                  _iterator17 = _asyncIterator(e);
                case 4:
                  _context99.next = 6;
                  return _awaitAsyncGenerator(_iterator17.next());
                case 6:
                  if (!(_iteratorAbruptCompletion17 = !(_step17 = _context99.sent).done)) {
                    _context99.next = 15;
                    break;
                  }
                  _r90 = _step17.value;
                  _context99.next = 10;
                  return _awaitAsyncGenerator(_this3.delete(_r90, t));
                case 10:
                  _context99.next = 12;
                  return _r90;
                case 12:
                  _iteratorAbruptCompletion17 = false;
                  _context99.next = 4;
                  break;
                case 15:
                  _context99.next = 21;
                  break;
                case 17:
                  _context99.prev = 17;
                  _context99.t0 = _context99["catch"](2);
                  _didIteratorError17 = true;
                  _iteratorError17 = _context99.t0;
                case 21:
                  _context99.prev = 21;
                  _context99.prev = 22;
                  if (!(_iteratorAbruptCompletion17 && _iterator17.return != null)) {
                    _context99.next = 26;
                    break;
                  }
                  _context99.next = 26;
                  return _awaitAsyncGenerator(_iterator17.return());
                case 26:
                  _context99.prev = 26;
                  if (!_didIteratorError17) {
                    _context99.next = 29;
                    break;
                  }
                  throw _iteratorError17;
                case 29:
                  return _context99.finish(26);
                case 30:
                  return _context99.finish(21);
                case 31:
                case "end":
                  return _context99.stop();
              }
            }, _callee97, null, [[2, 17, 21, 31], [22,, 26, 30]]);
          }))();
        }
      }, {
        key: "batch",
        value: function batch() {
          var _this104 = this;
          var e = [],
            t = [];
          return {
            put: function put(t, r) {
              e.push({
                key: t,
                value: r
              });
            },
            delete: function _delete(e) {
              t.push(e);
            },
            commit: function () {
              var _commit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee98(r) {
                return _regeneratorRuntime().wrap(function _callee98$(_context100) {
                  while (1) switch (_context100.prev = _context100.next) {
                    case 0:
                      _context100.next = 2;
                      return wu(_this104.putMany(e, r));
                    case 2:
                      e = [];
                      _context100.next = 5;
                      return wu(_this104.deleteMany(t, r));
                    case 5:
                      t = [];
                    case 6:
                    case "end":
                      return _context100.stop();
                  }
                }, _callee98);
              }));
              function commit(_x125) {
                return _commit.apply(this, arguments);
              }
              return commit;
            }()
          };
        }
      }, {
        key: "_all",
        value: function _all(e, t) {
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee99() {
            return _regeneratorRuntime().wrap(function _callee99$(_context101) {
              while (1) switch (_context101.prev = _context101.next) {
                case 0:
                  throw new Error("._all is not implemented");
                case 1:
                case "end":
                  return _context101.stop();
              }
            }, _callee99);
          }))();
        }
      }, {
        key: "_allKeys",
        value: function _allKeys(e, t) {
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee100() {
            return _regeneratorRuntime().wrap(function _callee100$(_context102) {
              while (1) switch (_context102.prev = _context102.next) {
                case 0:
                  throw new Error("._allKeys is not implemented");
                case 1:
                case "end":
                  return _context102.stop();
              }
            }, _callee100);
          }))();
        }
      }, {
        key: "query",
        value: function query(e, t) {
          var r = this._all(e, t);
          if (null != e.prefix && (r = Eu(r, function (t) {
            return t.key.toString().startsWith(e.prefix);
          })), Array.isArray(e.filters) && (r = e.filters.reduce(function (e, t) {
            return Eu(e, t);
          }, r)), Array.isArray(e.orders) && (r = e.orders.reduce(function (e, t) {
            return mu(e, t);
          }, r)), null != e.offset) {
            var _t94 = 0;
            r = Eu(r, function () {
              return _t94++ >= e.offset;
            });
          }
          return null != e.limit && (r = bu(r, e.limit)), r;
        }
      }, {
        key: "queryKeys",
        value: function queryKeys(e, t) {
          var r = this._allKeys(e, t);
          if (null != e.prefix && (r = Eu(r, function (t) {
            return t.toString().startsWith(e.prefix);
          })), Array.isArray(e.filters) && (r = e.filters.reduce(function (e, t) {
            return Eu(e, t);
          }, r)), Array.isArray(e.orders) && (r = e.orders.reduce(function (e, t) {
            return mu(e, t);
          }, r)), null != e.offset) {
            var _t95 = 0;
            r = Eu(r, function () {
              return _t95++ >= e.offset;
            });
          }
          return null != e.limit && (r = bu(r, e.limit)), r;
        }
      }]);
      return vu;
    }();
    var _u = function _u() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 21;
      return crypto.getRandomValues(new Uint8Array(e)).reduce(function (e, t) {
        return e + ((t &= 63) < 36 ? t.toString(36) : t < 62 ? (t - 26).toString(36).toUpperCase() : t > 62 ? "-" : "_");
      }, "");
    };
    var Su = "/",
      Cu = new TextEncoder().encode(Su),
      Au = Cu[0];
    var Iu = /*#__PURE__*/function (_Symbol$toStringTag7) {
      function Iu(e, t) {
        _classCallCheck(this, Iu);
        if ("string" == typeof e) this._buf = Pt(e);else {
          if (!(e instanceof Uint8Array)) throw new Error("Invalid key, should be String of Uint8Array");
          this._buf = e;
        }
        if (null == t && (t = !0), t && this.clean(), 0 === this._buf.byteLength || this._buf[0] !== Au) throw new Error("Invalid key");
      }
      _createClass(Iu, [{
        key: "toString",
        value: function toString() {
          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "utf8";
          return St(this._buf, e);
        }
      }, {
        key: "uint8Array",
        value: function uint8Array() {
          return this._buf;
        }
      }, {
        key: _Symbol$toStringTag7,
        get: function get() {
          return "Key(".concat(this.toString(), ")");
        }
      }, {
        key: "clean",
        value: function clean() {
          if (null != this._buf && 0 !== this._buf.byteLength || (this._buf = Cu), this._buf[0] !== Au) {
            var e = new Uint8Array(this._buf.byteLength + 1);
            e.fill(Au, 0, 1), e.set(this._buf, 1), this._buf = e;
          }
          for (; this._buf.byteLength > 1 && this._buf[this._buf.byteLength - 1] === Au;) this._buf = this._buf.subarray(0, -1);
        }
      }, {
        key: "less",
        value: function less(e) {
          var t = this.list(),
            r = e.list();
          for (var _e91 = 0; _e91 < t.length; _e91++) {
            if (r.length < _e91 + 1) return !1;
            var _n64 = t[_e91],
              _i39 = r[_e91];
            if (_n64 < _i39) return !0;
            if (_n64 > _i39) return !1;
          }
          return t.length < r.length;
        }
      }, {
        key: "reverse",
        value: function reverse() {
          return Iu.withNamespaces(this.list().slice().reverse());
        }
      }, {
        key: "namespaces",
        value: function namespaces() {
          return this.list();
        }
      }, {
        key: "baseNamespace",
        value: function baseNamespace() {
          var e = this.namespaces();
          return e[e.length - 1];
        }
      }, {
        key: "list",
        value: function list() {
          return this.toString().split(Su).slice(1);
        }
      }, {
        key: "type",
        value: function type() {
          return function (e) {
            var t = e.split(":");
            return t.length < 2 ? "" : t.slice(0, -1).join(":");
          }(this.baseNamespace());
        }
      }, {
        key: "name",
        value: function name() {
          return function (e) {
            var t = e.split(":");
            return t[t.length - 1];
          }(this.baseNamespace());
        }
      }, {
        key: "instance",
        value: function instance(e) {
          return new Iu(this.toString() + ":" + e);
        }
      }, {
        key: "path",
        value: function path() {
          var e = this.parent().toString();
          return e.endsWith(Su) || (e += Su), e += this.type(), new Iu(e);
        }
      }, {
        key: "parent",
        value: function parent() {
          var e = this.list();
          return 1 === e.length ? new Iu(Su) : new Iu(e.slice(0, -1).join(Su));
        }
      }, {
        key: "child",
        value: function child(e) {
          return this.toString() === Su ? e : e.toString() === Su ? this : new Iu(this.toString() + e.toString(), !1);
        }
      }, {
        key: "isAncestorOf",
        value: function isAncestorOf(e) {
          return e.toString() !== this.toString() && e.toString().startsWith(this.toString());
        }
      }, {
        key: "isDecendantOf",
        value: function isDecendantOf(e) {
          return e.toString() !== this.toString() && this.toString().startsWith(e.toString());
        }
      }, {
        key: "isTopLevel",
        value: function isTopLevel() {
          return 1 === this.list().length;
        }
      }, {
        key: "concat",
        value: function concat() {
          var _ref62;
          for (var _len21 = arguments.length, e = new Array(_len21), _key21 = 0; _key21 < _len21; _key21++) {
            e[_key21] = arguments[_key21];
          }
          return Iu.withNamespaces([].concat(_toConsumableArray(this.namespaces()), _toConsumableArray((t = e.map(function (e) {
            return e.namespaces();
          }), (_ref62 = []).concat.apply(_ref62, _toConsumableArray(t))))));
          var t;
        }
      }], [{
        key: "withNamespaces",
        value: function withNamespaces(e) {
          return new Iu(e.join(Su));
        }
      }, {
        key: "random",
        value: function random() {
          return new Iu(_u().replace(/-/g, ""));
        }
      }, {
        key: "asKey",
        value: function asKey(e) {
          return e instanceof Uint8Array || "string" == typeof e ? new Iu(e) : "function" == typeof e.uint8Array ? new Iu(e.uint8Array()) : null;
        }
      }]);
      return Iu;
    }(Symbol.toStringTag);
    var Tu = /*#__PURE__*/function (_vu) {
      _inherits(Tu, _vu);
      var _super34 = _createSuper(Tu);
      function Tu() {
        var _this105;
        _classCallCheck(this, Tu);
        _this105 = _super34.call(this), _this105.data = {};
        return _this105;
      }
      _createClass(Tu, [{
        key: "open",
        value: function open() {
          return Promise.resolve();
        }
      }, {
        key: "close",
        value: function close() {
          return Promise.resolve();
        }
      }, {
        key: "put",
        value: function () {
          var _put = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee101(e, t) {
            return _regeneratorRuntime().wrap(function _callee101$(_context103) {
              while (1) switch (_context103.prev = _context103.next) {
                case 0:
                  this.data[e.toString()] = t;
                case 1:
                case "end":
                  return _context103.stop();
              }
            }, _callee101, this);
          }));
          function put(_x126, _x127) {
            return _put.apply(this, arguments);
          }
          return put;
        }()
      }, {
        key: "get",
        value: function () {
          var _get3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee102(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee102$(_context104) {
              while (1) switch (_context104.prev = _context104.next) {
                case 0:
                  _context104.next = 2;
                  return this.has(e);
                case 2:
                  if (_context104.sent) {
                    _context104.next = 4;
                    break;
                  }
                  throw t = t || new Error("Not Found"), Qt(t, "ERR_NOT_FOUND");
                case 4:
                  return _context104.abrupt("return", this.data[e.toString()]);
                case 5:
                case "end":
                  return _context104.stop();
              }
            }, _callee102, this);
          }));
          function get(_x128) {
            return _get3.apply(this, arguments);
          }
          return get;
        }()
      }, {
        key: "has",
        value: function () {
          var _has = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee103(e) {
            return _regeneratorRuntime().wrap(function _callee103$(_context105) {
              while (1) switch (_context105.prev = _context105.next) {
                case 0:
                  return _context105.abrupt("return", void 0 !== this.data[e.toString()]);
                case 1:
                case "end":
                  return _context105.stop();
              }
            }, _callee103, this);
          }));
          function has(_x129) {
            return _has.apply(this, arguments);
          }
          return has;
        }()
      }, {
        key: "delete",
        value: function () {
          var _delete2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee104(e) {
            return _regeneratorRuntime().wrap(function _callee104$(_context106) {
              while (1) switch (_context106.prev = _context106.next) {
                case 0:
                  delete this.data[e.toString()];
                case 1:
                case "end":
                  return _context106.stop();
              }
            }, _callee104, this);
          }));
          function _delete(_x130) {
            return _delete2.apply(this, arguments);
          }
          return _delete;
        }()
      }, {
        key: "_all",
        value: function _all() {
          var _this4 = this;
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee105() {
            return _regeneratorRuntime().wrap(function _callee105$(_context107) {
              while (1) switch (_context107.prev = _context107.next) {
                case 0:
                  return _context107.delegateYield(_asyncGeneratorDelegate(_asyncIterator(Object.entries(_this4.data).map(function (_ref63) {
                    var _ref64 = _slicedToArray(_ref63, 2),
                      e = _ref64[0],
                      t = _ref64[1];
                    return {
                      key: new Iu(e),
                      value: t
                    };
                  })), _awaitAsyncGenerator), "t0", 1);
                case 1:
                case "end":
                  return _context107.stop();
              }
            }, _callee105);
          }))();
        }
      }, {
        key: "_allKeys",
        value: function _allKeys() {
          var _this5 = this;
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee106() {
            return _regeneratorRuntime().wrap(function _callee106$(_context108) {
              while (1) switch (_context108.prev = _context108.next) {
                case 0:
                  return _context108.delegateYield(_asyncGeneratorDelegate(_asyncIterator(Object.entries(_this5.data).map(function (_ref65) {
                    var _ref66 = _slicedToArray(_ref65, 1),
                      e = _ref66[0];
                    return new Iu(e);
                  })), _awaitAsyncGenerator), "t0", 1);
                case 1:
                case "end":
                  return _context108.stop();
              }
            }, _callee106);
          }))();
        }
      }]);
      return Tu;
    }(vu);
    var Ru, ku;
    function Nu(_x11, _x12) {
      return _Nu.apply(this, arguments);
    }
    function _Nu() {
      _Nu = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee109(e, t) {
        return _regeneratorRuntime().wrap(function _callee109$(_context111) {
          while (1) switch (_context111.prev = _context111.next) {
            case 0:
              return _context111.delegateYield(_asyncGeneratorDelegate(_asyncIterator(function () {
                var _ref18 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee107(e, t) {
                  var _iteratorAbruptCompletion33, _didIteratorError33, _iteratorError33, _iterator33, _step33, _r91;
                  return _regeneratorRuntime().wrap(function _callee107$(_context109) {
                    while (1) switch (_context109.prev = _context109.next) {
                      case 0:
                        _iteratorAbruptCompletion33 = false;
                        _didIteratorError33 = false;
                        _context109.prev = 2;
                        _iterator33 = _asyncIterator(e);
                      case 4:
                        _context109.next = 6;
                        return _awaitAsyncGenerator(_iterator33.next());
                      case 6:
                        if (!(_iteratorAbruptCompletion33 = !(_step33 = _context109.sent).done)) {
                          _context109.next = 13;
                          break;
                        }
                        _r91 = _step33.value;
                        _context109.next = 10;
                        return t(_r91);
                      case 10:
                        _iteratorAbruptCompletion33 = false;
                        _context109.next = 4;
                        break;
                      case 13:
                        _context109.next = 19;
                        break;
                      case 15:
                        _context109.prev = 15;
                        _context109.t0 = _context109["catch"](2);
                        _didIteratorError33 = true;
                        _iteratorError33 = _context109.t0;
                      case 19:
                        _context109.prev = 19;
                        _context109.prev = 20;
                        if (!(_iteratorAbruptCompletion33 && _iterator33.return != null)) {
                          _context109.next = 24;
                          break;
                        }
                        _context109.next = 24;
                        return _awaitAsyncGenerator(_iterator33.return());
                      case 24:
                        _context109.prev = 24;
                        if (!_didIteratorError33) {
                          _context109.next = 27;
                          break;
                        }
                        throw _iteratorError33;
                      case 27:
                        return _context109.finish(24);
                      case 28:
                        return _context109.finish(19);
                      case 29:
                      case "end":
                        return _context109.stop();
                    }
                  }, _callee107, null, [[2, 15, 19, 29], [20,, 24, 28]]);
                }));
                return function (_x17, _x18) {
                  return _ref18.apply(this, arguments);
                };
              }()(e, /*#__PURE__*/function () {
                var _ref67 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee108(e) {
                  return _regeneratorRuntime().wrap(function _callee108$(_context110) {
                    while (1) switch (_context110.prev = _context110.next) {
                      case 0:
                        _context110.next = 2;
                        return t.addressBook.add(e.id, e.multiaddrs);
                      case 2:
                        return _context110.abrupt("return", e);
                      case 3:
                      case "end":
                        return _context110.stop();
                    }
                  }, _callee108);
                }));
                return function (_x131) {
                  return _ref67.apply(this, arguments);
                };
              }())), _awaitAsyncGenerator), "t0", 1);
            case 1:
            case "end":
              return _context111.stop();
          }
        }, _callee109);
      }));
      return _Nu.apply(this, arguments);
    }
    function Lu(e) {
      var t = new Set();
      return Eu(e, function (e) {
        return !t.has(e.id.toString()) && (t.add(e.id.toString()), !0);
      });
    }
    function Du(_x13) {
      return _Du.apply(this, arguments);
    }
    function _Du() {
      _Du = _wrapAsyncGenerator(function (e) {
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee110() {
          var r, _iteratorAbruptCompletion18, _didIteratorError18, _iteratorError18, _iterator18, _step18, _t96;
          return _regeneratorRuntime().wrap(function _callee110$(_context112) {
            while (1) switch (_context112.prev = _context112.next) {
              case 0:
                r = 0;
                _iteratorAbruptCompletion18 = false;
                _didIteratorError18 = false;
                _context112.prev = 3;
                _iterator18 = _asyncIterator(e);
              case 5:
                _context112.next = 7;
                return _awaitAsyncGenerator(_iterator18.next());
              case 7:
                if (!(_iteratorAbruptCompletion18 = !(_step18 = _context112.sent).done)) {
                  _context112.next = 15;
                  break;
                }
                _t96 = _step18.value;
                r++;
                _context112.next = 12;
                return _t96;
              case 12:
                _iteratorAbruptCompletion18 = false;
                _context112.next = 5;
                break;
              case 15:
                _context112.next = 21;
                break;
              case 17:
                _context112.prev = 17;
                _context112.t0 = _context112["catch"](3);
                _didIteratorError18 = true;
                _iteratorError18 = _context112.t0;
              case 21:
                _context112.prev = 21;
                _context112.prev = 22;
                if (!(_iteratorAbruptCompletion18 && _iterator18.return != null)) {
                  _context112.next = 26;
                  break;
                }
                _context112.next = 26;
                return _awaitAsyncGenerator(_iterator18.return());
              case 26:
                _context112.prev = 26;
                if (!_didIteratorError18) {
                  _context112.next = 29;
                  break;
                }
                throw _iteratorError18;
              case 29:
                return _context112.finish(26);
              case 30:
                return _context112.finish(21);
              case 31:
                if (!(r < t)) {
                  _context112.next = 33;
                  break;
                }
                throw Qt(new Error("not found"), "NOT_FOUND");
              case 33:
              case "end":
                return _context112.stop();
            }
          }, _callee110, null, [[3, 17, 21, 31], [22,, 26, 30]]);
        })();
      });
      return _Du.apply(this, arguments);
    }
    !function (e) {
      e.NOT_STARTED_YET = "The libp2p node is not started yet", e.DHT_DISABLED = "DHT is not available", e.PUBSUB_DISABLED = "PubSub is not available", e.CONN_ENCRYPTION_REQUIRED = "At least one connection encryption module is required", e.ERR_TRANSPORTS_REQUIRED = "At least one transport module is required", e.ERR_PROTECTOR_REQUIRED = "Private network is enforced, but no protector was provided", e.NOT_FOUND = "Not found";
    }(Ru || (Ru = {})), function (e) {
      e.DHT_DISABLED = "ERR_DHT_DISABLED", e.ERR_PUBSUB_DISABLED = "ERR_PUBSUB_DISABLED", e.PUBSUB_NOT_STARTED = "ERR_PUBSUB_NOT_STARTED", e.DHT_NOT_STARTED = "ERR_DHT_NOT_STARTED", e.CONN_ENCRYPTION_REQUIRED = "ERR_CONN_ENCRYPTION_REQUIRED", e.ERR_TRANSPORTS_REQUIRED = "ERR_TRANSPORTS_REQUIRED", e.ERR_PROTECTOR_REQUIRED = "ERR_PROTECTOR_REQUIRED", e.ERR_PEER_DIAL_INTERCEPTED = "ERR_PEER_DIAL_INTERCEPTED", e.ERR_CONNECTION_INTERCEPTED = "ERR_CONNECTION_INTERCEPTED", e.ERR_INVALID_PROTOCOLS_FOR_STREAM = "ERR_INVALID_PROTOCOLS_FOR_STREAM", e.ERR_CONNECTION_ENDED = "ERR_CONNECTION_ENDED", e.ERR_CONNECTION_FAILED = "ERR_CONNECTION_FAILED", e.ERR_NODE_NOT_STARTED = "ERR_NODE_NOT_STARTED", e.ERR_ALREADY_ABORTED = "ERR_ALREADY_ABORTED", e.ERR_TOO_MANY_ADDRESSES = "ERR_TOO_MANY_ADDRESSES", e.ERR_NO_VALID_ADDRESSES = "ERR_NO_VALID_ADDRESSES", e.ERR_RELAYED_DIAL = "ERR_RELAYED_DIAL", e.ERR_DIALED_SELF = "ERR_DIALED_SELF", e.ERR_DISCOVERED_SELF = "ERR_DISCOVERED_SELF", e.ERR_DUPLICATE_TRANSPORT = "ERR_DUPLICATE_TRANSPORT", e.ERR_ENCRYPTION_FAILED = "ERR_ENCRYPTION_FAILED", e.ERR_HOP_REQUEST_FAILED = "ERR_HOP_REQUEST_FAILED", e.ERR_INVALID_KEY = "ERR_INVALID_KEY", e.ERR_INVALID_MESSAGE = "ERR_INVALID_MESSAGE", e.ERR_INVALID_PARAMETERS = "ERR_INVALID_PARAMETERS", e.ERR_INVALID_PEER = "ERR_INVALID_PEER", e.ERR_MUXER_UNAVAILABLE = "ERR_MUXER_UNAVAILABLE", e.ERR_NOT_FOUND = "ERR_NOT_FOUND", e.ERR_TIMEOUT = "ERR_TIMEOUT", e.ERR_TRANSPORT_UNAVAILABLE = "ERR_TRANSPORT_UNAVAILABLE", e.ERR_TRANSPORT_DIAL_FAILED = "ERR_TRANSPORT_DIAL_FAILED", e.ERR_UNSUPPORTED_PROTOCOL = "ERR_UNSUPPORTED_PROTOCOL", e.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED = "ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED", e.ERR_INVALID_MULTIADDR = "ERR_INVALID_MULTIADDR", e.ERR_SIGNATURE_NOT_VALID = "ERR_SIGNATURE_NOT_VALID", e.ERR_FIND_SELF = "ERR_FIND_SELF", e.ERR_NO_ROUTERS_AVAILABLE = "ERR_NO_ROUTERS_AVAILABLE", e.ERR_CONNECTION_NOT_MULTIPLEXED = "ERR_CONNECTION_NOT_MULTIPLEXED", e.ERR_NO_DIAL_TOKENS = "ERR_NO_DIAL_TOKENS", e.ERR_KEYCHAIN_REQUIRED = "ERR_KEYCHAIN_REQUIRED", e.ERR_INVALID_CMS = "ERR_INVALID_CMS", e.ERR_MISSING_KEYS = "ERR_MISSING_KEYS", e.ERR_NO_KEY = "ERR_NO_KEY", e.ERR_INVALID_KEY_NAME = "ERR_INVALID_KEY_NAME", e.ERR_INVALID_KEY_TYPE = "ERR_INVALID_KEY_TYPE", e.ERR_KEY_ALREADY_EXISTS = "ERR_KEY_ALREADY_EXISTS", e.ERR_INVALID_KEY_SIZE = "ERR_INVALID_KEY_SIZE", e.ERR_KEY_NOT_FOUND = "ERR_KEY_NOT_FOUND", e.ERR_OLD_KEY_NAME_INVALID = "ERR_OLD_KEY_NAME_INVALID", e.ERR_NEW_KEY_NAME_INVALID = "ERR_NEW_KEY_NAME_INVALID", e.ERR_PASSWORD_REQUIRED = "ERR_PASSWORD_REQUIRED", e.ERR_PEM_REQUIRED = "ERR_PEM_REQUIRED", e.ERR_CANNOT_READ_KEY = "ERR_CANNOT_READ_KEY", e.ERR_MISSING_PRIVATE_KEY = "ERR_MISSING_PRIVATE_KEY", e.ERR_MISSING_PUBLIC_KEY = "ERR_MISSING_PUBLIC_KEY", e.ERR_INVALID_OLD_PASS_TYPE = "ERR_INVALID_OLD_PASS_TYPE", e.ERR_INVALID_NEW_PASS_TYPE = "ERR_INVALID_NEW_PASS_TYPE", e.ERR_INVALID_PASS_LENGTH = "ERR_INVALID_PASS_LENGTH", e.ERR_NOT_IMPLEMENTED = "ERR_NOT_IMPLEMENTED", e.ERR_WRONG_PING_ACK = "ERR_WRONG_PING_ACK", e.ERR_INVALID_RECORD = "ERR_INVALID_RECORD", e.ERR_ALREADY_SUCCEEDED = "ERR_ALREADY_SUCCEEDED", e.ERR_NO_HANDLER_FOR_PROTOCOL = "ERR_NO_HANDLER_FOR_PROTOCOL", e.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS = "ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS", e.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS = "ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS", e.ERR_CONNECTION_DENIED = "ERR_CONNECTION_DENIED";
    }(ku || (ku = {}));
    var Pu = __webpack_require__(715);
    function Bu(_x132) {
      return _Bu.apply(this, arguments);
    }
    function _Bu() {
      _Bu = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee403(e) {
        var _iteratorAbruptCompletion19, _didIteratorError19, _iteratorError19, _iterator19, _step19, t;
        return _regeneratorRuntime().wrap(function _callee403$(_context411) {
          while (1) switch (_context411.prev = _context411.next) {
            case 0:
              _iteratorAbruptCompletion19 = false;
              _didIteratorError19 = false;
              _context411.prev = 2;
              _iterator19 = _asyncIterator(e);
            case 4:
              _context411.next = 6;
              return _iterator19.next();
            case 6:
              if (!(_iteratorAbruptCompletion19 = !(_step19 = _context411.sent).done)) {
                _context411.next = 12;
                break;
              }
              t = _step19.value;
              return _context411.abrupt("return", t);
            case 9:
              _iteratorAbruptCompletion19 = false;
              _context411.next = 4;
              break;
            case 12:
              _context411.next = 18;
              break;
            case 14:
              _context411.prev = 14;
              _context411.t0 = _context411["catch"](2);
              _didIteratorError19 = true;
              _iteratorError19 = _context411.t0;
            case 18:
              _context411.prev = 18;
              _context411.prev = 19;
              if (!(_iteratorAbruptCompletion19 && _iterator19.return != null)) {
                _context411.next = 23;
                break;
              }
              _context411.next = 23;
              return _iterator19.return();
            case 23:
              _context411.prev = 23;
              if (!_didIteratorError19) {
                _context411.next = 26;
                break;
              }
              throw _iteratorError19;
            case 26:
              return _context411.finish(23);
            case 27:
              return _context411.finish(18);
            case 28:
            case "end":
              return _context411.stop();
          }
        }, _callee403, null, [[2, 14, 18, 28], [19,, 23, 27]]);
      }));
      return _Bu.apply(this, arguments);
    }
    var Ou = __webpack_require__(7695),
      xu = __webpack_require__(7187);
    var Uu = ne("libp2p:peer-routing");
    var Mu = /*#__PURE__*/function () {
      function Mu(e, t) {
        var _t$routers, _t$refreshManager;
        _classCallCheck(this, Mu);
        this.components = e, this.routers = (_t$routers = t.routers) !== null && _t$routers !== void 0 ? _t$routers : [], this.refreshManagerInit = (_t$refreshManager = t.refreshManager) !== null && _t$refreshManager !== void 0 ? _t$refreshManager : {}, this.started = !1, this._findClosestPeersTask = this._findClosestPeersTask.bind(this);
      }
      _createClass(Mu, [{
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "start",
        value: function () {
          var _start = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee111() {
            return _regeneratorRuntime().wrap(function _callee111$(_context113) {
              while (1) switch (_context113.prev = _context113.next) {
                case 0:
                  this.started || 0 === this.routers.length || null != this.timeoutId || !1 === this.refreshManagerInit.enabled || (this.timeoutId = (0, Ou.setDelayedInterval)(this._findClosestPeersTask, this.refreshManagerInit.interval, this.refreshManagerInit.bootDelay), this.started = !0);
                case 1:
                case "end":
                  return _context113.stop();
              }
            }, _callee111, this);
          }));
          function start() {
            return _start.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "_findClosestPeersTask",
        value: function () {
          var _findClosestPeersTask2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee112() {
            var _this$refreshManagerI, _ref68, _this$abortController;
            return _regeneratorRuntime().wrap(function _callee112$(_context114) {
              while (1) switch (_context114.prev = _context114.next) {
                case 0:
                  if (!(null == this.abortController)) {
                    _context114.next = 14;
                    break;
                  }
                  _context114.prev = 1;
                  this.abortController = new Pu.TimeoutController((_this$refreshManagerI = this.refreshManagerInit.timeout) !== null && _this$refreshManagerI !== void 0 ? _this$refreshManagerI : 1e4);
                  try {
                    (_ref68 = (0, xu.setMaxListeners)) === null || _ref68 === void 0 ? void 0 : _ref68(1 / 0, this.abortController.signal);
                  } catch (_unused5) {}
                  _context114.next = 6;
                  return wu(this.getClosestPeers(this.components.peerId.toBytes(), {
                    signal: this.abortController.signal
                  }));
                case 6:
                  _context114.next = 11;
                  break;
                case 8:
                  _context114.prev = 8;
                  _context114.t0 = _context114["catch"](1);
                  Uu.error(_context114.t0);
                case 11:
                  _context114.prev = 11;
                  (_this$abortController = this.abortController) !== null && _this$abortController !== void 0 && _this$abortController.clear(), this.abortController = void 0;
                  return _context114.finish(11);
                case 14:
                case "end":
                  return _context114.stop();
              }
            }, _callee112, this, [[1, 8, 11, 14]]);
          }));
          function _findClosestPeersTask() {
            return _findClosestPeersTask2.apply(this, arguments);
          }
          return _findClosestPeersTask;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee113() {
            var _this$abortController2;
            return _regeneratorRuntime().wrap(function _callee113$(_context115) {
              while (1) switch (_context115.prev = _context115.next) {
                case 0:
                  (0, Ou.clearDelayedInterval)(this.timeoutId), (_this$abortController2 = this.abortController) !== null && _this$abortController2 !== void 0 && _this$abortController2.abort(), this.started = !1;
                case 1:
                case "end":
                  return _context115.stop();
              }
            }, _callee113, this);
          }));
          function stop() {
            return _stop.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "findPeer",
        value: function () {
          var _findPeer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee116(e, t) {
            var _this106 = this;
            var r;
            return _regeneratorRuntime().wrap(function _callee116$(_context118) {
              while (1) switch (_context118.prev = _context118.next) {
                case 0:
                  if (!(0 === this.routers.length)) {
                    _context118.next = 2;
                    break;
                  }
                  throw Qt(new Error("No peer routers available"), ku.ERR_NO_ROUTERS_AVAILABLE);
                case 2:
                  if (!(e.toString() === this.components.peerId.toString())) {
                    _context118.next = 4;
                    break;
                  }
                  throw Qt(new Error("Should not try to find self"), ku.ERR_FIND_SELF);
                case 4:
                  _context118.next = 6;
                  return Ci(Ei.apply(void 0, _toConsumableArray(this.routers.map(function (r) {
                    return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee114() {
                      return _regeneratorRuntime().wrap(function _callee114$(_context116) {
                        while (1) switch (_context116.prev = _context116.next) {
                          case 0:
                            _context116.prev = 0;
                            _context116.next = 3;
                            return _awaitAsyncGenerator(r.findPeer(e, t));
                          case 3:
                            _context116.next = 5;
                            return _context116.sent;
                          case 5:
                            _context116.next = 10;
                            break;
                          case 7:
                            _context116.prev = 7;
                            _context116.t0 = _context116["catch"](0);
                            Uu.error(_context116.t0);
                          case 10:
                          case "end":
                            return _context116.stop();
                        }
                      }, _callee114, null, [[0, 7]]);
                    }))();
                  }))), function (e) {
                    return Eu(e, Boolean);
                  }, function (e) {
                    return Nu(e, _this106.components.peerStore);
                  }, /*#__PURE__*/function () {
                    var _ref69 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee115(e) {
                      return _regeneratorRuntime().wrap(function _callee115$(_context117) {
                        while (1) switch (_context117.prev = _context117.next) {
                          case 0:
                            _context117.next = 2;
                            return Bu(e);
                          case 2:
                            return _context117.abrupt("return", _context117.sent);
                          case 3:
                          case "end":
                            return _context117.stop();
                        }
                      }, _callee115);
                    }));
                    return function (_x135) {
                      return _ref69.apply(this, arguments);
                    };
                  }());
                case 6:
                  r = _context118.sent;
                  if (!(null != r)) {
                    _context118.next = 9;
                    break;
                  }
                  return _context118.abrupt("return", r);
                case 9:
                  throw Qt(new Error(Ru.NOT_FOUND), ku.ERR_NOT_FOUND);
                case 10:
                case "end":
                  return _context118.stop();
              }
            }, _callee116, this);
          }));
          function findPeer(_x133, _x134) {
            return _findPeer.apply(this, arguments);
          }
          return findPeer;
        }()
      }, {
        key: "getClosestPeers",
        value: function getClosestPeers(e, t) {
          var _this6 = this;
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee117() {
            return _regeneratorRuntime().wrap(function _callee117$(_context119) {
              while (1) switch (_context119.prev = _context119.next) {
                case 0:
                  if (!(0 === _this6.routers.length)) {
                    _context119.next = 2;
                    break;
                  }
                  throw Qt(new Error("No peer routers available"), ku.ERR_NO_ROUTERS_AVAILABLE);
                case 2:
                  return _context119.delegateYield(_asyncGeneratorDelegate(_asyncIterator(Ci(Ei.apply(void 0, _toConsumableArray(_this6.routers.map(function (r) {
                    return r.getClosestPeers(e, t);
                  }))), function (e) {
                    return Nu(e, _this6.components.peerStore);
                  }, function (e) {
                    return Lu(e);
                  }, function (e) {
                    return Du(e);
                  })), _awaitAsyncGenerator), "t0", 3);
                case 3:
                case "end":
                  return _context119.stop();
              }
            }, _callee117);
          }))();
        }
      }]);
      return Mu;
    }();
    var Vu = /*#__PURE__*/function () {
      function Vu(e, t) {
        var _t$routers2;
        _classCallCheck(this, Vu);
        this.routers = (_t$routers2 = t.routers) !== null && _t$routers2 !== void 0 ? _t$routers2 : [], this.started = !1, this.components = e;
      }
      _createClass(Vu, [{
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "start",
        value: function () {
          var _start2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee118() {
            return _regeneratorRuntime().wrap(function _callee118$(_context120) {
              while (1) switch (_context120.prev = _context120.next) {
                case 0:
                  this.started = !0;
                case 1:
                case "end":
                  return _context120.stop();
              }
            }, _callee118, this);
          }));
          function start() {
            return _start2.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee119() {
            return _regeneratorRuntime().wrap(function _callee119$(_context121) {
              while (1) switch (_context121.prev = _context121.next) {
                case 0:
                  this.started = !1;
                case 1:
                case "end":
                  return _context121.stop();
              }
            }, _callee119, this);
          }));
          function stop() {
            return _stop2.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "findProviders",
        value: function findProviders(e) {
          var _this7 = this;
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee120() {
            return _regeneratorRuntime().wrap(function _callee120$(_context122) {
              while (1) switch (_context122.prev = _context122.next) {
                case 0:
                  if (!(0 === _this7.routers.length)) {
                    _context122.next = 2;
                    break;
                  }
                  throw Qt(new Error("No content this.routers available"), ku.ERR_NO_ROUTERS_AVAILABLE);
                case 2:
                  return _context122.delegateYield(_asyncGeneratorDelegate(_asyncIterator(Ci(Ei.apply(void 0, _toConsumableArray(_this7.routers.map(function (r) {
                    return r.findProviders(e, t);
                  }))), function (e) {
                    return Nu(e, _this7.components.peerStore);
                  }, function (e) {
                    return Lu(e);
                  }, function (e) {
                    return Du(e);
                  })), _awaitAsyncGenerator), "t0", 3);
                case 3:
                case "end":
                  return _context122.stop();
              }
            }, _callee120);
          }))();
        }
      }, {
        key: "provide",
        value: function () {
          var _provide = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee122(e) {
            var t,
              _args124 = arguments;
            return _regeneratorRuntime().wrap(function _callee122$(_context124) {
              while (1) switch (_context124.prev = _context124.next) {
                case 0:
                  t = _args124.length > 1 && _args124[1] !== undefined ? _args124[1] : {};
                  if (!(0 === this.routers.length)) {
                    _context124.next = 3;
                    break;
                  }
                  throw Qt(new Error("No content routers available"), ku.ERR_NO_ROUTERS_AVAILABLE);
                case 3:
                  _context124.next = 5;
                  return Promise.all(this.routers.map( /*#__PURE__*/function () {
                    var _ref70 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee121(r) {
                      return _regeneratorRuntime().wrap(function _callee121$(_context123) {
                        while (1) switch (_context123.prev = _context123.next) {
                          case 0:
                            _context123.next = 2;
                            return r.provide(e, t);
                          case 2:
                            return _context123.abrupt("return", _context123.sent);
                          case 3:
                          case "end":
                            return _context123.stop();
                        }
                      }, _callee121);
                    }));
                    return function (_x137) {
                      return _ref70.apply(this, arguments);
                    };
                  }()));
                case 5:
                case "end":
                  return _context124.stop();
              }
            }, _callee122, this);
          }));
          function provide(_x136) {
            return _provide.apply(this, arguments);
          }
          return provide;
        }()
      }, {
        key: "put",
        value: function () {
          var _put2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee123(e, t, r) {
            var n;
            return _regeneratorRuntime().wrap(function _callee123$(_context125) {
              while (1) switch (_context125.prev = _context125.next) {
                case 0:
                  if (this.isStarted()) {
                    _context125.next = 2;
                    break;
                  }
                  throw Qt(new Error(Ru.NOT_STARTED_YET), ku.DHT_NOT_STARTED);
                case 2:
                  n = this.components.dht;
                  _context125.t0 = null != n;
                  if (!_context125.t0) {
                    _context125.next = 7;
                    break;
                  }
                  _context125.next = 7;
                  return wu(n.put(e, t, r));
                case 7:
                case "end":
                  return _context125.stop();
              }
            }, _callee123, this);
          }));
          function put(_x138, _x139, _x140) {
            return _put2.apply(this, arguments);
          }
          return put;
        }()
      }, {
        key: "get",
        value: function () {
          var _get4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee124(e, t) {
            var r, _iteratorAbruptCompletion20, _didIteratorError20, _iteratorError20, _iterator20, _step20, _n65;
            return _regeneratorRuntime().wrap(function _callee124$(_context126) {
              while (1) switch (_context126.prev = _context126.next) {
                case 0:
                  if (this.isStarted()) {
                    _context126.next = 2;
                    break;
                  }
                  throw Qt(new Error(Ru.NOT_STARTED_YET), ku.DHT_NOT_STARTED);
                case 2:
                  r = this.components.dht;
                  if (!(null != r)) {
                    _context126.next = 33;
                    break;
                  }
                  _iteratorAbruptCompletion20 = false;
                  _didIteratorError20 = false;
                  _context126.prev = 6;
                  _iterator20 = _asyncIterator(r.get(e, t));
                case 8:
                  _context126.next = 10;
                  return _iterator20.next();
                case 10:
                  if (!(_iteratorAbruptCompletion20 = !(_step20 = _context126.sent).done)) {
                    _context126.next = 17;
                    break;
                  }
                  _n65 = _step20.value;
                  if (!("VALUE" === _n65.name)) {
                    _context126.next = 14;
                    break;
                  }
                  return _context126.abrupt("return", _n65.value);
                case 14:
                  _iteratorAbruptCompletion20 = false;
                  _context126.next = 8;
                  break;
                case 17:
                  _context126.next = 23;
                  break;
                case 19:
                  _context126.prev = 19;
                  _context126.t0 = _context126["catch"](6);
                  _didIteratorError20 = true;
                  _iteratorError20 = _context126.t0;
                case 23:
                  _context126.prev = 23;
                  _context126.prev = 24;
                  if (!(_iteratorAbruptCompletion20 && _iterator20.return != null)) {
                    _context126.next = 28;
                    break;
                  }
                  _context126.next = 28;
                  return _iterator20.return();
                case 28:
                  _context126.prev = 28;
                  if (!_didIteratorError20) {
                    _context126.next = 31;
                    break;
                  }
                  throw _iteratorError20;
                case 31:
                  return _context126.finish(28);
                case 32:
                  return _context126.finish(23);
                case 33:
                  throw Qt(new Error(Ru.NOT_FOUND), ku.ERR_NOT_FOUND);
                case 34:
                case "end":
                  return _context126.stop();
              }
            }, _callee124, this, [[6, 19, 23, 33], [24,, 28, 32]]);
          }));
          function get(_x141, _x142) {
            return _get4.apply(this, arguments);
          }
          return get;
        }()
      }, {
        key: "getMany",
        value: function getMany(e, t, r) {
          var _this8 = this;
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee125() {
            var n, i, _iteratorAbruptCompletion21, _didIteratorError21, _iteratorError21, _iterator21, _step21, _s25;
            return _regeneratorRuntime().wrap(function _callee125$(_context127) {
              while (1) switch (_context127.prev = _context127.next) {
                case 0:
                  if (_this8.isStarted()) {
                    _context127.next = 2;
                    break;
                  }
                  throw Qt(new Error(Ru.NOT_STARTED_YET), ku.DHT_NOT_STARTED);
                case 2:
                  if (!(null == t || 0 === t)) {
                    _context127.next = 4;
                    break;
                  }
                  return _context127.abrupt("return");
                case 4:
                  n = 0;
                  i = _this8.components.dht;
                  if (!(null != i)) {
                    _context127.next = 42;
                    break;
                  }
                  _iteratorAbruptCompletion21 = false;
                  _didIteratorError21 = false;
                  _context127.prev = 9;
                  _iterator21 = _asyncIterator(i.get(e, r));
                case 11:
                  _context127.next = 13;
                  return _awaitAsyncGenerator(_iterator21.next());
                case 13:
                  if (!(_iteratorAbruptCompletion21 = !(_step21 = _context127.sent).done)) {
                    _context127.next = 26;
                    break;
                  }
                  _s25 = _step21.value;
                  _context127.t0 = "VALUE" === _s25.name;
                  if (!_context127.t0) {
                    _context127.next = 21;
                    break;
                  }
                  _context127.next = 19;
                  return {
                    from: _s25.from,
                    val: _s25.value
                  };
                case 19:
                  n++;
                  _context127.t0 = n === t;
                case 21:
                  if (!_context127.t0) {
                    _context127.next = 23;
                    break;
                  }
                  return _context127.abrupt("break", 26);
                case 23:
                  _iteratorAbruptCompletion21 = false;
                  _context127.next = 11;
                  break;
                case 26:
                  _context127.next = 32;
                  break;
                case 28:
                  _context127.prev = 28;
                  _context127.t1 = _context127["catch"](9);
                  _didIteratorError21 = true;
                  _iteratorError21 = _context127.t1;
                case 32:
                  _context127.prev = 32;
                  _context127.prev = 33;
                  if (!(_iteratorAbruptCompletion21 && _iterator21.return != null)) {
                    _context127.next = 37;
                    break;
                  }
                  _context127.next = 37;
                  return _awaitAsyncGenerator(_iterator21.return());
                case 37:
                  _context127.prev = 37;
                  if (!_didIteratorError21) {
                    _context127.next = 40;
                    break;
                  }
                  throw _iteratorError21;
                case 40:
                  return _context127.finish(37);
                case 41:
                  return _context127.finish(32);
                case 42:
                  if (!(0 === n)) {
                    _context127.next = 44;
                    break;
                  }
                  throw Qt(new Error(Ru.NOT_FOUND), ku.ERR_NOT_FOUND);
                case 44:
                case "end":
                  return _context127.stop();
              }
            }, _callee125, null, [[9, 28, 32, 42], [33,, 37, 41]]);
          }))();
        }
      }]);
      return Vu;
    }();
    var Ku = function Ku(e) {
      return e;
    };
    var Fu = /*#__PURE__*/function (_Wr4) {
      _inherits(Fu, _Wr4);
      var _super35 = _createSuper(Fu);
      function Fu(e, t) {
        var _t$announceFilter;
        var _this107;
        _classCallCheck(this, Fu);
        _this107 = _super35.call(this);
        var _t$listen = t.listen,
          r = _t$listen === void 0 ? [] : _t$listen,
          _t$announce = t.announce,
          n = _t$announce === void 0 ? [] : _t$announce;
        _this107.components = e, _this107.listen = r.map(function (e) {
          return e.toString();
        }), _this107.announce = new Set(n.map(function (e) {
          return e.toString();
        })), _this107.observed = new Set(), _this107.announceFilter = (_t$announceFilter = t.announceFilter) !== null && _t$announceFilter !== void 0 ? _t$announceFilter : Ku;
        return _this107;
      }
      _createClass(Fu, [{
        key: "getListenAddrs",
        value: function getListenAddrs() {
          return Array.from(this.listen).map(function (e) {
            return hr(e);
          });
        }
      }, {
        key: "getAnnounceAddrs",
        value: function getAnnounceAddrs() {
          return Array.from(this.announce).map(function (e) {
            return hr(e);
          });
        }
      }, {
        key: "getObservedAddrs",
        value: function getObservedAddrs() {
          return Array.from(this.observed).map(function (e) {
            return hr(e);
          });
        }
      }, {
        key: "confirmObservedAddr",
        value: function confirmObservedAddr(e) {}
      }, {
        key: "removeObservedAddr",
        value: function removeObservedAddr(e) {}
      }, {
        key: "addObservedAddr",
        value: function addObservedAddr(e) {
          var t = hr(e);
          var r = t.getPeerId();
          null != r && nc(r).equals(this.components.peerId) && (t = t.decapsulate(hr("/p2p/".concat(this.components.peerId.toString()))));
          var n = t.toString();
          this.observed.has(n) || (this.observed.add(n), this.dispatchEvent(new Qr("change:addresses")));
        }
      }, {
        key: "getAddresses",
        value: function getAddresses() {
          var _this108 = this;
          var e = this.getAnnounceAddrs().map(function (e) {
            return e.toString();
          });
          0 === e.length && (e = this.components.transportManager.getAddrs().map(function (e) {
            return e.toString();
          })), e = e.concat(this.getObservedAddrs().map(function (e) {
            return e.toString();
          }));
          var t = new Set(e);
          return this.announceFilter(Array.from(t).map(function (e) {
            return hr(e);
          })).map(function (e) {
            var _e$protos$pop;
            return !0 === ((_e$protos$pop = e.protos().pop()) === null || _e$protos$pop === void 0 ? void 0 : _e$protos$pop.path) || e.getPeerId() === _this108.components.peerId.toString() ? e : e.encapsulate("/p2p/".concat(_this108.components.peerId.toString()));
          });
        }
      }]);
      return Fu;
    }(Wr);
    var qu = __webpack_require__(942),
      ju = ne("libp2p:connection-manager:latency-monitor:visibility-change-emitter");
    var Hu = /*#__PURE__*/function (_Wr5) {
      _inherits(Hu, _Wr5);
      var _super36 = _createSuper(Hu);
      function Hu() {
        var _this109;
        _classCallCheck(this, Hu);
        _this109 = _super36.call(this), _this109.hidden = "hidden", _this109.visibilityChange = "visibilityChange", null != globalThis.document && (_this109._initializeVisibilityVarNames(), _this109._addVisibilityChangeListener());
        return _this109;
      }
      _createClass(Hu, [{
        key: "_initializeVisibilityVarNames",
        value: function _initializeVisibilityVarNames() {
          var e = "hidden",
            t = "visibilitychange";
          void 0 !== globalThis.document.hidden ? (e = "hidden", t = "visibilitychange") : void 0 !== globalThis.document.mozHidden ? (e = "mozHidden", t = "mozvisibilitychange") : void 0 !== globalThis.document.msHidden ? (e = "msHidden", t = "msvisibilitychange") : void 0 !== globalThis.document.webkitHidden && (e = "webkitHidden", t = "webkitvisibilitychange"), this.hidden = e, this.visibilityChange = t;
        }
      }, {
        key: "_addVisibilityChangeListener",
        value: function _addVisibilityChangeListener() {
          void 0 === globalThis.document.addEventListener || void 0 === document[this.hidden] ? ju("Checking page visibility requires a browser that supports the Page Visibility API.") : globalThis.document.addEventListener(this.visibilityChange, this._handleVisibilityChange.bind(this), !1);
        }
      }, {
        key: "isVisible",
        value: function isVisible() {
          if (void 0 !== this.hidden && void 0 !== document[this.hidden]) return null == document[this.hidden];
        }
      }, {
        key: "_handleVisibilityChange",
        value: function _handleVisibilityChange() {
          var e = !1 === globalThis.document[this.hidden];
          ju(e ? "Page Visible" : "Page Hidden"), this.dispatchEvent(new Qr("visibilityChange", {
            detail: e
          }));
        }
      }]);
      return Hu;
    }(Wr);
    var zu = ne("libp2p:connection-manager:latency-monitor");
    var $u = /*#__PURE__*/function (_Wr6) {
      _inherits($u, _Wr6);
      var _super37 = _createSuper($u);
      function $u() {
        var _globalThis$process2, _window$performance;
        var _this110;
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        _classCallCheck(this, $u);
        _this110 = _super37.call(this);
        var t = e.latencyCheckIntervalMs,
          r = e.dataEmitIntervalMs,
          n = e.asyncTestFn,
          i = e.latencyRandomPercentage;
        _this110.latencyCheckIntervalMs = t !== null && t !== void 0 ? t : 500, _this110.latencyRandomPercentage = i !== null && i !== void 0 ? i : 10, _this110.latencyCheckMultiply = _this110.latencyRandomPercentage / 100 * 2 * _this110.latencyCheckIntervalMs, _this110.latencyCheckSubtract = _this110.latencyCheckMultiply / 2, _this110.dataEmitIntervalMs = null === r || 0 === r ? void 0 : r !== null && r !== void 0 ? r : 5e3, zu("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s", _this110.latencyCheckIntervalMs, _this110.dataEmitIntervalMs), null != _this110.dataEmitIntervalMs ? zu("Expecting ~%s events per summary", _this110.latencyCheckIntervalMs / _this110.dataEmitIntervalMs) : zu("Not emitting summaries"), _this110.asyncTestFn = n, null != ((_globalThis$process2 = globalThis.process) === null || _globalThis$process2 === void 0 ? void 0 : _globalThis$process2.hrtime) ? (zu("Using process.hrtime for timing"), _this110.now = globalThis.process.hrtime, _this110.getDeltaMS = function (e) {
          var t = _this110.now(e);
          return 1e3 * t[0] + t[1] / 1e6;
        }) : "undefined" != typeof window && null != ((_window$performance = window.performance) === null || _window$performance === void 0 ? void 0 : _window$performance.now) ? (zu("Using performance.now for timing"), _this110.now = window.performance.now.bind(window.performance), _this110.getDeltaMS = function (e) {
          return Math.round(_this110.now() - e);
        }) : (zu("Using Date.now for timing"), _this110.now = Date.now, _this110.getDeltaMS = function (e) {
          return _this110.now() - e;
        }), _this110.latencyData = _this110.initLatencyData();
        return _this110;
      }
      _createClass($u, [{
        key: "start",
        value: function start() {
          var _this111 = this,
            _this$visibilityChang;
          void 0 !== globalThis.window && (this.visibilityChangeEmitter = new Hu(), this.visibilityChangeEmitter.addEventListener("visibilityChange", function (e) {
            var t = e.detail;
            t ? _this111._startTimers() : (_this111._emitSummary(), _this111._stopTimers());
          })), !0 === ((_this$visibilityChang = this.visibilityChangeEmitter) === null || _this$visibilityChang === void 0 ? void 0 : _this$visibilityChang.isVisible()) && this._startTimers();
        }
      }, {
        key: "stop",
        value: function stop() {
          this._stopTimers();
        }
      }, {
        key: "_startTimers",
        value: function _startTimers() {
          var _this112 = this;
          null == this.checkLatencyID && (this.checkLatency(), null != this.dataEmitIntervalMs && (this.emitIntervalID = setInterval(function () {
            return _this112._emitSummary();
          }, this.dataEmitIntervalMs), "function" == typeof this.emitIntervalID.unref && this.emitIntervalID.unref()));
        }
      }, {
        key: "_stopTimers",
        value: function _stopTimers() {
          null != this.checkLatencyID && (clearTimeout(this.checkLatencyID), this.checkLatencyID = void 0), null != this.emitIntervalID && (clearInterval(this.emitIntervalID), this.emitIntervalID = void 0);
        }
      }, {
        key: "_emitSummary",
        value: function _emitSummary() {
          var e = this.getSummary();
          e.events > 0 && this.dispatchEvent(new Qr("data", {
            detail: e
          }));
        }
      }, {
        key: "getSummary",
        value: function getSummary() {
          var e = {
            events: this.latencyData.events,
            minMs: this.latencyData.minMs,
            maxMs: this.latencyData.maxMs,
            avgMs: this.latencyData.events > 0 ? this.latencyData.totalMs / this.latencyData.events : Number.POSITIVE_INFINITY,
            lengthMs: this.getDeltaMS(this.latencyData.startTime)
          };
          return this.latencyData = this.initLatencyData(), zu.trace("Summary: %O", e), e;
        }
      }, {
        key: "checkLatency",
        value: function checkLatency() {
          var _this113 = this;
          var e = Math.random() * this.latencyCheckMultiply - this.latencyCheckSubtract,
            t = {
              deltaOffset: Math.ceil(this.latencyCheckIntervalMs + e),
              startTime: this.now()
            },
            r = function r() {
              if (null == _this113.checkLatencyID) return;
              var e = _this113.getDeltaMS(t.startTime) - t.deltaOffset;
              _this113.checkLatency(), _this113.latencyData.events++, _this113.latencyData.minMs = Math.min(_this113.latencyData.minMs, e), _this113.latencyData.maxMs = Math.max(_this113.latencyData.maxMs, e), _this113.latencyData.totalMs += e, zu.trace("MS: %s Data: %O", e, _this113.latencyData);
            };
          zu.trace("localData: %O", t), this.checkLatencyID = setTimeout(function () {
            null != _this113.asyncTestFn ? (t.deltaOffset = 0, t.startTime = _this113.now(), _this113.asyncTestFn(r)) : (t.deltaOffset -= 1, r());
          }, t.deltaOffset), "function" == typeof this.checkLatencyID.unref && this.checkLatencyID.unref();
        }
      }, {
        key: "initLatencyData",
        value: function initLatencyData() {
          return {
            startTime: this.now(),
            minMs: Number.POSITIVE_INFINITY,
            maxMs: Number.NEGATIVE_INFINITY,
            events: 0,
            totalMs: 0
          };
        }
      }]);
      return $u;
    }(Wr);
    var Gu = "OPEN",
      Wu = "CLOSING",
      Yu = "CLOSED";
    function Qu(e, t) {
      var _r92;
      var r = (_r92 = {}, _defineProperty(_r92, Symbol.iterator, function () {
        return r;
      }), _defineProperty(_r92, "next", function next() {
        var r = e.next(),
          n = r.value;
        return !0 === r.done || null == n ? {
          done: !0,
          value: void 0
        } : {
          done: !1,
          value: t(n)
        };
      }), _r92);
      return r;
    }
    var Xu = /*#__PURE__*/function (_Symbol$iterator2) {
      function Xu(e) {
        _classCallCheck(this, Xu);
        if (this.map = new Map(), null != e) {
          var _iterator56 = _createForOfIteratorHelper(e.entries()),
            _step56;
          try {
            for (_iterator56.s(); !(_step56 = _iterator56.n()).done;) {
              var _step56$value = _slicedToArray(_step56.value, 2),
                t = _step56$value[0],
                _r93 = _step56$value[1];
              this.map.set(t.toString(), _r93);
            }
          } catch (err) {
            _iterator56.e(err);
          } finally {
            _iterator56.f();
          }
        }
      }
      _createClass(Xu, [{
        key: _Symbol$iterator2,
        value: function value() {
          return this.entries();
        }
      }, {
        key: "clear",
        value: function clear() {
          this.map.clear();
        }
      }, {
        key: "delete",
        value: function _delete(e) {
          this.map.delete(e.toString());
        }
      }, {
        key: "entries",
        value: function entries() {
          return Qu(this.map.entries(), function (e) {
            return [nc(e[0]), e[1]];
          });
        }
      }, {
        key: "forEach",
        value: function forEach(e) {
          var _this114 = this;
          this.map.forEach(function (t, r) {
            e(t, nc(r), _this114);
          });
        }
      }, {
        key: "get",
        value: function get(e) {
          return this.map.get(e.toString());
        }
      }, {
        key: "has",
        value: function has(e) {
          return this.map.has(e.toString());
        }
      }, {
        key: "set",
        value: function set(e, t) {
          this.map.set(e.toString(), t);
        }
      }, {
        key: "keys",
        value: function keys() {
          return Qu(this.map.keys(), function (e) {
            return nc(e);
          });
        }
      }, {
        key: "values",
        value: function values() {
          return this.map.values();
        }
      }, {
        key: "size",
        get: function get() {
          return this.map.size;
        }
      }]);
      return Xu;
    }(Symbol.iterator);
    var Zu = /*#__PURE__*/function (_Symbol$iterator3) {
      function Zu(e) {
        _classCallCheck(this, Zu);
        if (this.set = new Set(), null != e) {
          var _iterator57 = _createForOfIteratorHelper(e),
            _step57;
          try {
            for (_iterator57.s(); !(_step57 = _iterator57.n()).done;) {
              var t = _step57.value;
              this.set.add(t.toString());
            }
          } catch (err) {
            _iterator57.e(err);
          } finally {
            _iterator57.f();
          }
        }
      }
      _createClass(Zu, [{
        key: "size",
        get: function get() {
          return this.set.size;
        }
      }, {
        key: _Symbol$iterator3,
        value: function value() {
          return this.values();
        }
      }, {
        key: "add",
        value: function add(e) {
          this.set.add(e.toString());
        }
      }, {
        key: "clear",
        value: function clear() {
          this.set.clear();
        }
      }, {
        key: "delete",
        value: function _delete(e) {
          this.set.delete(e.toString());
        }
      }, {
        key: "entries",
        value: function entries() {
          return Qu(this.set.entries(), function (e) {
            var t = nc(e[0]);
            return [t, t];
          });
        }
      }, {
        key: "forEach",
        value: function forEach(e) {
          var _this115 = this;
          this.set.forEach(function (t) {
            var r = nc(t);
            e(r, r, _this115);
          });
        }
      }, {
        key: "has",
        value: function has(e) {
          return this.set.has(e.toString());
        }
      }, {
        key: "values",
        value: function values() {
          return Qu(this.set.values(), function (e) {
            return nc(e);
          });
        }
      }, {
        key: "intersection",
        value: function intersection(e) {
          var t = new Zu();
          var _iterator58 = _createForOfIteratorHelper(e),
            _step58;
          try {
            for (_iterator58.s(); !(_step58 = _iterator58.n()).done;) {
              var _r94 = _step58.value;
              this.has(_r94) && t.add(_r94);
            }
          } catch (err) {
            _iterator58.e(err);
          } finally {
            _iterator58.f();
          }
          return t;
        }
      }, {
        key: "difference",
        value: function difference(e) {
          var t = new Zu();
          var _iterator59 = _createForOfIteratorHelper(this),
            _step59;
          try {
            for (_iterator59.s(); !(_step59 = _iterator59.n()).done;) {
              var _r95 = _step59.value;
              e.has(_r95) || t.add(_r95);
            }
          } catch (err) {
            _iterator59.e(err);
          } finally {
            _iterator59.f();
          }
          return t;
        }
      }, {
        key: "union",
        value: function union(e) {
          var t = new Zu();
          var _iterator60 = _createForOfIteratorHelper(e),
            _step60;
          try {
            for (_iterator60.s(); !(_step60 = _iterator60.n()).done;) {
              var _r96 = _step60.value;
              t.add(_r96);
            }
          } catch (err) {
            _iterator60.e(err);
          } finally {
            _iterator60.f();
          }
          var _iterator61 = _createForOfIteratorHelper(this),
            _step61;
          try {
            for (_iterator61.s(); !(_step61 = _iterator61.n()).done;) {
              var _e92 = _step61.value;
              t.add(_e92);
            }
          } catch (err) {
            _iterator61.e(err);
          } finally {
            _iterator61.f();
          }
          return t;
        }
      }]);
      return Zu;
    }(Symbol.iterator);
    var Ju = /*#__PURE__*/function (_Symbol$iterator4) {
      function Ju(e) {
        _classCallCheck(this, Ju);
        if (this.list = [], null != e) {
          var _iterator62 = _createForOfIteratorHelper(e),
            _step62;
          try {
            for (_iterator62.s(); !(_step62 = _iterator62.n()).done;) {
              var t = _step62.value;
              this.list.push(t.toString());
            }
          } catch (err) {
            _iterator62.e(err);
          } finally {
            _iterator62.f();
          }
        }
      }
      _createClass(Ju, [{
        key: _Symbol$iterator4,
        value: function value() {
          return mapIterable(this.list.entries(), function (e) {
            return peerIdFromString(e[1]);
          });
        }
      }, {
        key: "concat",
        value: function concat(e) {
          var t = new Ju(this);
          var _iterator63 = _createForOfIteratorHelper(e),
            _step63;
          try {
            for (_iterator63.s(); !(_step63 = _iterator63.n()).done;) {
              var _r97 = _step63.value;
              t.push(_r97);
            }
          } catch (err) {
            _iterator63.e(err);
          } finally {
            _iterator63.f();
          }
          return t;
        }
      }, {
        key: "entries",
        value: function entries() {
          return mapIterable(this.list.entries(), function (e) {
            return [e[0], peerIdFromString(e[1])];
          });
        }
      }, {
        key: "every",
        value: function every(e) {
          var _this116 = this;
          return this.list.every(function (t, r) {
            return e(peerIdFromString(t), r, _this116);
          });
        }
      }, {
        key: "filter",
        value: function filter(e) {
          var _this117 = this;
          var t = new Ju();
          return this.list.forEach(function (r, n) {
            var i = peerIdFromString(r);
            e(i, n, _this117) && t.push(i);
          }), t;
        }
      }, {
        key: "find",
        value: function find(e) {
          var _this118 = this;
          var t = this.list.find(function (t, r) {
            return e(peerIdFromString(t), r, _this118);
          });
          if (null != t) return peerIdFromString(t);
        }
      }, {
        key: "findIndex",
        value: function findIndex(e) {
          var _this119 = this;
          return this.list.findIndex(function (t, r) {
            return e(peerIdFromString(t), r, _this119);
          });
        }
      }, {
        key: "forEach",
        value: function forEach(e) {
          var _this120 = this;
          this.list.forEach(function (t, r) {
            e(peerIdFromString(t), r, _this120);
          });
        }
      }, {
        key: "includes",
        value: function includes(e) {
          return this.list.includes(e.toString());
        }
      }, {
        key: "indexOf",
        value: function indexOf(e) {
          return this.list.indexOf(e.toString());
        }
      }, {
        key: "pop",
        value: function pop() {
          var e = this.list.pop();
          if (null != e) return peerIdFromString(e);
        }
      }, {
        key: "push",
        value: function push() {
          for (var _len22 = arguments.length, e = new Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {
            e[_key22] = arguments[_key22];
          }
          for (var _i40 = 0, _e93 = e; _i40 < _e93.length; _i40++) {
            var t = _e93[_i40];
            this.list.push(t.toString());
          }
        }
      }, {
        key: "shift",
        value: function shift() {
          var e = this.list.shift();
          if (null != e) return peerIdFromString(e);
        }
      }, {
        key: "unshift",
        value: function unshift() {
          var t = this.list.length;
          for (var _len23 = arguments.length, e = new Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {
            e[_key23] = arguments[_key23];
          }
          for (var _t97 = e.length - 1; _t97 > -1; _t97--) this.list.unshift(e[_t97].toString());
          return t;
        }
      }, {
        key: "length",
        get: function get() {
          return this.list.length;
        }
      }]);
      return Ju;
    }(Symbol.iterator);
    function eh(e) {
      if ($a(e)) return {
        peerId: e
      };
      if (lr(e)) {
        var t = e.getPeerId();
        return {
          multiaddr: e,
          peerId: null == t ? void 0 : nc(t)
        };
      }
      throw Qt(new Error("".concat(e, " is not a PeerId or a Multiaddr")), ku.ERR_INVALID_MULTIADDR);
    }
    var th = ne("libp2p:connection-manager"),
      rh = {
        maxConnections: 1 / 0,
        minConnections: 0,
        maxEventLoopDelay: 1 / 0,
        pollInterval: 2e3,
        autoDialInterval: 1e4,
        inboundConnectionThreshold: 5,
        maxIncomingPendingConnections: 10
      };
    var nh = /*#__PURE__*/function (_Wr7) {
      _inherits(nh, _Wr7);
      var _super38 = _createSuper(nh);
      function nh(e, t) {
        var _t$startupReconnectTi, _t$dialTimeout, _t$allow, _t$deny;
        var _this121;
        _classCallCheck(this, nh);
        if (_this121 = _super38.call(this), _this121.opts = qu.call({
          ignoreUndefined: !0
        }, rh, t), _this121.opts.maxConnections < _this121.opts.minConnections) throw Qt(new Error("Connection Manager maxConnections must be greater than minConnections"), ku.ERR_INVALID_PARAMETERS);
        th("options: %o", _this121.opts), _this121.components = e, _this121.connections = new Map(), _this121.started = !1, null != t.maxEventLoopDelay && t.maxEventLoopDelay > 0 && t.maxEventLoopDelay !== 1 / 0 && (_this121.latencyMonitor = new $u({
          latencyCheckIntervalMs: t.pollInterval,
          dataEmitIntervalMs: t.pollInterval
        }));
        try {
          var _ref71;
          (_ref71 = (0, xu.setMaxListeners)) === null || _ref71 === void 0 ? void 0 : _ref71(1 / 0, _assertThisInitialized(_this121));
        } catch (_unused6) {}
        _this121.onConnect = _this121.onConnect.bind(_assertThisInitialized(_this121)), _this121.onDisconnect = _this121.onDisconnect.bind(_assertThisInitialized(_this121)), _this121.startupReconnectTimeout = (_t$startupReconnectTi = t.startupReconnectTimeout) !== null && _t$startupReconnectTi !== void 0 ? _t$startupReconnectTi : 6e4, _this121.dialTimeout = (_t$dialTimeout = t.dialTimeout) !== null && _t$dialTimeout !== void 0 ? _t$dialTimeout : 3e4, _this121.allow = ((_t$allow = t.allow) !== null && _t$allow !== void 0 ? _t$allow : []).map(function (e) {
          return hr(e);
        }), _this121.deny = ((_t$deny = t.deny) !== null && _t$deny !== void 0 ? _t$deny : []).map(function (e) {
          return hr(e);
        }), _this121.inboundConnectionRateLimiter = new Hn.RateLimiterMemory({
          points: _this121.opts.inboundConnectionThreshold,
          duration: 1
        }), _this121.incomingPendingConnections = 0;
        return _possibleConstructorReturn(_this121);
      }
      _createClass(nh, [{
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "start",
        value: function () {
          var _start3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee126() {
            var _this$components$metr,
              _this122 = this,
              _this$components$metr2,
              _this$components$metr3,
              _this$latencyMonitor,
              _this$latencyMonitor2;
            return _regeneratorRuntime().wrap(function _callee126$(_context128) {
              while (1) switch (_context128.prev = _context128.next) {
                case 0:
                  (_this$components$metr = this.components.metrics) !== null && _this$components$metr !== void 0 && _this$components$metr.registerMetricGroup("libp2p_connection_manager_connections", {
                    calculate: function calculate() {
                      var e = {
                        inbound: 0,
                        outbound: 0
                      };
                      var _iterator64 = _createForOfIteratorHelper(_this122.connections.values()),
                        _step64;
                      try {
                        for (_iterator64.s(); !(_step64 = _iterator64.n()).done;) {
                          var t = _step64.value;
                          var _iterator65 = _createForOfIteratorHelper(t),
                            _step65;
                          try {
                            for (_iterator65.s(); !(_step65 = _iterator65.n()).done;) {
                              var _r98 = _step65.value;
                              "inbound" === _r98.stat.direction ? e.inbound++ : e.outbound++;
                            }
                          } catch (err) {
                            _iterator65.e(err);
                          } finally {
                            _iterator65.f();
                          }
                        }
                      } catch (err) {
                        _iterator64.e(err);
                      } finally {
                        _iterator64.f();
                      }
                      return e;
                    }
                  }), (_this$components$metr2 = this.components.metrics) !== null && _this$components$metr2 !== void 0 && _this$components$metr2.registerMetricGroup("libp2p_protocol_streams_total", {
                    label: "protocol",
                    calculate: function calculate() {
                      var e = {};
                      var _iterator66 = _createForOfIteratorHelper(_this122.connections.values()),
                        _step66;
                      try {
                        for (_iterator66.s(); !(_step66 = _iterator66.n()).done;) {
                          var t = _step66.value;
                          var _iterator67 = _createForOfIteratorHelper(t),
                            _step67;
                          try {
                            for (_iterator67.s(); !(_step67 = _iterator67.n()).done;) {
                              var _r99 = _step67.value;
                              var _iterator68 = _createForOfIteratorHelper(_r99.streams),
                                _step68;
                              try {
                                for (_iterator68.s(); !(_step68 = _iterator68.n()).done;) {
                                  var _t98$stat$protocol, _e$_r;
                                  var _t98 = _step68.value;
                                  var _r100 = "".concat(_t98.stat.direction, " ").concat((_t98$stat$protocol = _t98.stat.protocol) !== null && _t98$stat$protocol !== void 0 ? _t98$stat$protocol : "unnegotiated");
                                  e[_r100] = ((_e$_r = e[_r100]) !== null && _e$_r !== void 0 ? _e$_r : 0) + 1;
                                }
                              } catch (err) {
                                _iterator68.e(err);
                              } finally {
                                _iterator68.f();
                              }
                            }
                          } catch (err) {
                            _iterator67.e(err);
                          } finally {
                            _iterator67.f();
                          }
                        }
                      } catch (err) {
                        _iterator66.e(err);
                      } finally {
                        _iterator66.f();
                      }
                      return e;
                    }
                  }), (_this$components$metr3 = this.components.metrics) !== null && _this$components$metr3 !== void 0 && _this$components$metr3.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile", {
                    label: "protocol",
                    calculate: function calculate() {
                      var e = {};
                      var _iterator69 = _createForOfIteratorHelper(_this122.connections.values()),
                        _step69;
                      try {
                        for (_iterator69.s(); !(_step69 = _iterator69.n()).done;) {
                          var _t99 = _step69.value;
                          var _iterator70 = _createForOfIteratorHelper(_t99),
                            _step70;
                          try {
                            for (_iterator70.s(); !(_step70 = _iterator70.n()).done;) {
                              var _r102 = _step70.value;
                              var _t100 = {};
                              var _iterator71 = _createForOfIteratorHelper(_r102.streams),
                                _step71;
                              try {
                                for (_iterator71.s(); !(_step71 = _iterator71.n()).done;) {
                                  var _e95$stat$protocol, _t100$_r;
                                  var _e95 = _step71.value;
                                  var _r104 = "".concat(_e95.stat.direction, " ").concat((_e95$stat$protocol = _e95.stat.protocol) !== null && _e95$stat$protocol !== void 0 ? _e95$stat$protocol : "unnegotiated");
                                  _t100[_r104] = ((_t100$_r = _t100[_r104]) !== null && _t100$_r !== void 0 ? _t100$_r : 0) + 1;
                                }
                              } catch (err) {
                                _iterator71.e(err);
                              } finally {
                                _iterator71.f();
                              }
                              for (var _i42 = 0, _Object$entries2 = Object.entries(_t100); _i42 < _Object$entries2.length; _i42++) {
                                var _e$_r2;
                                var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i42], 2),
                                  _r103 = _Object$entries2$_i[0],
                                  _n67 = _Object$entries2$_i[1];
                                e[_r103] = (_e$_r2 = e[_r103]) !== null && _e$_r2 !== void 0 ? _e$_r2 : [], e[_r103].push(_n67);
                              }
                            }
                          } catch (err) {
                            _iterator70.e(err);
                          } finally {
                            _iterator70.f();
                          }
                        }
                      } catch (err) {
                        _iterator69.e(err);
                      } finally {
                        _iterator69.f();
                      }
                      var t = {};
                      for (var _i41 = 0, _Object$entries = Object.entries(e); _i41 < _Object$entries.length; _i41++) {
                        var _Object$entries$_i = _slicedToArray(_Object$entries[_i41], 2),
                          _r101 = _Object$entries$_i[0],
                          _n66 = _Object$entries$_i[1];
                        _n66 = _n66.sort(function (e, t) {
                          return e - t;
                        });
                        var _e94 = Math.floor(.9 * _n66.length);
                        t[_r101] = _n66[_e94];
                      }
                      return t;
                    }
                  }), (_this$latencyMonitor = this.latencyMonitor) !== null && _this$latencyMonitor !== void 0 && _this$latencyMonitor.start(), this._onLatencyMeasure = this._onLatencyMeasure.bind(this), (_this$latencyMonitor2 = this.latencyMonitor) !== null && _this$latencyMonitor2 !== void 0 && _this$latencyMonitor2.addEventListener("data", this._onLatencyMeasure), this.started = !0, th("started");
                case 1:
                case "end":
                  return _context128.stop();
              }
            }, _callee126, this);
          }));
          function start() {
            return _start3.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "afterStart",
        value: function () {
          var _afterStart = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee129() {
            var _this123 = this;
            return _regeneratorRuntime().wrap(function _callee129$(_context131) {
              while (1) switch (_context131.prev = _context131.next) {
                case 0:
                  this.components.upgrader.addEventListener("connection", this.onConnect), this.components.upgrader.addEventListener("connectionEnd", this.onDisconnect), Promise.resolve().then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee128() {
                    var _this123$connectOnSta;
                    var e, _iterator72, _step72, t, _ref73;
                    return _regeneratorRuntime().wrap(function _callee128$(_context130) {
                      while (1) switch (_context130.prev = _context130.next) {
                        case 0:
                          e = [];
                          _context130.t0 = _createForOfIteratorHelper;
                          _context130.next = 4;
                          return _this123.components.peerStore.all();
                        case 4:
                          _context130.t1 = _context130.sent;
                          _iterator72 = (0, _context130.t0)(_context130.t1);
                          _context130.prev = 6;
                          _iterator72.s();
                        case 8:
                          if ((_step72 = _iterator72.n()).done) {
                            _context130.next = 18;
                            break;
                          }
                          t = _step72.value;
                          _context130.next = 12;
                          return _this123.components.peerStore.getTags(t.id);
                        case 12:
                          _context130.t2 = _context130.sent.filter(function (e) {
                            return "keep-alive" === e.name;
                          }).length;
                          _context130.t3 = _context130.t2 > 0;
                          if (!_context130.t3) {
                            _context130.next = 16;
                            break;
                          }
                          e.push(t.id);
                        case 16:
                          _context130.next = 8;
                          break;
                        case 18:
                          _context130.next = 23;
                          break;
                        case 20:
                          _context130.prev = 20;
                          _context130.t4 = _context130["catch"](6);
                          _iterator72.e(_context130.t4);
                        case 23:
                          _context130.prev = 23;
                          _iterator72.f();
                          return _context130.finish(23);
                        case 26:
                          (_this123$connectOnSta = _this123.connectOnStartupController) !== null && _this123$connectOnSta !== void 0 && _this123$connectOnSta.clear(), _this123.connectOnStartupController = new Pu.TimeoutController(_this123.startupReconnectTimeout);
                          try {
                            (_ref73 = (0, xu.setMaxListeners)) === null || _ref73 === void 0 ? void 0 : _ref73(1 / 0, _this123.connectOnStartupController.signal);
                          } catch (_unused7) {}
                          _context130.next = 30;
                          return Promise.all(e.map( /*#__PURE__*/function () {
                            var _ref74 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee127(e) {
                              var _this123$connectOnSta2;
                              return _regeneratorRuntime().wrap(function _callee127$(_context129) {
                                while (1) switch (_context129.prev = _context129.next) {
                                  case 0:
                                    _context129.next = 2;
                                    return _this123.openConnection(e, {
                                      signal: (_this123$connectOnSta2 = _this123.connectOnStartupController) === null || _this123$connectOnSta2 === void 0 ? void 0 : _this123$connectOnSta2.signal
                                    }).catch(function (e) {
                                      th.error(e);
                                    });
                                  case 2:
                                  case "end":
                                    return _context129.stop();
                                }
                              }, _callee127);
                            }));
                            return function (_x143) {
                              return _ref74.apply(this, arguments);
                            };
                          }()));
                        case 30:
                        case "end":
                          return _context130.stop();
                      }
                    }, _callee128, null, [[6, 20, 23, 26]]);
                  }))).catch(function (e) {
                    th.error(e);
                  }).finally(function () {
                    var _this123$connectOnSta3;
                    (_this123$connectOnSta3 = _this123.connectOnStartupController) === null || _this123$connectOnSta3 === void 0 ? void 0 : _this123$connectOnSta3.clear();
                  });
                case 1:
                case "end":
                  return _context131.stop();
              }
            }, _callee129, this);
          }));
          function afterStart() {
            return _afterStart.apply(this, arguments);
          }
          return afterStart;
        }()
      }, {
        key: "beforeStop",
        value: function () {
          var _beforeStop = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee130() {
            var _this$connectOnStartu;
            return _regeneratorRuntime().wrap(function _callee130$(_context132) {
              while (1) switch (_context132.prev = _context132.next) {
                case 0:
                  (_this$connectOnStartu = this.connectOnStartupController) !== null && _this$connectOnStartu !== void 0 && _this$connectOnStartu.abort(), this.components.upgrader.removeEventListener("connection", this.onConnect), this.components.upgrader.removeEventListener("connectionEnd", this.onDisconnect);
                case 1:
                case "end":
                  return _context132.stop();
              }
            }, _callee130, this);
          }));
          function beforeStop() {
            return _beforeStop.apply(this, arguments);
          }
          return beforeStop;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee131() {
            var _this$latencyMonitor3, _this$latencyMonitor4;
            return _regeneratorRuntime().wrap(function _callee131$(_context133) {
              while (1) switch (_context133.prev = _context133.next) {
                case 0:
                  (_this$latencyMonitor3 = this.latencyMonitor) !== null && _this$latencyMonitor3 !== void 0 && _this$latencyMonitor3.removeEventListener("data", this._onLatencyMeasure);
                  (_this$latencyMonitor4 = this.latencyMonitor) !== null && _this$latencyMonitor4 !== void 0 && _this$latencyMonitor4.stop();
                  this.started = !1;
                  _context133.next = 5;
                  return this._close();
                case 5:
                  th("stopped");
                case 6:
                case "end":
                  return _context133.stop();
              }
            }, _callee131, this);
          }));
          function stop() {
            return _stop3.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "_close",
        value: function () {
          var _close2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee133() {
            var e, _iterator73, _step73, t, _iterator74, _step74, _loop4;
            return _regeneratorRuntime().wrap(function _callee133$(_context136) {
              while (1) switch (_context136.prev = _context136.next) {
                case 0:
                  e = [];
                  _iterator73 = _createForOfIteratorHelper(this.connections.values());
                  _context136.prev = 2;
                  _iterator73.s();
                case 4:
                  if ((_step73 = _iterator73.n()).done) {
                    _context136.next = 24;
                    break;
                  }
                  t = _step73.value;
                  _iterator74 = _createForOfIteratorHelper(t);
                  _context136.prev = 7;
                  _loop4 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop4() {
                    var r;
                    return _regeneratorRuntime().wrap(function _loop4$(_context135) {
                      while (1) switch (_context135.prev = _context135.next) {
                        case 0:
                          r = _step74.value;
                          e.push(_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee132() {
                            return _regeneratorRuntime().wrap(function _callee132$(_context134) {
                              while (1) switch (_context134.prev = _context134.next) {
                                case 0:
                                  _context134.prev = 0;
                                  _context134.next = 3;
                                  return r.close();
                                case 3:
                                  _context134.next = 8;
                                  break;
                                case 5:
                                  _context134.prev = 5;
                                  _context134.t0 = _context134["catch"](0);
                                  th.error(_context134.t0);
                                case 8:
                                case "end":
                                  return _context134.stop();
                              }
                            }, _callee132, null, [[0, 5]]);
                          }))());
                        case 2:
                        case "end":
                          return _context135.stop();
                      }
                    }, _loop4);
                  });
                  _iterator74.s();
                case 10:
                  if ((_step74 = _iterator74.n()).done) {
                    _context136.next = 14;
                    break;
                  }
                  return _context136.delegateYield(_loop4(), "t0", 12);
                case 12:
                  _context136.next = 10;
                  break;
                case 14:
                  _context136.next = 19;
                  break;
                case 16:
                  _context136.prev = 16;
                  _context136.t1 = _context136["catch"](7);
                  _iterator74.e(_context136.t1);
                case 19:
                  _context136.prev = 19;
                  _iterator74.f();
                  return _context136.finish(19);
                case 22:
                  _context136.next = 4;
                  break;
                case 24:
                  _context136.next = 29;
                  break;
                case 26:
                  _context136.prev = 26;
                  _context136.t2 = _context136["catch"](2);
                  _iterator73.e(_context136.t2);
                case 29:
                  _context136.prev = 29;
                  _iterator73.f();
                  return _context136.finish(29);
                case 32:
                  th("closing %d connections", e.length);
                  _context136.next = 35;
                  return Promise.all(e);
                case 35:
                  this.connections.clear();
                case 36:
                case "end":
                  return _context136.stop();
              }
            }, _callee133, this, [[2, 26, 29, 32], [7, 16, 19, 22]]);
          }));
          function _close() {
            return _close2.apply(this, arguments);
          }
          return _close;
        }()
      }, {
        key: "onConnect",
        value: function onConnect(e) {
          this._onConnect(e).catch(function (e) {
            th.error(e);
          });
        }
      }, {
        key: "_onConnect",
        value: function () {
          var _onConnect2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee134(e) {
            var t, r, n, i, s, o;
            return _regeneratorRuntime().wrap(function _callee134$(_context137) {
              while (1) switch (_context137.prev = _context137.next) {
                case 0:
                  t = e.detail;
                  if (this.started) {
                    _context137.next = 5;
                    break;
                  }
                  _context137.next = 4;
                  return t.close();
                case 4:
                  return _context137.abrupt("return", void _context137.sent);
                case 5:
                  r = t.remotePeer, n = r.toString(), i = this.connections.get(n);
                  null != i ? i.push(t) : this.connections.set(n, [t]);
                  _context137.t0 = null != r.publicKey;
                  if (!_context137.t0) {
                    _context137.next = 11;
                    break;
                  }
                  _context137.next = 11;
                  return this.components.peerStore.keyBook.set(r, r.publicKey);
                case 11:
                  s = this.getConnections().length, o = s - this.opts.maxConnections;
                  _context137.next = 14;
                  return this._checkMaxLimit("maxConnections", s, o);
                case 14:
                  this.dispatchEvent(new Qr("peer:connect", {
                    detail: t
                  }));
                case 15:
                case "end":
                  return _context137.stop();
              }
            }, _callee134, this);
          }));
          function _onConnect(_x144) {
            return _onConnect2.apply(this, arguments);
          }
          return _onConnect;
        }()
      }, {
        key: "onDisconnect",
        value: function onDisconnect(e) {
          var t = e.detail;
          if (!this.started) return;
          var r = t.remotePeer.toString();
          var n = this.connections.get(r);
          null != n && n.length > 1 ? (n = n.filter(function (e) {
            return e.id !== t.id;
          }), this.connections.set(r, n)) : null != n && (this.connections.delete(r), this.dispatchEvent(new Qr("peer:disconnect", {
            detail: t
          })));
        }
      }, {
        key: "getConnections",
        value: function getConnections(e) {
          var _this$connections$get;
          if (null != e) return (_this$connections$get = this.connections.get(e.toString())) !== null && _this$connections$get !== void 0 ? _this$connections$get : [];
          var t = [];
          var _iterator75 = _createForOfIteratorHelper(this.connections.values()),
            _step75;
          try {
            for (_iterator75.s(); !(_step75 = _iterator75.n()).done;) {
              var _e96 = _step75.value;
              t = t.concat(_e96);
            }
          } catch (err) {
            _iterator75.e(err);
          } finally {
            _iterator75.f();
          }
          return t;
        }
      }, {
        key: "openConnection",
        value: function () {
          var _openConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee135(e) {
            var t,
              _eh,
              r,
              n,
              _e97,
              i,
              _ref76,
              _r105,
              _n68,
              _i43,
              _iterator76,
              _step76,
              _e98,
              _args138 = arguments;
            return _regeneratorRuntime().wrap(function _callee135$(_context138) {
              while (1) switch (_context138.prev = _context138.next) {
                case 0:
                  t = _args138.length > 1 && _args138[1] !== undefined ? _args138[1] : {};
                  _eh = eh(e), r = _eh.peerId, n = _eh.multiaddr;
                  if (!(null == r && null == n)) {
                    _context138.next = 4;
                    break;
                  }
                  throw Qt(new TypeError("Can only open connections to PeerIds or Multiaddrs"), ku.ERR_INVALID_PARAMETERS);
                case 4:
                  if (!(null != r)) {
                    _context138.next = 9;
                    break;
                  }
                  th("dial to", r);
                  _e97 = this.getConnections(r);
                  if (!(_e97.length > 0)) {
                    _context138.next = 9;
                    break;
                  }
                  return _context138.abrupt("return", (th("had an existing connection to %p", r), _e97[0]));
                case 9:
                  if (null == (t === null || t === void 0 ? void 0 : t.signal)) {
                    i = new Pu.TimeoutController(this.dialTimeout), t.signal = i.signal;
                    try {
                      (_ref76 = (0, xu.setMaxListeners)) === null || _ref76 === void 0 ? void 0 : _ref76(1 / 0, i.signal);
                    } catch (_unused8) {}
                  }
                  _context138.prev = 10;
                  _context138.next = 13;
                  return this.components.dialer.dial(e, t);
                case 13:
                  _r105 = _context138.sent;
                  _n68 = this.connections.get(_r105.remotePeer.toString());
                  null == _n68 && (_n68 = [], this.connections.set(_r105.remotePeer.toString(), _n68));
                  _i43 = !1;
                  _iterator76 = _createForOfIteratorHelper(_n68);
                  try {
                    for (_iterator76.s(); !(_step76 = _iterator76.n()).done;) {
                      _e98 = _step76.value;
                      _e98.id === _r105.id && (_i43 = !0);
                    }
                  } catch (err) {
                    _iterator76.e(err);
                  } finally {
                    _iterator76.f();
                  }
                  return _context138.abrupt("return", (_i43 || _n68.push(_r105), _r105));
                case 20:
                  _context138.prev = 20;
                  null != i && i.clear();
                  return _context138.finish(20);
                case 23:
                case "end":
                  return _context138.stop();
              }
            }, _callee135, this, [[10,, 20, 23]]);
          }));
          function openConnection(_x145) {
            return _openConnection.apply(this, arguments);
          }
          return openConnection;
        }()
      }, {
        key: "closeConnections",
        value: function () {
          var _closeConnections = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee137(e) {
            var _this$connections$get2;
            var t;
            return _regeneratorRuntime().wrap(function _callee137$(_context140) {
              while (1) switch (_context140.prev = _context140.next) {
                case 0:
                  t = (_this$connections$get2 = this.connections.get(e.toString())) !== null && _this$connections$get2 !== void 0 ? _this$connections$get2 : [];
                  _context140.next = 3;
                  return Promise.all(t.map( /*#__PURE__*/function () {
                    var _ref77 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee136(e) {
                      return _regeneratorRuntime().wrap(function _callee136$(_context139) {
                        while (1) switch (_context139.prev = _context139.next) {
                          case 0:
                            _context139.next = 2;
                            return e.close();
                          case 2:
                            return _context139.abrupt("return", _context139.sent);
                          case 3:
                          case "end":
                            return _context139.stop();
                        }
                      }, _callee136);
                    }));
                    return function (_x147) {
                      return _ref77.apply(this, arguments);
                    };
                  }()));
                case 3:
                case "end":
                  return _context140.stop();
              }
            }, _callee137, this);
          }));
          function closeConnections(_x146) {
            return _closeConnections.apply(this, arguments);
          }
          return closeConnections;
        }()
      }, {
        key: "getAll",
        value: function getAll(e) {
          if (!$a(e)) throw Qt(new Error("peerId must be an instance of peer-id"), ku.ERR_INVALID_PARAMETERS);
          var t = e.toString(),
            r = this.connections.get(t);
          return null != r ? r.filter(function (e) {
            return e.stat.status === Gu;
          }) : [];
        }
      }, {
        key: "_onLatencyMeasure",
        value: function _onLatencyMeasure(e) {
          var t = e.detail;
          this._checkMaxLimit("maxEventLoopDelay", t.avgMs, 1).catch(function (e) {
            th.error(e);
          });
        }
      }, {
        key: "_checkMaxLimit",
        value: function () {
          var _checkMaxLimit2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee138(e, t) {
            var r,
              n,
              _args141 = arguments;
            return _regeneratorRuntime().wrap(function _callee138$(_context141) {
              while (1) switch (_context141.prev = _context141.next) {
                case 0:
                  r = _args141.length > 2 && _args141[2] !== undefined ? _args141[2] : 1;
                  n = this.opts[e];
                  if (!(null != n)) {
                    _context141.next = 11;
                    break;
                  }
                  th.trace("checking limit of %s. current value: %d of %d", e, t, n);
                  _context141.t0 = t > n;
                  if (!_context141.t0) {
                    _context141.next = 9;
                    break;
                  }
                  th("%s: limit exceeded: %p, %d/%d, pruning %d connection(s)", this.components.peerId, e, t, n, r);
                  _context141.next = 9;
                  return this._pruneConnections(r);
                case 9:
                  _context141.next = 12;
                  break;
                case 11:
                  th.trace("limit %s was not set so it cannot be applied", e);
                case 12:
                case "end":
                  return _context141.stop();
              }
            }, _callee138, this);
          }));
          function _checkMaxLimit(_x148, _x149) {
            return _checkMaxLimit2.apply(this, arguments);
          }
          return _checkMaxLimit;
        }()
      }, {
        key: "_pruneConnections",
        value: function () {
          var _pruneConnections2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee140(e) {
            var _this124 = this;
            var t, r, _iterator77, _step77, _e99, _t101, _n69, n, i, _iterator78, _step78, _t102;
            return _regeneratorRuntime().wrap(function _callee140$(_context143) {
              while (1) switch (_context143.prev = _context143.next) {
                case 0:
                  t = this.getConnections(), r = new Xu();
                  _iterator77 = _createForOfIteratorHelper(t);
                  _context143.prev = 2;
                  _iterator77.s();
                case 4:
                  if ((_step77 = _iterator77.n()).done) {
                    _context143.next = 15;
                    break;
                  }
                  _e99 = _step77.value;
                  _t101 = _e99.remotePeer;
                  if (!r.has(_t101)) {
                    _context143.next = 9;
                    break;
                  }
                  return _context143.abrupt("continue", 13);
                case 9:
                  _context143.next = 11;
                  return this.components.peerStore.getTags(_t101);
                case 11:
                  _n69 = _context143.sent;
                  r.set(_t101, _n69.reduce(function (e, t) {
                    return e + t.value;
                  }, 0));
                case 13:
                  _context143.next = 4;
                  break;
                case 15:
                  _context143.next = 20;
                  break;
                case 17:
                  _context143.prev = 17;
                  _context143.t0 = _context143["catch"](2);
                  _iterator77.e(_context143.t0);
                case 20:
                  _context143.prev = 20;
                  _iterator77.f();
                  return _context143.finish(20);
                case 23:
                  n = t.sort(function (e, t) {
                    var _r$get, _r$get2;
                    var n = (_r$get = r.get(e.remotePeer)) !== null && _r$get !== void 0 ? _r$get : 0,
                      i = (_r$get2 = r.get(t.remotePeer)) !== null && _r$get2 !== void 0 ? _r$get2 : 0;
                    if (n > i) return 1;
                    if (n < i) return -1;
                    var s = e.stat.timeline.open,
                      o = t.stat.timeline.open;
                    return s < o ? 1 : s > o ? -1 : 0;
                  }), i = [];
                  _iterator78 = _createForOfIteratorHelper(n);
                  _context143.prev = 25;
                  _iterator78.s();
                case 27:
                  if ((_step78 = _iterator78.n()).done) {
                    _context143.next = 33;
                    break;
                  }
                  _t102 = _step78.value;
                  if (!(th("too many connections open - closing a connection to %p", _t102.remotePeer), i.push(_t102), i.length === e)) {
                    _context143.next = 31;
                    break;
                  }
                  return _context143.abrupt("break", 33);
                case 31:
                  _context143.next = 27;
                  break;
                case 33:
                  _context143.next = 38;
                  break;
                case 35:
                  _context143.prev = 35;
                  _context143.t1 = _context143["catch"](25);
                  _iterator78.e(_context143.t1);
                case 38:
                  _context143.prev = 38;
                  _iterator78.f();
                  return _context143.finish(38);
                case 41:
                  _context143.next = 43;
                  return Promise.all(i.map( /*#__PURE__*/function () {
                    var _ref78 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee139(e) {
                      return _regeneratorRuntime().wrap(function _callee139$(_context142) {
                        while (1) switch (_context142.prev = _context142.next) {
                          case 0:
                            _context142.prev = 0;
                            _context142.next = 3;
                            return e.close();
                          case 3:
                            _context142.next = 8;
                            break;
                          case 5:
                            _context142.prev = 5;
                            _context142.t0 = _context142["catch"](0);
                            th.error(_context142.t0);
                          case 8:
                            _this124.onDisconnect(new Qr("connectionEnd", {
                              detail: e
                            }));
                          case 9:
                          case "end":
                            return _context142.stop();
                        }
                      }, _callee139, null, [[0, 5]]);
                    }));
                    return function (_x151) {
                      return _ref78.apply(this, arguments);
                    };
                  }()));
                case 43:
                case "end":
                  return _context143.stop();
              }
            }, _callee140, this, [[2, 17, 20, 23], [25, 35, 38, 41]]);
          }));
          function _pruneConnections(_x150) {
            return _pruneConnections2.apply(this, arguments);
          }
          return _pruneConnections;
        }()
      }, {
        key: "acceptIncomingConnection",
        value: function () {
          var _acceptIncomingConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee141(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee141$(_context144) {
              while (1) switch (_context144.prev = _context144.next) {
                case 0:
                  if (!this.deny.some(function (t) {
                    return e.remoteAddr.toString().startsWith(t.toString());
                  })) {
                    _context144.next = 2;
                    break;
                  }
                  return _context144.abrupt("return", (th("connection from %s refused - connection remote address was in deny list", e.remoteAddr), !1));
                case 2:
                  if (!this.allow.some(function (t) {
                    return e.remoteAddr.toString().startsWith(t.toString());
                  })) {
                    _context144.next = 4;
                    break;
                  }
                  return _context144.abrupt("return", (this.incomingPendingConnections++, !0));
                case 4:
                  if (!(this.incomingPendingConnections === this.opts.maxIncomingPendingConnections)) {
                    _context144.next = 6;
                    break;
                  }
                  return _context144.abrupt("return", (th("connection from %s refused - incomingPendingConnections exceeded by peer %s", e.remoteAddr), !1));
                case 6:
                  if (!e.remoteAddr.isThinWaistAddress()) {
                    _context144.next = 16;
                    break;
                  }
                  t = e.remoteAddr.nodeAddress().address;
                  _context144.prev = 8;
                  _context144.next = 11;
                  return this.inboundConnectionRateLimiter.consume(t, 1);
                case 11:
                  _context144.next = 16;
                  break;
                case 13:
                  _context144.prev = 13;
                  _context144.t0 = _context144["catch"](8);
                  return _context144.abrupt("return", (th("connection from %s refused - inboundConnectionThreshold exceeded by host %s", t, e.remoteAddr), !1));
                case 16:
                  return _context144.abrupt("return", this.getConnections().length < this.opts.maxConnections ? (this.incomingPendingConnections++, !0) : (th("connection from %s refused - maxConnections exceeded", e.remoteAddr), !1));
                case 17:
                case "end":
                  return _context144.stop();
              }
            }, _callee141, this, [[8, 13]]);
          }));
          function acceptIncomingConnection(_x152) {
            return _acceptIncomingConnection.apply(this, arguments);
          }
          return acceptIncomingConnection;
        }()
      }, {
        key: "afterUpgradeInbound",
        value: function afterUpgradeInbound() {
          this.incomingPendingConnections--;
        }
      }]);
      return nh;
    }(Wr);
    var ih = __webpack_require__(2916);
    function sh(_x14, _x15) {
      return _sh.apply(this, arguments);
    }
    function _sh() {
      _sh = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee142(e, t) {
        var r;
        return _regeneratorRuntime().wrap(function _callee142$(_context145) {
          while (1) switch (_context145.prev = _context145.next) {
            case 0:
              _context145.next = 2;
              return _awaitAsyncGenerator(gu(e));
            case 2:
              r = _context145.sent;
              return _context145.delegateYield(_asyncGeneratorDelegate(_asyncIterator(r.sort(t)), _awaitAsyncGenerator), "t0", 4);
            case 4:
            case "end":
              return _context145.stop();
          }
        }, _callee142);
      }));
      return _sh.apply(this, arguments);
    }
    var oh = ne("libp2p:connection-manager:auto-dialler"),
      ah = {
        enabled: !0,
        minConnections: 0,
        autoDialInterval: 1e4
      };
    var ch = /*#__PURE__*/function () {
      function ch(e, t) {
        _classCallCheck(this, ch);
        this.components = e, this.options = qu.call({
          ignoreUndefined: !0
        }, ah, t), this.running = !1, this._autoDial = this._autoDial.bind(this), oh("options: %j", this.options);
      }
      _createClass(ch, [{
        key: "isStarted",
        value: function isStarted() {
          return this.running;
        }
      }, {
        key: "start",
        value: function () {
          var _start4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee143() {
            return _regeneratorRuntime().wrap(function _callee143$(_context146) {
              while (1) switch (_context146.prev = _context146.next) {
                case 0:
                  this.options.enabled ? (this.running = !0, this._autoDial().catch(function (e) {
                    oh.error("could start autodial", e);
                  }), oh("started")) : oh("not enabled");
                case 1:
                case "end":
                  return _context146.stop();
              }
            }, _callee143, this);
          }));
          function start() {
            return _start4.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee144() {
            return _regeneratorRuntime().wrap(function _callee144$(_context147) {
              while (1) switch (_context147.prev = _context147.next) {
                case 0:
                  this.options.enabled ? (this.running = !1, null != this.autoDialTimeout && this.autoDialTimeout.clear(), oh("stopped")) : oh("not enabled");
                case 1:
                case "end":
                  return _context147.stop();
              }
            }, _callee144, this);
          }));
          function stop() {
            return _stop4.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "_autoDial",
        value: function () {
          var _autoDial2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee146() {
            var _this125 = this;
            var e, t, r, _t103, _e100;
            return _regeneratorRuntime().wrap(function _callee146$(_context149) {
              while (1) switch (_context149.prev = _context149.next) {
                case 0:
                  null != this.autoDialTimeout && this.autoDialTimeout.clear();
                  e = this.options.minConnections;
                  if (!(this.components.connectionManager.getConnections().length >= e)) {
                    _context149.next = 4;
                    break;
                  }
                  return _context149.abrupt("return", void (this.autoDialTimeout = ih(this._autoDial, this.options.autoDialInterval)));
                case 4:
                  _context149.next = 6;
                  return this.components.peerStore.all();
                case 6:
                  t = _context149.sent;
                  _context149.next = 9;
                  return Ci(t.sort(function () {
                    return Math.random() > .5 ? 1 : -1;
                  }), function (e) {
                    return Eu(e, function (e) {
                      return !e.id.equals(_this125.components.peerId);
                    });
                  }, function (e) {
                    return sh(e, function (e, t) {
                      return t.protocols.length > e.protocols.length || null != t.id.publicKey && null == e.id.publicKey ? 1 : -1;
                    });
                  }, /*#__PURE__*/function () {
                    var _ref79 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee145(e) {
                      return _regeneratorRuntime().wrap(function _callee145$(_context148) {
                        while (1) switch (_context148.prev = _context148.next) {
                          case 0:
                            _context148.next = 2;
                            return gu(e);
                          case 2:
                            return _context148.abrupt("return", _context148.sent);
                          case 3:
                          case "end":
                            return _context148.stop();
                        }
                      }, _callee145);
                    }));
                    return function (_x153) {
                      return _ref79.apply(this, arguments);
                    };
                  }());
                case 9:
                  r = _context149.sent;
                  _t103 = 0;
                case 11:
                  if (!(this.running && _t103 < r.length && this.components.connectionManager.getConnections().length < e)) {
                    _context149.next = 28;
                    break;
                  }
                  if (this.running) {
                    _context149.next = 14;
                    break;
                  }
                  return _context149.abrupt("return");
                case 14:
                  _e100 = r[_t103];
                  if (!(0 === this.components.connectionManager.getConnections(_e100.id).length)) {
                    _context149.next = 25;
                    break;
                  }
                  oh("connecting to a peerStore stored peer %p", _e100.id);
                  _context149.prev = 17;
                  _context149.next = 20;
                  return this.components.connectionManager.openConnection(_e100.id);
                case 20:
                  _context149.next = 25;
                  break;
                case 22:
                  _context149.prev = 22;
                  _context149.t0 = _context149["catch"](17);
                  oh.error("could not connect to peerStore stored peer", _context149.t0);
                case 25:
                  _t103++;
                  _context149.next = 11;
                  break;
                case 28:
                  this.running && (this.autoDialTimeout = ih(this._autoDial, this.options.autoDialInterval));
                case 29:
                case "end":
                  return _context149.stop();
              }
            }, _callee146, this, [[17, 22]]);
          }));
          function _autoDial() {
            return _autoDial2.apply(this, arguments);
          }
          return _autoDial;
        }()
      }]);
      return ch;
    }();
    var lh;
    !function (e) {
      var t, r, n, i, s, o;
      !function (e) {
        e.SUCCESS = "SUCCESS", e.HOP_SRC_ADDR_TOO_LONG = "HOP_SRC_ADDR_TOO_LONG", e.HOP_DST_ADDR_TOO_LONG = "HOP_DST_ADDR_TOO_LONG", e.HOP_SRC_MULTIADDR_INVALID = "HOP_SRC_MULTIADDR_INVALID", e.HOP_DST_MULTIADDR_INVALID = "HOP_DST_MULTIADDR_INVALID", e.HOP_NO_CONN_TO_DST = "HOP_NO_CONN_TO_DST", e.HOP_CANT_DIAL_DST = "HOP_CANT_DIAL_DST", e.HOP_CANT_OPEN_DST_STREAM = "HOP_CANT_OPEN_DST_STREAM", e.HOP_CANT_SPEAK_RELAY = "HOP_CANT_SPEAK_RELAY", e.HOP_CANT_RELAY_TO_SELF = "HOP_CANT_RELAY_TO_SELF", e.STOP_SRC_ADDR_TOO_LONG = "STOP_SRC_ADDR_TOO_LONG", e.STOP_DST_ADDR_TOO_LONG = "STOP_DST_ADDR_TOO_LONG", e.STOP_SRC_MULTIADDR_INVALID = "STOP_SRC_MULTIADDR_INVALID", e.STOP_DST_MULTIADDR_INVALID = "STOP_DST_MULTIADDR_INVALID", e.STOP_RELAY_REFUSED = "STOP_RELAY_REFUSED", e.MALFORMED_MESSAGE = "MALFORMED_MESSAGE";
      }(t = e.Status || (e.Status = {})), function (e) {
        e[e.SUCCESS = 100] = "SUCCESS", e[e.HOP_SRC_ADDR_TOO_LONG = 220] = "HOP_SRC_ADDR_TOO_LONG", e[e.HOP_DST_ADDR_TOO_LONG = 221] = "HOP_DST_ADDR_TOO_LONG", e[e.HOP_SRC_MULTIADDR_INVALID = 250] = "HOP_SRC_MULTIADDR_INVALID", e[e.HOP_DST_MULTIADDR_INVALID = 251] = "HOP_DST_MULTIADDR_INVALID", e[e.HOP_NO_CONN_TO_DST = 260] = "HOP_NO_CONN_TO_DST", e[e.HOP_CANT_DIAL_DST = 261] = "HOP_CANT_DIAL_DST", e[e.HOP_CANT_OPEN_DST_STREAM = 262] = "HOP_CANT_OPEN_DST_STREAM", e[e.HOP_CANT_SPEAK_RELAY = 270] = "HOP_CANT_SPEAK_RELAY", e[e.HOP_CANT_RELAY_TO_SELF = 280] = "HOP_CANT_RELAY_TO_SELF", e[e.STOP_SRC_ADDR_TOO_LONG = 320] = "STOP_SRC_ADDR_TOO_LONG", e[e.STOP_DST_ADDR_TOO_LONG = 321] = "STOP_DST_ADDR_TOO_LONG", e[e.STOP_SRC_MULTIADDR_INVALID = 350] = "STOP_SRC_MULTIADDR_INVALID", e[e.STOP_DST_MULTIADDR_INVALID = 351] = "STOP_DST_MULTIADDR_INVALID", e[e.STOP_RELAY_REFUSED = 390] = "STOP_RELAY_REFUSED", e[e.MALFORMED_MESSAGE = 400] = "MALFORMED_MESSAGE";
      }(r || (r = {})), function (e) {
        e.codec = function () {
          return Zi(r);
        };
      }(t = e.Status || (e.Status = {})), function (e) {
        e.HOP = "HOP", e.STOP = "STOP", e.STATUS = "STATUS", e.CAN_HOP = "CAN_HOP";
      }(n = e.Type || (e.Type = {})), function (e) {
        e[e.HOP = 1] = "HOP", e[e.STOP = 2] = "STOP", e[e.STATUS = 3] = "STATUS", e[e.CAN_HOP = 4] = "CAN_HOP";
      }(i || (i = {})), function (e) {
        e.codec = function () {
          return Zi(i);
        };
      }(n = e.Type || (e.Type = {})), function (e) {
        var t;
        e.codec = function () {
          return null == t && (t = Ji(function (e, t) {
            var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
            if (!1 !== r.lengthDelimited && t.fork(), (!0 === r.writeDefaults || null != e.id && e.id.byteLength > 0) && (t.uint32(10), t.bytes(e.id)), null != e.addrs) {
              var _iterator79 = _createForOfIteratorHelper(e.addrs),
                _step79;
              try {
                for (_iterator79.s(); !(_step79 = _iterator79.n()).done;) {
                  var _r106 = _step79.value;
                  t.uint32(18), t.bytes(_r106);
                }
              } catch (err) {
                _iterator79.e(err);
              } finally {
                _iterator79.f();
              }
            }
            !1 !== r.lengthDelimited && t.ldelim();
          }, function (e, t) {
            var r = {
                id: new Uint8Array(0),
                addrs: []
              },
              n = null == t ? e.len : e.pos + t;
            for (; e.pos < n;) {
              var _t104 = e.uint32();
              switch (_t104 >>> 3) {
                case 1:
                  r.id = e.bytes();
                  break;
                case 2:
                  r.addrs.push(e.bytes());
                  break;
                default:
                  e.skipType(7 & _t104);
              }
            }
            return r;
          })), t;
        }, e.encode = function (t) {
          return Hi(t, e.codec());
        }, e.decode = function (t) {
          return ji(t, e.codec());
        };
      }(s = e.Peer || (e.Peer = {})), e.codec = function () {
        return null == o && (o = Ji(function (t, r) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          !1 !== n.lengthDelimited && r.fork(), null != t.type && (r.uint32(8), e.Type.codec().encode(t.type, r)), null != t.srcPeer && (r.uint32(18), e.Peer.codec().encode(t.srcPeer, r, {
            writeDefaults: !1
          })), null != t.dstPeer && (r.uint32(26), e.Peer.codec().encode(t.dstPeer, r, {
            writeDefaults: !1
          })), null != t.code && (r.uint32(32), e.Status.codec().encode(t.code, r)), !1 !== n.lengthDelimited && r.ldelim();
        }, function (t, r) {
          var n = {},
            i = null == r ? t.len : t.pos + r;
          for (; t.pos < i;) {
            var _r107 = t.uint32();
            switch (_r107 >>> 3) {
              case 1:
                n.type = e.Type.codec().decode(t);
                break;
              case 2:
                n.srcPeer = e.Peer.codec().decode(t, t.uint32());
                break;
              case 3:
                n.dstPeer = e.Peer.codec().decode(t, t.uint32());
                break;
              case 4:
                n.code = e.Status.codec().decode(t);
                break;
              default:
                t.skipType(7 & _r107);
            }
          }
          return n;
        })), o;
      }, e.encode = function (t) {
        return Hi(t, e.codec());
      }, e.decode = function (t) {
        return ji(t, e.codec());
      };
    }(lh || (lh = {}));
    var uh = ne("libp2p:stream:converter");
    function hh(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var r = e.stream,
        n = e.remoteAddr,
        i = r.sink,
        s = r.source,
        o = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee147() {
          var _iteratorAbruptCompletion22, _didIteratorError22, _iteratorError22, _iterator22, _step22, _e101;
          return _regeneratorRuntime().wrap(function _callee147$(_context150) {
            while (1) switch (_context150.prev = _context150.next) {
              case 0:
                _iteratorAbruptCompletion22 = false;
                _didIteratorError22 = false;
                _context150.prev = 2;
                _iterator22 = _asyncIterator(s);
              case 4:
                _context150.next = 6;
                return _awaitAsyncGenerator(_iterator22.next());
              case 6:
                if (!(_iteratorAbruptCompletion22 = !(_step22 = _context150.sent).done)) {
                  _context150.next = 12;
                  break;
                }
                _e101 = _step22.value;
                return _context150.delegateYield(_asyncGeneratorDelegate(_asyncIterator(_e101), _awaitAsyncGenerator), "t0", 9);
              case 9:
                _iteratorAbruptCompletion22 = false;
                _context150.next = 4;
                break;
              case 12:
                _context150.next = 18;
                break;
              case 14:
                _context150.prev = 14;
                _context150.t1 = _context150["catch"](2);
                _didIteratorError22 = true;
                _iteratorError22 = _context150.t1;
              case 18:
                _context150.prev = 18;
                _context150.prev = 19;
                if (!(_iteratorAbruptCompletion22 && _iterator22.return != null)) {
                  _context150.next = 23;
                  break;
                }
                _context150.next = 23;
                return _awaitAsyncGenerator(_iterator22.return());
              case 23:
                _context150.prev = 23;
                if (!_didIteratorError22) {
                  _context150.next = 26;
                  break;
                }
                throw _iteratorError22;
              case 26:
                return _context150.finish(23);
              case 27:
                return _context150.finish(18);
              case 28:
              case "end":
                return _context150.stop();
            }
          }, _callee147, null, [[2, 14, 18, 28], [19,, 23, 27]]);
        }))(),
        a = {
          sink: function sink(e) {
            return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee148() {
              return _regeneratorRuntime().wrap(function _callee148$(_context151) {
                while (1) switch (_context151.prev = _context151.next) {
                  case 0:
                    null != t.signal && (e = qr(e, t.signal));
                    _context151.prev = 1;
                    _context151.next = 4;
                    return i(e);
                  case 4:
                    _context151.next = 6;
                    return c();
                  case 6:
                    _context151.next = 11;
                    break;
                  case 8:
                    _context151.prev = 8;
                    _context151.t0 = _context151["catch"](1);
                    "aborted" !== _context151.t0.type && uh(_context151.t0);
                  case 11:
                  case "end":
                    return _context151.stop();
                }
              }, _callee148, null, [[1, 8]]);
            }))();
          },
          source: null != t.signal ? qr(o, t.signal) : o,
          remoteAddr: n,
          timeline: {
            open: Date.now(),
            close: void 0
          },
          close: function close() {
            return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee150() {
              return _regeneratorRuntime().wrap(function _callee150$(_context153) {
                while (1) switch (_context153.prev = _context153.next) {
                  case 0:
                    _context153.next = 2;
                    return i(_wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee149() {
                      return _regeneratorRuntime().wrap(function _callee149$(_context152) {
                        while (1) switch (_context152.prev = _context152.next) {
                          case 0:
                            _context152.next = 2;
                            return new Uint8Array(0);
                          case 2:
                          case "end":
                            return _context152.stop();
                        }
                      }, _callee149);
                    }))());
                  case 2:
                    _context153.next = 4;
                    return c();
                  case 4:
                  case "end":
                    return _context153.stop();
                }
              }, _callee150);
            }))();
          }
        };
      function c() {
        return _c9.apply(this, arguments);
      }
      function _c9() {
        _c9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee151() {
          return _regeneratorRuntime().wrap(function _callee151$(_context154) {
            while (1) switch (_context154.prev = _context154.next) {
              case 0:
                null == a.timeline.close && (a.timeline.close = Date.now());
                _context154.next = 3;
                return Promise.resolve();
              case 3:
                return _context154.abrupt("return", _context154.sent);
              case 4:
              case "end":
                return _context154.stop();
            }
          }, _callee151);
        }));
        return _c9.apply(this, arguments);
      }
      return a;
    }
    var dh = "/libp2p/circuit/relay/0.1.0";
    function ph(e, t) {
      e.write({
        type: lh.Type.STATUS,
        code: t
      });
    }
    function fh(e, t) {
      try {
        var _e$dstPeer;
        null != ((_e$dstPeer = e.dstPeer) === null || _e$dstPeer === void 0 ? void 0 : _e$dstPeer.addrs) && e.dstPeer.addrs.forEach(function (e) {
          return hr(e);
        });
      } catch (r) {
        throw ph(t, e.type === lh.Type.HOP ? lh.Status.HOP_DST_MULTIADDR_INVALID : lh.Status.STOP_DST_MULTIADDR_INVALID), r;
      }
      try {
        var _e$srcPeer;
        null != ((_e$srcPeer = e.srcPeer) === null || _e$srcPeer === void 0 ? void 0 : _e$srcPeer.addrs) && e.srcPeer.addrs.forEach(function (e) {
          return hr(e);
        });
      } catch (r) {
        throw ph(t, e.type === lh.Type.HOP ? lh.Status.HOP_SRC_MULTIADDR_INVALID : lh.Status.STOP_SRC_MULTIADDR_INVALID), r;
      }
    }
    var yh = ne("libp2p:circuit:stream-handler");
    var gh = /*#__PURE__*/function () {
      function gh(e) {
        _classCallCheck(this, gh);
        var t = e.stream,
          _e$maxLength = e.maxLength,
          r = _e$maxLength === void 0 ? 4096 : _e$maxLength;
        this.stream = t, this.shake = Qn(this.stream), this.decoder = gi.fromReader(this.shake.reader, {
          maxDataLength: r
        });
      }
      _createClass(gh, [{
        key: "read",
        value: function () {
          var _read4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee152() {
            var e, t;
            return _regeneratorRuntime().wrap(function _callee152$(_context155) {
              while (1) switch (_context155.prev = _context155.next) {
                case 0:
                  _context155.next = 2;
                  return this.decoder.next();
                case 2:
                  e = _context155.sent;
                  if (!(null != e.value)) {
                    _context155.next = 6;
                    break;
                  }
                  t = lh.decode(e.value);
                  return _context155.abrupt("return", (yh("read message type", t.type), t));
                case 6:
                  yh("read received no value, closing stream"), this.close();
                case 7:
                case "end":
                  return _context155.stop();
              }
            }, _callee152, this);
          }));
          function read() {
            return _read4.apply(this, arguments);
          }
          return read;
        }()
      }, {
        key: "write",
        value: function write(e) {
          yh("write message type %s", e.type), this.shake.write(hi.single(lh.encode(e)));
        }
      }, {
        key: "rest",
        value: function rest() {
          return this.shake.rest(), this.shake.stream;
        }
      }, {
        key: "end",
        value: function end(e) {
          this.write(e), this.close();
        }
      }, {
        key: "close",
        value: function close() {
          yh("closing the stream"), this.rest().sink([]).catch(function (e) {
            yh.error(e);
          });
        }
      }]);
      return gh;
    }();
    var mh = ne("libp2p:circuit:stop"),
      wh = ne("libp2p:circuit:hop");
    var Eh = ne("libp2p:circuit");
    var bh = /*#__PURE__*/function (_Symbol$toStringTag8) {
      function bh(e, t) {
        _classCallCheck(this, bh);
        this._init = t, this.components = e, this._started = !1;
      }
      _createClass(bh, [{
        key: "isStarted",
        value: function isStarted() {
          return this._started;
        }
      }, {
        key: "start",
        value: function () {
          var _start5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee153() {
            var _this126 = this;
            return _regeneratorRuntime().wrap(function _callee153$(_context156) {
              while (1) switch (_context156.prev = _context156.next) {
                case 0:
                  _context156.t0 = this._started;
                  if (_context156.t0) {
                    _context156.next = 5;
                    break;
                  }
                  this._started = !0;
                  _context156.next = 5;
                  return this.components.registrar.handle(dh, function (e) {
                    _this126._onProtocol(e).catch(function (e) {
                      Eh.error(e);
                    });
                  }, _objectSpread({}, this._init)).catch(function (e) {
                    Eh.error(e);
                  });
                case 5:
                case "end":
                  return _context156.stop();
              }
            }, _callee153, this);
          }));
          function start() {
            return _start5.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee154() {
            return _regeneratorRuntime().wrap(function _callee154$(_context157) {
              while (1) switch (_context157.prev = _context157.next) {
                case 0:
                  _context157.next = 2;
                  return this.components.registrar.unhandle(dh);
                case 2:
                case "end":
                  return _context157.stop();
              }
            }, _callee154, this);
          }));
          function stop() {
            return _stop5.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "hopEnabled",
        value: function hopEnabled() {
          return !0;
        }
      }, {
        key: "hopActive",
        value: function hopActive() {
          return !0;
        }
      }, {
        key: wn,
        get: function get() {
          return !0;
        }
      }, {
        key: _Symbol$toStringTag8,
        get: function get() {
          return "libp2p/circuit-relay-v1";
        }
      }, {
        key: "_onProtocol",
        value: function () {
          var _onProtocol2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee157(e) {
            var t, r, n, _ref80, _e102, i, _s26, _o16, _s26$dstPeer, _s26$srcPeer, _e104, _r108, _n70;
            return _regeneratorRuntime().wrap(function _callee157$(_context160) {
              while (1) switch (_context160.prev = _context160.next) {
                case 0:
                  t = e.connection, r = e.stream, n = new Pu.TimeoutController(this._init.hop.timeout);
                  try {
                    (_ref80 = (0, xu.setMaxListeners)) === null || _ref80 === void 0 ? void 0 : _ref80(1 / 0, n.signal);
                  } catch (_unused10) {}
                  _context160.prev = 2;
                  _e102 = Hr(r, n.signal);
                  i = new gh({
                    stream: _objectSpread(_objectSpread({}, r), _e102)
                  });
                  _context160.next = 7;
                  return i.read();
                case 7:
                  _s26 = _context160.sent;
                  if (!(null == _s26)) {
                    _context160.next = 10;
                    break;
                  }
                  return _context160.abrupt("return", (Eh("request was invalid, could not read from stream"), i.write({
                    type: lh.Type.STATUS,
                    code: lh.Status.MALFORMED_MESSAGE
                  }), void i.close()));
                case 10:
                  _context160.t0 = _s26.type;
                  _context160.next = _context160.t0 === lh.Type.CAN_HOP ? 13 : _context160.t0 === lh.Type.HOP ? 17 : _context160.t0 === lh.Type.STOP ? 21 : 26;
                  break;
                case 13:
                  Eh("received CAN_HOP request from %p", t.remotePeer);
                  _context160.next = 16;
                  return function (e) {
                    var t = e.connection,
                      r = e.streamHandler,
                      n = e.circuit,
                      i = n.hopEnabled();
                    wh("can hop (%s) request from %p", i, t.remotePeer), r.end({
                      type: lh.Type.STATUS,
                      code: i ? lh.Status.SUCCESS : lh.Status.HOP_CANT_SPEAK_RELAY
                    });
                  }({
                    circuit: this,
                    connection: t,
                    streamHandler: i
                  });
                case 16:
                  return _context160.abrupt("break", 27);
                case 17:
                  Eh("received HOP request from %p", t.remotePeer);
                  _context160.next = 20;
                  return function () {
                    var _ref81 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee156(e) {
                      var t, r, n, i, s, o, a, c, l, _e103, u;
                      return _regeneratorRuntime().wrap(function _callee156$(_context159) {
                        while (1) switch (_context159.prev = _context159.next) {
                          case 0:
                            t = e.connection, r = e.request, n = e.streamHandler, i = e.circuit, s = e.connectionManager;
                            if (i.hopEnabled()) {
                              _context159.next = 3;
                              break;
                            }
                            return _context159.abrupt("return", (wh("HOP request received but we are not acting as a relay"), n.end({
                              type: lh.Type.STATUS,
                              code: lh.Status.HOP_CANT_SPEAK_RELAY
                            })));
                          case 3:
                            _context159.prev = 3;
                            fh(r, n);
                            _context159.next = 10;
                            break;
                          case 7:
                            _context159.prev = 7;
                            _context159.t0 = _context159["catch"](3);
                            return _context159.abrupt("return", void wh.error("invalid hop request via peer %p %o", t.remotePeer, _context159.t0));
                          case 10:
                            if (!(null == r.dstPeer)) {
                              _context159.next = 12;
                              break;
                            }
                            return _context159.abrupt("return", void wh("HOP request received but we do not receive a dstPeer"));
                          case 12:
                            o = ic(r.dstPeer.id), a = s.getConnections(o);
                            if (!(0 === a.length && !i.hopActive())) {
                              _context159.next = 15;
                              break;
                            }
                            return _context159.abrupt("return", (wh("HOP request received but we are not connected to the destination peer"), n.end({
                              type: lh.Type.STATUS,
                              code: lh.Status.HOP_NO_CONN_TO_DST
                            })));
                          case 15:
                            if (!(0 === a.length)) {
                              _context159.next = 17;
                              break;
                            }
                            return _context159.abrupt("return", (wh("did not have connection to remote peer"), n.end({
                              type: lh.Type.STATUS,
                              code: lh.Status.HOP_NO_CONN_TO_DST
                            })));
                          case 17:
                            c = {
                              type: lh.Type.STOP,
                              dstPeer: r.dstPeer,
                              srcPeer: r.srcPeer
                            };
                            _context159.prev = 18;
                            wh("performing STOP request");
                            _context159.next = 22;
                            return function () {
                              var _ref82 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee155(e) {
                                var t, r, n, i, s, o;
                                return _regeneratorRuntime().wrap(function _callee155$(_context158) {
                                  while (1) switch (_context158.prev = _context158.next) {
                                    case 0:
                                      t = e.connection;
                                      r = e.request;
                                      n = e.signal;
                                      _context158.next = 5;
                                      return t.newStream(dh, {
                                        signal: n
                                      });
                                    case 5:
                                      i = _context158.sent;
                                      mh("starting stop request to %p", t.remotePeer);
                                      s = new gh({
                                        stream: i
                                      });
                                      s.write(r);
                                      _context158.next = 11;
                                      return s.read();
                                    case 11:
                                      o = _context158.sent;
                                      if (!(null != o)) {
                                        _context158.next = 18;
                                        break;
                                      }
                                      if (!(o.code === lh.Status.SUCCESS)) {
                                        _context158.next = 15;
                                        break;
                                      }
                                      return _context158.abrupt("return", (mh("stop request to %p was successful", t.remotePeer), s.rest()));
                                    case 15:
                                      mh("stop request failed with code %d", o.code), s.close();
                                      _context158.next = 19;
                                      break;
                                    case 18:
                                      s.close();
                                    case 19:
                                    case "end":
                                      return _context158.stop();
                                  }
                                }, _callee155);
                              }));
                              return function (_x156) {
                                return _ref82.apply(this, arguments);
                              };
                            }()({
                              connection: a[0],
                              request: c
                            });
                          case 22:
                            _e103 = _context159.sent;
                            if (!(null == _e103)) {
                              _context159.next = 25;
                              break;
                            }
                            throw new Error("Could not stop");
                          case 25:
                            l = _e103;
                            _context159.next = 31;
                            break;
                          case 28:
                            _context159.prev = 28;
                            _context159.t1 = _context159["catch"](18);
                            return _context159.abrupt("return", void wh.error(_context159.t1));
                          case 31:
                            wh("hop request from %p is valid", t.remotePeer), n.write({
                              type: lh.Type.STATUS,
                              code: lh.Status.SUCCESS
                            });
                            u = n.rest();
                            wh("creating related connections");
                            _context159.next = 36;
                            return Ci(u, l, u);
                          case 36:
                            return _context159.abrupt("return", _context159.sent);
                          case 37:
                          case "end":
                            return _context159.stop();
                        }
                      }, _callee156, null, [[3, 7], [18, 28]]);
                    }));
                    return function (_x155) {
                      return _ref81.apply(this, arguments);
                    };
                  }()({
                    connection: t,
                    request: _s26,
                    streamHandler: i,
                    circuit: this,
                    connectionManager: this.components.connectionManager
                  });
                case 20:
                  return _context160.abrupt("break", 27);
                case 21:
                  Eh("received STOP request from %p", t.remotePeer);
                  _context160.next = 24;
                  return function (e) {
                    var t = e.connection,
                      r = e.request,
                      n = e.streamHandler;
                    try {
                      fh(r, n);
                    } catch (e) {
                      return void mh.error("invalid stop request via peer %p %o", t.remotePeer, e);
                    }
                    return mh("stop request is valid"), n.write({
                      type: lh.Type.STATUS,
                      code: lh.Status.SUCCESS
                    }), n.rest();
                  }({
                    connection: t,
                    request: _s26,
                    streamHandler: i
                  });
                case 24:
                  _o16 = _context160.sent;
                  return _context160.abrupt("break", 27);
                case 26:
                  return _context160.abrupt("return", (Eh("Request of type %s not supported", _s26.type), i.write({
                    type: lh.Type.STATUS,
                    code: lh.Status.MALFORMED_MESSAGE
                  }), void i.close()));
                case 27:
                  if (!(null != _o16)) {
                    _context160.next = 34;
                    break;
                  }
                  _e104 = hh({
                    stream: _o16,
                    remoteAddr: t.remoteAddr.encapsulate("/p2p-circuit").encapsulate(hr((_s26$dstPeer = _s26.dstPeer) === null || _s26$dstPeer === void 0 ? void 0 : _s26$dstPeer.addrs[0])),
                    localAddr: hr((_s26$srcPeer = _s26.srcPeer) === null || _s26$srcPeer === void 0 ? void 0 : _s26$srcPeer.addrs[0])
                  }), _r108 = _s26.type === lh.Type.HOP ? "relay" : "inbound";
                  Eh("new %s connection %s", _r108, _e104.remoteAddr);
                  _context160.next = 32;
                  return this.components.upgrader.upgradeInbound(_e104);
                case 32:
                  _n70 = _context160.sent;
                  Eh("%s connection %s upgraded", _r108, _e104.remoteAddr), null != this.handler && this.handler(_n70);
                case 34:
                  _context160.prev = 34;
                  n.clear();
                  return _context160.finish(34);
                case 37:
                case "end":
                  return _context160.stop();
              }
            }, _callee157, this, [[2,, 34, 37]]);
          }));
          function _onProtocol(_x154) {
            return _onProtocol2.apply(this, arguments);
          }
          return _onProtocol;
        }()
      }, {
        key: "dial",
        value: function () {
          var _dial2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee159(e) {
            var t,
              r,
              n,
              i,
              s,
              o,
              _e105,
              a,
              c,
              l,
              u,
              _r109,
              _s27,
              _args162 = arguments;
            return _regeneratorRuntime().wrap(function _callee159$(_context162) {
              while (1) switch (_context162.prev = _context162.next) {
                case 0:
                  t = _args162.length > 1 && _args162[1] !== undefined ? _args162[1] : {};
                  r = e.toString().split("/p2p-circuit"), n = hr(r[0]), i = hr(r[r.length - 1]), s = n.getPeerId(), o = i.getPeerId();
                  if (!(null == s || null == o)) {
                    _context162.next = 5;
                    break;
                  }
                  _e105 = "Circuit relay dial failed as addresses did not have peer id";
                  throw Eh.error(_e105), Qt(new Error(_e105), ku.ERR_RELAYED_DIAL);
                case 5:
                  a = nc(s), c = nc(o);
                  l = !1, u = this.components.connectionManager.getConnections(a)[0];
                  _context162.t0 = null == u;
                  if (!_context162.t0) {
                    _context162.next = 15;
                    break;
                  }
                  _context162.next = 11;
                  return this.components.peerStore.addressBook.add(a, [n]);
                case 11:
                  _context162.next = 13;
                  return this.components.connectionManager.openConnection(a, t);
                case 13:
                  u = _context162.sent;
                  l = !0;
                case 15:
                  _context162.prev = 15;
                  _context162.next = 18;
                  return function () {
                    var _ref83 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee158(e) {
                      var _o$code;
                      var t, r, n, i, s, o;
                      return _regeneratorRuntime().wrap(function _callee158$(_context161) {
                        while (1) switch (_context161.prev = _context161.next) {
                          case 0:
                            t = e.connection;
                            r = e.request;
                            n = e.signal;
                            _context161.next = 5;
                            return t.newStream(dh, {
                              signal: n
                            });
                          case 5:
                            i = _context161.sent;
                            s = new gh({
                              stream: i
                            });
                            s.write(r);
                            _context161.next = 10;
                            return s.read();
                          case 10:
                            o = _context161.sent;
                            if (!(null == o)) {
                              _context161.next = 13;
                              break;
                            }
                            throw Qt(new Error("HOP request had no response"), ku.ERR_HOP_REQUEST_FAILED);
                          case 13:
                            if (!(o.code === lh.Status.SUCCESS)) {
                              _context161.next = 15;
                              break;
                            }
                            return _context161.abrupt("return", (wh("hop request was successful"), s.rest()));
                          case 15:
                            throw wh("hop request failed with code %d, closing stream", o.code), s.close(), Qt(new Error("HOP request failed with code \"".concat((_o$code = o.code) !== null && _o$code !== void 0 ? _o$code : "unknown", "\"")), ku.ERR_HOP_REQUEST_FAILED);
                          case 16:
                          case "end":
                            return _context161.stop();
                        }
                      }, _callee158);
                    }));
                    return function (_x158) {
                      return _ref83.apply(this, arguments);
                    };
                  }()(_objectSpread(_objectSpread({}, t), {}, {
                    connection: u,
                    request: {
                      type: lh.Type.HOP,
                      srcPeer: {
                        id: this.components.peerId.toBytes(),
                        addrs: this.components.addressManager.getAddresses().map(function (e) {
                          return e.bytes;
                        })
                      },
                      dstPeer: {
                        id: c.toBytes(),
                        addrs: [hr(i).bytes]
                      }
                    }
                  }));
                case 18:
                  _r109 = _context162.sent;
                  _s27 = hh({
                    stream: _r109,
                    remoteAddr: e,
                    localAddr: n.encapsulate("/p2p-circuit/p2p/".concat(this.components.peerId.toString()))
                  });
                  Eh("new outbound connection %s", _s27.remoteAddr);
                  _context162.next = 23;
                  return this.components.upgrader.upgradeOutbound(_s27);
                case 23:
                  return _context162.abrupt("return", _context162.sent);
                case 26:
                  _context162.prev = 26;
                  _context162.t1 = _context162["catch"](15);
                  Eh.error("Circuit relay dial failed", _context162.t1);
                  _context162.t2 = l;
                  if (!_context162.t2) {
                    _context162.next = 33;
                    break;
                  }
                  _context162.next = 33;
                  return u.close();
                case 33:
                  throw _context162.t1;
                case 34:
                case "end":
                  return _context162.stop();
              }
            }, _callee159, this, [[15, 26]]);
          }));
          function dial(_x157) {
            return _dial2.apply(this, arguments);
          }
          return dial;
        }()
      }, {
        key: "createListener",
        value: function createListener(e) {
          return this.handler = e.handler, function (e) {
            var t = new Map(),
              r = Object.assign(new Wr(), {
                close: function () {
                  var _close3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee160() {
                    return _regeneratorRuntime().wrap(function _callee160$(_context163) {
                      while (1) switch (_context163.prev = _context163.next) {
                        case 0:
                          _context163.next = 2;
                          return Promise.resolve();
                        case 2:
                          return _context163.abrupt("return", _context163.sent);
                        case 3:
                        case "end":
                          return _context163.stop();
                      }
                    }, _callee160);
                  }));
                  function close() {
                    return _close3.apply(this, arguments);
                  }
                  return close;
                }(),
                listen: function () {
                  var _listen = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee161(n) {
                    var i, s, o, a, c;
                    return _regeneratorRuntime().wrap(function _callee161$(_context164) {
                      while (1) switch (_context164.prev = _context164.next) {
                        case 0:
                          i = hr(n.toString().split("/p2p-circuit").find(function (e) {
                            return "" !== e;
                          })), s = i.getPeerId();
                          if (!(null == s)) {
                            _context164.next = 3;
                            break;
                          }
                          throw new Error("Could not determine relay peer from multiaddr");
                        case 3:
                          o = nc(s);
                          _context164.next = 6;
                          return e.peerStore.addressBook.add(o, [i]);
                        case 6:
                          _context164.next = 8;
                          return e.connectionManager.openConnection(o);
                        case 8:
                          a = _context164.sent;
                          c = a.remoteAddr.encapsulate("/p2p-circuit");
                          t.set(a.remotePeer.toString(), c), r.dispatchEvent(new Qr("listening"));
                        case 11:
                        case "end":
                          return _context164.stop();
                      }
                    }, _callee161);
                  }));
                  function listen(_x159) {
                    return _listen.apply(this, arguments);
                  }
                  return listen;
                }(),
                getAddrs: function getAddrs() {
                  var e = [];
                  var _iterator80 = _createForOfIteratorHelper(t.values()),
                    _step80;
                  try {
                    for (_iterator80.s(); !(_step80 = _iterator80.n()).done;) {
                      var _r110 = _step80.value;
                      e.push(_r110);
                    }
                  } catch (err) {
                    _iterator80.e(err);
                  } finally {
                    _iterator80.f();
                  }
                  return e;
                }
              });
            return e.connectionManager.addEventListener("peer:disconnect", function (e) {
              var n = e.detail;
              t.delete(n.remotePeer.toString()) && r.dispatchEvent(new Qr("close"));
            }), r;
          }({
            connectionManager: this.components.connectionManager,
            peerStore: this.components.peerStore
          });
        }
      }, {
        key: "filter",
        value: function filter(e) {
          return (e = Array.isArray(e) ? e : [e]).filter(function (e) {
            return Pr.matches(e);
          });
        }
      }]);
      return bh;
    }(Symbol.toStringTag);
    function vh(_x160) {
      return _vh.apply(this, arguments);
    }
    function _vh() {
      _vh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee404(e) {
        var t, r;
        return _regeneratorRuntime().wrap(function _callee404$(_context412) {
          while (1) switch (_context412.prev = _context412.next) {
            case 0:
              t = new TextEncoder().encode(e);
              _context412.next = 3;
              return He.digest(t);
            case 3:
              r = _context412.sent;
              return _context412.abrupt("return", at.createV0(r));
            case 5:
            case "end":
              return _context412.stop();
          }
        }, _callee404);
      }));
      return _vh.apply(this, arguments);
    }
    var _h = "hop_relay",
      Sh = "true",
      Ch = "/libp2p/relay";
    var Ah = __webpack_require__(8951);
    var Ih = "[a-fA-F\\d:]",
      Th = function Th(e) {
        return e && e.includeBoundaries ? "(?:(?<=\\s|^)(?=".concat(Ih, ")|(?<=").concat(Ih, ")(?=\\s|$))") : "";
      },
      Rh = "(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",
      kh = "[a-fA-F\\d]{1,4}",
      Nh = "\n(?:\n(?:".concat(kh, ":){7}(?:").concat(kh, "|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:").concat(kh, ":){6}(?:").concat(Rh, "|:").concat(kh, "|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:").concat(kh, ":){5}(?::").concat(Rh, "|(?::").concat(kh, "){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:").concat(kh, ":){4}(?:(?::").concat(kh, "){0,1}:").concat(Rh, "|(?::").concat(kh, "){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:").concat(kh, ":){3}(?:(?::").concat(kh, "){0,2}:").concat(Rh, "|(?::").concat(kh, "){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:").concat(kh, ":){2}(?:(?::").concat(kh, "){0,3}:").concat(Rh, "|(?::").concat(kh, "){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:").concat(kh, ":){1}(?:(?::").concat(kh, "){0,4}:").concat(Rh, "|(?::").concat(kh, "){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::").concat(kh, "){0,5}:").concat(Rh, "|(?::").concat(kh, "){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm, "").replace(/\n/g, "").trim(),
      Lh = new RegExp("(?:^".concat(Rh, "$)|(?:^").concat(Nh, "$)")),
      Dh = new RegExp("^".concat(Rh, "$")),
      Ph = new RegExp("^".concat(Nh, "$")),
      Bh = function Bh(e) {
        return e && e.exact ? Lh : new RegExp("(?:".concat(Th(e)).concat(Rh).concat(Th(e), ")|(?:").concat(Th(e)).concat(Nh).concat(Th(e), ")"), "g");
      };
    Bh.v4 = function (e) {
      return e && e.exact ? Dh : new RegExp("".concat(Th(e)).concat(Rh).concat(Th(e)), "g");
    }, Bh.v6 = function (e) {
      return e && e.exact ? Ph : new RegExp("".concat(Th(e)).concat(Nh).concat(Th(e)), "g");
    };
    var Oh = Bh;
    var xh = __webpack_require__(6512);
    var Uh = xh.isValid,
      Mh = xh.parse,
      Vh = ["0.0.0.0/8", "10.0.0.0/8", "100.64.0.0/10", "127.0.0.0/8", "169.254.0.0/16", "172.16.0.0/12", "192.0.0.0/24", "192.0.0.0/29", "192.0.0.8/32", "192.0.0.9/32", "192.0.0.10/32", "192.0.0.170/32", "192.0.0.171/32", "192.0.2.0/24", "192.31.196.0/24", "192.52.193.0/24", "192.88.99.0/24", "192.168.0.0/16", "192.175.48.0/24", "198.18.0.0/15", "198.51.100.0/24", "203.0.113.0/24", "240.0.0.0/4", "255.255.255.255/32"].map(function (e) {
        return new Ah.Netmask(e);
      });
    function Kh(e) {
      return /^::$/.test(e) || /^::1$/.test(e) || /^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e) || /^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e) || /^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e) || /^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e) || /^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e) || /^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e) || /^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e) || /^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e) || /^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e) || /^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e) || /^ff([0-9a-fA-F]{2,2}):/i.test(e);
    }
    var Fh = function Fh(e) {
      if (Uh(e)) {
        var _t105 = Mh(e);
        if ("ipv4" === _t105.kind()) return function (e) {
          var _iterator81 = _createForOfIteratorHelper(Vh),
            _step81;
          try {
            for (_iterator81.s(); !(_step81 = _iterator81.n()).done;) {
              var _t106 = _step81.value;
              if (_t106.contains(e)) return !0;
            }
          } catch (err) {
            _iterator81.e(err);
          } finally {
            _iterator81.f();
          }
          return !1;
        }(_t105.toNormalizedString());
        if ("ipv6" === _t105.kind()) return Kh(e);
      } else if (ae(e) && Oh.v6().test(e)) return Kh(e);
    };
    function qh(e) {
      var _e$nodeAddress = e.nodeAddress(),
        t = _e$nodeAddress.address;
      return Boolean(Fh(t));
    }
    function jh(e, t) {
      var r = qh(e.multiaddr),
        n = qh(t.multiaddr);
      return r && !n ? 1 : !r && n || e.isCertified && !t.isCertified ? -1 : !e.isCertified && t.isCertified ? 1 : 0;
    }
    var Hh = ne("libp2p:auto-relay"),
      zh = function zh() {};
    var $h = /*#__PURE__*/function () {
      function $h(e, t) {
        var _t$addressSorter,
          _t$maxListeners,
          _t$onError,
          _this127 = this;
        _classCallCheck(this, $h);
        this.components = e, this.addressSorter = (_t$addressSorter = t.addressSorter) !== null && _t$addressSorter !== void 0 ? _t$addressSorter : jh, this.maxListeners = (_t$maxListeners = t.maxListeners) !== null && _t$maxListeners !== void 0 ? _t$maxListeners : 1, this.listenRelays = new Set(), this.onError = (_t$onError = t.onError) !== null && _t$onError !== void 0 ? _t$onError : zh, this._onProtocolChange = this._onProtocolChange.bind(this), this._onPeerDisconnected = this._onPeerDisconnected.bind(this), this.components.peerStore.addEventListener("change:protocols", function (e) {
          _this127._onProtocolChange(e).catch(function (e) {
            Hh.error(e);
          });
        }), this.components.connectionManager.addEventListener("peer:disconnect", this._onPeerDisconnected);
      }
      _createClass($h, [{
        key: "_onProtocolChange",
        value: function () {
          var _onProtocolChange2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee163(e) {
            var _e$detail, t, r, n, _e106, _r111, _i44;
            return _regeneratorRuntime().wrap(function _callee163$(_context166) {
              while (1) switch (_context166.prev = _context166.next) {
                case 0:
                  _e$detail = e.detail, t = _e$detail.peerId, r = _e$detail.protocols, n = t.toString();
                  if (!(null != r.find(function (e) {
                    return e === dh;
                  }))) {
                    _context166.next = 26;
                    break;
                  }
                  if (this.listenRelays.has(n)) {
                    _context166.next = 24;
                    break;
                  }
                  _context166.prev = 3;
                  _e106 = this.components.connectionManager.getConnections(t);
                  if (!(0 === _e106.length)) {
                    _context166.next = 7;
                    break;
                  }
                  return _context166.abrupt("return");
                case 7:
                  _r111 = _e106[0];
                  if (!_r111.remoteAddr.protoCodes().includes(290)) {
                    _context166.next = 10;
                    break;
                  }
                  return _context166.abrupt("return", void Hh("relayed connection to ".concat(n, " will not be used to hop on")));
                case 10:
                  _context166.next = 12;
                  return function () {
                    var _ref84 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee162(e) {
                      var t, r, n, i, s;
                      return _regeneratorRuntime().wrap(function _callee162$(_context165) {
                        while (1) switch (_context165.prev = _context165.next) {
                          case 0:
                            t = e.connection;
                            r = e.signal;
                            _context165.next = 4;
                            return t.newStream(dh, {
                              signal: r
                            });
                          case 4:
                            n = _context165.sent;
                            i = new gh({
                              stream: n
                            });
                            i.write({
                              type: lh.Type.CAN_HOP
                            });
                            _context165.next = 9;
                            return i.read();
                          case 9:
                            s = _context165.sent;
                            _context165.next = 12;
                            return i.close();
                          case 12:
                            return _context165.abrupt("return", null != s && s.code === lh.Status.SUCCESS);
                          case 13:
                          case "end":
                            return _context165.stop();
                        }
                      }, _callee162);
                    }));
                    return function (_x162) {
                      return _ref84.apply(this, arguments);
                    };
                  }()({
                    connection: _r111
                  });
                case 12:
                  _i44 = _context166.sent;
                  _context166.t0 = _i44;
                  if (!_context166.t0) {
                    _context166.next = 19;
                    break;
                  }
                  _context166.next = 17;
                  return this.components.peerStore.metadataBook.setValue(t, _h, Pt(Sh));
                case 17:
                  _context166.next = 19;
                  return this._addListenRelay(_r111, n);
                case 19:
                  _context166.next = 24;
                  break;
                case 21:
                  _context166.prev = 21;
                  _context166.t1 = _context166["catch"](3);
                  this.onError(_context166.t1);
                case 24:
                  _context166.next = 30;
                  break;
                case 26:
                  _context166.t2 = this.listenRelays.has(n);
                  if (!_context166.t2) {
                    _context166.next = 30;
                    break;
                  }
                  _context166.next = 30;
                  return this._removeListenRelay(n);
                case 30:
                case "end":
                  return _context166.stop();
              }
            }, _callee163, this, [[3, 21]]);
          }));
          function _onProtocolChange(_x161) {
            return _onProtocolChange2.apply(this, arguments);
          }
          return _onProtocolChange;
        }()
      }, {
        key: "_onPeerDisconnected",
        value: function _onPeerDisconnected(e) {
          var t = e.detail.remotePeer.toString();
          this.listenRelays.has(t) && this._removeListenRelay(t).catch(function (e) {
            Hh.error(e);
          });
        }
      }, {
        key: "_addListenRelay",
        value: function () {
          var _addListenRelay2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee166(e, t) {
            var _this128 = this;
            var _r112, _n71;
            return _regeneratorRuntime().wrap(function _callee166$(_context169) {
              while (1) switch (_context169.prev = _context169.next) {
                case 0:
                  _context169.prev = 0;
                  if (!(this.listenRelays.size >= this.maxListeners)) {
                    _context169.next = 3;
                    break;
                  }
                  return _context169.abrupt("return");
                case 3:
                  _context169.t0 = Ci;
                  _context169.next = 6;
                  return this.components.peerStore.addressBook.get(e.remotePeer);
                case 6:
                  _context169.t1 = _context169.sent;
                  _context169.t2 = function (e) {
                    return sh(e, _this128.addressSorter);
                  };
                  _context169.t3 = /*#__PURE__*/function () {
                    var _ref85 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee164(e) {
                      return _regeneratorRuntime().wrap(function _callee164$(_context167) {
                        while (1) switch (_context167.prev = _context167.next) {
                          case 0:
                            _context167.next = 2;
                            return gu(e);
                          case 2:
                            return _context167.abrupt("return", _context167.sent);
                          case 3:
                          case "end":
                            return _context167.stop();
                        }
                      }, _callee164);
                    }));
                    return function (_x165) {
                      return _ref85.apply(this, arguments);
                    };
                  }();
                  _context169.next = 11;
                  return (0, _context169.t0)(_context169.t1, _context169.t2, _context169.t3);
                case 11:
                  _r112 = _context169.sent;
                  _context169.next = 14;
                  return Promise.all(_r112.map( /*#__PURE__*/function () {
                    var _ref86 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee165(t) {
                      var _r113;
                      return _regeneratorRuntime().wrap(function _callee165$(_context168) {
                        while (1) switch (_context168.prev = _context168.next) {
                          case 0:
                            _context168.prev = 0;
                            _r113 = t.multiaddr;
                            null == _r113.getPeerId() && (_r113 = _r113.encapsulate("/p2p/".concat(e.remotePeer.toString())));
                            _r113 = _r113.encapsulate("/p2p-circuit");
                            _context168.next = 6;
                            return _this128.components.transportManager.listen([_r113]);
                          case 6:
                            return _context168.abrupt("return", !0);
                          case 9:
                            _context168.prev = 9;
                            _context168.t0 = _context168["catch"](0);
                            Hh.error("error listening on circuit address", _context168.t0), _this128.onError(_context168.t0);
                          case 12:
                            return _context168.abrupt("return", !1);
                          case 13:
                          case "end":
                            return _context168.stop();
                        }
                      }, _callee165, null, [[0, 9]]);
                    }));
                    return function (_x166) {
                      return _ref86.apply(this, arguments);
                    };
                  }()));
                case 14:
                  _n71 = _context169.sent;
                  _n71.includes(!0) && this.listenRelays.add(t);
                  _context169.next = 21;
                  break;
                case 18:
                  _context169.prev = 18;
                  _context169.t4 = _context169["catch"](0);
                  this.onError(_context169.t4), this.listenRelays.delete(t);
                case 21:
                case "end":
                  return _context169.stop();
              }
            }, _callee166, this, [[0, 18]]);
          }));
          function _addListenRelay(_x163, _x164) {
            return _addListenRelay2.apply(this, arguments);
          }
          return _addListenRelay;
        }()
      }, {
        key: "_removeListenRelay",
        value: function () {
          var _removeListenRelay2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee167(e) {
            return _regeneratorRuntime().wrap(function _callee167$(_context170) {
              while (1) switch (_context170.prev = _context170.next) {
                case 0:
                  _context170.t0 = this.listenRelays.delete(e);
                  if (!_context170.t0) {
                    _context170.next = 4;
                    break;
                  }
                  _context170.next = 4;
                  return this._listenOnAvailableHopRelays([e]);
                case 4:
                case "end":
                  return _context170.stop();
              }
            }, _callee167, this);
          }));
          function _removeListenRelay(_x167) {
            return _removeListenRelay2.apply(this, arguments);
          }
          return _removeListenRelay;
        }()
      }, {
        key: "_listenOnAvailableHopRelays",
        value: function () {
          var _listenOnAvailableHopRelays2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee168() {
            var e,
              t,
              r,
              _iterator82,
              _step82,
              _step82$value,
              _n72,
              _i46,
              _r114,
              _s28,
              _o17,
              _i45,
              _t107,
              _e107,
              _e108,
              _iteratorAbruptCompletion23,
              _didIteratorError23,
              _iteratorError23,
              _iterator23,
              _step23,
              _t108,
              _e109,
              _args171 = arguments;
            return _regeneratorRuntime().wrap(function _callee168$(_context171) {
              while (1) switch (_context171.prev = _context171.next) {
                case 0:
                  e = _args171.length > 0 && _args171[0] !== undefined ? _args171[0] : [];
                  if (!(this.listenRelays.size >= this.maxListeners)) {
                    _context171.next = 3;
                    break;
                  }
                  return _context171.abrupt("return");
                case 3:
                  t = [];
                  _context171.next = 6;
                  return this.components.peerStore.all();
                case 6:
                  r = _context171.sent;
                  _iterator82 = _createForOfIteratorHelper(r);
                  _context171.prev = 8;
                  _iterator82.s();
                case 10:
                  if ((_step82 = _iterator82.n()).done) {
                    _context171.next = 31;
                    break;
                  }
                  _step82$value = _step82.value, _n72 = _step82$value.id, _i46 = _step82$value.metadata;
                  _r114 = _n72.toString();
                  if (!this.listenRelays.has(_r114)) {
                    _context171.next = 15;
                    break;
                  }
                  return _context171.abrupt("continue", 29);
                case 15:
                  if (!e.includes(_r114)) {
                    _context171.next = 17;
                    break;
                  }
                  return _context171.abrupt("continue", 29);
                case 17:
                  _s28 = _i46.get(_h);
                  if (!(null == _s28 || St(_s28) !== Sh)) {
                    _context171.next = 20;
                    break;
                  }
                  return _context171.abrupt("continue", 29);
                case 20:
                  _o17 = this.components.connectionManager.getConnections(_n72);
                  if (!(0 !== _o17.length)) {
                    _context171.next = 28;
                    break;
                  }
                  _context171.next = 24;
                  return this._addListenRelay(_o17[0], _r114);
                case 24:
                  if (!(this.listenRelays.size >= this.maxListeners)) {
                    _context171.next = 26;
                    break;
                  }
                  return _context171.abrupt("return");
                case 26:
                  _context171.next = 29;
                  break;
                case 28:
                  t.push(_n72);
                case 29:
                  _context171.next = 10;
                  break;
                case 31:
                  _context171.next = 36;
                  break;
                case 33:
                  _context171.prev = 33;
                  _context171.t0 = _context171["catch"](8);
                  _iterator82.e(_context171.t0);
                case 36:
                  _context171.prev = 36;
                  _iterator82.f();
                  return _context171.finish(36);
                case 39:
                  _i45 = 0, _t107 = t;
                case 40:
                  if (!(_i45 < _t107.length)) {
                    _context171.next = 49;
                    break;
                  }
                  _e107 = _t107[_i45];
                  _context171.next = 44;
                  return this._tryToListenOnRelay(_e107);
                case 44:
                  if (!(this.listenRelays.size >= this.maxListeners)) {
                    _context171.next = 46;
                    break;
                  }
                  return _context171.abrupt("return");
                case 46:
                  _i45++;
                  _context171.next = 40;
                  break;
                case 49:
                  _context171.prev = 49;
                  _context171.next = 52;
                  return vh(Ch);
                case 52:
                  _e108 = _context171.sent;
                  _iteratorAbruptCompletion23 = false;
                  _didIteratorError23 = false;
                  _context171.prev = 55;
                  _iterator23 = _asyncIterator(this.components.contentRouting.findProviders(_e108));
                case 57:
                  _context171.next = 59;
                  return _iterator23.next();
                case 59:
                  if (!(_iteratorAbruptCompletion23 = !(_step23 = _context171.sent).done)) {
                    _context171.next = 76;
                    break;
                  }
                  _t108 = _step23.value;
                  if (!(0 === _t108.multiaddrs.length)) {
                    _context171.next = 63;
                    break;
                  }
                  return _context171.abrupt("continue", 73);
                case 63:
                  _e109 = _t108.id;
                  _context171.t1 = !_e109.equals(this.components.peerId);
                  if (!_context171.t1) {
                    _context171.next = 71;
                    break;
                  }
                  _context171.next = 68;
                  return this.components.peerStore.addressBook.add(_e109, _t108.multiaddrs);
                case 68:
                  _context171.next = 70;
                  return this._tryToListenOnRelay(_e109);
                case 70:
                  _context171.t1 = this.listenRelays.size >= this.maxListeners;
                case 71:
                  if (!_context171.t1) {
                    _context171.next = 73;
                    break;
                  }
                  return _context171.abrupt("return");
                case 73:
                  _iteratorAbruptCompletion23 = false;
                  _context171.next = 57;
                  break;
                case 76:
                  _context171.next = 82;
                  break;
                case 78:
                  _context171.prev = 78;
                  _context171.t2 = _context171["catch"](55);
                  _didIteratorError23 = true;
                  _iteratorError23 = _context171.t2;
                case 82:
                  _context171.prev = 82;
                  _context171.prev = 83;
                  if (!(_iteratorAbruptCompletion23 && _iterator23.return != null)) {
                    _context171.next = 87;
                    break;
                  }
                  _context171.next = 87;
                  return _iterator23.return();
                case 87:
                  _context171.prev = 87;
                  if (!_didIteratorError23) {
                    _context171.next = 90;
                    break;
                  }
                  throw _iteratorError23;
                case 90:
                  return _context171.finish(87);
                case 91:
                  return _context171.finish(82);
                case 92:
                  _context171.next = 97;
                  break;
                case 94:
                  _context171.prev = 94;
                  _context171.t3 = _context171["catch"](49);
                  this.onError(_context171.t3);
                case 97:
                case "end":
                  return _context171.stop();
              }
            }, _callee168, this, [[8, 33, 36, 39], [49, 94], [55, 78, 82, 92], [83,, 87, 91]]);
          }));
          function _listenOnAvailableHopRelays() {
            return _listenOnAvailableHopRelays2.apply(this, arguments);
          }
          return _listenOnAvailableHopRelays;
        }()
      }, {
        key: "_tryToListenOnRelay",
        value: function () {
          var _tryToListenOnRelay2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee169(e) {
            var _t109;
            return _regeneratorRuntime().wrap(function _callee169$(_context172) {
              while (1) switch (_context172.prev = _context172.next) {
                case 0:
                  _context172.prev = 0;
                  _context172.next = 3;
                  return this.components.connectionManager.openConnection(e);
                case 3:
                  _t109 = _context172.sent;
                  _context172.next = 6;
                  return this._addListenRelay(_t109, e.toString());
                case 6:
                  _context172.next = 11;
                  break;
                case 8:
                  _context172.prev = 8;
                  _context172.t0 = _context172["catch"](0);
                  Hh.error("Could not use %p as relay", e, _context172.t0), this.onError(_context172.t0, "could not connect and listen on known hop relay ".concat(e.toString()));
                case 11:
                case "end":
                  return _context172.stop();
              }
            }, _callee169, this, [[0, 8]]);
          }));
          function _tryToListenOnRelay(_x168) {
            return _tryToListenOnRelay2.apply(this, arguments);
          }
          return _tryToListenOnRelay;
        }()
      }]);
      return $h;
    }();
    var Gh = ne("libp2p:relay");
    var Wh = /*#__PURE__*/function () {
      function Wh(e, t) {
        var _t$autoRelay;
        _classCallCheck(this, Wh);
        this.components = e, this.autoRelay = !1 !== ((_t$autoRelay = t.autoRelay) === null || _t$autoRelay === void 0 ? void 0 : _t$autoRelay.enabled) ? new $h(e, _objectSpread({
          addressSorter: t.addressSorter
        }, t.autoRelay)) : void 0, this.started = !1, this.init = t, this._advertiseService = this._advertiseService.bind(this);
      }
      _createClass(Wh, [{
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "start",
        value: function () {
          var _start6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee170() {
            return _regeneratorRuntime().wrap(function _callee170$(_context173) {
              while (1) switch (_context173.prev = _context173.next) {
                case 0:
                  !1 !== this.init.hop.enabled && !1 !== this.init.advertise.enabled && (this.timeout = (0, Ou.setDelayedInterval)(this._advertiseService, this.init.advertise.ttl, this.init.advertise.bootDelay)), this.started = !0;
                case 1:
                case "end":
                  return _context173.stop();
              }
            }, _callee170, this);
          }));
          function start() {
            return _start6.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee171() {
            return _regeneratorRuntime().wrap(function _callee171$(_context174) {
              while (1) switch (_context174.prev = _context174.next) {
                case 0:
                  null != this.timeout && (0, Ou.clearDelayedInterval)(this.timeout), this.started = !1;
                case 1:
                case "end":
                  return _context174.stop();
              }
            }, _callee171, this);
          }));
          function stop() {
            return _stop6.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "_advertiseService",
        value: function () {
          var _advertiseService2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee172() {
            var _e110;
            return _regeneratorRuntime().wrap(function _callee172$(_context175) {
              while (1) switch (_context175.prev = _context175.next) {
                case 0:
                  _context175.prev = 0;
                  _context175.next = 3;
                  return vh(Ch);
                case 3:
                  _e110 = _context175.sent;
                  _context175.next = 6;
                  return this.components.contentRouting.provide(_e110);
                case 6:
                  _context175.next = 17;
                  break;
                case 8:
                  _context175.prev = 8;
                  _context175.t0 = _context175["catch"](0);
                  if (!(_context175.t0.code === ku.ERR_NO_ROUTERS_AVAILABLE)) {
                    _context175.next = 16;
                    break;
                  }
                  Gh.error("a content router, such as a DHT, must be provided in order to advertise the relay service", _context175.t0);
                  _context175.next = 14;
                  return this.stop();
                case 14:
                  _context175.next = 17;
                  break;
                case 16:
                  Gh.error(_context175.t0);
                case 17:
                case "end":
                  return _context175.stop();
              }
            }, _callee172, this, [[0, 8]]);
          }));
          function _advertiseService() {
            return _advertiseService2.apply(this, arguments);
          }
          return _advertiseService;
        }()
      }]);
      return Wh;
    }();
    var Yh = __webpack_require__(202);
    __webpack_require__(9437), __webpack_require__(5414);
    var Qh = es.pki,
      Xh = ne("libp2p:keychain:cms"),
      Zh = new WeakMap();
    var Jh = /*#__PURE__*/function () {
      function Jh(e, t) {
        _classCallCheck(this, Jh);
        if (null == e) throw Qt(new Error("keychain is required"), ku.ERR_KEYCHAIN_REQUIRED);
        this.keychain = e, Zh.set(this, {
          dek: t
        });
      }
      _createClass(Jh, [{
        key: "encrypt",
        value: function () {
          var _encrypt2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee173(e, t) {
            var r, n, i, s, o, a, c;
            return _regeneratorRuntime().wrap(function _callee173$(_context176) {
              while (1) switch (_context176.prev = _context176.next) {
                case 0:
                  if (t instanceof Uint8Array) {
                    _context176.next = 2;
                    break;
                  }
                  throw Qt(new Error("Plain data must be a Uint8Array"), ku.ERR_INVALID_PARAMETERS);
                case 2:
                  _context176.next = 4;
                  return this.keychain.findKeyByName(e);
                case 4:
                  r = _context176.sent;
                  _context176.next = 7;
                  return this.keychain.getPrivateKey(e);
                case 7:
                  n = _context176.sent;
                  i = Zh.get(this);
                  if (!(null == i)) {
                    _context176.next = 11;
                    break;
                  }
                  throw Qt(new Error("dek missing"), ku.ERR_INVALID_PARAMETERS);
                case 11:
                  s = i.dek;
                  o = es.pki.decryptRsaPrivateKey(n, s);
                  _context176.next = 15;
                  return function (e, t) {
                    var r = Qh.rsa.setPublicKey(t.n, t.e),
                      n = Qh.createCertificate();
                    n.publicKey = r, n.serialNumber = "01", n.validity.notBefore = new Date(), n.validity.notAfter = new Date(), n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear() + 10);
                    var i = [{
                      name: "organizationName",
                      value: "ipfs"
                    }, {
                      shortName: "OU",
                      value: "keystore"
                    }, {
                      name: "commonName",
                      value: e.id
                    }];
                    return n.setSubject(i), n.setIssuer(i), n.setExtensions([{
                      name: "basicConstraints",
                      cA: !0
                    }, {
                      name: "keyUsage",
                      keyCertSign: !0,
                      digitalSignature: !0,
                      nonRepudiation: !0,
                      keyEncipherment: !0,
                      dataEncipherment: !0
                    }, {
                      name: "extKeyUsage",
                      serverAuth: !0,
                      clientAuth: !0,
                      codeSigning: !0,
                      emailProtection: !0,
                      timeStamping: !0
                    }, {
                      name: "nsCertType",
                      client: !0,
                      server: !0,
                      email: !0,
                      objsign: !0,
                      sslCA: !0,
                      emailCA: !0,
                      objCA: !0
                    }]), n.sign(t), n;
                  }(r, o);
                case 15:
                  a = _context176.sent;
                  c = es.pkcs7.createEnvelopedData();
                  return _context176.abrupt("return", (c.addRecipient(a), c.content = es.util.createBuffer(t), c.encrypt(), Pt(es.asn1.toDer(c.toAsn1()).getBytes(), "ascii")));
                case 18:
                case "end":
                  return _context176.stop();
              }
            }, _callee173, this);
          }));
          function encrypt(_x169, _x170) {
            return _encrypt2.apply(this, arguments);
          }
          return encrypt;
        }()
      }, {
        key: "decrypt",
        value: function () {
          var _decrypt2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee176(e) {
            var _this129 = this;
            var t, _r115, _n73, r, n, _e111, i, s, o, a, c;
            return _regeneratorRuntime().wrap(function _callee176$(_context179) {
              while (1) switch (_context179.prev = _context179.next) {
                case 0:
                  if (e instanceof Uint8Array) {
                    _context179.next = 2;
                    break;
                  }
                  throw Qt(new Error("CMS data is required"), ku.ERR_INVALID_PARAMETERS);
                case 2:
                  _context179.prev = 2;
                  _r115 = es.util.createBuffer(St(e, "ascii")), _n73 = es.asn1.fromDer(_r115);
                  t = es.pkcs7.messageFromAsn1(_n73);
                  _context179.next = 10;
                  break;
                case 7:
                  _context179.prev = 7;
                  _context179.t0 = _context179["catch"](2);
                  throw Xh.error(_context179.t0), Qt(new Error("Invalid CMS"), ku.ERR_INVALID_CMS);
                case 10:
                  r = t.recipients.filter(function (e) {
                    return e.issuer.find(function (e) {
                      return "O" === e.shortName && "ipfs" === e.value;
                    });
                  }).filter(function (e) {
                    return e.issuer.find(function (e) {
                      return "CN" === e.shortName;
                    });
                  }).map(function (e) {
                    return {
                      recipient: e,
                      keyId: e.issuer.find(function (e) {
                        return "CN" === e.shortName;
                      }).value
                    };
                  });
                  _context179.next = 13;
                  return function () {
                    var _ref87 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee174(e, t) {
                      var r;
                      return _regeneratorRuntime().wrap(function _callee174$(_context177) {
                        while (1) switch (_context177.prev = _context177.next) {
                          case 0:
                            r = e.map(t);
                            _context177.next = 3;
                            return Promise.all(r);
                          case 3:
                            _context177.t0 = _context177.sent.findIndex(function (e) {
                              return e;
                            });
                            return _context177.abrupt("return", e[_context177.t0]);
                          case 5:
                          case "end":
                            return _context177.stop();
                        }
                      }, _callee174);
                    }));
                    return function (_x172, _x173) {
                      return _ref87.apply(this, arguments);
                    };
                  }()(r, /*#__PURE__*/function () {
                    var _ref88 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee175(e) {
                      return _regeneratorRuntime().wrap(function _callee175$(_context178) {
                        while (1) switch (_context178.prev = _context178.next) {
                          case 0:
                            _context178.prev = 0;
                            _context178.next = 3;
                            return _this129.keychain.findKeyById(e.keyId);
                          case 3:
                            _context178.t0 = _context178.sent;
                            if (!(null != _context178.t0)) {
                              _context178.next = 6;
                              break;
                            }
                            return _context178.abrupt("return", !0);
                          case 6:
                            _context178.next = 11;
                            break;
                          case 8:
                            _context178.prev = 8;
                            _context178.t1 = _context178["catch"](0);
                            return _context178.abrupt("return", !1);
                          case 11:
                            return _context178.abrupt("return", !1);
                          case 12:
                          case "end":
                            return _context178.stop();
                        }
                      }, _callee175, null, [[0, 8]]);
                    }));
                    return function (_x174) {
                      return _ref88.apply(this, arguments);
                    };
                  }());
                case 13:
                  n = _context179.sent;
                  if (!(null == n)) {
                    _context179.next = 17;
                    break;
                  }
                  _e111 = r.map(function (e) {
                    return e.keyId;
                  });
                  throw Qt(new Error("Decryption needs one of the key(s): ".concat(_e111.join(", "))), ku.ERR_MISSING_KEYS, {
                    missingKeys: _e111
                  });
                case 17:
                  _context179.next = 19;
                  return this.keychain.findKeyById(n.keyId);
                case 19:
                  i = _context179.sent;
                  if (!(null == i)) {
                    _context179.next = 22;
                    break;
                  }
                  throw Qt(new Error("No key available to decrypto"), ku.ERR_NO_KEY);
                case 22:
                  _context179.next = 24;
                  return this.keychain.getPrivateKey(i.name);
                case 24:
                  s = _context179.sent;
                  o = Zh.get(this);
                  if (!(null == o)) {
                    _context179.next = 28;
                    break;
                  }
                  throw Qt(new Error("dek missing"), ku.ERR_INVALID_PARAMETERS);
                case 28:
                  a = o.dek, c = es.pki.decryptRsaPrivateKey(s, a);
                  return _context179.abrupt("return", (t.decrypt(n.recipient, c), Pt(t.content.getBytes(), "ascii")));
                case 30:
                case "end":
                  return _context179.stop();
              }
            }, _callee176, this, [[2, 7]]);
          }));
          function decrypt(_x171) {
            return _decrypt2.apply(this, arguments);
          }
          return decrypt;
        }()
      }]);
      return Jh;
    }();
    __webpack_require__(8925);
    var ed = __webpack_require__(8960);
    var td = {
      sha1: "sha1",
      "sha2-256": "sha256",
      "sha2-512": "sha512"
    };
    function rd(e, t, r, n, i) {
      if ("sha1" !== i && "sha2-256" !== i && "sha2-512" !== i) {
        var _e112 = Object.keys(td).join(" / ");
        throw new rs("Hash '".concat(i, "' is unknown or not supported. Must be ").concat(_e112), "ERR_UNSUPPORTED_HASH_TYPE");
      }
      var s = td[i],
        o = ed(e, t, r, n, s);
      return is.encode64(o, null);
    }
    var nd = ne("libp2p:keychain"),
      id = "/pkcs8/",
      sd = "/info/",
      od = new WeakMap(),
      ad = {
        dek: {
          keyLength: 64,
          iterationCount: 1e4,
          salt: "you should override this value with a crypto secure random number",
          hash: "sha2-512"
        }
      };
    function cd(e) {
      return null != e && "string" == typeof e && e === Yh(e.trim()) && e.length > 0;
    }
    function ld() {
      return _ld.apply(this, arguments);
    }
    function _ld() {
      _ld = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee405() {
        var e;
        return _regeneratorRuntime().wrap(function _callee405$(_context413) {
          while (1) switch (_context413.prev = _context413.next) {
            case 0:
              e = 800 * Math.random() + 200;
              _context413.next = 3;
              return new Promise(function (t) {
                return setTimeout(t, e);
              });
            case 3:
            case "end":
              return _context413.stop();
          }
        }, _callee405);
      }));
      return _ld.apply(this, arguments);
    }
    function ud(e) {
      return new Iu(id + e);
    }
    function hd(e) {
      return new Iu(sd + e);
    }
    var dd = /*#__PURE__*/function () {
      function dd(e, t) {
        var _this$init$pass, _this$init$dek, _this$init$dek2, _this$init$dek2$salt, _this$init$dek3, _this$init$dek4, _this$init$dek5, _this$init$dek6, _this$init$dek7, _this$init$dek8;
        _classCallCheck(this, dd);
        if (this.components = e, this.init = qu(ad, t), null != this.init.pass && ((_this$init$pass = this.init.pass) === null || _this$init$pass === void 0 ? void 0 : _this$init$pass.length) < 20) throw new Error("pass must be least 20 characters");
        if (null != ((_this$init$dek = this.init.dek) === null || _this$init$dek === void 0 ? void 0 : _this$init$dek.keyLength) && this.init.dek.keyLength < 14) throw new Error("dek.keyLength must be least 14 bytes");
        if (null != ((_this$init$dek2 = this.init.dek) === null || _this$init$dek2 === void 0 ? void 0 : (_this$init$dek2$salt = _this$init$dek2.salt) === null || _this$init$dek2$salt === void 0 ? void 0 : _this$init$dek2$salt.length) && this.init.dek.salt.length < 16) throw new Error("dek.saltLength must be least 16 bytes");
        if (null != ((_this$init$dek3 = this.init.dek) === null || _this$init$dek3 === void 0 ? void 0 : _this$init$dek3.iterationCount) && this.init.dek.iterationCount < 1e3) throw new Error("dek.iterationCount must be least 1000");
        var r = null != this.init.pass && null != ((_this$init$dek4 = this.init.dek) === null || _this$init$dek4 === void 0 ? void 0 : _this$init$dek4.salt) ? rd(this.init.pass, (_this$init$dek5 = this.init.dek) === null || _this$init$dek5 === void 0 ? void 0 : _this$init$dek5.salt, (_this$init$dek6 = this.init.dek) === null || _this$init$dek6 === void 0 ? void 0 : _this$init$dek6.iterationCount, (_this$init$dek7 = this.init.dek) === null || _this$init$dek7 === void 0 ? void 0 : _this$init$dek7.keyLength, (_this$init$dek8 = this.init.dek) === null || _this$init$dek8 === void 0 ? void 0 : _this$init$dek8.hash) : "";
        od.set(this, {
          dek: r
        }), this.started = !1;
      }
      _createClass(dd, [{
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "start",
        value: function () {
          var _start7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee177() {
            var e;
            return _regeneratorRuntime().wrap(function _callee177$(_context180) {
              while (1) switch (_context180.prev = _context180.next) {
                case 0:
                  e = hd("self");
                  _context180.next = 3;
                  return this.components.datastore.has(e);
                case 3:
                  _context180.t0 = _context180.sent;
                  if (_context180.t0) {
                    _context180.next = 7;
                    break;
                  }
                  _context180.next = 7;
                  return this.importPeer("self", this.components.peerId);
                case 7:
                  this.started = !0;
                case 8:
                case "end":
                  return _context180.stop();
              }
            }, _callee177, this);
          }));
          function start() {
            return _start7.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function stop() {
          this.started = !1;
        }
      }, {
        key: "cms",
        get: function get() {
          var e = od.get(this);
          if (null == e) throw Qt(new Error("dek missing"), ku.ERR_INVALID_PARAMETERS);
          var t = e.dek;
          return new Jh(this, t);
        }
      }, {
        key: "createKey",
        value: function () {
          var _createKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee178(e, t) {
            var r,
              n,
              i,
              _s29,
              _o18,
              _a8,
              _c10,
              _l6,
              _u3,
              _args181 = arguments;
            return _regeneratorRuntime().wrap(function _callee178$(_context181) {
              while (1) switch (_context181.prev = _context181.next) {
                case 0:
                  r = _args181.length > 2 && _args181[2] !== undefined ? _args181[2] : 2048;
                  if (!(!cd(e) || "self" === e)) {
                    _context181.next = 5;
                    break;
                  }
                  _context181.next = 4;
                  return ld();
                case 4:
                  throw Qt(new Error("Invalid key name"), ku.ERR_INVALID_KEY_NAME);
                case 5:
                  if (!("string" != typeof t)) {
                    _context181.next = 9;
                    break;
                  }
                  _context181.next = 8;
                  return ld();
                case 8:
                  throw Qt(new Error("Invalid key type"), ku.ERR_INVALID_KEY_TYPE);
                case 9:
                  n = ud(e);
                  _context181.next = 12;
                  return this.components.datastore.has(n);
                case 12:
                  if (!_context181.sent) {
                    _context181.next = 16;
                    break;
                  }
                  _context181.next = 15;
                  return ld();
                case 15:
                  throw Qt(new Error("Key name already exists"), ku.ERR_KEY_ALREADY_EXISTS);
                case 16:
                  if (!("rsa" === t.toLowerCase() && (!Number.isSafeInteger(r) || r < 2048))) {
                    _context181.next = 20;
                    break;
                  }
                  _context181.next = 19;
                  return ld();
                case 19:
                  throw Qt(new Error("Invalid RSA key size"), ku.ERR_INVALID_KEY_SIZE);
                case 20:
                  _context181.prev = 20;
                  _context181.next = 23;
                  return Fa(t, r);
                case 23:
                  _s29 = _context181.sent;
                  _context181.next = 26;
                  return _s29.id();
                case 26:
                  _o18 = _context181.sent;
                  _a8 = od.get(this);
                  if (!(null == _a8)) {
                    _context181.next = 30;
                    break;
                  }
                  throw Qt(new Error("dek missing"), ku.ERR_INVALID_PARAMETERS);
                case 30:
                  _c10 = _a8.dek;
                  _context181.next = 33;
                  return _s29.export(_c10);
                case 33:
                  _l6 = _context181.sent;
                  i = {
                    name: e,
                    id: _o18
                  };
                  _u3 = this.components.datastore.batch();
                  _u3.put(n, Pt(_l6));
                  _u3.put(hd(e), Pt(JSON.stringify(i)));
                  _context181.next = 40;
                  return _u3.commit();
                case 40:
                  _context181.next = 47;
                  break;
                case 42:
                  _context181.prev = 42;
                  _context181.t0 = _context181["catch"](20);
                  _context181.next = 46;
                  return ld();
                case 46:
                  throw _context181.t0;
                case 47:
                  return _context181.abrupt("return", i);
                case 48:
                case "end":
                  return _context181.stop();
              }
            }, _callee178, this, [[20, 42]]);
          }));
          function createKey(_x175, _x176) {
            return _createKey.apply(this, arguments);
          }
          return createKey;
        }()
      }, {
        key: "listKeys",
        value: function () {
          var _listKeys = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee179() {
            var e, t, _iteratorAbruptCompletion24, _didIteratorError24, _iteratorError24, _iterator24, _step24, _r116;
            return _regeneratorRuntime().wrap(function _callee179$(_context182) {
              while (1) switch (_context182.prev = _context182.next) {
                case 0:
                  e = {
                    prefix: sd
                  }, t = [];
                  _iteratorAbruptCompletion24 = false;
                  _didIteratorError24 = false;
                  _context182.prev = 3;
                  _iterator24 = _asyncIterator(this.components.datastore.query(e));
                case 5:
                  _context182.next = 7;
                  return _iterator24.next();
                case 7:
                  if (!(_iteratorAbruptCompletion24 = !(_step24 = _context182.sent).done)) {
                    _context182.next = 13;
                    break;
                  }
                  _r116 = _step24.value;
                  t.push(JSON.parse(St(_r116.value)));
                case 10:
                  _iteratorAbruptCompletion24 = false;
                  _context182.next = 5;
                  break;
                case 13:
                  _context182.next = 19;
                  break;
                case 15:
                  _context182.prev = 15;
                  _context182.t0 = _context182["catch"](3);
                  _didIteratorError24 = true;
                  _iteratorError24 = _context182.t0;
                case 19:
                  _context182.prev = 19;
                  _context182.prev = 20;
                  if (!(_iteratorAbruptCompletion24 && _iterator24.return != null)) {
                    _context182.next = 24;
                    break;
                  }
                  _context182.next = 24;
                  return _iterator24.return();
                case 24:
                  _context182.prev = 24;
                  if (!_didIteratorError24) {
                    _context182.next = 27;
                    break;
                  }
                  throw _iteratorError24;
                case 27:
                  return _context182.finish(24);
                case 28:
                  return _context182.finish(19);
                case 29:
                  return _context182.abrupt("return", t);
                case 30:
                case "end":
                  return _context182.stop();
              }
            }, _callee179, this, [[3, 15, 19, 29], [20,, 24, 28]]);
          }));
          function listKeys() {
            return _listKeys.apply(this, arguments);
          }
          return listKeys;
        }()
      }, {
        key: "findKeyById",
        value: function () {
          var _findKeyById = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee180(e) {
            return _regeneratorRuntime().wrap(function _callee180$(_context183) {
              while (1) switch (_context183.prev = _context183.next) {
                case 0:
                  _context183.prev = 0;
                  _context183.next = 3;
                  return this.listKeys();
                case 3:
                  return _context183.abrupt("return", _context183.sent.find(function (t) {
                    return t.id === e;
                  }));
                case 6:
                  _context183.prev = 6;
                  _context183.t0 = _context183["catch"](0);
                  _context183.next = 10;
                  return ld();
                case 10:
                  throw _context183.t0;
                case 11:
                case "end":
                  return _context183.stop();
              }
            }, _callee180, this, [[0, 6]]);
          }));
          function findKeyById(_x177) {
            return _findKeyById.apply(this, arguments);
          }
          return findKeyById;
        }()
      }, {
        key: "findKeyByName",
        value: function () {
          var _findKeyByName = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee181(e) {
            var t, _e113;
            return _regeneratorRuntime().wrap(function _callee181$(_context184) {
              while (1) switch (_context184.prev = _context184.next) {
                case 0:
                  if (cd(e)) {
                    _context184.next = 4;
                    break;
                  }
                  _context184.next = 3;
                  return ld();
                case 3:
                  throw Qt(new Error("Invalid key name '".concat(e, "'")), ku.ERR_INVALID_KEY_NAME);
                case 4:
                  t = hd(e);
                  _context184.prev = 5;
                  _context184.next = 8;
                  return this.components.datastore.get(t);
                case 8:
                  _e113 = _context184.sent;
                  return _context184.abrupt("return", JSON.parse(St(_e113)));
                case 12:
                  _context184.prev = 12;
                  _context184.t0 = _context184["catch"](5);
                  _context184.next = 16;
                  return ld();
                case 16:
                  nd.error(_context184.t0);
                  throw Qt(new Error("Key '".concat(e, "' does not exist.")), ku.ERR_KEY_NOT_FOUND);
                case 18:
                case "end":
                  return _context184.stop();
              }
            }, _callee181, this, [[5, 12]]);
          }));
          function findKeyByName(_x178) {
            return _findKeyByName.apply(this, arguments);
          }
          return findKeyByName;
        }()
      }, {
        key: "removeKey",
        value: function () {
          var _removeKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee182(e) {
            var t, r, n;
            return _regeneratorRuntime().wrap(function _callee182$(_context185) {
              while (1) switch (_context185.prev = _context185.next) {
                case 0:
                  if (!(!cd(e) || "self" === e)) {
                    _context185.next = 4;
                    break;
                  }
                  _context185.next = 3;
                  return ld();
                case 3:
                  throw Qt(new Error("Invalid key name '".concat(e, "'")), ku.ERR_INVALID_KEY_NAME);
                case 4:
                  t = ud(e);
                  _context185.next = 7;
                  return this.findKeyByName(e);
                case 7:
                  r = _context185.sent;
                  n = this.components.datastore.batch();
                  n.delete(t);
                  n.delete(hd(e));
                  _context185.next = 13;
                  return n.commit();
                case 13:
                  return _context185.abrupt("return", r);
                case 14:
                case "end":
                  return _context185.stop();
              }
            }, _callee182, this);
          }));
          function removeKey(_x179) {
            return _removeKey.apply(this, arguments);
          }
          return removeKey;
        }()
      }, {
        key: "renameKey",
        value: function () {
          var _renameKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee183(e, t) {
            var r, n, i, s, _e114, _o19, _a9, _c11;
            return _regeneratorRuntime().wrap(function _callee183$(_context186) {
              while (1) switch (_context186.prev = _context186.next) {
                case 0:
                  if (!(!cd(e) || "self" === e)) {
                    _context186.next = 4;
                    break;
                  }
                  _context186.next = 3;
                  return ld();
                case 3:
                  throw Qt(new Error("Invalid old key name '".concat(e, "'")), ku.ERR_OLD_KEY_NAME_INVALID);
                case 4:
                  if (!(!cd(t) || "self" === t)) {
                    _context186.next = 8;
                    break;
                  }
                  _context186.next = 7;
                  return ld();
                case 7:
                  throw Qt(new Error("Invalid new key name '".concat(t, "'")), ku.ERR_NEW_KEY_NAME_INVALID);
                case 8:
                  r = ud(e), n = ud(t), i = hd(e), s = hd(t);
                  _context186.next = 11;
                  return this.components.datastore.has(n);
                case 11:
                  if (!_context186.sent) {
                    _context186.next = 15;
                    break;
                  }
                  _context186.next = 14;
                  return ld();
                case 14:
                  throw Qt(new Error("Key '".concat(t, "' already exists")), ku.ERR_KEY_ALREADY_EXISTS);
                case 15:
                  _context186.prev = 15;
                  _context186.next = 18;
                  return this.components.datastore.get(r);
                case 18:
                  _e114 = _context186.sent;
                  _context186.next = 21;
                  return this.components.datastore.get(i);
                case 21:
                  _o19 = _context186.sent;
                  _a9 = JSON.parse(St(_o19));
                  _a9.name = t;
                  _c11 = this.components.datastore.batch();
                  _c11.put(n, _e114);
                  _c11.put(s, Pt(JSON.stringify(_a9)));
                  _c11.delete(r);
                  _c11.delete(i);
                  _context186.next = 31;
                  return _c11.commit();
                case 31:
                  return _context186.abrupt("return", _a9);
                case 34:
                  _context186.prev = 34;
                  _context186.t0 = _context186["catch"](15);
                  _context186.next = 38;
                  return ld();
                case 38:
                  throw _context186.t0;
                case 39:
                case "end":
                  return _context186.stop();
              }
            }, _callee183, this, [[15, 34]]);
          }));
          function renameKey(_x180, _x181) {
            return _renameKey.apply(this, arguments);
          }
          return renameKey;
        }()
      }, {
        key: "exportKey",
        value: function () {
          var _exportKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee184(e, t) {
            var r, _e115, _n74, i, _s30;
            return _regeneratorRuntime().wrap(function _callee184$(_context187) {
              while (1) switch (_context187.prev = _context187.next) {
                case 0:
                  if (cd(e)) {
                    _context187.next = 4;
                    break;
                  }
                  _context187.next = 3;
                  return ld();
                case 3:
                  throw Qt(new Error("Invalid key name '".concat(e, "'")), ku.ERR_INVALID_KEY_NAME);
                case 4:
                  if (!(null == t)) {
                    _context187.next = 8;
                    break;
                  }
                  _context187.next = 7;
                  return ld();
                case 7:
                  throw Qt(new Error("Password is required"), ku.ERR_PASSWORD_REQUIRED);
                case 8:
                  r = ud(e);
                  _context187.prev = 9;
                  _context187.t0 = St;
                  _context187.next = 13;
                  return this.components.datastore.get(r);
                case 13:
                  _context187.t1 = _context187.sent;
                  _e115 = (0, _context187.t0)(_context187.t1);
                  _n74 = od.get(this);
                  if (!(null == _n74)) {
                    _context187.next = 18;
                    break;
                  }
                  throw Qt(new Error("dek missing"), ku.ERR_INVALID_PARAMETERS);
                case 18:
                  i = _n74.dek;
                  _context187.next = 21;
                  return Ha(_e115, i);
                case 21:
                  _s30 = _context187.sent;
                  _context187.next = 24;
                  return _s30.export(t);
                case 24:
                  return _context187.abrupt("return", _context187.sent);
                case 27:
                  _context187.prev = 27;
                  _context187.t2 = _context187["catch"](9);
                  _context187.next = 31;
                  return ld();
                case 31:
                  throw _context187.t2;
                case 32:
                case "end":
                  return _context187.stop();
              }
            }, _callee184, this, [[9, 27]]);
          }));
          function exportKey(_x182, _x183) {
            return _exportKey.apply(this, arguments);
          }
          return exportKey;
        }()
      }, {
        key: "exportPeerId",
        value: function () {
          var _exportPeerId = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee185(e) {
            var t, r, n;
            return _regeneratorRuntime().wrap(function _callee185$(_context188) {
              while (1) switch (_context188.prev = _context188.next) {
                case 0:
                  t = "temporary-password";
                  _context188.next = 3;
                  return this.exportKey(e, t);
                case 3:
                  r = _context188.sent;
                  _context188.next = 6;
                  return Ha(r, t);
                case 6:
                  n = _context188.sent;
                  _context188.next = 9;
                  return sc(n.public.bytes, n.bytes);
                case 9:
                  return _context188.abrupt("return", _context188.sent);
                case 10:
                case "end":
                  return _context188.stop();
              }
            }, _callee185, this);
          }));
          function exportPeerId(_x184) {
            return _exportPeerId.apply(this, arguments);
          }
          return exportPeerId;
        }()
      }, {
        key: "importKey",
        value: function () {
          var _importKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee186(e, t, r) {
            var n, i, s, _e116, _r117, o, a;
            return _regeneratorRuntime().wrap(function _callee186$(_context189) {
              while (1) switch (_context189.prev = _context189.next) {
                case 0:
                  if (!(!cd(e) || "self" === e)) {
                    _context189.next = 4;
                    break;
                  }
                  _context189.next = 3;
                  return ld();
                case 3:
                  throw Qt(new Error("Invalid key name '".concat(e, "'")), ku.ERR_INVALID_KEY_NAME);
                case 4:
                  if (!(null == t)) {
                    _context189.next = 8;
                    break;
                  }
                  _context189.next = 7;
                  return ld();
                case 7:
                  throw Qt(new Error("PEM encoded key is required"), ku.ERR_PEM_REQUIRED);
                case 8:
                  n = ud(e);
                  _context189.next = 11;
                  return this.components.datastore.has(n);
                case 11:
                  if (!_context189.sent) {
                    _context189.next = 15;
                    break;
                  }
                  _context189.next = 14;
                  return ld();
                case 14:
                  throw Qt(new Error("Key '".concat(e, "' already exists")), ku.ERR_KEY_ALREADY_EXISTS);
                case 15:
                  _context189.prev = 15;
                  _context189.next = 18;
                  return Ha(t, r);
                case 18:
                  i = _context189.sent;
                  _context189.next = 26;
                  break;
                case 21:
                  _context189.prev = 21;
                  _context189.t0 = _context189["catch"](15);
                  _context189.next = 25;
                  return ld();
                case 25:
                  throw Qt(new Error("Cannot read the key, most likely the password is wrong"), ku.ERR_CANNOT_READ_KEY);
                case 26:
                  _context189.prev = 26;
                  _context189.next = 29;
                  return i.id();
                case 29:
                  s = _context189.sent;
                  _e116 = od.get(this);
                  if (!(null == _e116)) {
                    _context189.next = 33;
                    break;
                  }
                  throw Qt(new Error("dek missing"), ku.ERR_INVALID_PARAMETERS);
                case 33:
                  _r117 = _e116.dek;
                  _context189.next = 36;
                  return i.export(_r117);
                case 36:
                  t = _context189.sent;
                  _context189.next = 44;
                  break;
                case 39:
                  _context189.prev = 39;
                  _context189.t1 = _context189["catch"](26);
                  _context189.next = 43;
                  return ld();
                case 43:
                  throw _context189.t1;
                case 44:
                  o = {
                    name: e,
                    id: s
                  }, a = this.components.datastore.batch();
                  a.put(n, Pt(t));
                  a.put(hd(e), Pt(JSON.stringify(o)));
                  _context189.next = 49;
                  return a.commit();
                case 49:
                  return _context189.abrupt("return", o);
                case 50:
                case "end":
                  return _context189.stop();
              }
            }, _callee186, this, [[15, 21], [26, 39]]);
          }));
          function importKey(_x185, _x186, _x187) {
            return _importKey.apply(this, arguments);
          }
          return importKey;
        }()
      }, {
        key: "importPeer",
        value: function () {
          var _importPeer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee187(e, t) {
            var _r118, _n75, i, s, _o20, _a10, _c12;
            return _regeneratorRuntime().wrap(function _callee187$(_context190) {
              while (1) switch (_context190.prev = _context190.next) {
                case 0:
                  _context190.prev = 0;
                  if (cd(e)) {
                    _context190.next = 3;
                    break;
                  }
                  throw Qt(new Error("Invalid key name '".concat(e, "'")), ku.ERR_INVALID_KEY_NAME);
                case 3:
                  if (!(null == t)) {
                    _context190.next = 5;
                    break;
                  }
                  throw Qt(new Error("PeerId is required"), ku.ERR_MISSING_PRIVATE_KEY);
                case 5:
                  if (!(null == t.privateKey)) {
                    _context190.next = 7;
                    break;
                  }
                  throw Qt(new Error("PeerId.privKey is required"), ku.ERR_MISSING_PRIVATE_KEY);
                case 7:
                  _context190.next = 9;
                  return ja(t.privateKey);
                case 9:
                  _r118 = _context190.sent;
                  _n75 = ud(e);
                  _context190.next = 13;
                  return this.components.datastore.has(_n75);
                case 13:
                  if (!_context190.sent) {
                    _context190.next = 17;
                    break;
                  }
                  _context190.next = 16;
                  return ld();
                case 16:
                  throw Qt(new Error("Key '".concat(e, "' already exists")), ku.ERR_KEY_ALREADY_EXISTS);
                case 17:
                  i = od.get(this);
                  if (!(null == i)) {
                    _context190.next = 20;
                    break;
                  }
                  throw Qt(new Error("dek missing"), ku.ERR_INVALID_PARAMETERS);
                case 20:
                  s = i.dek;
                  _context190.next = 23;
                  return _r118.export(s);
                case 23:
                  _o20 = _context190.sent;
                  _a10 = {
                    name: e,
                    id: t.toString()
                  };
                  _c12 = this.components.datastore.batch();
                  _c12.put(_n75, Pt(_o20));
                  _c12.put(hd(e), Pt(JSON.stringify(_a10)));
                  _context190.next = 30;
                  return _c12.commit();
                case 30:
                  return _context190.abrupt("return", _a10);
                case 33:
                  _context190.prev = 33;
                  _context190.t0 = _context190["catch"](0);
                  _context190.next = 37;
                  return ld();
                case 37:
                  throw _context190.t0;
                case 38:
                case "end":
                  return _context190.stop();
              }
            }, _callee187, this, [[0, 33]]);
          }));
          function importPeer(_x188, _x189) {
            return _importPeer.apply(this, arguments);
          }
          return importPeer;
        }()
      }, {
        key: "getPrivateKey",
        value: function () {
          var _getPrivateKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee188(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee188$(_context191) {
              while (1) switch (_context191.prev = _context191.next) {
                case 0:
                  if (cd(e)) {
                    _context191.next = 4;
                    break;
                  }
                  _context191.next = 3;
                  return ld();
                case 3:
                  throw Qt(new Error("Invalid key name '".concat(e, "'")), ku.ERR_INVALID_KEY_NAME);
                case 4:
                  _context191.prev = 4;
                  t = ud(e);
                  _context191.t0 = St;
                  _context191.next = 9;
                  return this.components.datastore.get(t);
                case 9:
                  _context191.t1 = _context191.sent;
                  return _context191.abrupt("return", (0, _context191.t0)(_context191.t1));
                case 13:
                  _context191.prev = 13;
                  _context191.t2 = _context191["catch"](4);
                  _context191.next = 17;
                  return ld();
                case 17:
                  nd.error(_context191.t2);
                  throw Qt(new Error("Key '".concat(e, "' does not exist.")), ku.ERR_KEY_NOT_FOUND);
                case 19:
                case "end":
                  return _context191.stop();
              }
            }, _callee188, this, [[4, 13]]);
          }));
          function getPrivateKey(_x190) {
            return _getPrivateKey.apply(this, arguments);
          }
          return getPrivateKey;
        }()
      }, {
        key: "rotateKeychainPass",
        value: function () {
          var _rotateKeychainPass = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee189(e, t) {
            var _this$init$dek9, _this$init$dek10, _this$init$dek11, _this$init$dek12;
            var r, n, i, s, _iterator83, _step83, _e117, _t110, _r119, _s31, _o21, _a11, _c13;
            return _regeneratorRuntime().wrap(function _callee189$(_context192) {
              while (1) switch (_context192.prev = _context192.next) {
                case 0:
                  if (!("string" != typeof e)) {
                    _context192.next = 4;
                    break;
                  }
                  _context192.next = 3;
                  return ld();
                case 3:
                  throw Qt(new Error("Invalid old pass type '".concat(_typeof(e), "'")), ku.ERR_INVALID_OLD_PASS_TYPE);
                case 4:
                  if (!("string" != typeof t)) {
                    _context192.next = 8;
                    break;
                  }
                  _context192.next = 7;
                  return ld();
                case 7:
                  throw Qt(new Error("Invalid new pass type '".concat(_typeof(t), "'")), ku.ERR_INVALID_NEW_PASS_TYPE);
                case 8:
                  if (!(t.length < 20)) {
                    _context192.next = 12;
                    break;
                  }
                  _context192.next = 11;
                  return ld();
                case 11:
                  throw Qt(new Error("Invalid pass length ".concat(t.length)), ku.ERR_INVALID_PASS_LENGTH);
                case 12:
                  nd("recreating keychain");
                  r = od.get(this);
                  if (!(null == r)) {
                    _context192.next = 16;
                    break;
                  }
                  throw Qt(new Error("dek missing"), ku.ERR_INVALID_PARAMETERS);
                case 16:
                  n = r.dek;
                  this.init.pass = t;
                  i = null != t && null != ((_this$init$dek9 = this.init.dek) === null || _this$init$dek9 === void 0 ? void 0 : _this$init$dek9.salt) ? rd(t, this.init.dek.salt, (_this$init$dek10 = this.init.dek) === null || _this$init$dek10 === void 0 ? void 0 : _this$init$dek10.iterationCount, (_this$init$dek11 = this.init.dek) === null || _this$init$dek11 === void 0 ? void 0 : _this$init$dek11.keyLength, (_this$init$dek12 = this.init.dek) === null || _this$init$dek12 === void 0 ? void 0 : _this$init$dek12.hash) : "";
                  od.set(this, {
                    dek: i
                  });
                  _context192.next = 22;
                  return this.listKeys();
                case 22:
                  s = _context192.sent;
                  _iterator83 = _createForOfIteratorHelper(s);
                  _context192.prev = 24;
                  _iterator83.s();
                case 26:
                  if ((_step83 = _iterator83.n()).done) {
                    _context192.next = 48;
                    break;
                  }
                  _e117 = _step83.value;
                  _context192.t0 = St;
                  _context192.next = 31;
                  return this.components.datastore.get(ud(_e117.name));
                case 31:
                  _context192.t1 = _context192.sent;
                  _t110 = (0, _context192.t0)(_context192.t1);
                  _context192.next = 35;
                  return Ha(_t110, n);
                case 35:
                  _r119 = _context192.sent;
                  _s31 = i.toString();
                  _context192.next = 39;
                  return _r119.export(_s31);
                case 39:
                  _o21 = _context192.sent;
                  _a11 = this.components.datastore.batch();
                  _c13 = {
                    name: _e117.name,
                    id: _e117.id
                  };
                  _a11.put(ud(_e117.name), Pt(_o21));
                  _a11.put(hd(_e117.name), Pt(JSON.stringify(_c13)));
                  _context192.next = 46;
                  return _a11.commit();
                case 46:
                  _context192.next = 26;
                  break;
                case 48:
                  _context192.next = 53;
                  break;
                case 50:
                  _context192.prev = 50;
                  _context192.t2 = _context192["catch"](24);
                  _iterator83.e(_context192.t2);
                case 53:
                  _context192.prev = 53;
                  _iterator83.f();
                  return _context192.finish(53);
                case 56:
                  nd("keychain reconstructed");
                case 57:
                case "end":
                  return _context192.stop();
              }
            }, _callee189, this, [[24, 50, 53, 56]]);
          }));
          function rotateKeychainPass(_x191, _x192) {
            return _rotateKeychainPass.apply(this, arguments);
          }
          return rotateKeychainPass;
        }()
      }], [{
        key: "generateOptions",
        value: function generateOptions() {
          var e = Object.assign({}, ad),
            t = 3 * Math.ceil(16 / 3);
          return e.dek.salt = St(po(t), "base64"), e;
        }
      }, {
        key: "options",
        get: function get() {
          return ad;
        }
      }]);
      return dd;
    }();
    function pd(_x193) {
      return _pd.apply(this, arguments);
    }
    function _pd() {
      _pd = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee406(e) {
        return _regeneratorRuntime().wrap(function _callee406$(_context414) {
          while (1) switch (_context414.prev = _context414.next) {
            case 0:
              _context414.prev = 0;
              _context414.next = 3;
              return e;
            case 3:
              _context414.t0 = _context414.sent;
              _context414.t1 = !0;
              _context414.t2 = !1;
              return _context414.abrupt("return", {
                status: "fulfilled",
                value: _context414.t0,
                isFulfilled: _context414.t1,
                isRejected: _context414.t2
              });
            case 9:
              _context414.prev = 9;
              _context414.t3 = _context414["catch"](0);
              return _context414.abrupt("return", {
                status: "rejected",
                reason: _context414.t3,
                isFulfilled: !1,
                isRejected: !0
              });
            case 12:
            case "end":
              return _context414.stop();
          }
        }, _callee406, null, [[0, 9]]);
      }));
      return _pd.apply(this, arguments);
    }
    var fd = /*#__PURE__*/_createClass(function fd(e) {
      _classCallCheck(this, fd);
      _defineProperty(this, "value", void 0);
      _defineProperty(this, "next", void 0);
      this.value = e;
    });
    var _e118 = /*#__PURE__*/new WeakMap();
    var _t111 = /*#__PURE__*/new WeakMap();
    var _r120 = /*#__PURE__*/new WeakMap();
    _Symbol$iterator5 = Symbol.iterator;
    var yd = /*#__PURE__*/function () {
      function yd() {
        _classCallCheck(this, yd);
        _classPrivateFieldInitSpec(this, _e118, {
          writable: true,
          value: void 0
        });
        _classPrivateFieldInitSpec(this, _t111, {
          writable: true,
          value: void 0
        });
        _classPrivateFieldInitSpec(this, _r120, {
          writable: true,
          value: void 0
        });
        this.clear();
      }
      _createClass(yd, [{
        key: "enqueue",
        value: function enqueue(e) {
          var _this$r, _this$r2;
          var t = new fd(e);
          _classPrivateFieldGet(this, _e118) ? (_classPrivateFieldGet(this, _t111).next = t, _classPrivateFieldSet(this, _t111, t)) : (_classPrivateFieldSet(this, _e118, t), _classPrivateFieldSet(this, _t111, t)), (_classPrivateFieldSet(this, _r120, (_this$r = _classPrivateFieldGet(this, _r120), _this$r2 = _this$r++, _this$r)), _this$r2);
        }
      }, {
        key: "dequeue",
        value: function dequeue() {
          var _this$r3, _this$r4;
          var e = _classPrivateFieldGet(this, _e118);
          if (e) return _classPrivateFieldSet(this, _e118, _classPrivateFieldGet(this, _e118).next), (_classPrivateFieldSet(this, _r120, (_this$r3 = _classPrivateFieldGet(this, _r120), _this$r4 = _this$r3--, _this$r3)), _this$r4), e.value;
        }
      }, {
        key: "clear",
        value: function clear() {
          _classPrivateFieldSet(this, _e118, void 0), _classPrivateFieldSet(this, _t111, void 0), _classPrivateFieldSet(this, _r120, 0);
        }
      }, {
        key: "size",
        get: function get() {
          return _classPrivateFieldGet(this, _r120);
        }
      }, {
        key: _Symbol$iterator5,
        value: /*#__PURE__*/_regeneratorRuntime().mark(function value() {
          var e;
          return _regeneratorRuntime().wrap(function value$(_context193) {
            while (1) switch (_context193.prev = _context193.next) {
              case 0:
                e = _classPrivateFieldGet(this, _e118);
              case 1:
                if (!e) {
                  _context193.next = 7;
                  break;
                }
                _context193.next = 4;
                return e.value;
              case 4:
                e = e.next;
              case 5:
                _context193.next = 1;
                break;
              case 7:
              case "end":
                return _context193.stop();
            }
          }, value, this);
        })
      }]);
      return yd;
    }();
    function gd(e) {
      if (!Number.isInteger(e) && e !== Number.POSITIVE_INFINITY || !(e > 0)) throw new TypeError("Expected `concurrency` to be a number from 1 and up");
      var t = new yd();
      var r = 0;
      var n = /*#__PURE__*/function () {
          var _ref89 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee191(e, _n76, i) {
            var s;
            return _regeneratorRuntime().wrap(function _callee191$(_context195) {
              while (1) switch (_context195.prev = _context195.next) {
                case 0:
                  r++;
                  s = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee190() {
                    return _regeneratorRuntime().wrap(function _callee190$(_context194) {
                      while (1) switch (_context194.prev = _context194.next) {
                        case 0:
                          return _context194.abrupt("return", e.apply(void 0, _toConsumableArray(i)));
                        case 1:
                        case "end":
                          return _context194.stop();
                      }
                    }, _callee190);
                  }))();
                  _n76(s);
                  _context195.prev = 3;
                  _context195.next = 6;
                  return s;
                case 6:
                  _context195.next = 10;
                  break;
                case 8:
                  _context195.prev = 8;
                  _context195.t0 = _context195["catch"](3);
                case 10:
                  r--, t.size > 0 && t.dequeue()();
                case 11:
                case "end":
                  return _context195.stop();
              }
            }, _callee191, null, [[3, 8]]);
          }));
          return function n(_x194, _x195, _x196) {
            return _ref89.apply(this, arguments);
          };
        }(),
        i = function i(_i47) {
          for (var _len24 = arguments.length, s = new Array(_len24 > 1 ? _len24 - 1 : 0), _key24 = 1; _key24 < _len24; _key24++) {
            s[_key24 - 1] = arguments[_key24];
          }
          return new Promise(function (o) {
            (function (i, s, o) {
              t.enqueue(n.bind(void 0, i, s, o)), _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee192() {
                return _regeneratorRuntime().wrap(function _callee192$(_context196) {
                  while (1) switch (_context196.prev = _context196.next) {
                    case 0:
                      _context196.next = 2;
                      return Promise.resolve();
                    case 2:
                      r < e && t.size > 0 && t.dequeue()();
                    case 3:
                    case "end":
                      return _context196.stop();
                  }
                }, _callee192);
              }))();
            })(_i47, o, s);
          });
        };
      return Object.defineProperties(i, {
        activeCount: {
          get: function get() {
            return r;
          }
        },
        pendingCount: {
          get: function get() {
            return t.size;
          }
        },
        clearQueue: {
          value: function value() {
            t.clear();
          }
        }
      }), i;
    }
    function md(_x197) {
      return _md.apply(this, arguments);
    }
    function _md() {
      _md = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee407(e) {
        var t,
          _t$concurrency,
          r,
          n,
          _args415 = arguments;
        return _regeneratorRuntime().wrap(function _callee407$(_context415) {
          while (1) switch (_context415.prev = _context415.next) {
            case 0:
              t = _args415.length > 1 && _args415[1] !== undefined ? _args415[1] : {};
              _t$concurrency = t.concurrency, r = _t$concurrency === void 0 ? Number.POSITIVE_INFINITY : _t$concurrency, n = gd(r);
              return _context415.abrupt("return", Promise.all(e.map(function (e) {
                return e && "function" == typeof e.then ? pd(e) : pd("function" == typeof e ? n(function () {
                  return e();
                }) : Promise.resolve(e));
              })));
            case 3:
            case "end":
              return _context415.stop();
          }
        }, _callee407);
      }));
      return _md.apply(this, arguments);
    }
    var wd = /*#__PURE__*/function (_Map) {
      _inherits(wd, _Map);
      var _super39 = _createSuper(wd);
      function wd(e) {
        var _this130;
        _classCallCheck(this, wd);
        _this130 = _super39.call(this);
        var t = e.name,
          r = e.metrics;
        _this130.metric = r.registerMetric(t), _this130.updateComponentMetric();
        return _this130;
      }
      _createClass(wd, [{
        key: "set",
        value: function set(e, t) {
          return _get2(_getPrototypeOf(wd.prototype), "set", this).call(this, e, t), this.updateComponentMetric(), this;
        }
      }, {
        key: "delete",
        value: function _delete(e) {
          var t = _get2(_getPrototypeOf(wd.prototype), "delete", this).call(this, e);
          return this.updateComponentMetric(), t;
        }
      }, {
        key: "clear",
        value: function clear() {
          _get2(_getPrototypeOf(wd.prototype), "clear", this).call(this), this.updateComponentMetric();
        }
      }, {
        key: "updateComponentMetric",
        value: function updateComponentMetric() {
          this.metric.update(this.size);
        }
      }]);
      return wd;
    }( /*#__PURE__*/_wrapNativeSuper(Map));
    function Ed(e) {
      var t = e.name,
        r = e.metrics;
      var n;
      return n = null != r ? new wd({
        name: t,
        metrics: r
      }) : new Map(), n;
    }
    var bd = ne("libp2p:transports");
    var vd = /*#__PURE__*/function (_Wr8) {
      _inherits(vd, _Wr8);
      var _super40 = _createSuper(vd);
      function vd(e) {
        var _t$faultTolerance;
        var _this131;
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        _classCallCheck(this, vd);
        _this131 = _super40.call(this), _this131.components = e, _this131.started = !1, _this131.transports = new Map(), _this131.listeners = Ed({
          name: "libp2p_transport_manager_listeners",
          metrics: _this131.components.metrics
        }), _this131.faultTolerance = (_t$faultTolerance = t.faultTolerance) !== null && _t$faultTolerance !== void 0 ? _t$faultTolerance : En.FATAL_ALL;
        return _this131;
      }
      _createClass(vd, [{
        key: "add",
        value: function add(e) {
          var t = e[Symbol.toStringTag];
          if (null == t) throw Qt(new Error("Transport must have a valid tag"), ku.ERR_INVALID_KEY);
          if (this.transports.has(t)) throw Qt(new Error("There is already a transport with this tag"), ku.ERR_DUPLICATE_TRANSPORT);
          bd("adding transport %s", t), this.transports.set(t, e), this.listeners.has(t) || this.listeners.set(t, []);
        }
      }, {
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "start",
        value: function () {
          var _start8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee193() {
            var e;
            return _regeneratorRuntime().wrap(function _callee193$(_context197) {
              while (1) switch (_context197.prev = _context197.next) {
                case 0:
                  e = this.components.addressManager.getListenAddrs();
                  _context197.next = 3;
                  return this.listen(e);
                case 3:
                  this.started = !0;
                case 4:
                case "end":
                  return _context197.stop();
              }
            }, _callee193, this);
          }));
          function start() {
            return _start8.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee194() {
            var e, _iterator84, _step84, _step84$value, t, _r121, _t112, _iterator85, _step85, _e119;
            return _regeneratorRuntime().wrap(function _callee194$(_context198) {
              while (1) switch (_context198.prev = _context198.next) {
                case 0:
                  e = [];
                  _iterator84 = _createForOfIteratorHelper(this.listeners);
                  try {
                    for (_iterator84.s(); !(_step84 = _iterator84.n()).done;) {
                      _step84$value = _slicedToArray(_step84.value, 2), t = _step84$value[0], _r121 = _step84$value[1];
                      for (bd("closing listeners for %s", t); _r121.length > 0;) {
                        _t112 = _r121.pop();
                        null != _t112 && e.push(_t112.close());
                      }
                    }
                  } catch (err) {
                    _iterator84.e(err);
                  } finally {
                    _iterator84.f();
                  }
                  _context198.next = 5;
                  return Promise.all(e);
                case 5:
                  bd("all listeners closed");
                  _iterator85 = _createForOfIteratorHelper(this.listeners.keys());
                  try {
                    for (_iterator85.s(); !(_step85 = _iterator85.n()).done;) {
                      _e119 = _step85.value;
                      this.listeners.set(_e119, []);
                    }
                  } catch (err) {
                    _iterator85.e(err);
                  } finally {
                    _iterator85.f();
                  }
                  this.started = !1;
                case 9:
                case "end":
                  return _context198.stop();
              }
            }, _callee194, this);
          }));
          function stop() {
            return _stop7.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "dial",
        value: function () {
          var _dial3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee195(e, t) {
            var r;
            return _regeneratorRuntime().wrap(function _callee195$(_context199) {
              while (1) switch (_context199.prev = _context199.next) {
                case 0:
                  r = this.transportForMultiaddr(e);
                  if (!(null == r)) {
                    _context199.next = 3;
                    break;
                  }
                  throw Qt(new Error("No transport available for address ".concat(String(e))), ku.ERR_TRANSPORT_UNAVAILABLE);
                case 3:
                  _context199.prev = 3;
                  _context199.next = 6;
                  return r.dial(e, _objectSpread(_objectSpread({}, t), {}, {
                    upgrader: this.components.upgrader
                  }));
                case 6:
                  return _context199.abrupt("return", _context199.sent);
                case 9:
                  _context199.prev = 9;
                  _context199.t0 = _context199["catch"](3);
                  throw null == _context199.t0.code && (_context199.t0.code = ku.ERR_TRANSPORT_DIAL_FAILED), _context199.t0;
                case 12:
                case "end":
                  return _context199.stop();
              }
            }, _callee195, this, [[3, 9]]);
          }));
          function dial(_x198, _x199) {
            return _dial3.apply(this, arguments);
          }
          return dial;
        }()
      }, {
        key: "getAddrs",
        value: function getAddrs() {
          var e = [];
          var _iterator86 = _createForOfIteratorHelper(this.listeners.values()),
            _step86;
          try {
            for (_iterator86.s(); !(_step86 = _iterator86.n()).done;) {
              var t = _step86.value;
              var _iterator87 = _createForOfIteratorHelper(t),
                _step87;
              try {
                for (_iterator87.s(); !(_step87 = _iterator87.n()).done;) {
                  var _r122 = _step87.value;
                  e = [].concat(_toConsumableArray(e), _toConsumableArray(_r122.getAddrs()));
                }
              } catch (err) {
                _iterator87.e(err);
              } finally {
                _iterator87.f();
              }
            }
          } catch (err) {
            _iterator86.e(err);
          } finally {
            _iterator86.f();
          }
          return e;
        }
      }, {
        key: "getTransports",
        value: function getTransports() {
          return Array.of.apply(Array, _toConsumableArray(this.transports.values()));
        }
      }, {
        key: "transportForMultiaddr",
        value: function transportForMultiaddr(e) {
          var _iterator88 = _createForOfIteratorHelper(this.transports.values()),
            _step88;
          try {
            for (_iterator88.s(); !(_step88 = _iterator88.n()).done;) {
              var t = _step88.value;
              if (t.filter([e]).length > 0) return t;
            }
          } catch (err) {
            _iterator88.e(err);
          } finally {
            _iterator88.f();
          }
        }
      }, {
        key: "listen",
        value: function () {
          var _listen2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee196(e) {
            var _this132 = this;
            var t, _iterator89, _step89, _step89$value, _r123, _n77, i, s, _iterator90, _step90, _loop5, _e120;
            return _regeneratorRuntime().wrap(function _callee196$(_context201) {
              while (1) switch (_context201.prev = _context201.next) {
                case 0:
                  if (!(null == e || 0 === e.length)) {
                    _context201.next = 2;
                    break;
                  }
                  return _context201.abrupt("return", void bd("no addresses were provided for listening, this node is dial only"));
                case 2:
                  t = [];
                  _iterator89 = _createForOfIteratorHelper(this.transports.entries());
                  _context201.prev = 4;
                  _iterator89.s();
                case 6:
                  if ((_step89 = _iterator89.n()).done) {
                    _context201.next = 39;
                    break;
                  }
                  _step89$value = _slicedToArray(_step89.value, 2), _r123 = _step89$value[0], _n77 = _step89$value[1];
                  i = _n77.filter(e), s = [];
                  _iterator90 = _createForOfIteratorHelper(i);
                  _context201.prev = 10;
                  _loop5 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop5() {
                    var e, t, i;
                    return _regeneratorRuntime().wrap(function _loop5$(_context200) {
                      while (1) switch (_context200.prev = _context200.next) {
                        case 0:
                          e = _step90.value;
                          bd("creating listener for %s on %s", _r123, e);
                          t = _n77.createListener({
                            upgrader: _this132.components.upgrader
                          });
                          i = _this132.listeners.get(_r123);
                          null == i && (i = [], _this132.listeners.set(_r123, i)), i.push(t), t.addEventListener("listening", function () {
                            _this132.dispatchEvent(new Qr("listener:listening", {
                              detail: t
                            }));
                          }), t.addEventListener("close", function () {
                            _this132.dispatchEvent(new Qr("listener:close", {
                              detail: t
                            }));
                          }), s.push(t.listen(e));
                        case 5:
                        case "end":
                          return _context200.stop();
                      }
                    }, _loop5);
                  });
                  _iterator90.s();
                case 13:
                  if ((_step90 = _iterator90.n()).done) {
                    _context201.next = 17;
                    break;
                  }
                  return _context201.delegateYield(_loop5(), "t0", 15);
                case 15:
                  _context201.next = 13;
                  break;
                case 17:
                  _context201.next = 22;
                  break;
                case 19:
                  _context201.prev = 19;
                  _context201.t1 = _context201["catch"](10);
                  _iterator90.e(_context201.t1);
                case 22:
                  _context201.prev = 22;
                  _iterator90.f();
                  return _context201.finish(22);
                case 25:
                  if (!(0 !== s.length)) {
                    _context201.next = 36;
                    break;
                  }
                  _context201.next = 28;
                  return md(s);
                case 28:
                  _context201.t3 = _context201.sent.find(function (e) {
                    return e.isFulfilled;
                  });
                  _context201.t2 = null == _context201.t3;
                  if (!_context201.t2) {
                    _context201.next = 32;
                    break;
                  }
                  _context201.t2 = this.faultTolerance !== En.NO_FATAL;
                case 32:
                  if (!_context201.t2) {
                    _context201.next = 34;
                    break;
                  }
                  throw Qt(new Error("Transport (".concat(_r123, ") could not listen on any available address")), ku.ERR_NO_VALID_ADDRESSES);
                case 34:
                  _context201.next = 37;
                  break;
                case 36:
                  t.push(_r123);
                case 37:
                  _context201.next = 6;
                  break;
                case 39:
                  _context201.next = 44;
                  break;
                case 41:
                  _context201.prev = 41;
                  _context201.t4 = _context201["catch"](4);
                  _iterator89.e(_context201.t4);
                case 44:
                  _context201.prev = 44;
                  _iterator89.f();
                  return _context201.finish(44);
                case 47:
                  if (!(t.length === this.transports.size)) {
                    _context201.next = 52;
                    break;
                  }
                  _e120 = "no valid addresses were provided for transports [".concat(t.join(", "), "]");
                  if (!(this.faultTolerance === En.FATAL_ALL)) {
                    _context201.next = 51;
                    break;
                  }
                  throw Qt(new Error(_e120), ku.ERR_NO_VALID_ADDRESSES);
                case 51:
                  bd("libp2p in dial mode only: ".concat(_e120));
                case 52:
                case "end":
                  return _context201.stop();
              }
            }, _callee196, this, [[4, 41, 44, 47], [10, 19, 22, 25]]);
          }));
          function listen(_x200) {
            return _listen2.apply(this, arguments);
          }
          return listen;
        }()
      }, {
        key: "remove",
        value: function () {
          var _remove = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee197(e) {
            var _this$listeners$get;
            var _iterator91, _step91, t;
            return _regeneratorRuntime().wrap(function _callee197$(_context202) {
              while (1) switch (_context202.prev = _context202.next) {
                case 0:
                  bd("removing %s", e);
                  _iterator91 = _createForOfIteratorHelper((_this$listeners$get = this.listeners.get(e)) !== null && _this$listeners$get !== void 0 ? _this$listeners$get : []);
                  _context202.prev = 2;
                  _iterator91.s();
                case 4:
                  if ((_step91 = _iterator91.n()).done) {
                    _context202.next = 10;
                    break;
                  }
                  t = _step91.value;
                  _context202.next = 8;
                  return t.close();
                case 8:
                  _context202.next = 4;
                  break;
                case 10:
                  _context202.next = 15;
                  break;
                case 12:
                  _context202.prev = 12;
                  _context202.t0 = _context202["catch"](2);
                  _iterator91.e(_context202.t0);
                case 15:
                  _context202.prev = 15;
                  _iterator91.f();
                  return _context202.finish(15);
                case 18:
                  this.transports.delete(e), this.listeners.delete(e);
                case 19:
                case "end":
                  return _context202.stop();
              }
            }, _callee197, this, [[2, 12, 15, 18]]);
          }));
          function remove(_x201) {
            return _remove.apply(this, arguments);
          }
          return remove;
        }()
      }, {
        key: "removeAll",
        value: function () {
          var _removeAll = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee198() {
            var e, _iterator92, _step92, t;
            return _regeneratorRuntime().wrap(function _callee198$(_context203) {
              while (1) switch (_context203.prev = _context203.next) {
                case 0:
                  e = [];
                  _iterator92 = _createForOfIteratorHelper(this.transports.keys());
                  try {
                    for (_iterator92.s(); !(_step92 = _iterator92.n()).done;) {
                      t = _step92.value;
                      e.push(this.remove(t));
                    }
                  } catch (err) {
                    _iterator92.e(err);
                  } finally {
                    _iterator92.f();
                  }
                  _context203.next = 5;
                  return Promise.all(e);
                case 5:
                case "end":
                  return _context203.stop();
              }
            }, _callee198, this);
          }));
          function removeAll() {
            return _removeAll.apply(this, arguments);
          }
          return removeAll;
        }()
      }]);
      return vd;
    }(Wr);
    var _d = "/multistream/1.0.0",
      Sd = 1024,
      Cd = ne("libp2p:mss"),
      Ad = Pt("\n");
    function Id(e) {
      var t = new In(e, Ad);
      return hi.single(t);
    }
    function Td(e, t) {
      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var n = Id(t);
      !0 === r.writeBytes ? e.push(n.subarray()) : e.push(n);
    }
    function Rd(_x202, _x203) {
      return _Rd.apply(this, arguments);
    }
    function _Rd() {
      _Rd = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee411(e, t) {
        var r;
        return _regeneratorRuntime().wrap(function _callee411$(_context419) {
          while (1) switch (_context419.prev = _context419.next) {
            case 0:
              _context419.next = 2;
              return function () {
                var _ref172 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee410(e, t) {
                  var _n86;
                  var r, n, i, s;
                  return _regeneratorRuntime().wrap(function _callee410$(_context418) {
                    while (1) switch (_context418.prev = _context418.next) {
                      case 0:
                        r = 1;
                        n = (_n86 = {}, _defineProperty(_n86, Symbol.asyncIterator, function () {
                          return n;
                        }), _defineProperty(_n86, "next", function () {
                          var _next3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee408() {
                            return _regeneratorRuntime().wrap(function _callee408$(_context416) {
                              while (1) switch (_context416.prev = _context416.next) {
                                case 0:
                                  _context416.next = 2;
                                  return e.next(r);
                                case 2:
                                  return _context416.abrupt("return", _context416.sent);
                                case 3:
                                case "end":
                                  return _context416.stop();
                              }
                            }, _callee408);
                          }));
                          function next() {
                            return _next3.apply(this, arguments);
                          }
                          return next;
                        }()), _n86);
                        i = n;
                        null != (t === null || t === void 0 ? void 0 : t.signal) && (i = qr(n, t.signal));
                        _context418.next = 6;
                        return Ci(i, gi({
                          onLength: function onLength(e) {
                            r = e;
                          },
                          maxDataLength: Sd
                        }), /*#__PURE__*/function () {
                          var _ref173 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee409(e) {
                            return _regeneratorRuntime().wrap(function _callee409$(_context417) {
                              while (1) switch (_context417.prev = _context417.next) {
                                case 0:
                                  _context417.next = 2;
                                  return Bu(e);
                                case 2:
                                  return _context417.abrupt("return", _context417.sent);
                                case 3:
                                case "end":
                                  return _context417.stop();
                              }
                            }, _callee409);
                          }));
                          return function (_x392) {
                            return _ref173.apply(this, arguments);
                          };
                        }());
                      case 6:
                        s = _context418.sent;
                        if (!(null == s || 0 === s.length)) {
                          _context418.next = 9;
                          break;
                        }
                        throw Qt(new Error("no buffer returned"), "ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");
                      case 9:
                        if (!(s.get(s.byteLength - 1) !== Ad[0])) {
                          _context418.next = 11;
                          break;
                        }
                        throw Cd.error("Invalid mss message - missing newline - %s", s.subarray()), Qt(new Error("missing newline"), "ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");
                      case 11:
                        return _context418.abrupt("return", s.sublist(0, -1));
                      case 12:
                      case "end":
                        return _context418.stop();
                    }
                  }, _callee410);
                }));
                return function (_x390, _x391) {
                  return _ref172.apply(this, arguments);
                };
              }()(e, t);
            case 2:
              r = _context419.sent;
              return _context419.abrupt("return", St(r.subarray()));
            case 4:
            case "end":
              return _context419.stop();
          }
        }, _callee411);
      }));
      return _Rd.apply(this, arguments);
    }
    var kd = ne("libp2p:mss:select");
    function Nd(_x204, _x205) {
      return _Nd.apply(this, arguments);
    }
    function _Nd() {
      _Nd = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee412(e, t) {
        var r,
          _Qn,
          n,
          i,
          s,
          o,
          a,
          c,
          _iterator123,
          _step123,
          _e155,
          _t141,
          _args420 = arguments;
        return _regeneratorRuntime().wrap(function _callee412$(_context420) {
          while (1) switch (_context420.prev = _context420.next) {
            case 0:
              r = _args420.length > 2 && _args420[2] !== undefined ? _args420[2] : {};
              t = Array.isArray(t) ? _toConsumableArray(t) : [t];
              _Qn = Qn(e), n = _Qn.reader, i = _Qn.writer, s = _Qn.rest, o = _Qn.stream, a = t.shift();
              if (!(null == a)) {
                _context420.next = 5;
                break;
              }
              throw new Error("At least one protocol must be specified");
            case 5:
              kd('select: write ["%s", "%s"]', _d, a), function (e, t) {
                var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
                var n = new In();
                var _iterator122 = _createForOfIteratorHelper(t),
                  _step122;
                try {
                  for (_iterator122.s(); !(_step122 = _iterator122.n()).done;) {
                    var _e154 = _step122.value;
                    n.append(Id(_e154));
                  }
                } catch (err) {
                  _iterator122.e(err);
                } finally {
                  _iterator122.f();
                }
                !0 === r.writeBytes ? e.push(n.subarray()) : e.push(n);
              }(i, [Pt(_d), Pt(a)], r);
              _context420.next = 8;
              return Rd(n, r);
            case 8:
              c = _context420.sent;
              kd('select: read "%s"', c);
              _context420.t0 = c === _d;
              if (!_context420.t0) {
                _context420.next = 16;
                break;
              }
              _context420.next = 14;
              return Rd(n, r);
            case 14:
              c = _context420.sent;
              kd('select: read "%s"', c);
            case 16:
              if (!(c === a)) {
                _context420.next = 18;
                break;
              }
              return _context420.abrupt("return", (s(), {
                stream: o,
                protocol: a
              }));
            case 18:
              _iterator123 = _createForOfIteratorHelper(t);
              _context420.prev = 19;
              _iterator123.s();
            case 21:
              if ((_step123 = _iterator123.n()).done) {
                _context420.next = 31;
                break;
              }
              _e155 = _step123.value;
              kd('select: write "%s"', _e155), Td(i, Pt(_e155), r);
              _context420.next = 26;
              return Rd(n, r);
            case 26:
              _t141 = _context420.sent;
              if (!(kd('select: read "%s" for "%s"', _t141, _e155), _t141 === _e155)) {
                _context420.next = 29;
                break;
              }
              return _context420.abrupt("return", (s(), {
                stream: o,
                protocol: _e155
              }));
            case 29:
              _context420.next = 21;
              break;
            case 31:
              _context420.next = 36;
              break;
            case 33:
              _context420.prev = 33;
              _context420.t1 = _context420["catch"](19);
              _iterator123.e(_context420.t1);
            case 36:
              _context420.prev = 36;
              _iterator123.f();
              return _context420.finish(36);
            case 39:
              throw s(), Qt(new Error("protocol selection failed"), "ERR_UNSUPPORTED_PROTOCOL");
            case 40:
            case "end":
              return _context420.stop();
          }
        }, _callee412, null, [[19, 33, 36, 39]]);
      }));
      return _Nd.apply(this, arguments);
    }
    var Ld = ne("libp2p:mss:handle");
    function Dd(_x206, _x207, _x208) {
      return _Dd.apply(this, arguments);
    }
    function _Dd() {
      _Dd = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee413(e, t, r) {
        var _Qn2, n, i, s, o, _e156;
        return _regeneratorRuntime().wrap(function _callee413$(_context421) {
          while (1) switch (_context421.prev = _context421.next) {
            case 0:
              t = Array.isArray(t) ? t : [t];
              _Qn2 = Qn(e), n = _Qn2.writer, i = _Qn2.reader, s = _Qn2.rest, o = _Qn2.stream;
            case 2:
              _context421.next = 4;
              return Rd(i, r);
            case 4:
              _e156 = _context421.sent;
              if (!(Ld('read "%s"', _e156), _e156 !== _d)) {
                _context421.next = 11;
                break;
              }
              if (!t.includes(_e156)) {
                _context421.next = 8;
                break;
              }
              return _context421.abrupt("return", (Td(n, Pt(_e156), r), Ld('respond with "%s" for "%s"', _e156, _e156), s(), {
                stream: o,
                protocol: _e156
              }));
            case 8:
              "ls" !== _e156 ? (Td(n, Pt("na"), r), Ld('respond with "na" for "%s"', _e156)) : (Td(n, _construct(In, _toConsumableArray(t.map(function (e) {
                return Id(Pt(e));
              }))), r), Ld('respond with "%s" for %s', t, _e156));
              _context421.next = 12;
              break;
            case 11:
              Ld('respond with "%s" for "%s"', _d, _e156), Td(n, Pt(_d), r);
            case 12:
              _context421.next = 2;
              break;
            case 14:
            case "end":
              return _context421.stop();
          }
        }, _callee413);
      }));
      return _Dd.apply(this, arguments);
    }
    var Pd = Symbol.for("@libp2p/connection"),
      Bd = ne("libp2p:connection");
    var Od = /*#__PURE__*/function (_Symbol$toStringTag9) {
      function Od(e) {
        _classCallCheck(this, Od);
        var t = e.remoteAddr,
          r = e.remotePeer,
          n = e.newStream,
          i = e.close,
          s = e.getStreams,
          o = e.stat;
        this.id = "".concat(parseInt(String(1e9 * Math.random())).toString(36)).concat(Date.now()), this.remoteAddr = t, this.remotePeer = r, this.stat = _objectSpread(_objectSpread({}, o), {}, {
          status: Gu
        }), this._newStream = n, this._close = i, this._getStreams = s, this.tags = [], this._closing = !1;
      }
      _createClass(Od, [{
        key: _Symbol$toStringTag9,
        get: function get() {
          return "Connection";
        }
      }, {
        key: Pd,
        get: function get() {
          return !0;
        }
      }, {
        key: "streams",
        get: function get() {
          return this._getStreams();
        }
      }, {
        key: "newStream",
        value: function () {
          var _newStream2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee199(e, t) {
            var r;
            return _regeneratorRuntime().wrap(function _callee199$(_context204) {
              while (1) switch (_context204.prev = _context204.next) {
                case 0:
                  if (!(this.stat.status === Wu)) {
                    _context204.next = 2;
                    break;
                  }
                  throw Qt(new Error("the connection is being closed"), "ERR_CONNECTION_BEING_CLOSED");
                case 2:
                  if (!(this.stat.status === Yu)) {
                    _context204.next = 4;
                    break;
                  }
                  throw Qt(new Error("the connection is closed"), "ERR_CONNECTION_CLOSED");
                case 4:
                  Array.isArray(e) || (e = [e]);
                  _context204.next = 7;
                  return this._newStream(e, t);
                case 7:
                  r = _context204.sent;
                  return _context204.abrupt("return", (r.stat.direction = "outbound", r));
                case 9:
                case "end":
                  return _context204.stop();
              }
            }, _callee199, this);
          }));
          function newStream(_x209, _x210) {
            return _newStream2.apply(this, arguments);
          }
          return newStream;
        }()
      }, {
        key: "addStream",
        value: function addStream(e) {
          e.stat.direction = "inbound";
        }
      }, {
        key: "removeStream",
        value: function removeStream(e) {}
      }, {
        key: "close",
        value: function () {
          var _close4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee200() {
            return _regeneratorRuntime().wrap(function _callee200$(_context205) {
              while (1) switch (_context205.prev = _context205.next) {
                case 0:
                  if (!(this.stat.status !== Yu && !this._closing)) {
                    _context205.next = 9;
                    break;
                  }
                  this.stat.status = Wu;
                  try {
                    this.streams.forEach(function (e) {
                      return e.close();
                    });
                  } catch (e) {
                    Bd.error(e);
                  }
                  this._closing = !0;
                  _context205.next = 6;
                  return this._close();
                case 6:
                  this._closing = !1;
                  this.stat.timeline.close = Date.now();
                  this.stat.status = Yu;
                case 9:
                case "end":
                  return _context205.stop();
              }
            }, _callee200, this);
          }));
          function close() {
            return _close4.apply(this, arguments);
          }
          return close;
        }()
      }]);
      return Od;
    }(Symbol.toStringTag);
    var xd = Symbol.for("@libp2p/topology"),
      Ud = ne("libp2p:registrar");
    var Md = /*#__PURE__*/function () {
      function Md(e) {
        _classCallCheck(this, Md);
        this.topologies = new Map(), this.handlers = new Map(), this.components = e, this._onDisconnect = this._onDisconnect.bind(this), this._onProtocolChange = this._onProtocolChange.bind(this), this._onConnect = this._onConnect.bind(this), this.components.connectionManager.addEventListener("peer:disconnect", this._onDisconnect), this.components.connectionManager.addEventListener("peer:connect", this._onConnect), this.components.peerStore.addEventListener("change:protocols", this._onProtocolChange);
      }
      _createClass(Md, [{
        key: "getProtocols",
        value: function getProtocols() {
          return Array.from(new Set([].concat(_toConsumableArray(this.topologies.keys()), _toConsumableArray(this.handlers.keys())))).sort();
        }
      }, {
        key: "getHandler",
        value: function getHandler(e) {
          var t = this.handlers.get(e);
          if (null == t) throw Qt(new Error("No handler registered for protocol ".concat(e)), ku.ERR_NO_HANDLER_FOR_PROTOCOL);
          return t;
        }
      }, {
        key: "getTopologies",
        value: function getTopologies(e) {
          var t = this.topologies.get(e);
          return null == t ? [] : _toConsumableArray(t.values());
        }
      }, {
        key: "handle",
        value: function () {
          var _handle = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee201(e, t, r) {
            var n;
            return _regeneratorRuntime().wrap(function _callee201$(_context206) {
              while (1) switch (_context206.prev = _context206.next) {
                case 0:
                  if (!this.handlers.has(e)) {
                    _context206.next = 2;
                    break;
                  }
                  throw Qt(new Error("Handler already registered for protocol ".concat(e)), ku.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);
                case 2:
                  n = qu.bind({
                    ignoreUndefined: !0
                  })({
                    maxInboundStreams: 32,
                    maxOutboundStreams: 64
                  }, r);
                  this.handlers.set(e, {
                    handler: t,
                    options: n
                  });
                  _context206.next = 6;
                  return this.components.peerStore.protoBook.add(this.components.peerId, [e]);
                case 6:
                case "end":
                  return _context206.stop();
              }
            }, _callee201, this);
          }));
          function handle(_x211, _x212, _x213) {
            return _handle.apply(this, arguments);
          }
          return handle;
        }()
      }, {
        key: "unhandle",
        value: function () {
          var _unhandle = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee202(e) {
            var _this133 = this;
            var t;
            return _regeneratorRuntime().wrap(function _callee202$(_context207) {
              while (1) switch (_context207.prev = _context207.next) {
                case 0:
                  t = Array.isArray(e) ? e : [e];
                  t.forEach(function (e) {
                    _this133.handlers.delete(e);
                  });
                  _context207.next = 4;
                  return this.components.peerStore.protoBook.remove(this.components.peerId, t);
                case 4:
                case "end":
                  return _context207.stop();
              }
            }, _callee202, this);
          }));
          function unhandle(_x214) {
            return _unhandle.apply(this, arguments);
          }
          return unhandle;
        }()
      }, {
        key: "register",
        value: function () {
          var _register = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee203(e, t) {
            var r, n, i;
            return _regeneratorRuntime().wrap(function _callee203$(_context208) {
              while (1) switch (_context208.prev = _context208.next) {
                case 0:
                  if (!(null == (r = t) || !Boolean(r[xd]))) {
                    _context208.next = 2;
                    break;
                  }
                  throw Ud.error("topology must be an instance of interfaces/topology"), Qt(new Error("topology must be an instance of interfaces/topology"), ku.ERR_INVALID_PARAMETERS);
                case 2:
                  n = "".concat((1e9 * Math.random()).toString(36)).concat(Date.now());
                  i = this.topologies.get(e);
                  null == i && (i = new Map(), this.topologies.set(e, i));
                  i.set(n, t);
                  _context208.next = 8;
                  return t.setRegistrar(this);
                case 8:
                  return _context208.abrupt("return", n);
                case 9:
                case "end":
                  return _context208.stop();
              }
            }, _callee203, this);
          }));
          function register(_x215, _x216) {
            return _register.apply(this, arguments);
          }
          return register;
        }()
      }, {
        key: "unregister",
        value: function unregister(e) {
          var _iterator93 = _createForOfIteratorHelper(this.topologies.entries()),
            _step93;
          try {
            for (_iterator93.s(); !(_step93 = _iterator93.n()).done;) {
              var _step93$value = _slicedToArray(_step93.value, 2),
                t = _step93$value[0],
                r = _step93$value[1];
              r.has(e) && (r.delete(e), 0 === r.size && this.topologies.delete(t));
            }
          } catch (err) {
            _iterator93.e(err);
          } finally {
            _iterator93.f();
          }
        }
      }, {
        key: "_onDisconnect",
        value: function _onDisconnect(e) {
          var _this134 = this;
          var t = e.detail;
          this.components.peerStore.protoBook.get(t.remotePeer).then(function (e) {
            var _iterator94 = _createForOfIteratorHelper(e),
              _step94;
            try {
              for (_iterator94.s(); !(_step94 = _iterator94.n()).done;) {
                var r = _step94.value;
                var _e121 = _this134.topologies.get(r);
                if (null != _e121) {
                  var _iterator95 = _createForOfIteratorHelper(_e121.values()),
                    _step95;
                  try {
                    for (_iterator95.s(); !(_step95 = _iterator95.n()).done;) {
                      var _r124 = _step95.value;
                      _r124.onDisconnect(t.remotePeer);
                    }
                  } catch (err) {
                    _iterator95.e(err);
                  } finally {
                    _iterator95.f();
                  }
                }
              }
            } catch (err) {
              _iterator94.e(err);
            } finally {
              _iterator94.f();
            }
          }).catch(function (e) {
            Ud.error(e);
          });
        }
      }, {
        key: "_onConnect",
        value: function _onConnect(e) {
          var _this135 = this;
          var t = e.detail;
          this.components.peerStore.protoBook.get(t.remotePeer).then(function (e) {
            var _iterator96 = _createForOfIteratorHelper(e),
              _step96;
            try {
              for (_iterator96.s(); !(_step96 = _iterator96.n()).done;) {
                var r = _step96.value;
                var _e122 = _this135.topologies.get(r);
                if (null != _e122) {
                  var _iterator97 = _createForOfIteratorHelper(_e122.values()),
                    _step97;
                  try {
                    for (_iterator97.s(); !(_step97 = _iterator97.n()).done;) {
                      var _r125 = _step97.value;
                      _r125.onConnect(t.remotePeer, t);
                    }
                  } catch (err) {
                    _iterator97.e(err);
                  } finally {
                    _iterator97.f();
                  }
                }
              }
            } catch (err) {
              _iterator96.e(err);
            } finally {
              _iterator96.f();
            }
          }).catch(function (e) {
            Ud.error(e);
          });
        }
      }, {
        key: "_onProtocolChange",
        value: function _onProtocolChange(e) {
          var _e$detail2 = e.detail,
            t = _e$detail2.peerId,
            r = _e$detail2.protocols,
            n = _e$detail2.oldProtocols,
            i = n.filter(function (e) {
              return !r.includes(e);
            }),
            s = r.filter(function (e) {
              return !n.includes(e);
            });
          var _iterator98 = _createForOfIteratorHelper(i),
            _step98;
          try {
            for (_iterator98.s(); !(_step98 = _iterator98.n()).done;) {
              var _e123 = _step98.value;
              var _r126 = this.topologies.get(_e123);
              if (null != _r126) {
                var _iterator100 = _createForOfIteratorHelper(_r126.values()),
                  _step100;
                try {
                  for (_iterator100.s(); !(_step100 = _iterator100.n()).done;) {
                    var _e124 = _step100.value;
                    _e124.onDisconnect(t);
                  }
                } catch (err) {
                  _iterator100.e(err);
                } finally {
                  _iterator100.f();
                }
              }
            }
          } catch (err) {
            _iterator98.e(err);
          } finally {
            _iterator98.f();
          }
          var _iterator99 = _createForOfIteratorHelper(s),
            _step99;
          try {
            for (_iterator99.s(); !(_step99 = _iterator99.n()).done;) {
              var _e125 = _step99.value;
              var _r127 = this.topologies.get(_e125);
              if (null != _r127) {
                var _iterator101 = _createForOfIteratorHelper(_r127.values()),
                  _step101;
                try {
                  for (_iterator101.s(); !(_step101 = _iterator101.n()).done;) {
                    var _e126 = _step101.value;
                    var _r128 = this.components.connectionManager.getConnections(t)[0];
                    null != _r128 && _e126.onConnect(t, _r128);
                  }
                } catch (err) {
                  _iterator101.e(err);
                } finally {
                  _iterator101.f();
                }
              }
            }
          } catch (err) {
            _iterator99.e(err);
          } finally {
            _iterator99.f();
          }
        }
      }]);
      return Md;
    }();
    var Vd = ne("libp2p:upgrader");
    function Kd(e, t, r) {
      var n = 0;
      return r.streams.forEach(function (r) {
        r.stat.direction === t && r.stat.protocol === e && n++;
      }), n;
    }
    var Fd = /*#__PURE__*/function (_Wr9) {
      _inherits(Fd, _Wr9);
      var _super41 = _createSuper(Fd);
      function Fd(e, t) {
        var _this136;
        _classCallCheck(this, Fd);
        _this136 = _super41.call(this), _this136.components = e, _this136.connectionEncryption = new Map(), t.connectionEncryption.forEach(function (e) {
          _this136.connectionEncryption.set(e.protocol, e);
        }), _this136.muxers = new Map(), t.muxers.forEach(function (e) {
          _this136.muxers.set(e.protocol, e);
        }), _this136.inboundUpgradeTimeout = t.inboundUpgradeTimeout;
        return _this136;
      }
      _createClass(Fd, [{
        key: "upgradeInbound",
        value: function () {
          var _upgradeInbound = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee204(e, t) {
            var r, n, i, s, o, a, _ref92, _this$components$metr4, _c14, _l7, _t113, _yield$this$_encryptI, _t114, _r129, _e127;
            return _regeneratorRuntime().wrap(function _callee204$(_context209) {
              while (1) switch (_context209.prev = _context209.next) {
                case 0:
                  _context209.next = 2;
                  return this.components.connectionManager.acceptIncomingConnection(e);
                case 2:
                  if (_context209.sent) {
                    _context209.next = 4;
                    break;
                  }
                  throw Qt(new Error("connection denied"), ku.ERR_CONNECTION_DENIED);
                case 4:
                  a = new Pu.TimeoutController(this.inboundUpgradeTimeout);
                  try {
                    (_ref92 = (0, xu.setMaxListeners)) === null || _ref92 === void 0 ? void 0 : _ref92(1 / 0, a.signal);
                  } catch (_unused12) {}
                  _context209.prev = 6;
                  _c14 = Hr(e, a.signal);
                  e.source = _c14.source;
                  e.sink = _c14.sink;
                  _context209.next = 12;
                  return this.components.connectionGater.denyInboundConnection(e);
                case 12:
                  if (!_context209.sent) {
                    _context209.next = 14;
                    break;
                  }
                  throw Qt(new Error("The multiaddr connection is blocked by gater.acceptConnection"), ku.ERR_CONNECTION_INTERCEPTED);
                case 14:
                  (_this$components$metr4 = this.components.metrics) !== null && _this$components$metr4 !== void 0 && _this$components$metr4.trackMultiaddrConnection(e), Vd("starting the inbound connection upgrade");
                  _l7 = e;
                  if (!(!0 !== (t === null || t === void 0 ? void 0 : t.skipProtection))) {
                    _context209.next = 24;
                    break;
                  }
                  _t113 = this.components.connectionProtector;
                  _context209.t0 = null != _t113;
                  if (!_context209.t0) {
                    _context209.next = 24;
                    break;
                  }
                  Vd("protecting the inbound connection");
                  _context209.next = 23;
                  return _t113.protect(e);
                case 23:
                  _l7 = _context209.sent;
                case 24:
                  _context209.prev = 24;
                  if (!(r = _l7, !0 !== (t === null || t === void 0 ? void 0 : t.skipEncryption))) {
                    _context209.next = 38;
                    break;
                  }
                  _context209.next = 28;
                  return this._encryptInbound(_l7);
                case 28:
                  _yield$this$_encryptI = _context209.sent;
                  r = _yield$this$_encryptI.conn;
                  n = _yield$this$_encryptI.remotePeer;
                  o = _yield$this$_encryptI.protocol;
                  _context209.next = 34;
                  return this.components.connectionGater.denyInboundEncryptedConnection(n, _objectSpread(_objectSpread({}, _l7), r));
                case 34:
                  if (!_context209.sent) {
                    _context209.next = 36;
                    break;
                  }
                  throw Qt(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"), ku.ERR_CONNECTION_INTERCEPTED);
                case 36:
                  _context209.next = 43;
                  break;
                case 38:
                  _t114 = e.remoteAddr.getPeerId();
                  if (!(null == _t114)) {
                    _context209.next = 41;
                    break;
                  }
                  throw Qt(new Error("inbound connection that skipped encryption must have a peer id"), ku.ERR_INVALID_MULTIADDR);
                case 41:
                  _r129 = nc(_t114);
                  o = "native", n = _r129;
                case 43:
                  if (!(i = r, null != (t === null || t === void 0 ? void 0 : t.muxerFactory))) {
                    _context209.next = 47;
                    break;
                  }
                  s = t.muxerFactory;
                  _context209.next = 52;
                  break;
                case 47:
                  if (!(this.muxers.size > 0)) {
                    _context209.next = 52;
                    break;
                  }
                  _context209.next = 50;
                  return this._multiplexInbound(_objectSpread(_objectSpread({}, _l7), r), this.muxers);
                case 50:
                  _e127 = _context209.sent;
                  s = _e127.muxerFactory, i = _e127.stream;
                case 52:
                  _context209.next = 57;
                  break;
                case 54:
                  _context209.prev = 54;
                  _context209.t1 = _context209["catch"](24);
                  throw Vd.error("Failed to upgrade inbound connection", _context209.t1), _context209.t1;
                case 57:
                  _context209.next = 59;
                  return this.components.connectionGater.denyInboundUpgradedConnection(n, _objectSpread(_objectSpread({}, _l7), r));
                case 59:
                  if (!_context209.sent) {
                    _context209.next = 61;
                    break;
                  }
                  throw Qt(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"), ku.ERR_CONNECTION_INTERCEPTED);
                case 61:
                  return _context209.abrupt("return", (Vd("Successfully upgraded inbound connection"), this._createConnection({
                    cryptoProtocol: o,
                    direction: "inbound",
                    maConn: e,
                    upgradedConn: i,
                    muxerFactory: s,
                    remotePeer: n
                  })));
                case 62:
                  _context209.prev = 62;
                  this.components.connectionManager.afterUpgradeInbound(), a.clear();
                  return _context209.finish(62);
                case 65:
                case "end":
                  return _context209.stop();
              }
            }, _callee204, this, [[6,, 62, 65], [24, 54]]);
          }));
          function upgradeInbound(_x217, _x218) {
            return _upgradeInbound.apply(this, arguments);
          }
          return upgradeInbound;
        }()
      }, {
        key: "upgradeOutbound",
        value: function () {
          var _upgradeOutbound = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee205(e, t) {
            var _this$components$metr5;
            var r, n, i, s, o, a, c, l, _t115, _yield$this$_encryptO, _e128;
            return _regeneratorRuntime().wrap(function _callee205$(_context210) {
              while (1) switch (_context210.prev = _context210.next) {
                case 0:
                  r = e.remoteAddr.getPeerId();
                  _context210.t0 = null != r;
                  if (!_context210.t0) {
                    _context210.next = 7;
                    break;
                  }
                  n = nc(r);
                  _context210.next = 6;
                  return this.components.connectionGater.denyOutboundConnection(n, e);
                case 6:
                  _context210.t0 = _context210.sent;
                case 7:
                  if (!_context210.t0) {
                    _context210.next = 9;
                    break;
                  }
                  throw Qt(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"), ku.ERR_CONNECTION_INTERCEPTED);
                case 9:
                  (_this$components$metr5 = this.components.metrics) !== null && _this$components$metr5 !== void 0 && _this$components$metr5.trackMultiaddrConnection(e), Vd("Starting the outbound connection upgrade");
                  l = e;
                  if (!(!0 !== (t === null || t === void 0 ? void 0 : t.skipProtection))) {
                    _context210.next = 18;
                    break;
                  }
                  _t115 = this.components.connectionProtector;
                  _context210.t1 = null != _t115;
                  if (!_context210.t1) {
                    _context210.next = 18;
                    break;
                  }
                  _context210.next = 17;
                  return _t115.protect(e);
                case 17:
                  l = _context210.sent;
                case 18:
                  _context210.prev = 18;
                  if (!(i = l, !0 !== (t === null || t === void 0 ? void 0 : t.skipEncryption))) {
                    _context210.next = 32;
                    break;
                  }
                  _context210.next = 22;
                  return this._encryptOutbound(l, n);
                case 22:
                  _yield$this$_encryptO = _context210.sent;
                  i = _yield$this$_encryptO.conn;
                  s = _yield$this$_encryptO.remotePeer;
                  a = _yield$this$_encryptO.protocol;
                  _context210.next = 28;
                  return this.components.connectionGater.denyOutboundEncryptedConnection(s, _objectSpread(_objectSpread({}, l), i));
                case 28:
                  if (!_context210.sent) {
                    _context210.next = 30;
                    break;
                  }
                  throw Qt(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"), ku.ERR_CONNECTION_INTERCEPTED);
                case 30:
                  _context210.next = 35;
                  break;
                case 32:
                  if (!(null == n)) {
                    _context210.next = 34;
                    break;
                  }
                  throw Qt(new Error("Encryption was skipped but no peer id was passed"), ku.ERR_INVALID_PEER);
                case 34:
                  a = "native", s = n;
                case 35:
                  if (!(o = i, null != (t === null || t === void 0 ? void 0 : t.muxerFactory))) {
                    _context210.next = 39;
                    break;
                  }
                  c = t.muxerFactory;
                  _context210.next = 44;
                  break;
                case 39:
                  if (!(this.muxers.size > 0)) {
                    _context210.next = 44;
                    break;
                  }
                  _context210.next = 42;
                  return this._multiplexOutbound(_objectSpread(_objectSpread({}, l), i), this.muxers);
                case 42:
                  _e128 = _context210.sent;
                  c = _e128.muxerFactory, o = _e128.stream;
                case 44:
                  _context210.next = 52;
                  break;
                case 46:
                  _context210.prev = 46;
                  _context210.t2 = _context210["catch"](18);
                  Vd.error("Failed to upgrade outbound connection", _context210.t2);
                  _context210.next = 51;
                  return e.close(_context210.t2);
                case 51:
                  throw _context210.t2;
                case 52:
                  _context210.next = 54;
                  return this.components.connectionGater.denyOutboundUpgradedConnection(s, _objectSpread(_objectSpread({}, l), i));
                case 54:
                  if (!_context210.sent) {
                    _context210.next = 56;
                    break;
                  }
                  throw Qt(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"), ku.ERR_CONNECTION_INTERCEPTED);
                case 56:
                  return _context210.abrupt("return", (Vd("Successfully upgraded outbound connection"), this._createConnection({
                    cryptoProtocol: a,
                    direction: "outbound",
                    maConn: e,
                    upgradedConn: o,
                    muxerFactory: c,
                    remotePeer: s
                  })));
                case 57:
                case "end":
                  return _context210.stop();
              }
            }, _callee205, this, [[18, 46]]);
          }));
          function upgradeOutbound(_x219, _x220) {
            return _upgradeOutbound.apply(this, arguments);
          }
          return upgradeOutbound;
        }()
      }, {
        key: "_createConnection",
        value: function _createConnection(e) {
          var _this137 = this,
            _a13,
            _c15;
          var t = e.cryptoProtocol,
            r = e.direction,
            n = e.maConn,
            i = e.upgradedConn,
            s = e.remotePeer,
            o = e.muxerFactory;
          var a, c, l;
          null != o && (a = o.createStreamMuxer({
            direction: r,
            onIncomingStream: function onIncomingStream(e) {
              null != l && Promise.resolve().then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee206() {
                var _this137$components$m;
                var t, _yield$Dd, n, i, o;
                return _regeneratorRuntime().wrap(function _callee206$(_context211) {
                  while (1) switch (_context211.prev = _context211.next) {
                    case 0:
                      t = _this137.components.registrar.getProtocols();
                      _context211.next = 3;
                      return Dd(e, t);
                    case 3:
                      _yield$Dd = _context211.sent;
                      n = _yield$Dd.stream;
                      i = _yield$Dd.protocol;
                      if (!(Vd("%s: incoming stream opened on %s", r, i), null == l)) {
                        _context211.next = 8;
                        break;
                      }
                      return _context211.abrupt("return");
                    case 8:
                      o = function (e, t) {
                        try {
                          var _t$getHandler = t.getHandler(e),
                            _r130 = _t$getHandler.options;
                          return _r130.maxInboundStreams;
                        } catch (e) {
                          if (e.code !== ku.ERR_NO_HANDLER_FOR_PROTOCOL) throw e;
                        }
                        return 32;
                      }(i, _this137.components.registrar);
                      Kd(i, "inbound", l) !== o ? (e.source = n.source, e.sink = n.sink, e.stat.protocol = i, _this137.components.peerStore.protoBook.add(s, [i]).catch(function (e) {
                        return Vd.error(e);
                      }), l.addStream(e), (_this137$components$m = _this137.components.metrics) !== null && _this137$components$m !== void 0 && _this137$components$m.trackProtocolStream(e, l), _this137._onStream({
                        connection: l,
                        stream: e,
                        protocol: i
                      })) : e.abort(Qt(new Error("Too many inbound protocol streams for protocol \"".concat(i, "\" - limit ").concat(o)), ku.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS));
                    case 10:
                    case "end":
                      return _context211.stop();
                  }
                }, _callee206);
              }))).catch(function (t) {
                Vd.error(t), null == e.stat.timeline.close && e.close();
              });
            },
            onStreamEnd: function onStreamEnd(e) {
              var _l8;
              (_l8 = l) === null || _l8 === void 0 ? void 0 : _l8.removeStream(e.id);
            }
          }), c = /*#__PURE__*/function () {
            var _ref94 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee207(e) {
              var t,
                n,
                i,
                _this137$components$m2,
                _ref95,
                _yield$Nd,
                _r131,
                _o22,
                _a12,
                _e129,
                _args212 = arguments;
              return _regeneratorRuntime().wrap(function _callee207$(_context212) {
                while (1) switch (_context212.prev = _context212.next) {
                  case 0:
                    t = _args212.length > 1 && _args212[1] !== undefined ? _args212[1] : {};
                    if (!(null == a)) {
                      _context212.next = 3;
                      break;
                    }
                    throw Qt(new Error("Stream is not multiplexed"), ku.ERR_MUXER_UNAVAILABLE);
                  case 3:
                    Vd("%s: starting new stream on %s", r, e);
                    _context212.next = 6;
                    return a.newStream();
                  case 6:
                    n = _context212.sent;
                    _context212.prev = 7;
                    if (null == t.signal) {
                      Vd("No abort signal was passed while trying to negotiate protocols %s falling back to default timeout", e), i = new Pu.TimeoutController(3e4), t.signal = i.signal;
                      try {
                        (_ref95 = (0, xu.setMaxListeners)) === null || _ref95 === void 0 ? void 0 : _ref95(1 / 0, i.signal);
                      } catch (_unused13) {}
                    }
                    _context212.next = 11;
                    return Nd(n, e, t);
                  case 11:
                    _yield$Nd = _context212.sent;
                    _r131 = _yield$Nd.stream;
                    _o22 = _yield$Nd.protocol;
                    _a12 = function (e, t) {
                      try {
                        var _t$getHandler2 = t.getHandler(e),
                          _r132 = _t$getHandler2.options;
                        return _r132.maxOutboundStreams;
                      } catch (e) {
                        if (e.code !== ku.ERR_NO_HANDLER_FOR_PROTOCOL) throw e;
                      }
                      return 64;
                    }(_o22, _this137.components.registrar);
                    if (!(Kd(_o22, "outbound", l) === _a12)) {
                      _context212.next = 18;
                      break;
                    }
                    _e129 = Qt(new Error("Too many outbound protocol streams for protocol \"".concat(_o22, "\" - limit ").concat(_a12)), ku.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS);
                    throw n.abort(_e129), _e129;
                  case 18:
                    return _context212.abrupt("return", (_this137.components.peerStore.protoBook.add(s, [_o22]).catch(function (e) {
                      return Vd.error(e);
                    }), n.source = _r131.source, n.sink = _r131.sink, n.stat.protocol = _o22, (_this137$components$m2 = _this137.components.metrics) !== null && _this137$components$m2 !== void 0 && _this137$components$m2.trackProtocolStream(n, l), n));
                  case 21:
                    _context212.prev = 21;
                    _context212.t0 = _context212["catch"](7);
                    if (!(Vd.error("could not create new stream", _context212.t0), null == n.stat.timeline.close && n.close(), null != _context212.t0.code)) {
                      _context212.next = 25;
                      break;
                    }
                    throw _context212.t0;
                  case 25:
                    throw Qt(_context212.t0, ku.ERR_UNSUPPORTED_PROTOCOL);
                  case 26:
                    _context212.prev = 26;
                    null != i && i.clear();
                    return _context212.finish(26);
                  case 29:
                  case "end":
                    return _context212.stop();
                }
              }, _callee207, null, [[7, 21, 26, 29]]);
            }));
            return function c(_x221) {
              return _ref94.apply(this, arguments);
            };
          }(), Promise.all([a.sink(i.source), i.sink(a.source)]).catch(function (e) {
            Vd.error(e);
          }));
          var u = n.timeline;
          n.timeline = new Proxy(u, {
            set: function set() {
              return null != l && "close" === (arguments.length <= 1 ? undefined : arguments[1]) && null != (arguments.length <= 2 ? undefined : arguments[2]) && null == u.close && _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee208() {
                return _regeneratorRuntime().wrap(function _callee208$(_context213) {
                  while (1) switch (_context213.prev = _context213.next) {
                    case 0:
                      _context213.prev = 0;
                      _context213.t0 = "OPEN" === l.stat.status;
                      if (!_context213.t0) {
                        _context213.next = 5;
                        break;
                      }
                      _context213.next = 5;
                      return l.close();
                    case 5:
                      _context213.next = 10;
                      break;
                    case 7:
                      _context213.prev = 7;
                      _context213.t1 = _context213["catch"](0);
                      Vd.error(_context213.t1);
                    case 10:
                      _context213.prev = 10;
                      _this137.dispatchEvent(new Qr("connectionEnd", {
                        detail: l
                      }));
                      return _context213.finish(10);
                    case 13:
                    case "end":
                      return _context213.stop();
                  }
                }, _callee208, null, [[0, 7, 10, 13]]);
              }))().catch(function (e) {
                Vd.error(e);
              }), Reflect.set.apply(Reflect, arguments);
            }
          }), n.timeline.upgraded = Date.now();
          var h = function h() {
            throw Qt(new Error("connection is not multiplexed"), ku.ERR_CONNECTION_NOT_MULTIPLEXED);
          };
          var d;
          return d = {
            remoteAddr: n.remoteAddr,
            remotePeer: s,
            stat: {
              status: "OPEN",
              direction: r,
              timeline: n.timeline,
              multiplexer: (_a13 = a) === null || _a13 === void 0 ? void 0 : _a13.protocol,
              encryption: t
            },
            newStream: (_c15 = c) !== null && _c15 !== void 0 ? _c15 : h,
            getStreams: function getStreams() {
              return null != a ? a.streams : h();
            },
            close: function () {
              var _close5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee209() {
                return _regeneratorRuntime().wrap(function _callee209$(_context214) {
                  while (1) switch (_context214.prev = _context214.next) {
                    case 0:
                      _context214.next = 2;
                      return n.close();
                    case 2:
                      null != a && a.close();
                    case 3:
                    case "end":
                      return _context214.stop();
                  }
                }, _callee209);
              }));
              function close() {
                return _close5.apply(this, arguments);
              }
              return close;
            }()
          }, l = new Od(d), this.dispatchEvent(new Qr("connection", {
            detail: l
          })), l;
        }
      }, {
        key: "_onStream",
        value: function _onStream(e) {
          var t = e.connection,
            r = e.stream,
            n = e.protocol,
            _this$components$regi = this.components.registrar.getHandler(n),
            i = _this$components$regi.handler;
          i({
            connection: t,
            stream: r
          });
        }
      }, {
        key: "_encryptInbound",
        value: function () {
          var _encryptInbound2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee210(e) {
            var t, _yield$Dd2, r, n, i;
            return _regeneratorRuntime().wrap(function _callee210$(_context215) {
              while (1) switch (_context215.prev = _context215.next) {
                case 0:
                  t = Array.from(this.connectionEncryption.keys());
                  Vd("handling inbound crypto protocol selection", t);
                  _context215.prev = 2;
                  _context215.next = 5;
                  return Dd(e, t, {
                    writeBytes: !0
                  });
                case 5:
                  _yield$Dd2 = _context215.sent;
                  r = _yield$Dd2.stream;
                  n = _yield$Dd2.protocol;
                  i = this.connectionEncryption.get(n);
                  if (!(null == i)) {
                    _context215.next = 11;
                    break;
                  }
                  throw new Error("no crypto module found for ".concat(n));
                case 11:
                  Vd("encrypting inbound connection...");
                  _context215.t0 = _objectSpread;
                  _context215.t1 = _objectSpread;
                  _context215.t2 = {};
                  _context215.next = 17;
                  return i.secureInbound(this.components.peerId, r);
                case 17:
                  _context215.t3 = _context215.sent;
                  _context215.t4 = (0, _context215.t1)(_context215.t2, _context215.t3);
                  _context215.t5 = {};
                  _context215.t6 = {
                    protocol: n
                  };
                  return _context215.abrupt("return", (0, _context215.t0)(_context215.t4, _context215.t5, _context215.t6));
                case 24:
                  _context215.prev = 24;
                  _context215.t7 = _context215["catch"](2);
                  throw Qt(_context215.t7, ku.ERR_ENCRYPTION_FAILED);
                case 27:
                case "end":
                  return _context215.stop();
              }
            }, _callee210, this, [[2, 24]]);
          }));
          function _encryptInbound(_x222) {
            return _encryptInbound2.apply(this, arguments);
          }
          return _encryptInbound;
        }()
      }, {
        key: "_encryptOutbound",
        value: function () {
          var _encryptOutbound2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee211(e, t) {
            var r, _yield$Nd2, n, i, s;
            return _regeneratorRuntime().wrap(function _callee211$(_context216) {
              while (1) switch (_context216.prev = _context216.next) {
                case 0:
                  r = Array.from(this.connectionEncryption.keys());
                  Vd("selecting outbound crypto protocol", r);
                  _context216.prev = 2;
                  _context216.next = 5;
                  return Nd(e, r, {
                    writeBytes: !0
                  });
                case 5:
                  _yield$Nd2 = _context216.sent;
                  n = _yield$Nd2.stream;
                  i = _yield$Nd2.protocol;
                  s = this.connectionEncryption.get(i);
                  if (!(null == s)) {
                    _context216.next = 11;
                    break;
                  }
                  throw new Error("no crypto module found for ".concat(i));
                case 11:
                  Vd("encrypting outbound connection to %p", t);
                  _context216.t0 = _objectSpread;
                  _context216.t1 = _objectSpread;
                  _context216.t2 = {};
                  _context216.next = 17;
                  return s.secureOutbound(this.components.peerId, n, t);
                case 17:
                  _context216.t3 = _context216.sent;
                  _context216.t4 = (0, _context216.t1)(_context216.t2, _context216.t3);
                  _context216.t5 = {};
                  _context216.t6 = {
                    protocol: i
                  };
                  return _context216.abrupt("return", (0, _context216.t0)(_context216.t4, _context216.t5, _context216.t6));
                case 24:
                  _context216.prev = 24;
                  _context216.t7 = _context216["catch"](2);
                  throw Qt(_context216.t7, ku.ERR_ENCRYPTION_FAILED);
                case 27:
                case "end":
                  return _context216.stop();
              }
            }, _callee211, this, [[2, 24]]);
          }));
          function _encryptOutbound(_x223, _x224) {
            return _encryptOutbound2.apply(this, arguments);
          }
          return _encryptOutbound;
        }()
      }, {
        key: "_multiplexOutbound",
        value: function () {
          var _multiplexOutbound2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee212(e, t) {
            var r, _yield$Nd3, n, i;
            return _regeneratorRuntime().wrap(function _callee212$(_context217) {
              while (1) switch (_context217.prev = _context217.next) {
                case 0:
                  r = Array.from(t.keys());
                  Vd("outbound selecting muxer %s", r);
                  _context217.prev = 2;
                  _context217.next = 5;
                  return Nd(e, r, {
                    writeBytes: !0
                  });
                case 5:
                  _yield$Nd3 = _context217.sent;
                  n = _yield$Nd3.stream;
                  i = _yield$Nd3.protocol;
                  return _context217.abrupt("return", (Vd("%s selected as muxer protocol", i), {
                    stream: n,
                    muxerFactory: t.get(i)
                  }));
                case 11:
                  _context217.prev = 11;
                  _context217.t0 = _context217["catch"](2);
                  throw Vd.error("error multiplexing outbound stream", _context217.t0), Qt(_context217.t0, ku.ERR_MUXER_UNAVAILABLE);
                case 14:
                case "end":
                  return _context217.stop();
              }
            }, _callee212, null, [[2, 11]]);
          }));
          function _multiplexOutbound(_x225, _x226) {
            return _multiplexOutbound2.apply(this, arguments);
          }
          return _multiplexOutbound;
        }()
      }, {
        key: "_multiplexInbound",
        value: function () {
          var _multiplexInbound2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee213(e, t) {
            var r, _yield$Dd3, n, i;
            return _regeneratorRuntime().wrap(function _callee213$(_context218) {
              while (1) switch (_context218.prev = _context218.next) {
                case 0:
                  r = Array.from(t.keys());
                  Vd("inbound handling muxers %s", r);
                  _context218.prev = 2;
                  _context218.next = 5;
                  return Dd(e, r, {
                    writeBytes: !0
                  });
                case 5:
                  _yield$Dd3 = _context218.sent;
                  n = _yield$Dd3.stream;
                  i = _yield$Dd3.protocol;
                  return _context218.abrupt("return", {
                    stream: n,
                    muxerFactory: t.get(i)
                  });
                case 11:
                  _context218.prev = 11;
                  _context218.t0 = _context218["catch"](2);
                  throw Vd.error("error multiplexing inbound stream", _context218.t0), Qt(_context218.t0, ku.ERR_MUXER_UNAVAILABLE);
                case 14:
                case "end":
                  return _context218.stop();
              }
            }, _callee213, null, [[2, 11]]);
          }));
          function _multiplexInbound(_x227, _x228) {
            return _multiplexInbound2.apply(this, arguments);
          }
          return _multiplexInbound;
        }()
      }]);
      return Fd;
    }(Wr);
    var qd;
    !function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = Ji(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          if (!1 !== r.lengthDelimited && t.fork(), null != e.protocolVersion && (t.uint32(42), t.string(e.protocolVersion)), null != e.agentVersion && (t.uint32(50), t.string(e.agentVersion)), null != e.publicKey && (t.uint32(10), t.bytes(e.publicKey)), null != e.listenAddrs) {
            var _iterator102 = _createForOfIteratorHelper(e.listenAddrs),
              _step102;
            try {
              for (_iterator102.s(); !(_step102 = _iterator102.n()).done;) {
                var _r133 = _step102.value;
                t.uint32(18), t.bytes(_r133);
              }
            } catch (err) {
              _iterator102.e(err);
            } finally {
              _iterator102.f();
            }
          }
          if (null != e.observedAddr && (t.uint32(34), t.bytes(e.observedAddr)), null != e.protocols) {
            var _iterator103 = _createForOfIteratorHelper(e.protocols),
              _step103;
            try {
              for (_iterator103.s(); !(_step103 = _iterator103.n()).done;) {
                var _r134 = _step103.value;
                t.uint32(26), t.string(_r134);
              }
            } catch (err) {
              _iterator103.e(err);
            } finally {
              _iterator103.f();
            }
          }
          null != e.signedPeerRecord && (t.uint32(66), t.bytes(e.signedPeerRecord)), !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {
              listenAddrs: [],
              protocols: []
            },
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t116 = e.uint32();
            switch (_t116 >>> 3) {
              case 5:
                r.protocolVersion = e.string();
                break;
              case 6:
                r.agentVersion = e.string();
                break;
              case 1:
                r.publicKey = e.bytes();
                break;
              case 2:
                r.listenAddrs.push(e.bytes());
                break;
              case 4:
                r.observedAddr = e.bytes();
                break;
              case 3:
                r.protocols.push(e.string());
                break;
              case 8:
                r.signedPeerRecord = e.bytes();
                break;
              default:
                e.skipType(7 & _t116);
            }
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Hi(t, e.codec());
      }, e.decode = function (t) {
        return ji(t, e.codec());
      };
    }(qd || (qd = {}));
    var jd;
    !function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = Ji(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          !1 !== r.lengthDelimited && t.fork(), (!0 === r.writeDefaults || null != e.publicKey && e.publicKey.byteLength > 0) && (t.uint32(10), t.bytes(e.publicKey)), (!0 === r.writeDefaults || null != e.payloadType && e.payloadType.byteLength > 0) && (t.uint32(18), t.bytes(e.payloadType)), (!0 === r.writeDefaults || null != e.payload && e.payload.byteLength > 0) && (t.uint32(26), t.bytes(e.payload)), (!0 === r.writeDefaults || null != e.signature && e.signature.byteLength > 0) && (t.uint32(42), t.bytes(e.signature)), !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {
              publicKey: new Uint8Array(0),
              payloadType: new Uint8Array(0),
              payload: new Uint8Array(0),
              signature: new Uint8Array(0)
            },
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t117 = e.uint32();
            switch (_t117 >>> 3) {
              case 1:
                r.publicKey = e.bytes();
                break;
              case 2:
                r.payloadType = e.bytes();
                break;
              case 3:
                r.payload = e.bytes();
                break;
              case 5:
                r.signature = e.bytes();
                break;
              default:
                e.skipType(7 & _t117);
            }
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Hi(t, e.codec());
      }, e.decode = function (t) {
        return ji(t, e.codec());
      };
    }(jd || (jd = {}));
    var Hd = /*#__PURE__*/function () {
      function Hd(e) {
        _classCallCheck(this, Hd);
        var t = e.peerId,
          r = e.payloadType,
          n = e.payload,
          i = e.signature;
        this.peerId = t, this.payloadType = r, this.payload = n, this.signature = i;
      }
      _createClass(Hd, [{
        key: "marshal",
        value: function marshal() {
          if (null == this.peerId.publicKey) throw new Error("Missing public key");
          return null == this.marshaled && (this.marshaled = jd.encode({
            publicKey: this.peerId.publicKey,
            payloadType: this.payloadType,
            payload: this.payload.subarray(),
            signature: this.signature
          })), this.marshaled;
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return Xt(this.marshal(), e.marshal());
        }
      }, {
        key: "validate",
        value: function () {
          var _validate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee214(e) {
            var t, r;
            return _regeneratorRuntime().wrap(function _callee214$(_context219) {
              while (1) switch (_context219.prev = _context219.next) {
                case 0:
                  t = zd(e, this.payloadType, this.payload);
                  if (!(null == this.peerId.publicKey)) {
                    _context219.next = 3;
                    break;
                  }
                  throw new Error("Missing public key");
                case 3:
                  r = qa(this.peerId.publicKey);
                  _context219.next = 6;
                  return r.verify(t.subarray(), this.signature);
                case 6:
                  return _context219.abrupt("return", _context219.sent);
                case 7:
                case "end":
                  return _context219.stop();
              }
            }, _callee214, this);
          }));
          function validate(_x229) {
            return _validate.apply(this, arguments);
          }
          return validate;
        }()
      }]);
      return Hd;
    }();
    Hd.createFromProtobuf = /*#__PURE__*/function () {
      var _ref97 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee215(e) {
        var t, r;
        return _regeneratorRuntime().wrap(function _callee215$(_context220) {
          while (1) switch (_context220.prev = _context220.next) {
            case 0:
              t = jd.decode(e);
              _context220.next = 3;
              return sc(t.publicKey);
            case 3:
              r = _context220.sent;
              return _context220.abrupt("return", new Hd({
                peerId: r,
                payloadType: t.payloadType,
                payload: t.payload,
                signature: t.signature
              }));
            case 5:
            case "end":
              return _context220.stop();
          }
        }, _callee215);
      }));
      return function (_x230) {
        return _ref97.apply(this, arguments);
      };
    }(), Hd.seal = /*#__PURE__*/function () {
      var _ref98 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee216(e, t) {
        var r, n, i, s, o, a;
        return _regeneratorRuntime().wrap(function _callee216$(_context221) {
          while (1) switch (_context221.prev = _context221.next) {
            case 0:
              if (!(null == t.privateKey)) {
                _context221.next = 2;
                break;
              }
              throw new Error("Missing private key");
            case 2:
              r = e.domain;
              n = e.codec;
              i = e.marshal();
              s = zd(r, n, i);
              _context221.next = 8;
              return ja(t.privateKey);
            case 8:
              o = _context221.sent;
              _context221.next = 11;
              return o.sign(s.subarray());
            case 11:
              a = _context221.sent;
              return _context221.abrupt("return", new Hd({
                peerId: t,
                payloadType: n,
                payload: i,
                signature: a
              }));
            case 13:
            case "end":
              return _context221.stop();
          }
        }, _callee216);
      }));
      return function (_x231, _x232) {
        return _ref98.apply(this, arguments);
      };
    }(), Hd.openAndCertify = /*#__PURE__*/function () {
      var _ref99 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee217(e, t) {
        var r;
        return _regeneratorRuntime().wrap(function _callee217$(_context222) {
          while (1) switch (_context222.prev = _context222.next) {
            case 0:
              _context222.next = 2;
              return Hd.createFromProtobuf(e);
            case 2:
              r = _context222.sent;
              _context222.next = 5;
              return r.validate(t);
            case 5:
              if (_context222.sent) {
                _context222.next = 7;
                break;
              }
              throw Qt(new Error("envelope signature is not valid for the given domain"), "ERR_SIGNATURE_NOT_VALID");
            case 7:
              return _context222.abrupt("return", r);
            case 8:
            case "end":
              return _context222.stop();
          }
        }, _callee217);
      }));
      return function (_x233, _x234) {
        return _ref99.apply(this, arguments);
      };
    }();
    var zd = function zd(e, t, r) {
      var n = Pt(e),
        i = li.encode(n.byteLength),
        s = li.encode(t.length),
        o = li.encode(r.length);
      return new In(i, n, s, t, o, r);
    };
    var $d;
    !function (e) {
      var t, r;
      !function (e) {
        var t;
        e.codec = function () {
          return null == t && (t = Ji(function (e, t) {
            var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
            !1 !== r.lengthDelimited && t.fork(), (!0 === r.writeDefaults || null != e.multiaddr && e.multiaddr.byteLength > 0) && (t.uint32(10), t.bytes(e.multiaddr)), !1 !== r.lengthDelimited && t.ldelim();
          }, function (e, t) {
            var r = {
                multiaddr: new Uint8Array(0)
              },
              n = null == t ? e.len : e.pos + t;
            for (; e.pos < n;) {
              var _t118 = e.uint32();
              _t118 >>> 3 == 1 ? r.multiaddr = e.bytes() : e.skipType(7 & _t118);
            }
            return r;
          })), t;
        }, e.encode = function (t) {
          return Hi(t, e.codec());
        }, e.decode = function (t) {
          return ji(t, e.codec());
        };
      }(t = e.AddressInfo || (e.AddressInfo = {})), e.codec = function () {
        return null == r && (r = Ji(function (t, r) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          if (!1 !== n.lengthDelimited && r.fork(), (!0 === n.writeDefaults || null != t.peerId && t.peerId.byteLength > 0) && (r.uint32(10), r.bytes(t.peerId)), !0 !== n.writeDefaults && 0n === t.seq || (r.uint32(16), r.uint64(t.seq)), null != t.addresses) {
            var _iterator104 = _createForOfIteratorHelper(t.addresses),
              _step104;
            try {
              for (_iterator104.s(); !(_step104 = _iterator104.n()).done;) {
                var _n78 = _step104.value;
                r.uint32(26), e.AddressInfo.codec().encode(_n78, r, {
                  writeDefaults: !0
                });
              }
            } catch (err) {
              _iterator104.e(err);
            } finally {
              _iterator104.f();
            }
          }
          !1 !== n.lengthDelimited && r.ldelim();
        }, function (t, r) {
          var n = {
              peerId: new Uint8Array(0),
              seq: 0n,
              addresses: []
            },
            i = null == r ? t.len : t.pos + r;
          for (; t.pos < i;) {
            var _r135 = t.uint32();
            switch (_r135 >>> 3) {
              case 1:
                n.peerId = t.bytes();
                break;
              case 2:
                n.seq = t.uint64();
                break;
              case 3:
                n.addresses.push(e.AddressInfo.codec().decode(t, t.uint32()));
                break;
              default:
                t.skipType(7 & _r135);
            }
          }
          return n;
        })), r;
      }, e.encode = function (t) {
        return Hi(t, e.codec());
      }, e.decode = function (t) {
        return ji(t, e.codec());
      };
    }($d || ($d = {}));
    var Gd = Uint8Array.from([3, 1]);
    var Wd = /*#__PURE__*/function () {
      function Wd(e) {
        _classCallCheck(this, Wd);
        this.domain = Wd.DOMAIN, this.codec = Wd.CODEC;
        var t = e.peerId,
          r = e.multiaddrs,
          n = e.seqNumber;
        this.peerId = t, this.multiaddrs = r !== null && r !== void 0 ? r : [], this.seqNumber = n !== null && n !== void 0 ? n : BigInt(Date.now());
      }
      _createClass(Wd, [{
        key: "marshal",
        value: function marshal() {
          return null == this.marshaled && (this.marshaled = $d.encode({
            peerId: this.peerId.toBytes(),
            seq: BigInt(this.seqNumber),
            addresses: this.multiaddrs.map(function (e) {
              return {
                multiaddr: e.bytes
              };
            })
          })), this.marshaled;
        }
      }, {
        key: "equals",
        value: function equals(e) {
          return e instanceof Wd && !!this.peerId.equals(e.peerId) && this.seqNumber === e.seqNumber && !!function (e, t) {
            var r = function r(e, t) {
              return e.toString().localeCompare(t.toString());
            };
            return e.length === t.length && (t.sort(r), e.sort(r).every(function (e, r) {
              return t[r].equals(e);
            }));
          }(this.multiaddrs, e.multiaddrs);
        }
      }]);
      return Wd;
    }();
    Wd.createFromProtobuf = function (e) {
      var _t$addresses;
      var t = $d.decode(e),
        r = ic(t.peerId),
        n = ((_t$addresses = t.addresses) !== null && _t$addresses !== void 0 ? _t$addresses : []).map(function (e) {
          return hr(e.multiaddr);
        }),
        i = t.seq;
      return new Wd({
        peerId: r,
        multiaddrs: n,
        seqNumber: i
      });
    }, Wd.DOMAIN = "libp2p-peer-record", Wd.CODEC = Gd;
    var Yd = "0.0.0",
      Qd = "js-libp2p/".concat(Yd),
      Xd = ne("libp2p:identify");
    var Zd = /*#__PURE__*/function () {
      function Zd(e, t) {
        var _this138 = this;
        _classCallCheck(this, Zd);
        this.components = e, this.started = !1, this.init = t, this.identifyProtocolStr = "/".concat(t.protocolPrefix, "/id/1.0.0"), this.identifyPushProtocolStr = "/".concat(t.protocolPrefix, "/id/push/1.0.0"), this.host = _objectSpread({
          protocolVersion: "".concat(t.protocolPrefix, "/0.1.0")
        }, t.host), this.components.connectionManager.addEventListener("peer:connect", function (e) {
          var t = e.detail;
          _this138.identify(t).catch(Xd.error);
        }), this.components.peerStore.addEventListener("change:multiaddrs", function (e) {
          var t = e.detail.peerId;
          _this138.components.peerId.equals(t) && _this138.pushToPeerStore().catch(function (e) {
            return Xd.error(e);
          });
        }), this.components.peerStore.addEventListener("change:protocols", function (e) {
          var t = e.detail.peerId;
          _this138.components.peerId.equals(t) && _this138.pushToPeerStore().catch(function (e) {
            return Xd.error(e);
          });
        });
      }
      _createClass(Zd, [{
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "start",
        value: function () {
          var _start9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee218() {
            var _this139 = this;
            return _regeneratorRuntime().wrap(function _callee218$(_context223) {
              while (1) switch (_context223.prev = _context223.next) {
                case 0:
                  _context223.t0 = this.started;
                  if (_context223.t0) {
                    _context223.next = 11;
                    break;
                  }
                  _context223.next = 4;
                  return this.components.peerStore.metadataBook.setValue(this.components.peerId, "AgentVersion", Pt(this.host.agentVersion));
                case 4:
                  _context223.next = 6;
                  return this.components.peerStore.metadataBook.setValue(this.components.peerId, "ProtocolVersion", Pt(this.host.protocolVersion));
                case 6:
                  _context223.next = 8;
                  return this.components.registrar.handle(this.identifyProtocolStr, function (e) {
                    _this139._handleIdentify(e).catch(function (e) {
                      Xd.error(e);
                    });
                  }, {
                    maxInboundStreams: this.init.maxInboundStreams,
                    maxOutboundStreams: this.init.maxOutboundStreams
                  });
                case 8:
                  _context223.next = 10;
                  return this.components.registrar.handle(this.identifyPushProtocolStr, function (e) {
                    _this139._handlePush(e).catch(function (e) {
                      Xd.error(e);
                    });
                  }, {
                    maxInboundStreams: this.init.maxPushIncomingStreams,
                    maxOutboundStreams: this.init.maxPushOutgoingStreams
                  });
                case 10:
                  this.started = !0;
                case 11:
                case "end":
                  return _context223.stop();
              }
            }, _callee218, this);
          }));
          function start() {
            return _start9.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee219() {
            return _regeneratorRuntime().wrap(function _callee219$(_context224) {
              while (1) switch (_context224.prev = _context224.next) {
                case 0:
                  _context224.next = 2;
                  return this.components.registrar.unhandle(this.identifyProtocolStr);
                case 2:
                  _context224.next = 4;
                  return this.components.registrar.unhandle(this.identifyPushProtocolStr);
                case 4:
                  this.started = !1;
                case 5:
                case "end":
                  return _context224.stop();
              }
            }, _callee219, this);
          }));
          function stop() {
            return _stop8.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "push",
        value: function () {
          var _push = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee221(e) {
            var _this140 = this;
            var t, r, n, i;
            return _regeneratorRuntime().wrap(function _callee221$(_context226) {
              while (1) switch (_context226.prev = _context226.next) {
                case 0:
                  _context226.next = 2;
                  return this.components.peerStore.addressBook.getRawEnvelope(this.components.peerId);
                case 2:
                  t = _context226.sent;
                  r = this.components.addressManager.getAddresses().map(function (e) {
                    return e.bytes;
                  });
                  _context226.next = 6;
                  return this.components.peerStore.protoBook.get(this.components.peerId);
                case 6:
                  n = _context226.sent;
                  i = e.map( /*#__PURE__*/function () {
                    var _ref100 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee220(e) {
                      var i, s, _ref101, o;
                      return _regeneratorRuntime().wrap(function _callee220$(_context225) {
                        while (1) switch (_context225.prev = _context225.next) {
                          case 0:
                            s = new Pu.TimeoutController(_this140.init.timeout);
                            try {
                              (_ref101 = (0, xu.setMaxListeners)) === null || _ref101 === void 0 ? void 0 : _ref101(1 / 0, s.signal);
                            } catch (_unused14) {}
                            _context225.prev = 2;
                            _context225.next = 5;
                            return e.newStream([_this140.identifyPushProtocolStr], {
                              signal: s.signal
                            });
                          case 5:
                            i = _context225.sent;
                            o = Hr(i, s.signal);
                            _context225.next = 9;
                            return o.sink(Ci([qd.encode({
                              listenAddrs: r,
                              signedPeerRecord: t,
                              protocols: n
                            })], hi()));
                          case 9:
                            _context225.next = 14;
                            break;
                          case 11:
                            _context225.prev = 11;
                            _context225.t0 = _context225["catch"](2);
                            Xd.error("could not push identify update to peer", _context225.t0);
                          case 14:
                            _context225.prev = 14;
                            null != i && i.close(), s.clear();
                            return _context225.finish(14);
                          case 17:
                          case "end":
                            return _context225.stop();
                        }
                      }, _callee220, null, [[2, 11, 14, 17]]);
                    }));
                    return function (_x236) {
                      return _ref100.apply(this, arguments);
                    };
                  }());
                  _context226.next = 10;
                  return Promise.all(i);
                case 10:
                case "end":
                  return _context226.stop();
              }
            }, _callee221, this);
          }));
          function push(_x235) {
            return _push.apply(this, arguments);
          }
          return push;
        }()
      }, {
        key: "pushToPeerStore",
        value: function () {
          var _pushToPeerStore = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee222() {
            var e, _iterator105, _step105, t, r;
            return _regeneratorRuntime().wrap(function _callee222$(_context227) {
              while (1) switch (_context227.prev = _context227.next) {
                case 0:
                  if (this.isStarted()) {
                    _context227.next = 2;
                    break;
                  }
                  return _context227.abrupt("return");
                case 2:
                  e = [];
                  _iterator105 = _createForOfIteratorHelper(this.components.connectionManager.getConnections());
                  _context227.prev = 4;
                  _iterator105.s();
                case 6:
                  if ((_step105 = _iterator105.n()).done) {
                    _context227.next = 16;
                    break;
                  }
                  t = _step105.value;
                  r = t.remotePeer;
                  _context227.next = 11;
                  return this.components.peerStore.get(r);
                case 11:
                  _context227.t0 = _context227.sent.protocols.includes(this.identifyPushProtocolStr);
                  if (!_context227.t0) {
                    _context227.next = 14;
                    break;
                  }
                  e.push(t);
                case 14:
                  _context227.next = 6;
                  break;
                case 16:
                  _context227.next = 21;
                  break;
                case 18:
                  _context227.prev = 18;
                  _context227.t1 = _context227["catch"](4);
                  _iterator105.e(_context227.t1);
                case 21:
                  _context227.prev = 21;
                  _iterator105.f();
                  return _context227.finish(21);
                case 24:
                  _context227.next = 26;
                  return this.push(e);
                case 26:
                case "end":
                  return _context227.stop();
              }
            }, _callee222, this, [[4, 18, 21, 24]]);
          }));
          function pushToPeerStore() {
            return _pushToPeerStore.apply(this, arguments);
          }
          return pushToPeerStore;
        }()
      }, {
        key: "_identify",
        value: function () {
          var _identify2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee224(e) {
            var t,
              r,
              n,
              i,
              _ref102,
              _this$init$maxIdentif,
              _t119,
              _r136,
              _args229 = arguments;
            return _regeneratorRuntime().wrap(function _callee224$(_context229) {
              while (1) switch (_context229.prev = _context229.next) {
                case 0:
                  t = _args229.length > 1 && _args229[1] !== undefined ? _args229[1] : {};
                  i = t.signal;
                  if (null == i) {
                    r = new Pu.TimeoutController(this.init.timeout), i = r.signal;
                    try {
                      (_ref102 = (0, xu.setMaxListeners)) === null || _ref102 === void 0 ? void 0 : _ref102(1 / 0, r.signal);
                    } catch (_unused15) {}
                  }
                  _context229.prev = 3;
                  _context229.next = 6;
                  return e.newStream([this.identifyProtocolStr], {
                    signal: i
                  });
                case 6:
                  n = _context229.sent;
                  _t119 = Hr(n, i);
                  _context229.next = 10;
                  return Ci([], _t119, gi({
                    maxDataLength: (_this$init$maxIdentif = this.init.maxIdentifyMessageSize) !== null && _this$init$maxIdentif !== void 0 ? _this$init$maxIdentif : 8192
                  }), /*#__PURE__*/function () {
                    var _ref103 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee223(e) {
                      return _regeneratorRuntime().wrap(function _callee223$(_context228) {
                        while (1) switch (_context228.prev = _context228.next) {
                          case 0:
                            _context228.next = 2;
                            return Bu(e);
                          case 2:
                            return _context228.abrupt("return", _context228.sent);
                          case 3:
                          case "end":
                            return _context228.stop();
                        }
                      }, _callee223);
                    }));
                    return function (_x238) {
                      return _ref103.apply(this, arguments);
                    };
                  }());
                case 10:
                  _r136 = _context229.sent;
                  if (!(null == _r136)) {
                    _context229.next = 13;
                    break;
                  }
                  throw Qt(new Error("No data could be retrieved"), ku.ERR_CONNECTION_ENDED);
                case 13:
                  _context229.prev = 13;
                  return _context229.abrupt("return", qd.decode(_r136));
                case 17:
                  _context229.prev = 17;
                  _context229.t0 = _context229["catch"](13);
                  throw Qt(_context229.t0, ku.ERR_INVALID_MESSAGE);
                case 20:
                  _context229.prev = 20;
                  null != r && r.clear(), null != n && n.close();
                  return _context229.finish(20);
                case 23:
                case "end":
                  return _context229.stop();
              }
            }, _callee224, this, [[3,, 20, 23], [13, 17]]);
          }));
          function _identify(_x237) {
            return _identify2.apply(this, arguments);
          }
          return _identify;
        }()
      }, {
        key: "identify",
        value: function () {
          var _identify3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee225(e) {
            var t,
              r,
              n,
              i,
              s,
              o,
              a,
              c,
              l,
              u,
              h,
              _e130,
              _args230 = arguments;
            return _regeneratorRuntime().wrap(function _callee225$(_context230) {
              while (1) switch (_context230.prev = _context230.next) {
                case 0:
                  t = _args230.length > 1 && _args230[1] !== undefined ? _args230[1] : {};
                  _context230.next = 3;
                  return this._identify(e, t);
                case 3:
                  r = _context230.sent;
                  n = r.publicKey;
                  i = r.listenAddrs;
                  s = r.protocols;
                  o = r.observedAddr;
                  a = r.signedPeerRecord;
                  c = r.agentVersion;
                  l = r.protocolVersion;
                  if (!(null == n)) {
                    _context230.next = 13;
                    break;
                  }
                  throw Qt(new Error("public key was missing from identify message"), ku.ERR_MISSING_PUBLIC_KEY);
                case 13:
                  _context230.next = 15;
                  return sc(n);
                case 15:
                  u = _context230.sent;
                  if (e.remotePeer.equals(u)) {
                    _context230.next = 18;
                    break;
                  }
                  throw Qt(new Error("identified peer does not match the expected peer"), ku.ERR_INVALID_PEER);
                case 18:
                  if (!this.components.peerId.equals(u)) {
                    _context230.next = 20;
                    break;
                  }
                  throw Qt(new Error("identified peer is our own peer id?"), ku.ERR_INVALID_PEER);
                case 20:
                  h = Zd.getCleanMultiaddr(o);
                  if (!(null != a)) {
                    _context230.next = 50;
                    break;
                  }
                  Xd("received signed peer record from %p", u);
                  _context230.prev = 23;
                  _context230.next = 26;
                  return Hd.openAndCertify(a, Wd.DOMAIN);
                case 26:
                  _e130 = _context230.sent;
                  if (_e130.peerId.equals(u)) {
                    _context230.next = 29;
                    break;
                  }
                  throw Qt(new Error("identified peer does not match the expected peer"), ku.ERR_INVALID_PEER);
                case 29:
                  _context230.next = 31;
                  return this.components.peerStore.addressBook.consumePeerRecord(_e130);
                case 31:
                  if (!_context230.sent) {
                    _context230.next = 43;
                    break;
                  }
                  _context230.next = 34;
                  return this.components.peerStore.protoBook.set(u, s);
                case 34:
                  _context230.t0 = null != c;
                  if (!_context230.t0) {
                    _context230.next = 38;
                    break;
                  }
                  _context230.next = 38;
                  return this.components.peerStore.metadataBook.setValue(u, "AgentVersion", Pt(c));
                case 38:
                  _context230.t1 = null != l;
                  if (!_context230.t1) {
                    _context230.next = 42;
                    break;
                  }
                  _context230.next = 42;
                  return this.components.peerStore.metadataBook.setValue(u, "ProtocolVersion", Pt(l));
                case 42:
                  return _context230.abrupt("return", void Xd("identify completed for peer %p and protocols %o", u, s));
                case 43:
                  _context230.next = 48;
                  break;
                case 45:
                  _context230.prev = 45;
                  _context230.t2 = _context230["catch"](23);
                  Xd("received invalid envelope, discard it and fallback to listenAddrs is available", _context230.t2);
                case 48:
                  _context230.next = 51;
                  break;
                case 50:
                  Xd("no signed peer record received from %p", u);
                case 51:
                  Xd("falling back to legacy addresses from %p", u);
                  _context230.prev = 52;
                  _context230.next = 55;
                  return this.components.peerStore.addressBook.set(u, i.map(function (e) {
                    return hr(e);
                  }));
                case 55:
                  _context230.next = 60;
                  break;
                case 57:
                  _context230.prev = 57;
                  _context230.t3 = _context230["catch"](52);
                  Xd.error("received invalid addrs", _context230.t3);
                case 60:
                  _context230.next = 62;
                  return this.components.peerStore.protoBook.set(u, s);
                case 62:
                  _context230.t4 = null != c;
                  if (!_context230.t4) {
                    _context230.next = 66;
                    break;
                  }
                  _context230.next = 66;
                  return this.components.peerStore.metadataBook.setValue(u, "AgentVersion", Pt(c));
                case 66:
                  _context230.t5 = null != l;
                  if (!_context230.t5) {
                    _context230.next = 70;
                    break;
                  }
                  _context230.next = 70;
                  return this.components.peerStore.metadataBook.setValue(u, "ProtocolVersion", Pt(l));
                case 70:
                  Xd("identify completed for peer %p and protocols %o", u, s);
                  Xd("received observed address of %s", h === null || h === void 0 ? void 0 : h.toString());
                case 72:
                case "end":
                  return _context230.stop();
              }
            }, _callee225, this, [[23, 45], [52, 57]]);
          }));
          function identify(_x239) {
            return _identify3.apply(this, arguments);
          }
          return identify;
        }()
      }, {
        key: "_handleIdentify",
        value: function () {
          var _handleIdentify2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee226(e) {
            var t, r, n, _ref104, _this$components$peer, _e131, i, s, o, _e132, _t120, a, c, _l9;
            return _regeneratorRuntime().wrap(function _callee226$(_context231) {
              while (1) switch (_context231.prev = _context231.next) {
                case 0:
                  t = e.connection, r = e.stream, n = new Pu.TimeoutController(this.init.timeout);
                  try {
                    (_ref104 = (0, xu.setMaxListeners)) === null || _ref104 === void 0 ? void 0 : _ref104(1 / 0, n.signal);
                  } catch (_unused16) {}
                  _context231.prev = 2;
                  _e131 = (_this$components$peer = this.components.peerId.publicKey) !== null && _this$components$peer !== void 0 ? _this$components$peer : new Uint8Array(0);
                  _context231.next = 6;
                  return this.components.peerStore.get(this.components.peerId);
                case 6:
                  i = _context231.sent;
                  s = this.components.addressManager.getAddresses().map(function (e) {
                    return e.decapsulateCode(Lt("p2p").code);
                  });
                  o = i.peerRecordEnvelope;
                  if (!(s.length > 0 && null == o)) {
                    _context231.next = 17;
                    break;
                  }
                  _e132 = new Wd({
                    peerId: this.components.peerId,
                    multiaddrs: s
                  });
                  _context231.next = 13;
                  return Hd.seal(_e132, this.components.peerId);
                case 13:
                  _t120 = _context231.sent;
                  _context231.next = 16;
                  return this.components.peerStore.addressBook.consumePeerRecord(_t120);
                case 16:
                  o = _t120.marshal().subarray();
                case 17:
                  a = qd.encode({
                    protocolVersion: this.host.protocolVersion,
                    agentVersion: this.host.agentVersion,
                    publicKey: _e131,
                    listenAddrs: s.map(function (e) {
                      return e.bytes;
                    }),
                    signedPeerRecord: o,
                    observedAddr: t.remoteAddr.bytes,
                    protocols: i.protocols
                  }), c = Hr(r, n.signal), _l9 = Ci([a], hi());
                  _context231.next = 20;
                  return c.sink(_l9);
                case 20:
                  _context231.next = 25;
                  break;
                case 22:
                  _context231.prev = 22;
                  _context231.t0 = _context231["catch"](2);
                  Xd.error("could not respond to identify request", _context231.t0);
                case 25:
                  _context231.prev = 25;
                  r.close(), n.clear();
                  return _context231.finish(25);
                case 28:
                case "end":
                  return _context231.stop();
              }
            }, _callee226, this, [[2, 22, 25, 28]]);
          }));
          function _handleIdentify(_x240) {
            return _handleIdentify2.apply(this, arguments);
          }
          return _handleIdentify;
        }()
      }, {
        key: "_handlePush",
        value: function () {
          var _handlePush2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee228(e) {
            var t, r, n, _ref105, i, _this$init$maxIdentif2, _e133, _t121, s, _e134;
            return _regeneratorRuntime().wrap(function _callee228$(_context233) {
              while (1) switch (_context233.prev = _context233.next) {
                case 0:
                  t = e.connection, r = e.stream, n = new Pu.TimeoutController(this.init.timeout);
                  try {
                    (_ref105 = (0, xu.setMaxListeners)) === null || _ref105 === void 0 ? void 0 : _ref105(1 / 0, n.signal);
                  } catch (_unused17) {}
                  _context233.prev = 2;
                  _e133 = Hr(r, n.signal);
                  _context233.next = 6;
                  return Ci([], _e133, gi({
                    maxDataLength: (_this$init$maxIdentif2 = this.init.maxIdentifyMessageSize) !== null && _this$init$maxIdentif2 !== void 0 ? _this$init$maxIdentif2 : 8192
                  }), /*#__PURE__*/function () {
                    var _ref106 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee227(e) {
                      return _regeneratorRuntime().wrap(function _callee227$(_context232) {
                        while (1) switch (_context232.prev = _context232.next) {
                          case 0:
                            _context232.next = 2;
                            return Bu(e);
                          case 2:
                            return _context232.abrupt("return", _context232.sent);
                          case 3:
                          case "end":
                            return _context232.stop();
                        }
                      }, _callee227);
                    }));
                    return function (_x242) {
                      return _ref106.apply(this, arguments);
                    };
                  }());
                case 6:
                  _t121 = _context233.sent;
                  null != _t121 && (i = qd.decode(_t121));
                  _context233.next = 13;
                  break;
                case 10:
                  _context233.prev = 10;
                  _context233.t0 = _context233["catch"](2);
                  return _context233.abrupt("return", Xd.error("received invalid message", _context233.t0));
                case 13:
                  _context233.prev = 13;
                  r.close(), n.clear();
                  return _context233.finish(13);
                case 16:
                  if (!(null == i)) {
                    _context233.next = 18;
                    break;
                  }
                  return _context233.abrupt("return", Xd.error("received invalid message"));
                case 18:
                  s = t.remotePeer;
                  if (!this.components.peerId.equals(s)) {
                    _context233.next = 23;
                    break;
                  }
                  Xd("received push from ourselves?");
                  _context233.next = 62;
                  break;
                case 23:
                  if (!(Xd("received push from %p", s), null != i.signedPeerRecord)) {
                    _context233.next = 44;
                    break;
                  }
                  Xd("received signedPeerRecord in push");
                  _context233.prev = 25;
                  _context233.next = 28;
                  return Hd.openAndCertify(i.signedPeerRecord, Wd.DOMAIN);
                case 28:
                  _e134 = _context233.sent;
                  _context233.next = 31;
                  return this.components.peerStore.addressBook.consumePeerRecord(_e134);
                case 31:
                  if (!_context233.sent) {
                    _context233.next = 36;
                    break;
                  }
                  Xd("consumed signedPeerRecord sent in push");
                  _context233.next = 35;
                  return this.components.peerStore.protoBook.set(s, i.protocols);
                case 35:
                  return _context233.abrupt("return", void _context233.sent);
                case 36:
                  Xd("failed to consume signedPeerRecord sent in push");
                  _context233.next = 42;
                  break;
                case 39:
                  _context233.prev = 39;
                  _context233.t1 = _context233["catch"](25);
                  Xd("received invalid envelope, discard it and fallback to listenAddrs is available", _context233.t1);
                case 42:
                  _context233.next = 45;
                  break;
                case 44:
                  Xd("did not receive signedPeerRecord in push");
                case 45:
                  _context233.prev = 45;
                  _context233.next = 48;
                  return this.components.peerStore.addressBook.set(s, i.listenAddrs.map(function (e) {
                    return hr(e);
                  }));
                case 48:
                  _context233.next = 53;
                  break;
                case 50:
                  _context233.prev = 50;
                  _context233.t2 = _context233["catch"](45);
                  Xd.error("received invalid addrs", _context233.t2);
                case 53:
                  _context233.prev = 53;
                  _context233.next = 56;
                  return this.components.peerStore.protoBook.set(s, i.protocols);
                case 56:
                  _context233.next = 61;
                  break;
                case 58:
                  _context233.prev = 58;
                  _context233.t3 = _context233["catch"](53);
                  Xd.error("received invalid protocols", _context233.t3);
                case 61:
                  Xd("handled push from %p", s);
                case 62:
                case "end":
                  return _context233.stop();
              }
            }, _callee228, this, [[2, 10, 13, 16], [25, 39], [45, 50], [53, 58]]);
          }));
          function _handlePush(_x241) {
            return _handlePush2.apply(this, arguments);
          }
          return _handlePush;
        }()
      }], [{
        key: "getCleanMultiaddr",
        value: function getCleanMultiaddr(e) {
          if (null != e && e.length > 0) try {
            return hr(e);
          } catch (_unused18) {}
        }
      }]);
      return Zd;
    }();
    var Jd, ep;
    !function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = Ji(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          !1 !== r.lengthDelimited && t.fork(), !0 !== r.writeDefaults && "" === e.identifier || (t.uint32(10), t.string(e.identifier)), !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {
              identifier: ""
            },
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t122 = e.uint32();
            _t122 >>> 3 == 1 ? r.identifier = e.string() : e.skipType(7 & _t122);
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Hi(t, e.codec());
      }, e.decode = function (t) {
        return ji(t, e.codec());
      };
    }(Jd || (Jd = {})), function (e) {
      var t, r, n;
      !function (e) {
        e.OK = "OK", e.NOT_FOUND = "NOT_FOUND", e.ERROR = "ERROR";
      }(t = e.StatusCode || (e.StatusCode = {})), function (e) {
        e[e.OK = 0] = "OK", e[e.NOT_FOUND = 1] = "NOT_FOUND", e[e.ERROR = 2] = "ERROR";
      }(r || (r = {})), function (e) {
        e.codec = function () {
          return Zi(r);
        };
      }(t = e.StatusCode || (e.StatusCode = {})), e.codec = function () {
        return null == n && (n = Ji(function (t, n) {
          var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          !1 !== i.lengthDelimited && n.fork(), (!0 === i.writeDefaults || null != t.status && 0 !== r[t.status]) && (n.uint32(8), e.StatusCode.codec().encode(t.status, n)), (!0 === i.writeDefaults || null != t.data && t.data.byteLength > 0) && (n.uint32(18), n.bytes(t.data)), !1 !== i.lengthDelimited && n.ldelim();
        }, function (r, n) {
          var i = {
              status: t.OK,
              data: new Uint8Array(0)
            },
            s = null == n ? r.len : r.pos + n;
          for (; r.pos < s;) {
            var _t123 = r.uint32();
            switch (_t123 >>> 3) {
              case 1:
                i.status = e.StatusCode.codec().decode(r);
                break;
              case 2:
                i.data = r.bytes();
                break;
              default:
                r.skipType(7 & _t123);
            }
          }
          return i;
        })), n;
      }, e.encode = function (t) {
        return Hi(t, e.codec());
      }, e.decode = function (t) {
        return ji(t, e.codec());
      };
    }(ep || (ep = {}));
    var tp = ne("libp2p:fetch");
    var rp = /*#__PURE__*/function () {
      function rp(e, t) {
        var _t$protocolPrefix;
        _classCallCheck(this, rp);
        this.started = !1, this.components = e, this.protocol = "/".concat((_t$protocolPrefix = t.protocolPrefix) !== null && _t$protocolPrefix !== void 0 ? _t$protocolPrefix : "libp2p", "/fetch/0.0.1"), this.lookupFunctions = new Map(), this.handleMessage = this.handleMessage.bind(this), this.init = t;
      }
      _createClass(rp, [{
        key: "start",
        value: function () {
          var _start10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee229() {
            var _this141 = this;
            return _regeneratorRuntime().wrap(function _callee229$(_context234) {
              while (1) switch (_context234.prev = _context234.next) {
                case 0:
                  _context234.next = 2;
                  return this.components.registrar.handle(this.protocol, function (e) {
                    _this141.handleMessage(e).catch(function (e) {
                      tp.error(e);
                    }).finally(function () {
                      e.stream.close();
                    });
                  }, {
                    maxInboundStreams: this.init.maxInboundStreams,
                    maxOutboundStreams: this.init.maxOutboundStreams
                  });
                case 2:
                  this.started = !0;
                case 3:
                case "end":
                  return _context234.stop();
              }
            }, _callee229, this);
          }));
          function start() {
            return _start10.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee230() {
            return _regeneratorRuntime().wrap(function _callee230$(_context235) {
              while (1) switch (_context235.prev = _context235.next) {
                case 0:
                  _context235.next = 2;
                  return this.components.registrar.unhandle(this.protocol);
                case 2:
                  this.started = !1;
                case 3:
                case "end":
                  return _context235.stop();
              }
            }, _callee230, this);
          }));
          function stop() {
            return _stop9.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "fetch",
        value: function () {
          var _fetch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee232(e, t) {
            var r,
              n,
              i,
              s,
              o,
              _ref107,
              _e135,
              _r137,
              _args237 = arguments;
            return _regeneratorRuntime().wrap(function _callee232$(_context237) {
              while (1) switch (_context237.prev = _context237.next) {
                case 0:
                  r = _args237.length > 2 && _args237[2] !== undefined ? _args237[2] : {};
                  tp("dialing %s to %p", this.protocol, e);
                  _context237.next = 4;
                  return this.components.connectionManager.openConnection(e, r);
                case 4:
                  n = _context237.sent;
                  o = r.signal;
                  if (null == o) {
                    tp("using default timeout of %d ms", this.init.timeout), i = new Pu.TimeoutController(this.init.timeout), o = i.signal;
                    try {
                      (_ref107 = (0, xu.setMaxListeners)) === null || _ref107 === void 0 ? void 0 : _ref107(1 / 0, i.signal);
                    } catch (_unused19) {}
                  }
                  _context237.prev = 7;
                  _context237.next = 10;
                  return n.newStream(this.protocol, {
                    signal: o
                  });
                case 10:
                  s = _context237.sent;
                  _e135 = Hr(s, o);
                  tp("fetch %s", t);
                  _context237.next = 15;
                  return Ci([Jd.encode({
                    identifier: t
                  })], hi(), _e135, gi(), /*#__PURE__*/function () {
                    var _ref108 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee231(e) {
                      var r, n, _e136;
                      return _regeneratorRuntime().wrap(function _callee231$(_context236) {
                        while (1) switch (_context236.prev = _context236.next) {
                          case 0:
                            _context236.next = 2;
                            return Bu(e);
                          case 2:
                            r = _context236.sent;
                            if (!(null == r)) {
                              _context236.next = 5;
                              break;
                            }
                            throw Qt(new Error("No data received"), ku.ERR_INVALID_MESSAGE);
                          case 5:
                            n = ep.decode(r);
                            _context236.t0 = n.status;
                            _context236.next = _context236.t0 === ep.StatusCode.OK ? 9 : _context236.t0 === ep.StatusCode.NOT_FOUND ? 10 : _context236.t0 === ep.StatusCode.ERROR ? 11 : 14;
                            break;
                          case 9:
                            return _context236.abrupt("return", (tp("received status for %s ok", t), n.data));
                          case 10:
                            return _context236.abrupt("return", (tp("received status for %s not found", t), null));
                          case 11:
                            tp("received status for %s error", t);
                            _e136 = St(n.data);
                            throw Qt(new Error("Error in fetch protocol response: " + _e136), ku.ERR_INVALID_PARAMETERS);
                          case 14:
                            throw tp("received status for %s unknown", t), Qt(new Error("Unknown response status"), ku.ERR_INVALID_MESSAGE);
                          case 15:
                          case "end":
                            return _context236.stop();
                        }
                      }, _callee231);
                    }));
                    return function (_x245) {
                      return _ref108.apply(this, arguments);
                    };
                  }());
                case 15:
                  _r137 = _context237.sent;
                  return _context237.abrupt("return", _r137 !== null && _r137 !== void 0 ? _r137 : null);
                case 17:
                  _context237.prev = 17;
                  null != i && i.clear(), null != s && s.close();
                  return _context237.finish(17);
                case 20:
                case "end":
                  return _context237.stop();
              }
            }, _callee232, this, [[7,, 17, 20]]);
          }));
          function fetch(_x243, _x244) {
            return _fetch.apply(this, arguments);
          }
          return fetch;
        }()
      }, {
        key: "handleMessage",
        value: function () {
          var _handleMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee234(e) {
            var t, r;
            return _regeneratorRuntime().wrap(function _callee234$(_context239) {
              while (1) switch (_context239.prev = _context239.next) {
                case 0:
                  t = e.stream, r = this;
                  _context239.next = 3;
                  return Ci(t, gi(), /*#__PURE__*/function () {
                    var _ref17 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee233(e) {
                      var t, n, i, s, _e137, _e138;
                      return _regeneratorRuntime().wrap(function _callee233$(_context238) {
                        while (1) switch (_context238.prev = _context238.next) {
                          case 0:
                            _context238.next = 2;
                            return _awaitAsyncGenerator(Bu(e));
                          case 2:
                            t = _context238.sent;
                            if (!(null == t)) {
                              _context238.next = 5;
                              break;
                            }
                            throw Qt(new Error("No data received"), ku.ERR_INVALID_MESSAGE);
                          case 5:
                            n = Jd.decode(t);
                            s = r._getLookupFunction(n.identifier);
                            if (!(null != s)) {
                              _context238.next = 15;
                              break;
                            }
                            tp("look up data with identifier %s", n.identifier);
                            _context238.next = 11;
                            return _awaitAsyncGenerator(s(n.identifier));
                          case 11:
                            _e137 = _context238.sent;
                            null != _e137 ? (tp("sending status for %s ok", n.identifier), i = {
                              status: ep.StatusCode.OK,
                              data: _e137
                            }) : (tp("sending status for %s not found", n.identifier), i = {
                              status: ep.StatusCode.NOT_FOUND,
                              data: new Uint8Array(0)
                            });
                            _context238.next = 18;
                            break;
                          case 15:
                            tp("sending status for %s error", n.identifier);
                            _e138 = Pt("No lookup function registered for key: ".concat(n.identifier));
                            i = {
                              status: ep.StatusCode.ERROR,
                              data: _e138
                            };
                          case 18:
                            _context238.next = 20;
                            return ep.encode(i);
                          case 20:
                          case "end":
                            return _context238.stop();
                        }
                      }, _callee233);
                    }));
                    return function (_x16) {
                      return _ref17.apply(this, arguments);
                    };
                  }(), hi(), t);
                case 3:
                case "end":
                  return _context239.stop();
              }
            }, _callee234, this);
          }));
          function handleMessage(_x246) {
            return _handleMessage.apply(this, arguments);
          }
          return handleMessage;
        }()
      }, {
        key: "_getLookupFunction",
        value: function _getLookupFunction(e) {
          var _iterator106 = _createForOfIteratorHelper(this.lookupFunctions.keys()),
            _step106;
          try {
            for (_iterator106.s(); !(_step106 = _iterator106.n()).done;) {
              var t = _step106.value;
              if (e.startsWith(t)) return this.lookupFunctions.get(t);
            }
          } catch (err) {
            _iterator106.e(err);
          } finally {
            _iterator106.f();
          }
        }
      }, {
        key: "registerLookupFunction",
        value: function registerLookupFunction(e, t) {
          if (this.lookupFunctions.has(e)) throw Qt(new Error("Fetch protocol handler for key prefix '" + e + "' already registered"), ku.ERR_KEY_ALREADY_EXISTS);
          this.lookupFunctions.set(e, t);
        }
      }, {
        key: "unregisterLookupFunction",
        value: function unregisterLookupFunction(e, t) {
          null != t && this.lookupFunctions.get(e) !== t || this.lookupFunctions.delete(e);
        }
      }]);
      return rp;
    }();
    var np = ne("libp2p:ping");
    var ip = /*#__PURE__*/function () {
      function ip(e, t) {
        _classCallCheck(this, ip);
        this.components = e, this.started = !1, this.protocol = "/".concat(t.protocolPrefix, "/ping/1.0.0"), this.init = t;
      }
      _createClass(ip, [{
        key: "start",
        value: function () {
          var _start11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee235() {
            return _regeneratorRuntime().wrap(function _callee235$(_context240) {
              while (1) switch (_context240.prev = _context240.next) {
                case 0:
                  _context240.next = 2;
                  return this.components.registrar.handle(this.protocol, this.handleMessage, {
                    maxInboundStreams: this.init.maxInboundStreams,
                    maxOutboundStreams: this.init.maxOutboundStreams
                  });
                case 2:
                  this.started = !0;
                case 3:
                case "end":
                  return _context240.stop();
              }
            }, _callee235, this);
          }));
          function start() {
            return _start11.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee236() {
            return _regeneratorRuntime().wrap(function _callee236$(_context241) {
              while (1) switch (_context241.prev = _context241.next) {
                case 0:
                  _context241.next = 2;
                  return this.components.registrar.unhandle(this.protocol);
                case 2:
                  this.started = !1;
                case 3:
                case "end":
                  return _context241.stop();
              }
            }, _callee236, this);
          }));
          function stop() {
            return _stop10.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "handleMessage",
        value: function handleMessage(e) {
          var t = e.stream;
          Ci(t, t).catch(function (e) {
            np.error(e);
          });
        }
      }, {
        key: "ping",
        value: function () {
          var _ping = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee238(e) {
            var t,
              r,
              n,
              i,
              s,
              o,
              a,
              _ref109,
              _e139,
              _t124,
              _s32,
              _args243 = arguments;
            return _regeneratorRuntime().wrap(function _callee238$(_context243) {
              while (1) switch (_context243.prev = _context243.next) {
                case 0:
                  t = _args243.length > 1 && _args243[1] !== undefined ? _args243[1] : {};
                  np("dialing %s to %p", this.protocol, e);
                  r = Date.now();
                  n = po(32);
                  _context243.next = 6;
                  return this.components.connectionManager.openConnection(e, t);
                case 6:
                  i = _context243.sent;
                  a = t.signal;
                  if (null == a) {
                    s = new Pu.TimeoutController(this.init.timeout), a = s.signal;
                    try {
                      (_ref109 = (0, xu.setMaxListeners)) === null || _ref109 === void 0 ? void 0 : _ref109(1 / 0, s.signal);
                    } catch (_unused20) {}
                  }
                  _context243.prev = 9;
                  _context243.next = 12;
                  return i.newStream([this.protocol], {
                    signal: a
                  });
                case 12:
                  o = _context243.sent;
                  _e139 = Hr(o, a);
                  _context243.next = 16;
                  return Ci([n], _e139, /*#__PURE__*/function () {
                    var _ref110 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee237(e) {
                      return _regeneratorRuntime().wrap(function _callee237$(_context242) {
                        while (1) switch (_context242.prev = _context242.next) {
                          case 0:
                            _context242.next = 2;
                            return Bu(e);
                          case 2:
                            return _context242.abrupt("return", _context242.sent);
                          case 3:
                          case "end":
                            return _context242.stop();
                        }
                      }, _callee237);
                    }));
                    return function (_x248) {
                      return _ref110.apply(this, arguments);
                    };
                  }());
                case 16:
                  _t124 = _context243.sent;
                  _s32 = Date.now();
                  if (!(null == _t124 || !Xt(n, _t124.subarray()))) {
                    _context243.next = 20;
                    break;
                  }
                  throw Qt(new Error("Received wrong ping ack"), ku.ERR_WRONG_PING_ACK);
                case 20:
                  return _context243.abrupt("return", _s32 - r);
                case 21:
                  _context243.prev = 21;
                  null != s && s.clear(), null != o && o.close();
                  return _context243.finish(21);
                case 24:
                case "end":
                  return _context243.stop();
              }
            }, _callee238, this, [[9,, 21, 24]]);
          }));
          function ping(_x247) {
            return _ping.apply(this, arguments);
          }
          return ping;
        }()
      }]);
      return ip;
    }();
    var sp = __webpack_require__(9134);
    var op = "object" == (typeof window === "undefined" ? "undefined" : _typeof(window)) && "object" == (typeof document === "undefined" ? "undefined" : _typeof(document)) && 9 === document.nodeType,
      ap = sp(),
      cp = op && !ap,
      lp = ap && !op,
      up = ap && op,
      hp = void 0 !== globalThis.process && void 0 !== globalThis.process.release && "node" === globalThis.process.release.name && !ap,
      dp = "function" == typeof importScripts && "undefined" != typeof self && "undefined" != typeof WorkerGlobalScope && self instanceof WorkerGlobalScope,
      pp = (void 0 !== globalThis.process && void 0 !== globalThis.process.env && globalThis.process.env.NODE_ENV, "undefined" != typeof navigator && "ReactNative" === navigator.product);
    function fp(e) {
      var _e$nodeAddress2 = e.nodeAddress(),
        t = _e$nodeAddress2.address;
      return /^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(r = t) || /^::1$/.test(r);
      var r;
    }
    var yp = ne("libp2p:nat");
    function gp() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1024;
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 65535;
      return Math.floor(Math.random() * (t - e + 1) + e);
    }
    var mp = /*#__PURE__*/function () {
      function mp(e, t) {
        var _t$description, _t$ttl, _t$keepAlive;
        _classCallCheck(this, mp);
        if (this.components = e, this.started = !1, this.enabled = t.enabled, this.externalAddress = t.externalAddress, this.localAddress = t.localAddress, this.description = (_t$description = t.description) !== null && _t$description !== void 0 ? _t$description : "libp2p@".concat(Yd, " ").concat(this.components.peerId.toString()), this.ttl = (_t$ttl = t.ttl) !== null && _t$ttl !== void 0 ? _t$ttl : 7200, this.keepAlive = (_t$keepAlive = t.keepAlive) !== null && _t$keepAlive !== void 0 ? _t$keepAlive : !0, this.gateway = t.gateway, this.ttl < 7200) throw Qt(new Error("NatManager ttl should be at least 7200 seconds"), ku.ERR_INVALID_PARAMETERS);
      }
      _createClass(mp, [{
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "start",
        value: function start() {}
      }, {
        key: "afterStart",
        value: function afterStart() {
          cp || !this.enabled || this.started || (this.started = !0, this._start().catch(function (e) {
            yp.error(e);
          }));
        }
      }, {
        key: "_start",
        value: function () {
          var _start12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee239() {
            var e, _iterator107, _step107, _this$externalAddress, t, _t$toOptions, _e140, r, n, i, s, o, a, c;
            return _regeneratorRuntime().wrap(function _callee239$(_context244) {
              while (1) switch (_context244.prev = _context244.next) {
                case 0:
                  e = this.components.transportManager.getAddrs();
                  _iterator107 = _createForOfIteratorHelper(e);
                  _context244.prev = 2;
                  _iterator107.s();
                case 4:
                  if ((_step107 = _iterator107.n()).done) {
                    _context244.next = 36;
                    break;
                  }
                  t = _step107.value;
                  _t$toOptions = t.toOptions(), _e140 = _t$toOptions.family, r = _t$toOptions.host, n = _t$toOptions.port, i = _t$toOptions.transport;
                  if (!(!t.isThinWaistAddress() || "tcp" !== i)) {
                    _context244.next = 9;
                    break;
                  }
                  return _context244.abrupt("continue", 34);
                case 9:
                  if (!fp(t)) {
                    _context244.next = 11;
                    break;
                  }
                  return _context244.abrupt("continue", 34);
                case 11:
                  if (!(4 !== _e140)) {
                    _context244.next = 13;
                    break;
                  }
                  return _context244.abrupt("continue", 34);
                case 13:
                  _context244.next = 15;
                  return this._getClient();
                case 15:
                  s = _context244.sent;
                  if (!((_this$externalAddress = this.externalAddress) !== null && _this$externalAddress !== void 0)) {
                    _context244.next = 20;
                    break;
                  }
                  _context244.t0 = _this$externalAddress;
                  _context244.next = 23;
                  break;
                case 20:
                  _context244.next = 22;
                  return s.externalIp();
                case 22:
                  _context244.t0 = _context244.sent;
                case 23:
                  o = _context244.t0;
                  a = Fh(o);
                  if (!(!0 === a)) {
                    _context244.next = 27;
                    break;
                  }
                  throw new Error("".concat(o, " is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT"));
                case 27:
                  if (!(null == a)) {
                    _context244.next = 29;
                    break;
                  }
                  throw new Error("".concat(o, " is not an IP address"));
                case 29:
                  c = gp();
                  yp("opening uPnP connection from ".concat(o, ":").concat(c, " to ").concat(r, ":").concat(n));
                  _context244.next = 33;
                  return s.map({
                    publicPort: c,
                    localPort: n,
                    localAddress: this.localAddress,
                    protocol: "TCP" === i.toUpperCase() ? "TCP" : "UDP"
                  });
                case 33:
                  this.components.addressManager.addObservedAddr(cr({
                    family: 4,
                    address: o,
                    port: c
                  }, i));
                case 34:
                  _context244.next = 4;
                  break;
                case 36:
                  _context244.next = 41;
                  break;
                case 38:
                  _context244.prev = 38;
                  _context244.t1 = _context244["catch"](2);
                  _iterator107.e(_context244.t1);
                case 41:
                  _context244.prev = 41;
                  _iterator107.f();
                  return _context244.finish(41);
                case 44:
                case "end":
                  return _context244.stop();
              }
            }, _callee239, this, [[2, 38, 41, 44]]);
          }));
          function _start() {
            return _start12.apply(this, arguments);
          }
          return _start;
        }()
      }, {
        key: "_getClient",
        value: function () {
          var _getClient2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee241() {
            return _regeneratorRuntime().wrap(function _callee241$(_context246) {
              while (1) switch (_context246.prev = _context246.next) {
                case 0:
                  _context246.t0 = null != this.client;
                  if (_context246.t0) {
                    _context246.next = 5;
                    break;
                  }
                  _context246.next = 4;
                  return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee240() {
                    return _regeneratorRuntime().wrap(function _callee240$(_context245) {
                      while (1) switch (_context245.prev = _context245.next) {
                        case 0:
                          throw new Error("Not supported in browsers");
                        case 1:
                        case "end":
                          return _context245.stop();
                      }
                    }, _callee240);
                  }))((this.description, this.ttl, this.keepAlive, this.gateway));
                case 4:
                  this.client = _context246.sent;
                case 5:
                  return _context246.abrupt("return", this.client);
                case 6:
                case "end":
                  return _context246.stop();
              }
            }, _callee241, this);
          }));
          function _getClient() {
            return _getClient2.apply(this, arguments);
          }
          return _getClient;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee242() {
            return _regeneratorRuntime().wrap(function _callee242$(_context247) {
              while (1) switch (_context247.prev = _context247.next) {
                case 0:
                  if (!(!cp && null != this.client)) {
                    _context247.next = 10;
                    break;
                  }
                  _context247.prev = 1;
                  _context247.next = 4;
                  return this.client.close();
                case 4:
                  this.client = void 0;
                  _context247.next = 10;
                  break;
                case 7:
                  _context247.prev = 7;
                  _context247.t0 = _context247["catch"](1);
                  yp.error(_context247.t0);
                case 10:
                case "end":
                  return _context247.stop();
              }
            }, _callee242, this, [[1, 7]]);
          }));
          function stop() {
            return _stop11.apply(this, arguments);
          }
          return stop;
        }()
      }]);
      return mp;
    }();
    var wp = ne("libp2p:peer-record-updater");
    var Ep = /*#__PURE__*/function () {
      function Ep(e) {
        _classCallCheck(this, Ep);
        this.components = e, this.started = !1, this.update = this.update.bind(this);
      }
      _createClass(Ep, [{
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "start",
        value: function () {
          var _start13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee243() {
            return _regeneratorRuntime().wrap(function _callee243$(_context248) {
              while (1) switch (_context248.prev = _context248.next) {
                case 0:
                  this.started = !0, this.components.transportManager.addEventListener("listener:listening", this.update), this.components.transportManager.addEventListener("listener:close", this.update), this.components.addressManager.addEventListener("change:addresses", this.update);
                case 1:
                case "end":
                  return _context248.stop();
              }
            }, _callee243, this);
          }));
          function start() {
            return _start13.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee244() {
            return _regeneratorRuntime().wrap(function _callee244$(_context249) {
              while (1) switch (_context249.prev = _context249.next) {
                case 0:
                  this.started = !1, this.components.transportManager.removeEventListener("listener:listening", this.update), this.components.transportManager.removeEventListener("listener:close", this.update), this.components.addressManager.removeEventListener("change:addresses", this.update);
                case 1:
                case "end":
                  return _context249.stop();
              }
            }, _callee244, this);
          }));
          function stop() {
            return _stop12.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "update",
        value: function update() {
          var _this142 = this;
          Promise.resolve().then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee245() {
            var e, t;
            return _regeneratorRuntime().wrap(function _callee245$(_context250) {
              while (1) switch (_context250.prev = _context250.next) {
                case 0:
                  e = new Wd({
                    peerId: _this142.components.peerId,
                    multiaddrs: _this142.components.addressManager.getAddresses().map(function (e) {
                      return e.decapsulateCode(Lt("p2p").code);
                    })
                  });
                  _context250.next = 3;
                  return Hd.seal(e, _this142.components.peerId);
                case 3:
                  t = _context250.sent;
                  _context250.next = 6;
                  return _this142.components.peerStore.addressBook.consumePeerRecord(t);
                case 6:
                case "end":
                  return _context250.stop();
              }
            }, _callee245);
          }))).catch(function (e) {
            wp.error("Could not update self peer record: %o", e);
          });
        }
      }]);
      return Ep;
    }();
    var bp = /*#__PURE__*/function () {
      function bp(e) {
        _classCallCheck(this, bp);
        this.dht = e;
      }
      _createClass(bp, [{
        key: "findPeer",
        value: function () {
          var _findPeer2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee246(e) {
            var t,
              _iteratorAbruptCompletion25,
              _didIteratorError25,
              _iteratorError25,
              _iterator25,
              _step25,
              r,
              _args251 = arguments;
            return _regeneratorRuntime().wrap(function _callee246$(_context251) {
              while (1) switch (_context251.prev = _context251.next) {
                case 0:
                  t = _args251.length > 1 && _args251[1] !== undefined ? _args251[1] : {};
                  _iteratorAbruptCompletion25 = false;
                  _didIteratorError25 = false;
                  _context251.prev = 3;
                  _iterator25 = _asyncIterator(this.dht.findPeer(e, t));
                case 5:
                  _context251.next = 7;
                  return _iterator25.next();
                case 7:
                  if (!(_iteratorAbruptCompletion25 = !(_step25 = _context251.sent).done)) {
                    _context251.next = 14;
                    break;
                  }
                  r = _step25.value;
                  if (!("FINAL_PEER" === r.name)) {
                    _context251.next = 11;
                    break;
                  }
                  return _context251.abrupt("return", r.peer);
                case 11:
                  _iteratorAbruptCompletion25 = false;
                  _context251.next = 5;
                  break;
                case 14:
                  _context251.next = 20;
                  break;
                case 16:
                  _context251.prev = 16;
                  _context251.t0 = _context251["catch"](3);
                  _didIteratorError25 = true;
                  _iteratorError25 = _context251.t0;
                case 20:
                  _context251.prev = 20;
                  _context251.prev = 21;
                  if (!(_iteratorAbruptCompletion25 && _iterator25.return != null)) {
                    _context251.next = 25;
                    break;
                  }
                  _context251.next = 25;
                  return _iterator25.return();
                case 25:
                  _context251.prev = 25;
                  if (!_didIteratorError25) {
                    _context251.next = 28;
                    break;
                  }
                  throw _iteratorError25;
                case 28:
                  return _context251.finish(25);
                case 29:
                  return _context251.finish(20);
                case 30:
                  throw Qt(new Error(Ru.NOT_FOUND), ku.ERR_NOT_FOUND);
                case 31:
                case "end":
                  return _context251.stop();
              }
            }, _callee246, this, [[3, 16, 20, 30], [21,, 25, 29]]);
          }));
          function findPeer(_x249) {
            return _findPeer2.apply(this, arguments);
          }
          return findPeer;
        }()
      }, {
        key: "getClosestPeers",
        value: function getClosestPeers(e) {
          var _this9 = this;
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee247() {
            var _iteratorAbruptCompletion26, _didIteratorError26, _iteratorError26, _iterator26, _step26, r;
            return _regeneratorRuntime().wrap(function _callee247$(_context252) {
              while (1) switch (_context252.prev = _context252.next) {
                case 0:
                  _iteratorAbruptCompletion26 = false;
                  _didIteratorError26 = false;
                  _context252.prev = 2;
                  _iterator26 = _asyncIterator(_this9.dht.getClosestPeers(e, t));
                case 4:
                  _context252.next = 6;
                  return _awaitAsyncGenerator(_iterator26.next());
                case 6:
                  if (!(_iteratorAbruptCompletion26 = !(_step26 = _context252.sent).done)) {
                    _context252.next = 15;
                    break;
                  }
                  r = _step26.value;
                  _context252.t0 = "FINAL_PEER" === r.name;
                  if (!_context252.t0) {
                    _context252.next = 12;
                    break;
                  }
                  _context252.next = 12;
                  return r.peer;
                case 12:
                  _iteratorAbruptCompletion26 = false;
                  _context252.next = 4;
                  break;
                case 15:
                  _context252.next = 21;
                  break;
                case 17:
                  _context252.prev = 17;
                  _context252.t1 = _context252["catch"](2);
                  _didIteratorError26 = true;
                  _iteratorError26 = _context252.t1;
                case 21:
                  _context252.prev = 21;
                  _context252.prev = 22;
                  if (!(_iteratorAbruptCompletion26 && _iterator26.return != null)) {
                    _context252.next = 26;
                    break;
                  }
                  _context252.next = 26;
                  return _awaitAsyncGenerator(_iterator26.return());
                case 26:
                  _context252.prev = 26;
                  if (!_didIteratorError26) {
                    _context252.next = 29;
                    break;
                  }
                  throw _iteratorError26;
                case 29:
                  return _context252.finish(26);
                case 30:
                  return _context252.finish(21);
                case 31:
                case "end":
                  return _context252.stop();
              }
            }, _callee247, null, [[2, 17, 21, 31], [22,, 26, 30]]);
          }))();
        }
      }]);
      return bp;
    }();
    var vp = {
        ERR_INVALID_PARAMETERS: "ERR_INVALID_PARAMETERS",
        ERR_NOT_FOUND: "ERR_NOT_FOUND"
      },
      _p = ne("libp2p:peer-store:address-book"),
      Sp = "change:multiaddrs";
    function Cp() {
      return _Cp.apply(this, arguments);
    }
    function _Cp() {
      _Cp = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee414() {
        return _regeneratorRuntime().wrap(function _callee414$(_context422) {
          while (1) switch (_context422.prev = _context422.next) {
            case 0:
              return _context422.abrupt("return", !0);
            case 1:
            case "end":
              return _context422.stop();
          }
        }, _callee414);
      }));
      return _Cp.apply(this, arguments);
    }
    var Ap = /*#__PURE__*/function () {
      function Ap(e, t, r) {
        _classCallCheck(this, Ap);
        this.dispatchEvent = e, this.store = t, this.addressFilter = r !== null && r !== void 0 ? r : Cp;
      }
      _createClass(Ap, [{
        key: "consumePeerRecord",
        value: function () {
          var _consumePeerRecord = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee248(e) {
            var t, r, n, i, _t125, s, _e141, _r138, o;
            return _regeneratorRuntime().wrap(function _callee248$(_context253) {
              while (1) switch (_context253.prev = _context253.next) {
                case 0:
                  _p.trace("consumePeerRecord await write lock");
                  _context253.next = 3;
                  return this.store.lock.writeLock();
                case 3:
                  t = _context253.sent;
                  _p.trace("consumePeerRecord got write lock");
                  _context253.prev = 5;
                  _context253.prev = 6;
                  _t125 = Wd.createFromProtobuf(e.payload);
                  _context253.next = 13;
                  break;
                case 10:
                  _context253.prev = 10;
                  _context253.t0 = _context253["catch"](6);
                  return _context253.abrupt("return", (_p.error("invalid peer record received"), !1));
                case 13:
                  r = _t125.peerId;
                  s = _t125.multiaddrs;
                  if (r.equals(e.peerId)) {
                    _context253.next = 17;
                    break;
                  }
                  return _context253.abrupt("return", (_p("signing key does not match PeerId in the PeerRecord"), !1));
                case 17:
                  if (!(null == s || 0 === s.length)) {
                    _context253.next = 19;
                    break;
                  }
                  return _context253.abrupt("return", !1);
                case 19:
                  _context253.next = 21;
                  return this.store.has(r);
                case 21:
                  _context253.t1 = _context253.sent;
                  if (!_context253.t1) {
                    _context253.next = 27;
                    break;
                  }
                  _context253.next = 25;
                  return this.store.load(r);
                case 25:
                  n = _context253.sent;
                  _context253.t1 = null != n.peerRecordEnvelope;
                case 27:
                  if (!_context253.t1) {
                    _context253.next = 34;
                    break;
                  }
                  _context253.next = 30;
                  return Hd.createFromProtobuf(n.peerRecordEnvelope);
                case 30:
                  _e141 = _context253.sent;
                  _r138 = Wd.createFromProtobuf(_e141.payload);
                  if (!(_r138.seqNumber >= _t125.seqNumber)) {
                    _context253.next = 34;
                    break;
                  }
                  return _context253.abrupt("return", (_p("sequence number was lower or equal to existing sequence number - stored: %d received: %d", _r138.seqNumber, _t125.seqNumber), !1));
                case 34:
                  _context253.next = 36;
                  return Ip(r, s, this.addressFilter, !0);
                case 36:
                  o = _context253.sent;
                  _context253.next = 39;
                  return this.store.patchOrCreate(r, {
                    addresses: o,
                    peerRecordEnvelope: e.marshal().subarray()
                  });
                case 39:
                  i = _context253.sent;
                  _p("stored provided peer record for %p", _t125.peerId);
                case 41:
                  _context253.prev = 41;
                  _p.trace("consumePeerRecord release write lock"), t();
                  return _context253.finish(41);
                case 44:
                  return _context253.abrupt("return", (this.dispatchEvent(new Qr(Sp, {
                    detail: {
                      peerId: r,
                      multiaddrs: i.addresses.map(function (_ref113) {
                        var e = _ref113.multiaddr;
                        return e;
                      }),
                      oldMultiaddrs: null == n ? [] : n.addresses.map(function (_ref114) {
                        var e = _ref114.multiaddr;
                        return e;
                      })
                    }
                  })), !0));
                case 45:
                case "end":
                  return _context253.stop();
              }
            }, _callee248, this, [[5,, 41, 44], [6, 10]]);
          }));
          function consumePeerRecord(_x250) {
            return _consumePeerRecord.apply(this, arguments);
          }
          return consumePeerRecord;
        }()
      }, {
        key: "getRawEnvelope",
        value: function () {
          var _getRawEnvelope = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee249(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee249$(_context254) {
              while (1) switch (_context254.prev = _context254.next) {
                case 0:
                  _p.trace("getRawEnvelope await read lock");
                  _context254.next = 3;
                  return this.store.lock.readLock();
                case 3:
                  t = _context254.sent;
                  _p.trace("getRawEnvelope got read lock");
                  _context254.prev = 5;
                  _context254.next = 8;
                  return this.store.load(e);
                case 8:
                  return _context254.abrupt("return", _context254.sent.peerRecordEnvelope);
                case 11:
                  _context254.prev = 11;
                  _context254.t0 = _context254["catch"](5);
                  if (!(_context254.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context254.next = 15;
                    break;
                  }
                  throw _context254.t0;
                case 15:
                  _context254.prev = 15;
                  _p.trace("getRawEnvelope release read lock"), t();
                  return _context254.finish(15);
                case 18:
                case "end":
                  return _context254.stop();
              }
            }, _callee249, this, [[5, 11, 15, 18]]);
          }));
          function getRawEnvelope(_x251) {
            return _getRawEnvelope.apply(this, arguments);
          }
          return getRawEnvelope;
        }()
      }, {
        key: "getPeerRecord",
        value: function () {
          var _getPeerRecord = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee250(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee250$(_context255) {
              while (1) switch (_context255.prev = _context255.next) {
                case 0:
                  _context255.next = 2;
                  return this.getRawEnvelope(e);
                case 2:
                  t = _context255.sent;
                  if (!(null != t)) {
                    _context255.next = 7;
                    break;
                  }
                  _context255.next = 6;
                  return Hd.createFromProtobuf(t);
                case 6:
                  return _context255.abrupt("return", _context255.sent);
                case 7:
                case "end":
                  return _context255.stop();
              }
            }, _callee250, this);
          }));
          function getPeerRecord(_x252) {
            return _getPeerRecord.apply(this, arguments);
          }
          return getPeerRecord;
        }()
      }, {
        key: "get",
        value: function () {
          var _get5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee251(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee251$(_context256) {
              while (1) switch (_context256.prev = _context256.next) {
                case 0:
                  e = rc(e), _p.trace("get wait for read lock");
                  _context256.next = 3;
                  return this.store.lock.readLock();
                case 3:
                  t = _context256.sent;
                  _p.trace("get got read lock");
                  _context256.prev = 5;
                  _context256.next = 8;
                  return this.store.load(e);
                case 8:
                  return _context256.abrupt("return", _context256.sent.addresses);
                case 11:
                  _context256.prev = 11;
                  _context256.t0 = _context256["catch"](5);
                  if (!(_context256.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context256.next = 15;
                    break;
                  }
                  throw _context256.t0;
                case 15:
                  _context256.prev = 15;
                  _p.trace("get release read lock"), t();
                  return _context256.finish(15);
                case 18:
                  return _context256.abrupt("return", []);
                case 19:
                case "end":
                  return _context256.stop();
              }
            }, _callee251, this, [[5, 11, 15, 18]]);
          }));
          function get(_x253) {
            return _get5.apply(this, arguments);
          }
          return get;
        }()
      }, {
        key: "set",
        value: function () {
          var _set = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee252(e, t) {
            var r, n, i, s, _r139;
            return _regeneratorRuntime().wrap(function _callee252$(_context257) {
              while (1) switch (_context257.prev = _context257.next) {
                case 0:
                  if (!(e = rc(e), !Array.isArray(t))) {
                    _context257.next = 2;
                    break;
                  }
                  throw _p.error("multiaddrs must be an array of Multiaddrs"), new rs("multiaddrs must be an array of Multiaddrs", vp.ERR_INVALID_PARAMETERS);
                case 2:
                  _p.trace("set await write lock");
                  _context257.next = 5;
                  return this.store.lock.writeLock();
                case 5:
                  r = _context257.sent;
                  _p.trace("set got write lock");
                  s = !1;
                  _context257.prev = 8;
                  _context257.next = 11;
                  return Ip(e, t, this.addressFilter);
                case 11:
                  _r139 = _context257.sent;
                  if (!(0 === _r139.length)) {
                    _context257.next = 14;
                    break;
                  }
                  return _context257.abrupt("return");
                case 14:
                  _context257.prev = 14;
                  _context257.next = 17;
                  return this.store.load(e);
                case 17:
                  n = _context257.sent;
                  s = !0;
                  if (!(new Set([].concat(_toConsumableArray(_r139.map(function (_ref115) {
                    var e = _ref115.multiaddr;
                    return e.toString();
                  })), _toConsumableArray(n.addresses.map(function (_ref116) {
                    var e = _ref116.multiaddr;
                    return e.toString();
                  })))).size === n.addresses.length && _r139.length === n.addresses.length)) {
                    _context257.next = 21;
                    break;
                  }
                  return _context257.abrupt("return");
                case 21:
                  _context257.next = 27;
                  break;
                case 23:
                  _context257.prev = 23;
                  _context257.t0 = _context257["catch"](14);
                  if (!(_context257.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context257.next = 27;
                    break;
                  }
                  throw _context257.t0;
                case 27:
                  _context257.next = 29;
                  return this.store.patchOrCreate(e, {
                    addresses: _r139
                  });
                case 29:
                  i = _context257.sent;
                  _p("set multiaddrs for %p", e);
                case 31:
                  _context257.prev = 31;
                  _p.trace("set multiaddrs for %p", e), _p("set release write lock"), r();
                  return _context257.finish(31);
                case 34:
                  this.dispatchEvent(new Qr(Sp, {
                    detail: {
                      peerId: e,
                      multiaddrs: i.addresses.map(function (e) {
                        return e.multiaddr;
                      }),
                      oldMultiaddrs: null == n ? [] : n.addresses.map(function (_ref117) {
                        var e = _ref117.multiaddr;
                        return e;
                      })
                    }
                  })), s || this.dispatchEvent(new Qr("peer", {
                    detail: {
                      id: e,
                      multiaddrs: i.addresses.map(function (e) {
                        return e.multiaddr;
                      }),
                      protocols: i.protocols
                    }
                  }));
                case 35:
                case "end":
                  return _context257.stop();
              }
            }, _callee252, this, [[8,, 31, 34], [14, 23]]);
          }));
          function set(_x254, _x255) {
            return _set.apply(this, arguments);
          }
          return set;
        }()
      }, {
        key: "add",
        value: function () {
          var _add = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee253(e, t) {
            var r, n, i, s, _r140;
            return _regeneratorRuntime().wrap(function _callee253$(_context258) {
              while (1) switch (_context258.prev = _context258.next) {
                case 0:
                  if (!(e = rc(e), !Array.isArray(t))) {
                    _context258.next = 2;
                    break;
                  }
                  throw _p.error("multiaddrs must be an array of Multiaddrs"), new rs("multiaddrs must be an array of Multiaddrs", vp.ERR_INVALID_PARAMETERS);
                case 2:
                  _p.trace("add await write lock");
                  _context258.next = 5;
                  return this.store.lock.writeLock();
                case 5:
                  r = _context258.sent;
                  _p.trace("add got write lock");
                  _context258.prev = 7;
                  _context258.next = 10;
                  return Ip(e, t, this.addressFilter);
                case 10:
                  _r140 = _context258.sent;
                  if (!(0 === _r140.length)) {
                    _context258.next = 13;
                    break;
                  }
                  return _context258.abrupt("return");
                case 13:
                  _context258.prev = 13;
                  _context258.next = 16;
                  return this.store.load(e);
                case 16:
                  i = _context258.sent;
                  n = !0;
                  if (!(new Set([].concat(_toConsumableArray(_r140.map(function (_ref118) {
                    var e = _ref118.multiaddr;
                    return e.toString();
                  })), _toConsumableArray(i.addresses.map(function (_ref119) {
                    var e = _ref119.multiaddr;
                    return e.toString();
                  })))).size === i.addresses.length)) {
                    _context258.next = 20;
                    break;
                  }
                  return _context258.abrupt("return");
                case 20:
                  _context258.next = 26;
                  break;
                case 22:
                  _context258.prev = 22;
                  _context258.t0 = _context258["catch"](13);
                  if (!(_context258.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context258.next = 26;
                    break;
                  }
                  throw _context258.t0;
                case 26:
                  _context258.next = 28;
                  return this.store.mergeOrCreate(e, {
                    addresses: _r140
                  });
                case 28:
                  s = _context258.sent;
                  _p("added multiaddrs for %p", e);
                case 30:
                  _context258.prev = 30;
                  _p.trace("set release write lock"), r();
                  return _context258.finish(30);
                case 33:
                  this.dispatchEvent(new Qr(Sp, {
                    detail: {
                      peerId: e,
                      multiaddrs: s.addresses.map(function (e) {
                        return e.multiaddr;
                      }),
                      oldMultiaddrs: null == i ? [] : i.addresses.map(function (_ref120) {
                        var e = _ref120.multiaddr;
                        return e;
                      })
                    }
                  })), !0 === n && this.dispatchEvent(new Qr("peer", {
                    detail: {
                      id: e,
                      multiaddrs: s.addresses.map(function (e) {
                        return e.multiaddr;
                      }),
                      protocols: s.protocols
                    }
                  }));
                case 34:
                case "end":
                  return _context258.stop();
              }
            }, _callee253, this, [[7,, 30, 33], [13, 22]]);
          }));
          function add(_x256, _x257) {
            return _add.apply(this, arguments);
          }
          return add;
        }()
      }, {
        key: "delete",
        value: function () {
          var _delete3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee254(e) {
            var t, r;
            return _regeneratorRuntime().wrap(function _callee254$(_context259) {
              while (1) switch (_context259.prev = _context259.next) {
                case 0:
                  e = rc(e), _p.trace("delete await write lock");
                  _context259.next = 3;
                  return this.store.lock.writeLock();
                case 3:
                  t = _context259.sent;
                  _p.trace("delete got write lock");
                  _context259.prev = 5;
                  _context259.prev = 6;
                  _context259.next = 9;
                  return this.store.load(e);
                case 9:
                  r = _context259.sent;
                  _context259.next = 16;
                  break;
                case 12:
                  _context259.prev = 12;
                  _context259.t0 = _context259["catch"](6);
                  if (!(_context259.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context259.next = 16;
                    break;
                  }
                  throw _context259.t0;
                case 16:
                  _context259.next = 18;
                  return this.store.patchOrCreate(e, {
                    addresses: []
                  });
                case 18:
                  _context259.prev = 18;
                  _p.trace("delete release write lock"), t();
                  return _context259.finish(18);
                case 21:
                  null != r && this.dispatchEvent(new Qr(Sp, {
                    detail: {
                      peerId: e,
                      multiaddrs: [],
                      oldMultiaddrs: null == r ? [] : r.addresses.map(function (_ref121) {
                        var e = _ref121.multiaddr;
                        return e;
                      })
                    }
                  }));
                case 22:
                case "end":
                  return _context259.stop();
              }
            }, _callee254, this, [[5,, 18, 21], [6, 12]]);
          }));
          function _delete(_x258) {
            return _delete3.apply(this, arguments);
          }
          return _delete;
        }()
      }]);
      return Ap;
    }();
    function Ip(_x259, _x260, _x261) {
      return _Ip.apply(this, arguments);
    }
    function _Ip() {
      _Ip = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee416(e, t, r) {
        var n,
          i,
          _args424 = arguments;
        return _regeneratorRuntime().wrap(function _callee416$(_context424) {
          while (1) switch (_context424.prev = _context424.next) {
            case 0:
              n = _args424.length > 3 && _args424[3] !== undefined ? _args424[3] : !1;
              i = [];
              _context424.next = 4;
              return Promise.all(t.map( /*#__PURE__*/function () {
                var _ref174 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee415(t) {
                  return _regeneratorRuntime().wrap(function _callee415$(_context423) {
                    while (1) switch (_context423.prev = _context423.next) {
                      case 0:
                        if (lr(t)) {
                          _context423.next = 2;
                          break;
                        }
                        throw _p.error("multiaddr must be an instance of Multiaddr"), new rs("multiaddr must be an instance of Multiaddr", vp.ERR_INVALID_PARAMETERS);
                      case 2:
                        _context423.next = 4;
                        return r(e, t);
                      case 4:
                        _context423.t0 = _context423.sent;
                        if (!_context423.t0) {
                          _context423.next = 7;
                          break;
                        }
                        i.push({
                          multiaddr: t,
                          isCertified: n
                        });
                      case 7:
                      case "end":
                        return _context423.stop();
                    }
                  }, _callee415);
                }));
                return function (_x393) {
                  return _ref174.apply(this, arguments);
                };
              }()));
            case 4:
              return _context424.abrupt("return", i);
            case 5:
            case "end":
              return _context424.stop();
          }
        }, _callee416);
      }));
      return _Ip.apply(this, arguments);
    }
    var Tp = ne("libp2p:peer-store:key-book"),
      Rp = "change:pubkey";
    var kp = /*#__PURE__*/function () {
      function kp(e, t) {
        _classCallCheck(this, kp);
        this.dispatchEvent = e, this.store = t;
      }
      _createClass(kp, [{
        key: "set",
        value: function () {
          var _set2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee255(e, t) {
            var r, n, i;
            return _regeneratorRuntime().wrap(function _callee255$(_context260) {
              while (1) switch (_context260.prev = _context260.next) {
                case 0:
                  if (!(e = rc(e), !(t instanceof Uint8Array))) {
                    _context260.next = 2;
                    break;
                  }
                  throw Tp.error("publicKey must be an instance of Uint8Array to store data"), new rs("publicKey must be an instance of PublicKey", vp.ERR_INVALID_PARAMETERS);
                case 2:
                  Tp.trace("set await write lock");
                  _context260.next = 5;
                  return this.store.lock.writeLock();
                case 5:
                  r = _context260.sent;
                  Tp.trace("set got write lock");
                  i = !1;
                  _context260.prev = 8;
                  _context260.prev = 9;
                  _context260.next = 12;
                  return this.store.load(e);
                case 12:
                  n = _context260.sent;
                  if (!(null != n.pubKey && Xt(n.pubKey, t))) {
                    _context260.next = 15;
                    break;
                  }
                  return _context260.abrupt("return");
                case 15:
                  _context260.next = 21;
                  break;
                case 17:
                  _context260.prev = 17;
                  _context260.t0 = _context260["catch"](9);
                  if (!(_context260.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context260.next = 21;
                    break;
                  }
                  throw _context260.t0;
                case 21:
                  _context260.next = 23;
                  return this.store.patchOrCreate(e, {
                    pubKey: t
                  });
                case 23:
                  i = !0;
                case 24:
                  _context260.prev = 24;
                  Tp.trace("set release write lock"), r();
                  return _context260.finish(24);
                case 27:
                  i && this.dispatchEvent(new Qr(Rp, {
                    detail: {
                      peerId: e,
                      publicKey: t,
                      oldPublicKey: null == n ? void 0 : n.pubKey
                    }
                  }));
                case 28:
                case "end":
                  return _context260.stop();
              }
            }, _callee255, this, [[8,, 24, 27], [9, 17]]);
          }));
          function set(_x262, _x263) {
            return _set2.apply(this, arguments);
          }
          return set;
        }()
      }, {
        key: "get",
        value: function () {
          var _get6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee256(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee256$(_context261) {
              while (1) switch (_context261.prev = _context261.next) {
                case 0:
                  e = rc(e), Tp.trace("get await write lock");
                  _context261.next = 3;
                  return this.store.lock.readLock();
                case 3:
                  t = _context261.sent;
                  Tp.trace("get got write lock");
                  _context261.prev = 5;
                  _context261.next = 8;
                  return this.store.load(e);
                case 8:
                  return _context261.abrupt("return", _context261.sent.pubKey);
                case 11:
                  _context261.prev = 11;
                  _context261.t0 = _context261["catch"](5);
                  if (!(_context261.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context261.next = 15;
                    break;
                  }
                  throw _context261.t0;
                case 15:
                  _context261.prev = 15;
                  Tp("get release write lock"), t();
                  return _context261.finish(15);
                case 18:
                case "end":
                  return _context261.stop();
              }
            }, _callee256, this, [[5, 11, 15, 18]]);
          }));
          function get(_x264) {
            return _get6.apply(this, arguments);
          }
          return get;
        }()
      }, {
        key: "delete",
        value: function () {
          var _delete4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee257(e) {
            var t, r;
            return _regeneratorRuntime().wrap(function _callee257$(_context262) {
              while (1) switch (_context262.prev = _context262.next) {
                case 0:
                  e = rc(e), Tp.trace("delete await write lock");
                  _context262.next = 3;
                  return this.store.lock.writeLock();
                case 3:
                  t = _context262.sent;
                  Tp.trace("delete got write lock");
                  _context262.prev = 5;
                  _context262.prev = 6;
                  _context262.next = 9;
                  return this.store.load(e);
                case 9:
                  r = _context262.sent;
                  _context262.next = 16;
                  break;
                case 12:
                  _context262.prev = 12;
                  _context262.t0 = _context262["catch"](6);
                  if (!(_context262.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context262.next = 16;
                    break;
                  }
                  throw _context262.t0;
                case 16:
                  _context262.next = 18;
                  return this.store.patchOrCreate(e, {
                    pubKey: void 0
                  });
                case 18:
                  _context262.next = 24;
                  break;
                case 20:
                  _context262.prev = 20;
                  _context262.t1 = _context262["catch"](5);
                  if (!(_context262.t1.code !== vp.ERR_NOT_FOUND)) {
                    _context262.next = 24;
                    break;
                  }
                  throw _context262.t1;
                case 24:
                  _context262.prev = 24;
                  Tp.trace("delete release write lock"), t();
                  return _context262.finish(24);
                case 27:
                  this.dispatchEvent(new Qr(Rp, {
                    detail: {
                      peerId: e,
                      publicKey: void 0,
                      oldPublicKey: null == r ? void 0 : r.pubKey
                    }
                  }));
                case 28:
                case "end":
                  return _context262.stop();
              }
            }, _callee257, this, [[5, 20, 24, 27], [6, 12]]);
          }));
          function _delete(_x265) {
            return _delete4.apply(this, arguments);
          }
          return _delete;
        }()
      }]);
      return kp;
    }();
    var Np = ne("libp2p:peer-store:metadata-book"),
      Lp = "change:metadata";
    var Dp = /*#__PURE__*/function () {
      function Dp(e, t) {
        _classCallCheck(this, Dp);
        this.dispatchEvent = e, this.store = t;
      }
      _createClass(Dp, [{
        key: "get",
        value: function () {
          var _get7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee258(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee258$(_context263) {
              while (1) switch (_context263.prev = _context263.next) {
                case 0:
                  e = rc(e), Np.trace("get await read lock");
                  _context263.next = 3;
                  return this.store.lock.readLock();
                case 3:
                  t = _context263.sent;
                  Np.trace("get got read lock");
                  _context263.prev = 5;
                  _context263.next = 8;
                  return this.store.load(e);
                case 8:
                  return _context263.abrupt("return", _context263.sent.metadata);
                case 11:
                  _context263.prev = 11;
                  _context263.t0 = _context263["catch"](5);
                  if (!(_context263.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context263.next = 15;
                    break;
                  }
                  throw _context263.t0;
                case 15:
                  _context263.prev = 15;
                  Np.trace("get release read lock"), t();
                  return _context263.finish(15);
                case 18:
                  return _context263.abrupt("return", new Map());
                case 19:
                case "end":
                  return _context263.stop();
              }
            }, _callee258, this, [[5, 11, 15, 18]]);
          }));
          function get(_x266) {
            return _get7.apply(this, arguments);
          }
          return get;
        }()
      }, {
        key: "getValue",
        value: function () {
          var _getValue = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee259(e, t) {
            var r;
            return _regeneratorRuntime().wrap(function _callee259$(_context264) {
              while (1) switch (_context264.prev = _context264.next) {
                case 0:
                  e = rc(e), Np.trace("getValue await read lock");
                  _context264.next = 3;
                  return this.store.lock.readLock();
                case 3:
                  r = _context264.sent;
                  Np.trace("getValue got read lock");
                  _context264.prev = 5;
                  _context264.next = 8;
                  return this.store.load(e);
                case 8:
                  return _context264.abrupt("return", _context264.sent.metadata.get(t));
                case 11:
                  _context264.prev = 11;
                  _context264.t0 = _context264["catch"](5);
                  if (!(_context264.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context264.next = 15;
                    break;
                  }
                  throw _context264.t0;
                case 15:
                  _context264.prev = 15;
                  Np.trace("getValue release write lock"), r();
                  return _context264.finish(15);
                case 18:
                case "end":
                  return _context264.stop();
              }
            }, _callee259, this, [[5, 11, 15, 18]]);
          }));
          function getValue(_x267, _x268) {
            return _getValue.apply(this, arguments);
          }
          return getValue;
        }()
      }, {
        key: "set",
        value: function () {
          var _set3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee260(e, t) {
            var r, n;
            return _regeneratorRuntime().wrap(function _callee260$(_context265) {
              while (1) switch (_context265.prev = _context265.next) {
                case 0:
                  if (!(e = rc(e), !(t instanceof Map))) {
                    _context265.next = 2;
                    break;
                  }
                  throw Np.error("valid metadata must be provided to store data"), new rs("valid metadata must be provided", vp.ERR_INVALID_PARAMETERS);
                case 2:
                  Np.trace("set await write lock");
                  _context265.next = 5;
                  return this.store.lock.writeLock();
                case 5:
                  r = _context265.sent;
                  Np.trace("set got write lock");
                  _context265.prev = 7;
                  _context265.prev = 8;
                  _context265.next = 11;
                  return this.store.load(e);
                case 11:
                  n = _context265.sent;
                  _context265.next = 18;
                  break;
                case 14:
                  _context265.prev = 14;
                  _context265.t0 = _context265["catch"](8);
                  if (!(_context265.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context265.next = 18;
                    break;
                  }
                  throw _context265.t0;
                case 18:
                  _context265.next = 20;
                  return this.store.mergeOrCreate(e, {
                    metadata: t
                  });
                case 20:
                  _context265.prev = 20;
                  Np.trace("set release write lock"), r();
                  return _context265.finish(20);
                case 23:
                  this.dispatchEvent(new Qr(Lp, {
                    detail: {
                      peerId: e,
                      metadata: t,
                      oldMetadata: null == n ? new Map() : n.metadata
                    }
                  }));
                case 24:
                case "end":
                  return _context265.stop();
              }
            }, _callee260, this, [[7,, 20, 23], [8, 14]]);
          }));
          function set(_x269, _x270) {
            return _set3.apply(this, arguments);
          }
          return set;
        }()
      }, {
        key: "setValue",
        value: function () {
          var _setValue = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee261(e, t, r) {
            var n, i, s, _n79;
            return _regeneratorRuntime().wrap(function _callee261$(_context266) {
              while (1) switch (_context266.prev = _context266.next) {
                case 0:
                  if (!(e = rc(e), "string" != typeof t || !(r instanceof Uint8Array))) {
                    _context266.next = 2;
                    break;
                  }
                  throw Np.error("valid key and value must be provided to store data"), new rs("valid key and value must be provided", vp.ERR_INVALID_PARAMETERS);
                case 2:
                  Np.trace("setValue await write lock");
                  _context266.next = 5;
                  return this.store.lock.writeLock();
                case 5:
                  n = _context266.sent;
                  Np.trace("setValue got write lock");
                  _context266.prev = 7;
                  _context266.prev = 8;
                  _context266.next = 11;
                  return this.store.load(e);
                case 11:
                  i = _context266.sent;
                  _n79 = i.metadata.get(t);
                  if (!(null != _n79 && Xt(r, _n79))) {
                    _context266.next = 15;
                    break;
                  }
                  return _context266.abrupt("return");
                case 15:
                  _context266.next = 21;
                  break;
                case 17:
                  _context266.prev = 17;
                  _context266.t0 = _context266["catch"](8);
                  if (!(_context266.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context266.next = 21;
                    break;
                  }
                  throw _context266.t0;
                case 21:
                  _context266.next = 23;
                  return this.store.mergeOrCreate(e, {
                    metadata: new Map([[t, r]])
                  });
                case 23:
                  s = _context266.sent;
                case 24:
                  _context266.prev = 24;
                  Np.trace("setValue release write lock"), n();
                  return _context266.finish(24);
                case 27:
                  this.dispatchEvent(new Qr(Lp, {
                    detail: {
                      peerId: e,
                      metadata: s.metadata,
                      oldMetadata: null == i ? new Map() : i.metadata
                    }
                  }));
                case 28:
                case "end":
                  return _context266.stop();
              }
            }, _callee261, this, [[7,, 24, 27], [8, 17]]);
          }));
          function setValue(_x271, _x272, _x273) {
            return _setValue.apply(this, arguments);
          }
          return setValue;
        }()
      }, {
        key: "delete",
        value: function () {
          var _delete5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee262(e) {
            var t, r;
            return _regeneratorRuntime().wrap(function _callee262$(_context267) {
              while (1) switch (_context267.prev = _context267.next) {
                case 0:
                  e = rc(e), Np.trace("delete await write lock");
                  _context267.next = 3;
                  return this.store.lock.writeLock();
                case 3:
                  t = _context267.sent;
                  Np.trace("delete got write lock");
                  _context267.prev = 5;
                  _context267.prev = 6;
                  _context267.next = 9;
                  return this.store.load(e);
                case 9:
                  r = _context267.sent;
                  _context267.next = 16;
                  break;
                case 12:
                  _context267.prev = 12;
                  _context267.t0 = _context267["catch"](6);
                  if (!(_context267.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context267.next = 16;
                    break;
                  }
                  throw _context267.t0;
                case 16:
                  _context267.t1 = null != r;
                  if (!_context267.t1) {
                    _context267.next = 20;
                    break;
                  }
                  _context267.next = 20;
                  return this.store.patch(e, {
                    metadata: new Map()
                  });
                case 20:
                  _context267.prev = 20;
                  Np.trace("delete release write lock"), t();
                  return _context267.finish(20);
                case 23:
                  null != r && this.dispatchEvent(new Qr(Lp, {
                    detail: {
                      peerId: e,
                      metadata: new Map(),
                      oldMetadata: r.metadata
                    }
                  }));
                case 24:
                case "end":
                  return _context267.stop();
              }
            }, _callee262, this, [[5,, 20, 23], [6, 12]]);
          }));
          function _delete(_x274) {
            return _delete5.apply(this, arguments);
          }
          return _delete;
        }()
      }, {
        key: "deleteValue",
        value: function () {
          var _deleteValue = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee263(e, t) {
            var r, n, i;
            return _regeneratorRuntime().wrap(function _callee263$(_context268) {
              while (1) switch (_context268.prev = _context268.next) {
                case 0:
                  e = rc(e), Np.trace("deleteValue await write lock");
                  _context268.next = 3;
                  return this.store.lock.writeLock();
                case 3:
                  r = _context268.sent;
                  Np.trace("deleteValue got write lock");
                  _context268.prev = 5;
                  _context268.next = 8;
                  return this.store.load(e);
                case 8:
                  i = _context268.sent;
                  n = i.metadata;
                  n.delete(t);
                  _context268.next = 13;
                  return this.store.patch(e, {
                    metadata: n
                  });
                case 13:
                  _context268.next = 19;
                  break;
                case 15:
                  _context268.prev = 15;
                  _context268.t0 = _context268["catch"](5);
                  if (!(_context268.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context268.next = 19;
                    break;
                  }
                  throw _context268.t0;
                case 19:
                  _context268.prev = 19;
                  Np.trace("deleteValue release write lock"), r();
                  return _context268.finish(19);
                case 22:
                  null != n && this.dispatchEvent(new Qr(Lp, {
                    detail: {
                      peerId: e,
                      metadata: n,
                      oldMetadata: null == i ? new Map() : i.metadata
                    }
                  }));
                case 23:
                case "end":
                  return _context268.stop();
              }
            }, _callee263, this, [[5, 15, 19, 22]]);
          }));
          function deleteValue(_x275, _x276) {
            return _deleteValue.apply(this, arguments);
          }
          return deleteValue;
        }()
      }]);
      return Dp;
    }();
    var Pp = ne("libp2p:peer-store:proto-book"),
      Bp = "change:protocols";
    var Op = /*#__PURE__*/function () {
      function Op(e, t) {
        _classCallCheck(this, Op);
        this.dispatchEvent = e, this.store = t;
      }
      _createClass(Op, [{
        key: "get",
        value: function () {
          var _get8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee264(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee264$(_context269) {
              while (1) switch (_context269.prev = _context269.next) {
                case 0:
                  Pp.trace("get wait for read lock");
                  _context269.next = 3;
                  return this.store.lock.readLock();
                case 3:
                  t = _context269.sent;
                  Pp.trace("get got read lock");
                  _context269.prev = 5;
                  _context269.next = 8;
                  return this.store.load(e);
                case 8:
                  return _context269.abrupt("return", _context269.sent.protocols);
                case 11:
                  _context269.prev = 11;
                  _context269.t0 = _context269["catch"](5);
                  if (!(_context269.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context269.next = 15;
                    break;
                  }
                  throw _context269.t0;
                case 15:
                  _context269.prev = 15;
                  Pp.trace("get release read lock"), t();
                  return _context269.finish(15);
                case 18:
                  return _context269.abrupt("return", []);
                case 19:
                case "end":
                  return _context269.stop();
              }
            }, _callee264, this, [[5, 11, 15, 18]]);
          }));
          function get(_x277) {
            return _get8.apply(this, arguments);
          }
          return get;
        }()
      }, {
        key: "set",
        value: function () {
          var _set4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee265(e, t) {
            var r, n, i;
            return _regeneratorRuntime().wrap(function _callee265$(_context270) {
              while (1) switch (_context270.prev = _context270.next) {
                case 0:
                  if (!(e = rc(e), !Array.isArray(t))) {
                    _context270.next = 2;
                    break;
                  }
                  throw Pp.error("protocols must be provided to store data"), new rs("protocols must be provided", vp.ERR_INVALID_PARAMETERS);
                case 2:
                  Pp.trace("set await write lock");
                  _context270.next = 5;
                  return this.store.lock.writeLock();
                case 5:
                  r = _context270.sent;
                  Pp.trace("set got write lock");
                  _context270.prev = 7;
                  _context270.prev = 8;
                  _context270.next = 11;
                  return this.store.load(e);
                case 11:
                  n = _context270.sent;
                  if (!(new Set(_toConsumableArray(t)).size === n.protocols.length)) {
                    _context270.next = 14;
                    break;
                  }
                  return _context270.abrupt("return");
                case 14:
                  _context270.next = 20;
                  break;
                case 16:
                  _context270.prev = 16;
                  _context270.t0 = _context270["catch"](8);
                  if (!(_context270.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context270.next = 20;
                    break;
                  }
                  throw _context270.t0;
                case 20:
                  _context270.next = 22;
                  return this.store.patchOrCreate(e, {
                    protocols: t
                  });
                case 22:
                  i = _context270.sent;
                  Pp("stored provided protocols for %p", e);
                case 24:
                  _context270.prev = 24;
                  Pp.trace("set release write lock"), r();
                  return _context270.finish(24);
                case 27:
                  this.dispatchEvent(new Qr(Bp, {
                    detail: {
                      peerId: e,
                      protocols: i.protocols,
                      oldProtocols: null == n ? [] : n.protocols
                    }
                  }));
                case 28:
                case "end":
                  return _context270.stop();
              }
            }, _callee265, this, [[7,, 24, 27], [8, 16]]);
          }));
          function set(_x278, _x279) {
            return _set4.apply(this, arguments);
          }
          return set;
        }()
      }, {
        key: "add",
        value: function () {
          var _add2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee266(e, t) {
            var r, n, i;
            return _regeneratorRuntime().wrap(function _callee266$(_context271) {
              while (1) switch (_context271.prev = _context271.next) {
                case 0:
                  if (!(e = rc(e), !Array.isArray(t))) {
                    _context271.next = 2;
                    break;
                  }
                  throw Pp.error("protocols must be provided to store data"), new rs("protocols must be provided", vp.ERR_INVALID_PARAMETERS);
                case 2:
                  Pp.trace("add await write lock");
                  _context271.next = 5;
                  return this.store.lock.writeLock();
                case 5:
                  r = _context271.sent;
                  Pp.trace("add got write lock");
                  _context271.prev = 7;
                  _context271.prev = 8;
                  _context271.next = 11;
                  return this.store.load(e);
                case 11:
                  n = _context271.sent;
                  if (!(new Set([].concat(_toConsumableArray(n.protocols), _toConsumableArray(t))).size === n.protocols.length)) {
                    _context271.next = 14;
                    break;
                  }
                  return _context271.abrupt("return");
                case 14:
                  _context271.next = 20;
                  break;
                case 16:
                  _context271.prev = 16;
                  _context271.t0 = _context271["catch"](8);
                  if (!(_context271.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context271.next = 20;
                    break;
                  }
                  throw _context271.t0;
                case 20:
                  _context271.next = 22;
                  return this.store.mergeOrCreate(e, {
                    protocols: t
                  });
                case 22:
                  i = _context271.sent;
                  Pp("added provided protocols for %p", e);
                case 24:
                  _context271.prev = 24;
                  Pp.trace("add release write lock"), r();
                  return _context271.finish(24);
                case 27:
                  this.dispatchEvent(new Qr(Bp, {
                    detail: {
                      peerId: e,
                      protocols: i.protocols,
                      oldProtocols: null == n ? [] : n.protocols
                    }
                  }));
                case 28:
                case "end":
                  return _context271.stop();
              }
            }, _callee266, this, [[7,, 24, 27], [8, 16]]);
          }));
          function add(_x280, _x281) {
            return _add2.apply(this, arguments);
          }
          return add;
        }()
      }, {
        key: "remove",
        value: function () {
          var _remove2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee267(e, t) {
            var r, n, i, _r141, _iterator108, _step108, _e142;
            return _regeneratorRuntime().wrap(function _callee267$(_context272) {
              while (1) switch (_context272.prev = _context272.next) {
                case 0:
                  if (!(e = rc(e), !Array.isArray(t))) {
                    _context272.next = 2;
                    break;
                  }
                  throw Pp.error("protocols must be provided to store data"), new rs("protocols must be provided", vp.ERR_INVALID_PARAMETERS);
                case 2:
                  Pp.trace("remove await write lock");
                  _context272.next = 5;
                  return this.store.lock.writeLock();
                case 5:
                  r = _context272.sent;
                  Pp.trace("remove got write lock");
                  _context272.prev = 7;
                  _context272.prev = 8;
                  _context272.next = 11;
                  return this.store.load(e);
                case 11:
                  n = _context272.sent;
                  _r141 = new Set(n.protocols);
                  _iterator108 = _createForOfIteratorHelper(t);
                  try {
                    for (_iterator108.s(); !(_step108 = _iterator108.n()).done;) {
                      _e142 = _step108.value;
                      _r141.delete(_e142);
                    }
                  } catch (err) {
                    _iterator108.e(err);
                  } finally {
                    _iterator108.f();
                  }
                  if (!(n.protocols.length === _r141.size)) {
                    _context272.next = 17;
                    break;
                  }
                  return _context272.abrupt("return");
                case 17:
                  t = Array.from(_r141);
                  _context272.next = 24;
                  break;
                case 20:
                  _context272.prev = 20;
                  _context272.t0 = _context272["catch"](8);
                  if (!(_context272.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context272.next = 24;
                    break;
                  }
                  throw _context272.t0;
                case 24:
                  _context272.next = 26;
                  return this.store.patchOrCreate(e, {
                    protocols: t
                  });
                case 26:
                  i = _context272.sent;
                case 27:
                  _context272.prev = 27;
                  Pp.trace("remove release write lock"), r();
                  return _context272.finish(27);
                case 30:
                  this.dispatchEvent(new Qr(Bp, {
                    detail: {
                      peerId: e,
                      protocols: i.protocols,
                      oldProtocols: null == n ? [] : n.protocols
                    }
                  }));
                case 31:
                case "end":
                  return _context272.stop();
              }
            }, _callee267, this, [[7,, 27, 30], [8, 20]]);
          }));
          function remove(_x282, _x283) {
            return _remove2.apply(this, arguments);
          }
          return remove;
        }()
      }, {
        key: "delete",
        value: function () {
          var _delete6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee268(e) {
            var t, r;
            return _regeneratorRuntime().wrap(function _callee268$(_context273) {
              while (1) switch (_context273.prev = _context273.next) {
                case 0:
                  e = rc(e), Pp.trace("delete await write lock");
                  _context273.next = 3;
                  return this.store.lock.writeLock();
                case 3:
                  t = _context273.sent;
                  Pp.trace("delete got write lock");
                  _context273.prev = 5;
                  _context273.prev = 6;
                  _context273.next = 9;
                  return this.store.load(e);
                case 9:
                  r = _context273.sent;
                  _context273.next = 16;
                  break;
                case 12:
                  _context273.prev = 12;
                  _context273.t0 = _context273["catch"](6);
                  if (!(_context273.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context273.next = 16;
                    break;
                  }
                  throw _context273.t0;
                case 16:
                  _context273.next = 18;
                  return this.store.patchOrCreate(e, {
                    protocols: []
                  });
                case 18:
                  _context273.prev = 18;
                  Pp.trace("delete release write lock"), t();
                  return _context273.finish(18);
                case 21:
                  null != r && this.dispatchEvent(new Qr(Bp, {
                    detail: {
                      peerId: e,
                      protocols: [],
                      oldProtocols: r.protocols
                    }
                  }));
                case 22:
                case "end":
                  return _context273.stop();
              }
            }, _callee268, this, [[5,, 18, 21], [6, 12]]);
          }));
          function _delete(_x284) {
            return _delete6.apply(this, arguments);
          }
          return _delete;
        }()
      }]);
      return Op;
    }();
    Fi._configure(), Ui._configure(Mi), Vi._configure(Ki);
    var xp = ["uint64", "int64", "sint64", "fixed64", "sfixed64"];
    function Up(e, t) {
      var r = function (e) {
        return function (e) {
          var _loop6 = function _loop6() {
            var t = _xp[_i48];
            if (null == e[t]) return "continue";
            var r = e[t];
            e[t] = function () {
              return BigInt(r.call(this).toString());
            };
          };
          for (var _i48 = 0, _xp = xp; _i48 < _xp.length; _i48++) {
            var _ret4 = _loop6();
            if (_ret4 === "continue") continue;
          }
          return e;
        }(new Ui(e));
      }(e instanceof Uint8Array ? e : e.subarray());
      return t.decode(r);
    }
    function Mp(e, t) {
      var r = function (e) {
        var _loop7 = function _loop7() {
          var t = _xp2[_i49];
          if (null == e[t]) return "continue";
          var r = e[t];
          e[t] = function (e) {
            return r.call(this, e.toString());
          };
        };
        for (var _i49 = 0, _xp2 = xp; _i49 < _xp2.length; _i49++) {
          var _ret5 = _loop7();
          if (_ret5 === "continue") continue;
        }
        return e;
      }(Vi.create());
      return t.encode(e, r, {
        lengthDelimited: !1
      }), r.finish();
    }
    var Vp, Kp, Fp, qp;
    function jp(e, t) {
      return function (e, t, r, n) {
        return {
          name: "message",
          type: t,
          encode: r,
          decode: n
        };
      }(0, Vp.LENGTH_DELIMITED, e, t);
    }
    !function (e) {
      e[e.VARINT = 0] = "VARINT", e[e.BIT64 = 1] = "BIT64", e[e.LENGTH_DELIMITED = 2] = "LENGTH_DELIMITED", e[e.START_GROUP = 3] = "START_GROUP", e[e.END_GROUP = 4] = "END_GROUP", e[e.BIT32 = 5] = "BIT32";
    }(Vp || (Vp = {})), function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = jp(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          if (!1 !== r.lengthDelimited && t.fork(), null != e.addresses) {
            var _iterator109 = _createForOfIteratorHelper(e.addresses),
              _step109;
            try {
              for (_iterator109.s(); !(_step109 = _iterator109.n()).done;) {
                var _r142 = _step109.value;
                t.uint32(10), Fp.codec().encode(_r142, t);
              }
            } catch (err) {
              _iterator109.e(err);
            } finally {
              _iterator109.f();
            }
          }
          if (null != e.protocols) {
            var _iterator110 = _createForOfIteratorHelper(e.protocols),
              _step110;
            try {
              for (_iterator110.s(); !(_step110 = _iterator110.n()).done;) {
                var _r143 = _step110.value;
                t.uint32(18), t.string(_r143);
              }
            } catch (err) {
              _iterator110.e(err);
            } finally {
              _iterator110.f();
            }
          }
          if (null != e.metadata) {
            var _iterator111 = _createForOfIteratorHelper(e.metadata),
              _step111;
            try {
              for (_iterator111.s(); !(_step111 = _iterator111.n()).done;) {
                var _r144 = _step111.value;
                t.uint32(26), qp.codec().encode(_r144, t);
              }
            } catch (err) {
              _iterator111.e(err);
            } finally {
              _iterator111.f();
            }
          }
          null != e.pubKey && (t.uint32(34), t.bytes(e.pubKey)), null != e.peerRecordEnvelope && (t.uint32(42), t.bytes(e.peerRecordEnvelope)), !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {
              addresses: [],
              protocols: [],
              metadata: []
            },
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t126 = e.uint32();
            switch (_t126 >>> 3) {
              case 1:
                r.addresses.push(Fp.codec().decode(e, e.uint32()));
                break;
              case 2:
                r.protocols.push(e.string());
                break;
              case 3:
                r.metadata.push(qp.codec().decode(e, e.uint32()));
                break;
              case 4:
                r.pubKey = e.bytes();
                break;
              case 5:
                r.peerRecordEnvelope = e.bytes();
                break;
              default:
                e.skipType(7 & _t126);
            }
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Mp(t, e.codec());
      }, e.decode = function (t) {
        return Up(t, e.codec());
      };
    }(Kp || (Kp = {})), function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = jp(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          !1 !== r.lengthDelimited && t.fork(), null != e.multiaddr && e.multiaddr.byteLength > 0 && (t.uint32(10), t.bytes(e.multiaddr)), null != e.isCertified && (t.uint32(16), t.bool(e.isCertified)), !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {
              multiaddr: new Uint8Array(0)
            },
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t127 = e.uint32();
            switch (_t127 >>> 3) {
              case 1:
                r.multiaddr = e.bytes();
                break;
              case 2:
                r.isCertified = e.bool();
                break;
              default:
                e.skipType(7 & _t127);
            }
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Mp(t, e.codec());
      }, e.decode = function (t) {
        return Up(t, e.codec());
      };
    }(Fp || (Fp = {})), function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = jp(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          !1 !== r.lengthDelimited && t.fork(), null != e.key && "" !== e.key && (t.uint32(10), t.string(e.key)), null != e.value && e.value.byteLength > 0 && (t.uint32(18), t.bytes(e.value)), !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {
              key: "",
              value: new Uint8Array(0)
            },
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t128 = e.uint32();
            switch (_t128 >>> 3) {
              case 1:
                r.key = e.string();
                break;
              case 2:
                r.value = e.bytes();
                break;
              default:
                e.skipType(7 & _t128);
            }
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Mp(t, e.codec());
      }, e.decode = function (t) {
        return Up(t, e.codec());
      };
    }(qp || (qp = {}));
    var Hp,
      zp = __webpack_require__(6729),
      $p = function $p(e, t, r, n) {
        if ("a" === r && !n) throw new TypeError("Private accessor was defined without a getter");
        if ("function" == typeof t ? e !== t || !n : !t.has(e)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
        return "m" === r ? n : "a" === r ? n.call(e) : n ? n.value : t.get(e);
      };
    var Gp = /*#__PURE__*/function () {
      function Gp() {
        _classCallCheck(this, Gp);
        Hp.set(this, []);
      }
      _createClass(Gp, [{
        key: "enqueue",
        value: function enqueue(e, t) {
          var r = {
            priority: (t = _objectSpread({
              priority: 0
            }, t)).priority,
            run: e
          };
          if (this.size && $p(this, Hp, "f")[this.size - 1].priority >= t.priority) return void $p(this, Hp, "f").push(r);
          var n = function (e, t, r) {
            var n = 0,
              i = e.length;
            for (; i > 0;) {
              var _r145 = Math.trunc(i / 2);
              var o = n + _r145;
              s = e[o], t.priority - s.priority <= 0 ? (n = ++o, i -= _r145 + 1) : i = _r145;
            }
            var s;
            return n;
          }($p(this, Hp, "f"), r);
          $p(this, Hp, "f").splice(n, 0, r);
        }
      }, {
        key: "dequeue",
        value: function dequeue() {
          var e = $p(this, Hp, "f").shift();
          return null == e ? void 0 : e.run;
        }
      }, {
        key: "filter",
        value: function filter(e) {
          return $p(this, Hp, "f").filter(function (t) {
            return t.priority === e.priority;
          }).map(function (e) {
            return e.run;
          });
        }
      }, {
        key: "size",
        get: function get() {
          return $p(this, Hp, "f").length;
        }
      }]);
      return Gp;
    }();
    Hp = new WeakMap();
    var Wp,
      Yp,
      Qp,
      Xp,
      Zp,
      Jp,
      ef,
      tf,
      rf,
      nf,
      sf,
      of,
      af,
      cf,
      lf,
      uf,
      hf,
      df,
      pf,
      ff,
      yf,
      gf,
      mf,
      wf,
      Ef,
      bf,
      vf = function vf(e, t, r, n, i) {
        if ("m" === n) throw new TypeError("Private method is not writable");
        if ("a" === n && !i) throw new TypeError("Private accessor was defined without a setter");
        if ("function" == typeof t ? e !== t || !i : !t.has(e)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
        return "a" === n ? i.call(e, r) : i ? i.value = r : t.set(e, r), r;
      },
      _f = function _f(e, t, r, n) {
        if ("a" === r && !n) throw new TypeError("Private accessor was defined without a getter");
        if ("function" == typeof t ? e !== t || !n : !t.has(e)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
        return "m" === r ? n : "a" === r ? n.call(e) : n ? n.value : t.get(e);
      };
    var Sf = /*#__PURE__*/function (_Error11) {
      _inherits(Sf, _Error11);
      var _super42 = _createSuper(Sf);
      function Sf() {
        _classCallCheck(this, Sf);
        return _super42.apply(this, arguments);
      }
      return _createClass(Sf);
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    var Cf = /*#__PURE__*/function (_zp) {
      _inherits(Cf, _zp);
      var _super43 = _createSuper(Cf);
      function Cf(e) {
        var _this143;
        _classCallCheck(this, Cf);
        var t, r, n, i;
        if (_this143 = _super43.call(this), Wp.add(_assertThisInitialized(_this143)), Yp.set(_assertThisInitialized(_this143), void 0), Qp.set(_assertThisInitialized(_this143), void 0), Xp.set(_assertThisInitialized(_this143), 0), Zp.set(_assertThisInitialized(_this143), void 0), Jp.set(_assertThisInitialized(_this143), void 0), ef.set(_assertThisInitialized(_this143), 0), tf.set(_assertThisInitialized(_this143), void 0), rf.set(_assertThisInitialized(_this143), void 0), nf.set(_assertThisInitialized(_this143), void 0), sf.set(_assertThisInitialized(_this143), void 0), of.set(_assertThisInitialized(_this143), 0), af.set(_assertThisInitialized(_this143), void 0), cf.set(_assertThisInitialized(_this143), void 0), lf.set(_assertThisInitialized(_this143), void 0), Object.defineProperty(_assertThisInitialized(_this143), "timeout", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }), !("number" == typeof (e = _objectSpread({
          carryoverConcurrencyCount: !1,
          intervalCap: Number.POSITIVE_INFINITY,
          interval: 0,
          concurrency: Number.POSITIVE_INFINITY,
          autoStart: !0,
          queueClass: Gp
        }, e)).intervalCap && e.intervalCap >= 1)) throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(null !== (r = null === (t = e.intervalCap) || void 0 === t ? void 0 : t.toString()) && void 0 !== r ? r : "", "` (").concat(_typeof(e.intervalCap), ")"));
        if (void 0 === e.interval || !(Number.isFinite(e.interval) && e.interval >= 0)) throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(null !== (i = null === (n = e.interval) || void 0 === n ? void 0 : n.toString()) && void 0 !== i ? i : "", "` (").concat(_typeof(e.interval), ")"));
        vf(_assertThisInitialized(_this143), Yp, e.carryoverConcurrencyCount, "f"), vf(_assertThisInitialized(_this143), Qp, e.intervalCap === Number.POSITIVE_INFINITY || 0 === e.interval, "f"), vf(_assertThisInitialized(_this143), Zp, e.intervalCap, "f"), vf(_assertThisInitialized(_this143), Jp, e.interval, "f"), vf(_assertThisInitialized(_this143), nf, new e.queueClass(), "f"), vf(_assertThisInitialized(_this143), sf, e.queueClass, "f"), _this143.concurrency = e.concurrency, _this143.timeout = e.timeout, vf(_assertThisInitialized(_this143), lf, !0 === e.throwOnTimeout, "f"), vf(_assertThisInitialized(_this143), cf, !1 === e.autoStart, "f");
        return _possibleConstructorReturn(_this143);
      }
      _createClass(Cf, [{
        key: "concurrency",
        get: function get() {
          return _f(this, af, "f");
        },
        set: function set(e) {
          if (!("number" == typeof e && e >= 1)) throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(e, "` (").concat(_typeof(e), ")"));
          vf(this, af, e, "f"), _f(this, Wp, "m", wf).call(this);
        }
      }, {
        key: "add",
        value: function () {
          var _add3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee270(e) {
            var _this144 = this;
            var t,
              _args275 = arguments;
            return _regeneratorRuntime().wrap(function _callee270$(_context275) {
              while (1) switch (_context275.prev = _context275.next) {
                case 0:
                  t = _args275.length > 1 && _args275[1] !== undefined ? _args275[1] : {};
                  return _context275.abrupt("return", (t = _objectSpread({
                    timeout: this.timeout,
                    throwOnTimeout: _f(this, lf, "f")
                  }, t), new Promise(function (r, n) {
                    _f(_this144, nf, "f").enqueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee269() {
                      var i, s, o, _n80, _s33;
                      return _regeneratorRuntime().wrap(function _callee269$(_context274) {
                        while (1) switch (_context274.prev = _context274.next) {
                          case 0:
                            vf(_this144, of, (s = _f(_this144, of, "f"), ++s), "f"), vf(_this144, Xp, (o = _f(_this144, Xp, "f"), ++o), "f");
                            _context274.prev = 1;
                            if (!(null === (i = t.signal) || void 0 === i ? void 0 : i.aborted)) {
                              _context274.next = 4;
                              break;
                            }
                            throw new Sf("The task was aborted.");
                          case 4:
                            _n80 = e({
                              signal: t.signal
                            });
                            t.timeout && (_n80 = pn(Promise.resolve(_n80), t.timeout)), t.signal && (_n80 = Promise.race([_n80, _f(_this144, Wp, "m", Ef).call(_this144, t.signal)]));
                            _context274.next = 8;
                            return _n80;
                          case 8:
                            _s33 = _context274.sent;
                            r(_s33), _this144.emit("completed", _s33);
                            _context274.next = 17;
                            break;
                          case 12:
                            _context274.prev = 12;
                            _context274.t0 = _context274["catch"](1);
                            if (!(_context274.t0 instanceof ln && !t.throwOnTimeout)) {
                              _context274.next = 16;
                              break;
                            }
                            return _context274.abrupt("return", void r());
                          case 16:
                            n(_context274.t0), _this144.emit("error", _context274.t0);
                          case 17:
                            _context274.prev = 17;
                            _f(_this144, Wp, "m", df).call(_this144);
                            return _context274.finish(17);
                          case 20:
                          case "end":
                            return _context274.stop();
                        }
                      }, _callee269, null, [[1, 12, 17, 20]]);
                    })), t), _this144.emit("add"), _f(_this144, Wp, "m", yf).call(_this144);
                  })));
                case 2:
                case "end":
                  return _context275.stop();
              }
            }, _callee270, this);
          }));
          function add(_x285) {
            return _add3.apply(this, arguments);
          }
          return add;
        }()
      }, {
        key: "addAll",
        value: function () {
          var _addAll = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee272(e, t) {
            var _this145 = this;
            return _regeneratorRuntime().wrap(function _callee272$(_context277) {
              while (1) switch (_context277.prev = _context277.next) {
                case 0:
                  return _context277.abrupt("return", Promise.all(e.map( /*#__PURE__*/function () {
                    var _ref123 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee271(e) {
                      return _regeneratorRuntime().wrap(function _callee271$(_context276) {
                        while (1) switch (_context276.prev = _context276.next) {
                          case 0:
                            return _context276.abrupt("return", _this145.add(e, t));
                          case 1:
                          case "end":
                            return _context276.stop();
                        }
                      }, _callee271);
                    }));
                    return function (_x288) {
                      return _ref123.apply(this, arguments);
                    };
                  }())));
                case 1:
                case "end":
                  return _context277.stop();
              }
            }, _callee272);
          }));
          function addAll(_x286, _x287) {
            return _addAll.apply(this, arguments);
          }
          return addAll;
        }()
      }, {
        key: "start",
        value: function start() {
          return _f(this, cf, "f") ? (vf(this, cf, !1, "f"), _f(this, Wp, "m", wf).call(this), this) : this;
        }
      }, {
        key: "pause",
        value: function pause() {
          vf(this, cf, !0, "f");
        }
      }, {
        key: "clear",
        value: function clear() {
          vf(this, nf, new (_f(this, sf, "f"))(), "f");
        }
      }, {
        key: "onEmpty",
        value: function () {
          var _onEmpty = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee273() {
            return _regeneratorRuntime().wrap(function _callee273$(_context278) {
              while (1) switch (_context278.prev = _context278.next) {
                case 0:
                  _context278.t0 = 0 !== _f(this, nf, "f").size;
                  if (!_context278.t0) {
                    _context278.next = 4;
                    break;
                  }
                  _context278.next = 4;
                  return _f(this, Wp, "m", bf).call(this, "empty");
                case 4:
                case "end":
                  return _context278.stop();
              }
            }, _callee273, this);
          }));
          function onEmpty() {
            return _onEmpty.apply(this, arguments);
          }
          return onEmpty;
        }()
      }, {
        key: "onSizeLessThan",
        value: function () {
          var _onSizeLessThan = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee274(e) {
            var _this146 = this;
            return _regeneratorRuntime().wrap(function _callee274$(_context279) {
              while (1) switch (_context279.prev = _context279.next) {
                case 0:
                  _context279.t0 = _f(this, nf, "f").size < e;
                  if (_context279.t0) {
                    _context279.next = 4;
                    break;
                  }
                  _context279.next = 4;
                  return _f(this, Wp, "m", bf).call(this, "next", function () {
                    return _f(_this146, nf, "f").size < e;
                  });
                case 4:
                case "end":
                  return _context279.stop();
              }
            }, _callee274, this);
          }));
          function onSizeLessThan(_x289) {
            return _onSizeLessThan.apply(this, arguments);
          }
          return onSizeLessThan;
        }()
      }, {
        key: "onIdle",
        value: function () {
          var _onIdle = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee275() {
            return _regeneratorRuntime().wrap(function _callee275$(_context280) {
              while (1) switch (_context280.prev = _context280.next) {
                case 0:
                  _context280.t0 = 0 === _f(this, of, "f") && 0 === _f(this, nf, "f").size;
                  if (_context280.t0) {
                    _context280.next = 4;
                    break;
                  }
                  _context280.next = 4;
                  return _f(this, Wp, "m", bf).call(this, "idle");
                case 4:
                case "end":
                  return _context280.stop();
              }
            }, _callee275, this);
          }));
          function onIdle() {
            return _onIdle.apply(this, arguments);
          }
          return onIdle;
        }()
      }, {
        key: "size",
        get: function get() {
          return _f(this, nf, "f").size;
        }
      }, {
        key: "sizeBy",
        value: function sizeBy(e) {
          return _f(this, nf, "f").filter(e).length;
        }
      }, {
        key: "pending",
        get: function get() {
          return _f(this, of, "f");
        }
      }, {
        key: "isPaused",
        get: function get() {
          return _f(this, cf, "f");
        }
      }]);
      return Cf;
    }(zp);
    Yp = new WeakMap(), Qp = new WeakMap(), Xp = new WeakMap(), Zp = new WeakMap(), Jp = new WeakMap(), ef = new WeakMap(), tf = new WeakMap(), rf = new WeakMap(), nf = new WeakMap(), sf = new WeakMap(), of = new WeakMap(), af = new WeakMap(), cf = new WeakMap(), lf = new WeakMap(), Wp = new WeakSet(), uf = function uf() {
      return _f(this, Qp, "f") || _f(this, Xp, "f") < _f(this, Zp, "f");
    }, hf = function hf() {
      return _f(this, of, "f") < _f(this, af, "f");
    }, df = function df() {
      var e;
      vf(this, of, (e = _f(this, of, "f"), --e), "f"), _f(this, Wp, "m", yf).call(this), this.emit("next");
    }, pf = function pf() {
      _f(this, Wp, "m", mf).call(this), _f(this, Wp, "m", gf).call(this), vf(this, rf, void 0, "f");
    }, ff = function ff() {
      var _this147 = this;
      var e = Date.now();
      if (void 0 === _f(this, tf, "f")) {
        var t = _f(this, ef, "f") - e;
        if (!(t < 0)) return void 0 === _f(this, rf, "f") && vf(this, rf, setTimeout(function () {
          _f(_this147, Wp, "m", pf).call(_this147);
        }, t), "f"), !0;
        vf(this, Xp, _f(this, Yp, "f") ? _f(this, of, "f") : 0, "f");
      }
      return !1;
    }, yf = function yf() {
      if (0 === _f(this, nf, "f").size) return _f(this, tf, "f") && clearInterval(_f(this, tf, "f")), vf(this, tf, void 0, "f"), this.emit("empty"), 0 === _f(this, of, "f") && this.emit("idle"), !1;
      if (!_f(this, cf, "f")) {
        var _e143 = !_f(this, Wp, "a", ff);
        if (_f(this, Wp, "a", uf) && _f(this, Wp, "a", hf)) {
          var t = _f(this, nf, "f").dequeue();
          return !!t && (this.emit("active"), t(), _e143 && _f(this, Wp, "m", gf).call(this), !0);
        }
      }
      return !1;
    }, gf = function gf() {
      var _this148 = this;
      _f(this, Qp, "f") || void 0 !== _f(this, tf, "f") || (vf(this, tf, setInterval(function () {
        _f(_this148, Wp, "m", mf).call(_this148);
      }, _f(this, Jp, "f")), "f"), vf(this, ef, Date.now() + _f(this, Jp, "f"), "f"));
    }, mf = function mf() {
      0 === _f(this, Xp, "f") && 0 === _f(this, of, "f") && _f(this, tf, "f") && (clearInterval(_f(this, tf, "f")), vf(this, tf, void 0, "f")), vf(this, Xp, _f(this, Yp, "f") ? _f(this, of, "f") : 0, "f"), _f(this, Wp, "m", wf).call(this);
    }, wf = function wf() {
      for (; _f(this, Wp, "m", yf).call(this););
    }, Ef = /*#__PURE__*/function () {
      var _ref124 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee276(e) {
        return _regeneratorRuntime().wrap(function _callee276$(_context281) {
          while (1) switch (_context281.prev = _context281.next) {
            case 0:
              return _context281.abrupt("return", new Promise(function (t, r) {
                e.addEventListener("abort", function () {
                  r(new Sf("The task was aborted."));
                }, {
                  once: !0
                });
              }));
            case 1:
            case "end":
              return _context281.stop();
          }
        }, _callee276);
      }));
      return function Ef(_x290) {
        return _ref124.apply(this, arguments);
      };
    }(), bf = /*#__PURE__*/function () {
      var _ref125 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee277(e, t) {
        var _this149 = this;
        return _regeneratorRuntime().wrap(function _callee277$(_context282) {
          while (1) switch (_context282.prev = _context282.next) {
            case 0:
              return _context282.abrupt("return", new Promise(function (r) {
                var n = function n() {
                  t && !t() || (_this149.off(e, n), r());
                };
                _this149.on(e, n);
              }));
            case 1:
            case "end":
              return _context282.stop();
          }
        }, _callee277);
      }));
      return function bf(_x291, _x292) {
        return _ref125.apply(this, arguments);
      };
    }();
    var Af = /*#__PURE__*/function (_Error12) {
      _inherits(Af, _Error12);
      var _super44 = _createSuper(Af);
      function Af(e) {
        var _this150;
        _classCallCheck(this, Af);
        _this150 = _super44.call(this, e), _this150.name = "TimeoutError";
        return _this150;
      }
      return _createClass(Af);
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    var If = /*#__PURE__*/function (_Error13) {
      _inherits(If, _Error13);
      var _super45 = _createSuper(If);
      function If(e) {
        var _this151;
        _classCallCheck(this, If);
        _this151 = _super45.call(this), _this151.name = "AbortError", _this151.message = e;
        return _this151;
      }
      return _createClass(If);
    }( /*#__PURE__*/_wrapNativeSuper(Error));
    var Tf = function Tf(e) {
        return void 0 === globalThis.DOMException ? new If(e) : new DOMException(e);
      },
      Rf = function Rf(e) {
        var t = void 0 === e.reason ? Tf("This operation was aborted.") : e.reason;
        return t instanceof Error ? t : Tf(t);
      },
      kf = "lock:worker:request-read",
      Nf = "lock:worker:release-read",
      Lf = "lock:master:grant-read",
      Df = "lock:worker:request-write",
      Pf = "lock:worker:release-write",
      Bf = "lock:master:grant-write",
      Of = {},
      xf = function xf(e) {
        e.addEventListener("message", function (t) {
          xf.dispatchEvent("message", e, t);
        }), null != e.port && e.port.addEventListener("message", function (t) {
          xf.dispatchEvent("message", e, t);
        });
      };
    xf.addEventListener = function (e, t) {
      null == Of[e] && (Of[e] = []), Of[e].push(t);
    }, xf.removeEventListener = function (e, t) {
      null != Of[e] && (Of[e] = Of[e].filter(function (e) {
        return e === t;
      }));
    }, xf.dispatchEvent = function (e, t, r) {
      null != Of[e] && Of[e].forEach(function (e) {
        return e(t, r);
      });
    };
    var Uf = xf,
      Mf = function Mf(e, t, r, n, i) {
        return function (s, o) {
          if (o.data.type !== r) return;
          var a = {
            type: o.data.type,
            name: o.data.name,
            identifier: o.data.identifier
          };
          e.dispatchEvent(new MessageEvent(t, {
            data: {
              name: a.name,
              handler: function () {
                var _handler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee278() {
                  return _regeneratorRuntime().wrap(function _callee278$(_context283) {
                    while (1) switch (_context283.prev = _context283.next) {
                      case 0:
                        s.postMessage({
                          type: i,
                          name: a.name,
                          identifier: a.identifier
                        });
                        _context283.next = 3;
                        return new Promise(function (e) {
                          var t = function t(r) {
                            if (null == r || null == r.data) return;
                            var i = r.data.type,
                              o = (r.data.name, r.data.identifier);
                            i === n && o === a.identifier && (s.removeEventListener("message", t), e());
                          };
                          s.addEventListener("message", t);
                        });
                      case 3:
                        return _context283.abrupt("return", _context283.sent);
                      case 4:
                      case "end":
                        return _context283.stop();
                    }
                  }, _callee278);
                }));
                function handler() {
                  return _handler.apply(this, arguments);
                }
                return handler;
              }()
            }
          }));
        };
      },
      Vf = function Vf(e, t, r, n) {
        return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee279() {
          var i;
          return _regeneratorRuntime().wrap(function _callee279$(_context284) {
            while (1) switch (_context284.prev = _context284.next) {
              case 0:
                i = _u();
                globalThis.postMessage({
                  type: t,
                  identifier: i,
                  name: e
                });
                _context284.next = 4;
                return new Promise(function (t) {
                  var s = function s(o) {
                    if (null == o || null == o.data) return;
                    var a = o.data.type,
                      c = o.data.identifier;
                    a === r && c === i && (globalThis.removeEventListener("message", s), t(function () {
                      globalThis.postMessage({
                        type: n,
                        identifier: i,
                        name: e
                      });
                    }));
                  };
                  globalThis.addEventListener("message", s);
                });
              case 4:
                return _context284.abrupt("return", _context284.sent);
              case 5:
              case "end":
                return _context284.stop();
            }
          }, _callee279);
        }));
      },
      Kf = {
        singleProcess: !1
      },
      Ff = {};
    var qf;
    function jf(_x293, _x294) {
      return _jf.apply(this, arguments);
    }
    function _jf() {
      _jf = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee420(e, t) {
        var r, n;
        return _regeneratorRuntime().wrap(function _callee420$(_context428) {
          while (1) switch (_context428.prev = _context428.next) {
            case 0:
              n = new Promise(function (e) {
                r = e;
              });
              e.add( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee419() {
                return _regeneratorRuntime().wrap(function _callee419$(_context427) {
                  while (1) switch (_context427.prev = _context427.next) {
                    case 0:
                      _context427.next = 2;
                      return function (e, t) {
                        var r = t.milliseconds,
                          n = t.fallback,
                          i = t.message,
                          _t$customTimers = t.customTimers,
                          s = _t$customTimers === void 0 ? {
                            setTimeout: setTimeout,
                            clearTimeout: clearTimeout
                          } : _t$customTimers;
                        var o;
                        var a = new Promise(function (a, c) {
                          if ("number" != typeof r || 1 !== Math.sign(r)) throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(r, "`"));
                          if (r === Number.POSITIVE_INFINITY) return void a(e);
                          if (t.signal) {
                            var _e157 = t.signal;
                            _e157.aborted && c(Rf(_e157)), _e157.addEventListener("abort", function () {
                              c(Rf(_e157));
                            });
                          }
                          var l = new Af();
                          o = s.setTimeout.call(void 0, function () {
                            if (n) try {
                              a(n());
                            } catch (e) {
                              c(e);
                            } else "function" == typeof e.cancel && e.cancel(), !1 === i ? a() : i instanceof Error ? c(i) : (l.message = i !== null && i !== void 0 ? i : "Promise timed out after ".concat(r, " milliseconds"), c(l));
                          }, r), _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee417() {
                            return _regeneratorRuntime().wrap(function _callee417$(_context425) {
                              while (1) switch (_context425.prev = _context425.next) {
                                case 0:
                                  _context425.prev = 0;
                                  _context425.t0 = a;
                                  _context425.next = 4;
                                  return e;
                                case 4:
                                  _context425.t1 = _context425.sent;
                                  (0, _context425.t0)(_context425.t1);
                                  _context425.next = 11;
                                  break;
                                case 8:
                                  _context425.prev = 8;
                                  _context425.t2 = _context425["catch"](0);
                                  c(_context425.t2);
                                case 11:
                                  _context425.prev = 11;
                                  s.clearTimeout.call(void 0, o);
                                  return _context425.finish(11);
                                case 14:
                                case "end":
                                  return _context425.stop();
                              }
                            }, _callee417, null, [[0, 8, 11, 14]]);
                          }))();
                        });
                        return a.clear = function () {
                          s.clearTimeout.call(void 0, o), o = void 0;
                        }, a;
                      }(_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee418() {
                        return _regeneratorRuntime().wrap(function _callee418$(_context426) {
                          while (1) switch (_context426.prev = _context426.next) {
                            case 0:
                              _context426.next = 2;
                              return new Promise(function (e) {
                                r(function () {
                                  e();
                                });
                              });
                            case 2:
                              return _context426.abrupt("return", _context426.sent);
                            case 3:
                            case "end":
                              return _context426.stop();
                          }
                        }, _callee418);
                      }))(), {
                        milliseconds: t.timeout
                      });
                    case 2:
                      return _context427.abrupt("return", _context427.sent);
                    case 3:
                    case "end":
                      return _context427.stop();
                  }
                }, _callee419);
              })));
              _context428.next = 4;
              return n;
            case 4:
              return _context428.abrupt("return", _context428.sent);
            case 5:
            case "end":
              return _context428.stop();
          }
        }, _callee420);
      }));
      return _jf.apply(this, arguments);
    }
    var Hf = {
        name: "lock",
        concurrency: 1 / 0,
        timeout: 846e5,
        singleProcess: !1
      },
      zf = ne("libp2p:peer-store:store"),
      $f = "/peers/";
    var Gf = /*#__PURE__*/function () {
      function Gf(e) {
        _classCallCheck(this, Gf);
        this.components = e, this.lock = function (e) {
          var t = Object.assign({}, Hf, {
            name: "peer-store",
            singleProcess: !0
          });
          return null == qf && (qf = function (e) {
            if (e = Object.assign({}, Kf, e), Boolean(globalThis.document) || e.singleProcess) {
              var _e144 = new EventTarget();
              return Uf.addEventListener("message", Mf(_e144, "requestReadLock", kf, Nf, Lf)), Uf.addEventListener("message", Mf(_e144, "requestWriteLock", Df, Pf, Bf)), _e144;
            }
            return {
              isWorker: !0,
              readLock: function readLock(e) {
                return Vf(e, kf, Lf, Nf);
              },
              writeLock: function writeLock(e) {
                return Vf(e, Df, Bf, Pf);
              }
            };
          }(t), !0 !== qf.isWorker && (qf.addEventListener("requestReadLock", function (e) {
            null != Ff[e.data.name] && Ff[e.data.name].readLock().then( /*#__PURE__*/function () {
              var _ref127 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee280(t) {
                return _regeneratorRuntime().wrap(function _callee280$(_context285) {
                  while (1) switch (_context285.prev = _context285.next) {
                    case 0:
                      _context285.next = 2;
                      return e.data.handler().finally(function () {
                        return t();
                      });
                    case 2:
                      return _context285.abrupt("return", _context285.sent);
                    case 3:
                    case "end":
                      return _context285.stop();
                  }
                }, _callee280);
              }));
              return function (_x295) {
                return _ref127.apply(this, arguments);
              };
            }());
          }), qf.addEventListener("requestWriteLock", /*#__PURE__*/function () {
            var _ref128 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee282(e) {
              return _regeneratorRuntime().wrap(function _callee282$(_context287) {
                while (1) switch (_context287.prev = _context287.next) {
                  case 0:
                    null != Ff[e.data.name] && Ff[e.data.name].writeLock().then( /*#__PURE__*/function () {
                      var _ref129 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee281(t) {
                        return _regeneratorRuntime().wrap(function _callee281$(_context286) {
                          while (1) switch (_context286.prev = _context286.next) {
                            case 0:
                              _context286.next = 2;
                              return e.data.handler().finally(function () {
                                return t();
                              });
                            case 2:
                              return _context286.abrupt("return", _context286.sent);
                            case 3:
                            case "end":
                              return _context286.stop();
                          }
                        }, _callee281);
                      }));
                      return function (_x297) {
                        return _ref129.apply(this, arguments);
                      };
                    }());
                  case 1:
                  case "end":
                    return _context287.stop();
                }
              }, _callee282);
            }));
            return function (_x296) {
              return _ref128.apply(this, arguments);
            };
          }()))), null == Ff[t.name] && (Ff[t.name] = function (e, t) {
            if (!0 === qf.isWorker) return {
              readLock: qf.readLock(e, t),
              writeLock: qf.writeLock(e, t)
            };
            var r = new Cf({
              concurrency: 1
            });
            var n;
            return {
              readLock: function readLock() {
                return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee284() {
                  var e, i;
                  return _regeneratorRuntime().wrap(function _callee284$(_context289) {
                    while (1) switch (_context289.prev = _context289.next) {
                      case 0:
                        if (!(null != n)) {
                          _context289.next = 4;
                          break;
                        }
                        _context289.next = 3;
                        return jf(n, t);
                      case 3:
                        return _context289.abrupt("return", _context289.sent);
                      case 4:
                        n = new Cf({
                          concurrency: t.concurrency,
                          autoStart: !1
                        });
                        e = n, i = jf(n, t);
                        r.add( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee283() {
                          return _regeneratorRuntime().wrap(function _callee283$(_context288) {
                            while (1) switch (_context288.prev = _context288.next) {
                              case 0:
                                e.start();
                                _context288.next = 3;
                                return e.onIdle().then(function () {
                                  n === e && (n = null);
                                });
                              case 3:
                                return _context288.abrupt("return", _context288.sent);
                              case 4:
                              case "end":
                                return _context288.stop();
                            }
                          }, _callee283);
                        })));
                        _context289.next = 9;
                        return i;
                      case 9:
                        return _context289.abrupt("return", _context289.sent);
                      case 10:
                      case "end":
                        return _context289.stop();
                    }
                  }, _callee284);
                }))();
              },
              writeLock: function () {
                var _writeLock = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee285() {
                  return _regeneratorRuntime().wrap(function _callee285$(_context290) {
                    while (1) switch (_context290.prev = _context290.next) {
                      case 0:
                        n = null;
                        _context290.next = 3;
                        return jf(r, t);
                      case 3:
                        return _context290.abrupt("return", _context290.sent);
                      case 4:
                      case "end":
                        return _context290.stop();
                    }
                  }, _callee285);
                }));
                function writeLock() {
                  return _writeLock.apply(this, arguments);
                }
                return writeLock;
              }()
            };
          }(t.name, t)), Ff[t.name];
        }();
      }
      _createClass(Gf, [{
        key: "_peerIdToDatastoreKey",
        value: function _peerIdToDatastoreKey(e) {
          if (null == e.type) throw zf.error("peerId must be an instance of peer-id to store data"), new rs("peerId must be an instance of peer-id", vp.ERR_INVALID_PARAMETERS);
          var t = e.toCID().toString();
          return new Iu("".concat($f).concat(t));
        }
      }, {
        key: "has",
        value: function () {
          var _has2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee286(e) {
            return _regeneratorRuntime().wrap(function _callee286$(_context291) {
              while (1) switch (_context291.prev = _context291.next) {
                case 0:
                  _context291.next = 2;
                  return this.components.datastore.has(this._peerIdToDatastoreKey(e));
                case 2:
                  return _context291.abrupt("return", _context291.sent);
                case 3:
                case "end":
                  return _context291.stop();
              }
            }, _callee286, this);
          }));
          function has(_x298) {
            return _has2.apply(this, arguments);
          }
          return has;
        }()
      }, {
        key: "delete",
        value: function () {
          var _delete7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee287(e) {
            return _regeneratorRuntime().wrap(function _callee287$(_context292) {
              while (1) switch (_context292.prev = _context292.next) {
                case 0:
                  _context292.next = 2;
                  return this.components.datastore.delete(this._peerIdToDatastoreKey(e));
                case 2:
                case "end":
                  return _context292.stop();
              }
            }, _callee287, this);
          }));
          function _delete(_x299) {
            return _delete7.apply(this, arguments);
          }
          return _delete;
        }()
      }, {
        key: "load",
        value: function () {
          var _load = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee288(e) {
            var _r$pubKey, _r$peerRecordEnvelope;
            var t, r, n, _iterator112, _step112, _e145;
            return _regeneratorRuntime().wrap(function _callee288$(_context293) {
              while (1) switch (_context293.prev = _context293.next) {
                case 0:
                  _context293.next = 2;
                  return this.components.datastore.get(this._peerIdToDatastoreKey(e));
                case 2:
                  t = _context293.sent;
                  r = Kp.decode(t);
                  n = new Map();
                  _iterator112 = _createForOfIteratorHelper(r.metadata);
                  try {
                    for (_iterator112.s(); !(_step112 = _iterator112.n()).done;) {
                      _e145 = _step112.value;
                      n.set(_e145.key, _e145.value);
                    }
                  } catch (err) {
                    _iterator112.e(err);
                  } finally {
                    _iterator112.f();
                  }
                  return _context293.abrupt("return", _objectSpread(_objectSpread({}, r), {}, {
                    id: e,
                    addresses: r.addresses.map(function (_ref131) {
                      var e = _ref131.multiaddr,
                        t = _ref131.isCertified;
                      return {
                        multiaddr: hr(e),
                        isCertified: t !== null && t !== void 0 ? t : !1
                      };
                    }),
                    metadata: n,
                    pubKey: (_r$pubKey = r.pubKey) !== null && _r$pubKey !== void 0 ? _r$pubKey : void 0,
                    peerRecordEnvelope: (_r$peerRecordEnvelope = r.peerRecordEnvelope) !== null && _r$peerRecordEnvelope !== void 0 ? _r$peerRecordEnvelope : void 0
                  }));
                case 8:
                case "end":
                  return _context293.stop();
              }
            }, _callee288, this);
          }));
          function load(_x300) {
            return _load.apply(this, arguments);
          }
          return load;
        }()
      }, {
        key: "save",
        value: function () {
          var _save = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee289(e) {
            var t, r, n, i;
            return _regeneratorRuntime().wrap(function _callee289$(_context294) {
              while (1) switch (_context294.prev = _context294.next) {
                case 0:
                  if (!(null != e.pubKey && null != e.id.publicKey && !Xt(e.pubKey, e.id.publicKey))) {
                    _context294.next = 2;
                    break;
                  }
                  throw zf.error("peer publicKey bytes do not match peer id publicKey bytes"), new rs("publicKey bytes do not match peer id publicKey bytes", vp.ERR_INVALID_PARAMETERS);
                case 2:
                  t = new Set(), r = e.addresses.filter(function (e) {
                    return !t.has(e.multiaddr.toString()) && (t.add(e.multiaddr.toString()), !0);
                  }).sort(function (e, t) {
                    return e.multiaddr.toString().localeCompare(t.multiaddr.toString());
                  }).map(function (_ref132) {
                    var e = _ref132.multiaddr,
                      t = _ref132.isCertified;
                    return {
                      multiaddr: e.bytes,
                      isCertified: t
                    };
                  }), n = [];
                  _toConsumableArray(e.metadata.keys()).sort().forEach(function (t) {
                    var r = e.metadata.get(t);
                    null != r && n.push({
                      key: t,
                      value: r
                    });
                  });
                  i = Kp.encode({
                    addresses: r,
                    protocols: e.protocols.sort(),
                    pubKey: e.pubKey,
                    metadata: n,
                    peerRecordEnvelope: e.peerRecordEnvelope
                  });
                  _context294.next = 7;
                  return this.components.datastore.put(this._peerIdToDatastoreKey(e.id), i.subarray());
                case 7:
                  _context294.next = 9;
                  return this.load(e.id);
                case 9:
                  return _context294.abrupt("return", _context294.sent);
                case 10:
                case "end":
                  return _context294.stop();
              }
            }, _callee289, this);
          }));
          function save(_x301) {
            return _save.apply(this, arguments);
          }
          return save;
        }()
      }, {
        key: "patch",
        value: function () {
          var _patch2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee290(e, t) {
            var r;
            return _regeneratorRuntime().wrap(function _callee290$(_context295) {
              while (1) switch (_context295.prev = _context295.next) {
                case 0:
                  _context295.next = 2;
                  return this.load(e);
                case 2:
                  r = _context295.sent;
                  _context295.next = 5;
                  return this._patch(e, t, r);
                case 5:
                  return _context295.abrupt("return", _context295.sent);
                case 6:
                case "end":
                  return _context295.stop();
              }
            }, _callee290, this);
          }));
          function patch(_x302, _x303) {
            return _patch2.apply(this, arguments);
          }
          return patch;
        }()
      }, {
        key: "patchOrCreate",
        value: function () {
          var _patchOrCreate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee291(e, t) {
            var r;
            return _regeneratorRuntime().wrap(function _callee291$(_context296) {
              while (1) switch (_context296.prev = _context296.next) {
                case 0:
                  _context296.prev = 0;
                  _context296.next = 3;
                  return this.load(e);
                case 3:
                  r = _context296.sent;
                  _context296.next = 11;
                  break;
                case 6:
                  _context296.prev = 6;
                  _context296.t0 = _context296["catch"](0);
                  if (!(_context296.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context296.next = 10;
                    break;
                  }
                  throw _context296.t0;
                case 10:
                  r = {
                    id: e,
                    addresses: [],
                    protocols: [],
                    metadata: new Map()
                  };
                case 11:
                  _context296.next = 13;
                  return this._patch(e, t, r);
                case 13:
                  return _context296.abrupt("return", _context296.sent);
                case 14:
                case "end":
                  return _context296.stop();
              }
            }, _callee291, this, [[0, 6]]);
          }));
          function patchOrCreate(_x304, _x305) {
            return _patchOrCreate.apply(this, arguments);
          }
          return patchOrCreate;
        }()
      }, {
        key: "_patch",
        value: function () {
          var _patch3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee292(e, t, r) {
            return _regeneratorRuntime().wrap(function _callee292$(_context297) {
              while (1) switch (_context297.prev = _context297.next) {
                case 0:
                  _context297.next = 2;
                  return this.save(_objectSpread(_objectSpread(_objectSpread({}, r), t), {}, {
                    id: e
                  }));
                case 2:
                  return _context297.abrupt("return", _context297.sent);
                case 3:
                case "end":
                  return _context297.stop();
              }
            }, _callee292, this);
          }));
          function _patch(_x306, _x307, _x308) {
            return _patch3.apply(this, arguments);
          }
          return _patch;
        }()
      }, {
        key: "merge",
        value: function () {
          var _merge2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee293(e, t) {
            var r;
            return _regeneratorRuntime().wrap(function _callee293$(_context298) {
              while (1) switch (_context298.prev = _context298.next) {
                case 0:
                  _context298.next = 2;
                  return this.load(e);
                case 2:
                  r = _context298.sent;
                  _context298.next = 5;
                  return this._merge(e, t, r);
                case 5:
                  return _context298.abrupt("return", _context298.sent);
                case 6:
                case "end":
                  return _context298.stop();
              }
            }, _callee293, this);
          }));
          function merge(_x309, _x310) {
            return _merge2.apply(this, arguments);
          }
          return merge;
        }()
      }, {
        key: "mergeOrCreate",
        value: function () {
          var _mergeOrCreate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee294(e, t) {
            var r;
            return _regeneratorRuntime().wrap(function _callee294$(_context299) {
              while (1) switch (_context299.prev = _context299.next) {
                case 0:
                  _context299.prev = 0;
                  _context299.next = 3;
                  return this.load(e);
                case 3:
                  r = _context299.sent;
                  _context299.next = 11;
                  break;
                case 6:
                  _context299.prev = 6;
                  _context299.t0 = _context299["catch"](0);
                  if (!(_context299.t0.code !== vp.ERR_NOT_FOUND)) {
                    _context299.next = 10;
                    break;
                  }
                  throw _context299.t0;
                case 10:
                  r = {
                    id: e,
                    addresses: [],
                    protocols: [],
                    metadata: new Map()
                  };
                case 11:
                  _context299.next = 13;
                  return this._merge(e, t, r);
                case 13:
                  return _context299.abrupt("return", _context299.sent);
                case 14:
                case "end":
                  return _context299.stop();
              }
            }, _callee294, this, [[0, 6]]);
          }));
          function mergeOrCreate(_x311, _x312) {
            return _mergeOrCreate.apply(this, arguments);
          }
          return mergeOrCreate;
        }()
      }, {
        key: "_merge",
        value: function () {
          var _merge3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee295(e, t, r) {
            var _t$addresses2, _r$protocols, _t$protocols, _r$metadata$entries, _r$metadata, _t$metadata$entries, _t$metadata, _t$pubKey, _t$peerRecordEnvelope;
            var n;
            return _regeneratorRuntime().wrap(function _callee295$(_context300) {
              while (1) switch (_context300.prev = _context300.next) {
                case 0:
                  n = new Map();
                  r.addresses.forEach(function (e) {
                    n.set(e.multiaddr.toString(), e.isCertified);
                  });
                  ((_t$addresses2 = t.addresses) !== null && _t$addresses2 !== void 0 ? _t$addresses2 : []).forEach(function (e) {
                    var t = e.multiaddr.toString(),
                      r = Boolean(n.get(t)) || e.isCertified;
                    n.set(t, r);
                  });
                  _context300.next = 5;
                  return this.save({
                    id: e,
                    addresses: Array.from(n.entries()).map(function (_ref133) {
                      var _ref134 = _slicedToArray(_ref133, 2),
                        e = _ref134[0],
                        t = _ref134[1];
                      return {
                        multiaddr: hr(e),
                        isCertified: t
                      };
                    }),
                    protocols: Array.from(new Set([].concat(_toConsumableArray((_r$protocols = r.protocols) !== null && _r$protocols !== void 0 ? _r$protocols : []), _toConsumableArray((_t$protocols = t.protocols) !== null && _t$protocols !== void 0 ? _t$protocols : [])))),
                    metadata: new Map([].concat(_toConsumableArray((_r$metadata$entries = (_r$metadata = r.metadata) === null || _r$metadata === void 0 ? void 0 : _r$metadata.entries()) !== null && _r$metadata$entries !== void 0 ? _r$metadata$entries : []), _toConsumableArray((_t$metadata$entries = (_t$metadata = t.metadata) === null || _t$metadata === void 0 ? void 0 : _t$metadata.entries()) !== null && _t$metadata$entries !== void 0 ? _t$metadata$entries : []))),
                    pubKey: (_t$pubKey = t.pubKey) !== null && _t$pubKey !== void 0 ? _t$pubKey : null != r ? r.pubKey : void 0,
                    peerRecordEnvelope: (_t$peerRecordEnvelope = t.peerRecordEnvelope) !== null && _t$peerRecordEnvelope !== void 0 ? _t$peerRecordEnvelope : null != r ? r.peerRecordEnvelope : void 0
                  });
                case 5:
                  return _context300.abrupt("return", _context300.sent);
                case 6:
                case "end":
                  return _context300.stop();
              }
            }, _callee295, this);
          }));
          function _merge(_x313, _x314, _x315) {
            return _merge3.apply(this, arguments);
          }
          return _merge;
        }()
      }, {
        key: "all",
        value: function all() {
          var _this10 = this;
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee296() {
            var _iteratorAbruptCompletion27, _didIteratorError27, _iteratorError27, _iterator27, _step27, _e146, t, r;
            return _regeneratorRuntime().wrap(function _callee296$(_context301) {
              while (1) switch (_context301.prev = _context301.next) {
                case 0:
                  _iteratorAbruptCompletion27 = false;
                  _didIteratorError27 = false;
                  _context301.prev = 2;
                  _iterator27 = _asyncIterator(_this10.components.datastore.queryKeys({
                    prefix: $f
                  }));
                case 4:
                  _context301.next = 6;
                  return _awaitAsyncGenerator(_iterator27.next());
                case 6:
                  if (!(_iteratorAbruptCompletion27 = !(_step27 = _context301.sent).done)) {
                    _context301.next = 14;
                    break;
                  }
                  _e146 = _step27.value;
                  t = _e146.toString().split("/")[2], r = H.decode(t);
                  _context301.next = 11;
                  return _this10.load(ic(r));
                case 11:
                  _iteratorAbruptCompletion27 = false;
                  _context301.next = 4;
                  break;
                case 14:
                  _context301.next = 20;
                  break;
                case 16:
                  _context301.prev = 16;
                  _context301.t0 = _context301["catch"](2);
                  _didIteratorError27 = true;
                  _iteratorError27 = _context301.t0;
                case 20:
                  _context301.prev = 20;
                  _context301.prev = 21;
                  if (!(_iteratorAbruptCompletion27 && _iterator27.return != null)) {
                    _context301.next = 25;
                    break;
                  }
                  _context301.next = 25;
                  return _awaitAsyncGenerator(_iterator27.return());
                case 25:
                  _context301.prev = 25;
                  if (!_didIteratorError27) {
                    _context301.next = 28;
                    break;
                  }
                  throw _iteratorError27;
                case 28:
                  return _context301.finish(25);
                case 29:
                  return _context301.finish(20);
                case 30:
                case "end":
                  return _context301.stop();
              }
            }, _callee296, null, [[2, 16, 20, 30], [21,, 25, 29]]);
          }))();
        }
      }]);
      return Gf;
    }();
    var Wf, Yf;
    !function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = jp(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          if (!1 !== r.lengthDelimited && t.fork(), null != e.tags) {
            var _iterator113 = _createForOfIteratorHelper(e.tags),
              _step113;
            try {
              for (_iterator113.s(); !(_step113 = _iterator113.n()).done;) {
                var _r146 = _step113.value;
                t.uint32(10), Yf.codec().encode(_r146, t);
              }
            } catch (err) {
              _iterator113.e(err);
            } finally {
              _iterator113.f();
            }
          }
          !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {
              tags: []
            },
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t129 = e.uint32();
            _t129 >>> 3 == 1 ? r.tags.push(Yf.codec().decode(e, e.uint32())) : e.skipType(7 & _t129);
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Mp(t, e.codec());
      }, e.decode = function (t) {
        return Up(t, e.codec());
      };
    }(Wf || (Wf = {})), function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = jp(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          !1 !== r.lengthDelimited && t.fork(), null != e.name && "" !== e.name && (t.uint32(10), t.string(e.name)), null != e.value && (t.uint32(16), t.uint32(e.value)), null != e.expiry && (t.uint32(24), t.uint64(e.expiry)), !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {
              name: ""
            },
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t130 = e.uint32();
            switch (_t130 >>> 3) {
              case 1:
                r.name = e.string();
                break;
              case 2:
                r.value = e.uint32();
                break;
              case 3:
                r.expiry = e.uint64();
                break;
              default:
                e.skipType(7 & _t130);
            }
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Mp(t, e.codec());
      }, e.decode = function (t) {
        return Up(t, e.codec());
      };
    }(Yf || (Yf = {}));
    var Qf = ne("libp2p:peer-store");
    var Xf = /*#__PURE__*/function (_Wr10) {
      _inherits(Xf, _Wr10);
      var _super46 = _createSuper(Xf);
      function Xf(e) {
        var _this152;
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        _classCallCheck(this, Xf);
        _this152 = _super46.call(this), _this152.components = e, _this152.store = new Gf(e), _this152.addressBook = new Ap(_this152.dispatchEvent.bind(_assertThisInitialized(_this152)), _this152.store, t.addressFilter), _this152.keyBook = new kp(_this152.dispatchEvent.bind(_assertThisInitialized(_this152)), _this152.store), _this152.metadataBook = new Dp(_this152.dispatchEvent.bind(_assertThisInitialized(_this152)), _this152.store), _this152.protoBook = new Op(_this152.dispatchEvent.bind(_assertThisInitialized(_this152)), _this152.store);
        return _this152;
      }
      _createClass(Xf, [{
        key: "forEach",
        value: function () {
          var _forEach = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee297(e) {
            var t, _iteratorAbruptCompletion28, _didIteratorError28, _iteratorError28, _iterator28, _step28, _t131;
            return _regeneratorRuntime().wrap(function _callee297$(_context302) {
              while (1) switch (_context302.prev = _context302.next) {
                case 0:
                  Qf.trace("getPeers await read lock");
                  _context302.next = 3;
                  return this.store.lock.readLock();
                case 3:
                  t = _context302.sent;
                  Qf.trace("getPeers got read lock");
                  _context302.prev = 5;
                  _iteratorAbruptCompletion28 = false;
                  _didIteratorError28 = false;
                  _context302.prev = 8;
                  _iterator28 = _asyncIterator(this.store.all());
                case 10:
                  _context302.next = 12;
                  return _iterator28.next();
                case 12:
                  if (!(_iteratorAbruptCompletion28 = !(_step28 = _context302.sent).done)) {
                    _context302.next = 18;
                    break;
                  }
                  _t131 = _step28.value;
                  _t131.id.equals(this.components.peerId) || e(_t131);
                case 15:
                  _iteratorAbruptCompletion28 = false;
                  _context302.next = 10;
                  break;
                case 18:
                  _context302.next = 24;
                  break;
                case 20:
                  _context302.prev = 20;
                  _context302.t0 = _context302["catch"](8);
                  _didIteratorError28 = true;
                  _iteratorError28 = _context302.t0;
                case 24:
                  _context302.prev = 24;
                  _context302.prev = 25;
                  if (!(_iteratorAbruptCompletion28 && _iterator28.return != null)) {
                    _context302.next = 29;
                    break;
                  }
                  _context302.next = 29;
                  return _iterator28.return();
                case 29:
                  _context302.prev = 29;
                  if (!_didIteratorError28) {
                    _context302.next = 32;
                    break;
                  }
                  throw _iteratorError28;
                case 32:
                  return _context302.finish(29);
                case 33:
                  return _context302.finish(24);
                case 34:
                  _context302.prev = 34;
                  Qf.trace("getPeers release read lock"), t();
                  return _context302.finish(34);
                case 37:
                case "end":
                  return _context302.stop();
              }
            }, _callee297, this, [[5,, 34, 37], [8, 20, 24, 34], [25,, 29, 33]]);
          }));
          function forEach(_x316) {
            return _forEach.apply(this, arguments);
          }
          return forEach;
        }()
      }, {
        key: "all",
        value: function () {
          var _all2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee298() {
            var e;
            return _regeneratorRuntime().wrap(function _callee298$(_context303) {
              while (1) switch (_context303.prev = _context303.next) {
                case 0:
                  e = [];
                  _context303.next = 3;
                  return this.forEach(function (t) {
                    e.push(t);
                  });
                case 3:
                  return _context303.abrupt("return", e);
                case 4:
                case "end":
                  return _context303.stop();
              }
            }, _callee298, this);
          }));
          function all() {
            return _all2.apply(this, arguments);
          }
          return all;
        }()
      }, {
        key: "delete",
        value: function () {
          var _delete8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee299(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee299$(_context304) {
              while (1) switch (_context304.prev = _context304.next) {
                case 0:
                  Qf.trace("delete await write lock");
                  _context304.next = 3;
                  return this.store.lock.writeLock();
                case 3:
                  t = _context304.sent;
                  Qf.trace("delete got write lock");
                  _context304.prev = 5;
                  _context304.next = 8;
                  return this.store.delete(e);
                case 8:
                  _context304.prev = 8;
                  Qf.trace("delete release write lock"), t();
                  return _context304.finish(8);
                case 11:
                case "end":
                  return _context304.stop();
              }
            }, _callee299, this, [[5,, 8, 11]]);
          }));
          function _delete(_x317) {
            return _delete8.apply(this, arguments);
          }
          return _delete;
        }()
      }, {
        key: "get",
        value: function () {
          var _get9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee300(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee300$(_context305) {
              while (1) switch (_context305.prev = _context305.next) {
                case 0:
                  Qf.trace("get await read lock");
                  _context305.next = 3;
                  return this.store.lock.readLock();
                case 3:
                  t = _context305.sent;
                  Qf.trace("get got read lock");
                  _context305.prev = 5;
                  _context305.next = 8;
                  return this.store.load(e);
                case 8:
                  return _context305.abrupt("return", _context305.sent);
                case 9:
                  _context305.prev = 9;
                  Qf.trace("get release read lock"), t();
                  return _context305.finish(9);
                case 12:
                case "end":
                  return _context305.stop();
              }
            }, _callee300, this, [[5,, 9, 12]]);
          }));
          function get(_x318) {
            return _get9.apply(this, arguments);
          }
          return get;
        }()
      }, {
        key: "has",
        value: function () {
          var _has3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee301(e) {
            var t;
            return _regeneratorRuntime().wrap(function _callee301$(_context306) {
              while (1) switch (_context306.prev = _context306.next) {
                case 0:
                  Qf.trace("has await read lock");
                  _context306.next = 3;
                  return this.store.lock.readLock();
                case 3:
                  t = _context306.sent;
                  Qf.trace("has got read lock");
                  _context306.prev = 5;
                  _context306.next = 8;
                  return this.store.has(e);
                case 8:
                  return _context306.abrupt("return", _context306.sent);
                case 9:
                  _context306.prev = 9;
                  Qf.trace("has release read lock"), t();
                  return _context306.finish(9);
                case 12:
                case "end":
                  return _context306.stop();
              }
            }, _callee301, this, [[5,, 9, 12]]);
          }));
          function has(_x319) {
            return _has3.apply(this, arguments);
          }
          return has;
        }()
      }, {
        key: "tagPeer",
        value: function () {
          var _tagPeer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee302(e, t) {
            var _r$value, _r$ttl;
            var r,
              n,
              i,
              s,
              o,
              a,
              _args307 = arguments;
            return _regeneratorRuntime().wrap(function _callee302$(_context307) {
              while (1) switch (_context307.prev = _context307.next) {
                case 0:
                  r = _args307.length > 2 && _args307[2] !== undefined ? _args307[2] : {};
                  n = (_r$value = r.value) !== null && _r$value !== void 0 ? _r$value : 0, i = Math.round(n), s = (_r$ttl = r.ttl) !== null && _r$ttl !== void 0 ? _r$ttl : void 0;
                  if (!(i !== n || i < 0 || i > 100)) {
                    _context307.next = 4;
                    break;
                  }
                  throw new rs("Tag value must be between 0-100", "ERR_TAG_VALUE_OUT_OF_BOUNDS");
                case 4:
                  _context307.next = 6;
                  return this.metadataBook.getValue(e, "tags");
                case 6:
                  o = _context307.sent;
                  a = [];
                  null != o && (a = Wf.decode(o).tags);
                  a = a.filter(function (e) {
                    return e.name !== t;
                  });
                  a.push({
                    name: t,
                    value: i,
                    expiry: null == s ? void 0 : BigInt(Date.now() + s)
                  });
                  _context307.next = 13;
                  return this.metadataBook.setValue(e, "tags", Wf.encode({
                    tags: a
                  }).subarray());
                case 13:
                case "end":
                  return _context307.stop();
              }
            }, _callee302, this);
          }));
          function tagPeer(_x320, _x321) {
            return _tagPeer.apply(this, arguments);
          }
          return tagPeer;
        }()
      }, {
        key: "unTagPeer",
        value: function () {
          var _unTagPeer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee303(e, t) {
            var r, n;
            return _regeneratorRuntime().wrap(function _callee303$(_context308) {
              while (1) switch (_context308.prev = _context308.next) {
                case 0:
                  _context308.next = 2;
                  return this.metadataBook.getValue(e, "tags");
                case 2:
                  r = _context308.sent;
                  n = [];
                  null != r && (n = Wf.decode(r).tags);
                  n = n.filter(function (e) {
                    return e.name !== t;
                  });
                  _context308.next = 8;
                  return this.metadataBook.setValue(e, "tags", Wf.encode({
                    tags: n
                  }).subarray());
                case 8:
                case "end":
                  return _context308.stop();
              }
            }, _callee303, this);
          }));
          function unTagPeer(_x322, _x323) {
            return _unTagPeer.apply(this, arguments);
          }
          return unTagPeer;
        }()
      }, {
        key: "getTags",
        value: function () {
          var _getTags = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee304(e) {
            var t, r, n, i;
            return _regeneratorRuntime().wrap(function _callee304$(_context309) {
              while (1) switch (_context309.prev = _context309.next) {
                case 0:
                  _context309.next = 2;
                  return this.metadataBook.getValue(e, "tags");
                case 2:
                  t = _context309.sent;
                  r = [];
                  null != t && (r = Wf.decode(t).tags);
                  n = BigInt(Date.now()), i = r.filter(function (e) {
                    return null == e.expiry || e.expiry > n;
                  });
                  _context309.t0 = i.length !== r.length;
                  if (!_context309.t0) {
                    _context309.next = 10;
                    break;
                  }
                  _context309.next = 10;
                  return this.metadataBook.setValue(e, "tags", Wf.encode({
                    tags: i
                  }).subarray());
                case 10:
                  return _context309.abrupt("return", i.map(function (e) {
                    var _e$value;
                    return {
                      name: e.name,
                      value: (_e$value = e.value) !== null && _e$value !== void 0 ? _e$value : 0
                    };
                  }));
                case 11:
                case "end":
                  return _context309.stop();
              }
            }, _callee304, this);
          }));
          function getTags(_x324) {
            return _getTags.apply(this, arguments);
          }
          return getTags;
        }()
      }]);
      return Xf;
    }(Wr);
    var Zf = /*#__PURE__*/function () {
      function Zf(e) {
        _classCallCheck(this, Zf);
        this.dht = e;
      }
      _createClass(Zf, [{
        key: "provide",
        value: function () {
          var _provide2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee305(e) {
            return _regeneratorRuntime().wrap(function _callee305$(_context310) {
              while (1) switch (_context310.prev = _context310.next) {
                case 0:
                  _context310.next = 2;
                  return wu(this.dht.provide(e));
                case 2:
                case "end":
                  return _context310.stop();
              }
            }, _callee305, this);
          }));
          function provide(_x325) {
            return _provide2.apply(this, arguments);
          }
          return provide;
        }()
      }, {
        key: "findProviders",
        value: function findProviders(e) {
          var _this11 = this;
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
          return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee306() {
            var _iteratorAbruptCompletion29, _didIteratorError29, _iteratorError29, _iterator29, _step29, r;
            return _regeneratorRuntime().wrap(function _callee306$(_context311) {
              while (1) switch (_context311.prev = _context311.next) {
                case 0:
                  _iteratorAbruptCompletion29 = false;
                  _didIteratorError29 = false;
                  _context311.prev = 2;
                  _iterator29 = _asyncIterator(_this11.dht.findProviders(e, t));
                case 4:
                  _context311.next = 6;
                  return _awaitAsyncGenerator(_iterator29.next());
                case 6:
                  if (!(_iteratorAbruptCompletion29 = !(_step29 = _context311.sent).done)) {
                    _context311.next = 14;
                    break;
                  }
                  r = _step29.value;
                  _context311.t0 = "PROVIDER" === r.name;
                  if (!_context311.t0) {
                    _context311.next = 11;
                    break;
                  }
                  return _context311.delegateYield(_asyncGeneratorDelegate(_asyncIterator(r.providers), _awaitAsyncGenerator), "t1", 11);
                case 11:
                  _iteratorAbruptCompletion29 = false;
                  _context311.next = 4;
                  break;
                case 14:
                  _context311.next = 20;
                  break;
                case 16:
                  _context311.prev = 16;
                  _context311.t2 = _context311["catch"](2);
                  _didIteratorError29 = true;
                  _iteratorError29 = _context311.t2;
                case 20:
                  _context311.prev = 20;
                  _context311.prev = 21;
                  if (!(_iteratorAbruptCompletion29 && _iterator29.return != null)) {
                    _context311.next = 25;
                    break;
                  }
                  _context311.next = 25;
                  return _awaitAsyncGenerator(_iterator29.return());
                case 25:
                  _context311.prev = 25;
                  if (!_didIteratorError29) {
                    _context311.next = 28;
                    break;
                  }
                  throw _iteratorError29;
                case 28:
                  return _context311.finish(25);
                case 29:
                  return _context311.finish(20);
                case 30:
                case "end":
                  return _context311.stop();
              }
            }, _callee306, null, [[2, 16, 20, 30], [21,, 25, 29]]);
          }))();
        }
      }, {
        key: "put",
        value: function () {
          var _put3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee307(e, t, r) {
            return _regeneratorRuntime().wrap(function _callee307$(_context312) {
              while (1) switch (_context312.prev = _context312.next) {
                case 0:
                  _context312.next = 2;
                  return wu(this.dht.put(e, t, r));
                case 2:
                case "end":
                  return _context312.stop();
              }
            }, _callee307, this);
          }));
          function put(_x326, _x327, _x328) {
            return _put3.apply(this, arguments);
          }
          return put;
        }()
      }, {
        key: "get",
        value: function () {
          var _get10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee308(e, t) {
            var _iteratorAbruptCompletion30, _didIteratorError30, _iteratorError30, _iterator30, _step30, r;
            return _regeneratorRuntime().wrap(function _callee308$(_context313) {
              while (1) switch (_context313.prev = _context313.next) {
                case 0:
                  _iteratorAbruptCompletion30 = false;
                  _didIteratorError30 = false;
                  _context313.prev = 2;
                  _iterator30 = _asyncIterator(this.dht.get(e, t));
                case 4:
                  _context313.next = 6;
                  return _iterator30.next();
                case 6:
                  if (!(_iteratorAbruptCompletion30 = !(_step30 = _context313.sent).done)) {
                    _context313.next = 13;
                    break;
                  }
                  r = _step30.value;
                  if (!("VALUE" === r.name)) {
                    _context313.next = 10;
                    break;
                  }
                  return _context313.abrupt("return", r.value);
                case 10:
                  _iteratorAbruptCompletion30 = false;
                  _context313.next = 4;
                  break;
                case 13:
                  _context313.next = 19;
                  break;
                case 15:
                  _context313.prev = 15;
                  _context313.t0 = _context313["catch"](2);
                  _didIteratorError30 = true;
                  _iteratorError30 = _context313.t0;
                case 19:
                  _context313.prev = 19;
                  _context313.prev = 20;
                  if (!(_iteratorAbruptCompletion30 && _iterator30.return != null)) {
                    _context313.next = 24;
                    break;
                  }
                  _context313.next = 24;
                  return _iterator30.return();
                case 24:
                  _context313.prev = 24;
                  if (!_didIteratorError30) {
                    _context313.next = 27;
                    break;
                  }
                  throw _iteratorError30;
                case 27:
                  return _context313.finish(24);
                case 28:
                  return _context313.finish(19);
                case 29:
                  throw Qt(new Error("Not found"), "ERR_NOT_FOUND");
                case 30:
                case "end":
                  return _context313.stop();
              }
            }, _callee308, this, [[2, 15, 19, 29], [20,, 24, 28]]);
          }));
          function get(_x329, _x330) {
            return _get10.apply(this, arguments);
          }
          return get;
        }()
      }]);
      return Zf;
    }();
    var Jf = /*#__PURE__*/function () {
      function Jf() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        _classCallCheck(this, Jf);
        this._started = !1, this._peerId = e.peerId, this._addressManager = e.addressManager, this._peerStore = e.peerStore, this._upgrader = e.upgrader, this._metrics = e.metrics, this._registrar = e.registrar, this._connectionManager = e.connectionManager, this._transportManager = e.transportManager, this._connectionGater = e.connectionGater, this._contentRouting = e.contentRouting, this._peerRouting = e.peerRouting, this._datastore = e.datastore, this._connectionProtector = e.connectionProtector, this._dht = e.dht, this._pubsub = e.pubsub, this._dialer = e.dialer;
      }
      _createClass(Jf, [{
        key: "isStarted",
        value: function isStarted() {
          return this._started;
        }
      }, {
        key: "beforeStart",
        value: function () {
          var _beforeStart = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee310() {
            return _regeneratorRuntime().wrap(function _callee310$(_context315) {
              while (1) switch (_context315.prev = _context315.next) {
                case 0:
                  _context315.next = 2;
                  return Promise.all(Object.values(this).filter(function (e) {
                    return yu(e);
                  }).map( /*#__PURE__*/function () {
                    var _ref135 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee309(e) {
                      return _regeneratorRuntime().wrap(function _callee309$(_context314) {
                        while (1) switch (_context314.prev = _context314.next) {
                          case 0:
                            _context314.t0 = null != e.beforeStart;
                            if (!_context314.t0) {
                              _context314.next = 4;
                              break;
                            }
                            _context314.next = 4;
                            return e.beforeStart();
                          case 4:
                          case "end":
                            return _context314.stop();
                        }
                      }, _callee309);
                    }));
                    return function (_x331) {
                      return _ref135.apply(this, arguments);
                    };
                  }()));
                case 2:
                case "end":
                  return _context315.stop();
              }
            }, _callee310, this);
          }));
          function beforeStart() {
            return _beforeStart.apply(this, arguments);
          }
          return beforeStart;
        }()
      }, {
        key: "start",
        value: function () {
          var _start14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee312() {
            return _regeneratorRuntime().wrap(function _callee312$(_context317) {
              while (1) switch (_context317.prev = _context317.next) {
                case 0:
                  _context317.next = 2;
                  return Promise.all(Object.values(this).filter(function (e) {
                    return yu(e);
                  }).map( /*#__PURE__*/function () {
                    var _ref136 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee311(e) {
                      return _regeneratorRuntime().wrap(function _callee311$(_context316) {
                        while (1) switch (_context316.prev = _context316.next) {
                          case 0:
                            _context316.next = 2;
                            return e.start();
                          case 2:
                          case "end":
                            return _context316.stop();
                        }
                      }, _callee311);
                    }));
                    return function (_x332) {
                      return _ref136.apply(this, arguments);
                    };
                  }()));
                case 2:
                  this._started = !0;
                case 3:
                case "end":
                  return _context317.stop();
              }
            }, _callee312, this);
          }));
          function start() {
            return _start14.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "afterStart",
        value: function () {
          var _afterStart2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee314() {
            return _regeneratorRuntime().wrap(function _callee314$(_context319) {
              while (1) switch (_context319.prev = _context319.next) {
                case 0:
                  _context319.next = 2;
                  return Promise.all(Object.values(this).filter(function (e) {
                    return yu(e);
                  }).map( /*#__PURE__*/function () {
                    var _ref137 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee313(e) {
                      return _regeneratorRuntime().wrap(function _callee313$(_context318) {
                        while (1) switch (_context318.prev = _context318.next) {
                          case 0:
                            _context318.t0 = null != e.afterStart;
                            if (!_context318.t0) {
                              _context318.next = 4;
                              break;
                            }
                            _context318.next = 4;
                            return e.afterStart();
                          case 4:
                          case "end":
                            return _context318.stop();
                        }
                      }, _callee313);
                    }));
                    return function (_x333) {
                      return _ref137.apply(this, arguments);
                    };
                  }()));
                case 2:
                case "end":
                  return _context319.stop();
              }
            }, _callee314, this);
          }));
          function afterStart() {
            return _afterStart2.apply(this, arguments);
          }
          return afterStart;
        }()
      }, {
        key: "beforeStop",
        value: function () {
          var _beforeStop2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee316() {
            return _regeneratorRuntime().wrap(function _callee316$(_context321) {
              while (1) switch (_context321.prev = _context321.next) {
                case 0:
                  _context321.next = 2;
                  return Promise.all(Object.values(this).filter(function (e) {
                    return yu(e);
                  }).map( /*#__PURE__*/function () {
                    var _ref138 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee315(e) {
                      return _regeneratorRuntime().wrap(function _callee315$(_context320) {
                        while (1) switch (_context320.prev = _context320.next) {
                          case 0:
                            _context320.t0 = null != e.beforeStop;
                            if (!_context320.t0) {
                              _context320.next = 4;
                              break;
                            }
                            _context320.next = 4;
                            return e.beforeStop();
                          case 4:
                          case "end":
                            return _context320.stop();
                        }
                      }, _callee315);
                    }));
                    return function (_x334) {
                      return _ref138.apply(this, arguments);
                    };
                  }()));
                case 2:
                case "end":
                  return _context321.stop();
              }
            }, _callee316, this);
          }));
          function beforeStop() {
            return _beforeStop2.apply(this, arguments);
          }
          return beforeStop;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee318() {
            return _regeneratorRuntime().wrap(function _callee318$(_context323) {
              while (1) switch (_context323.prev = _context323.next) {
                case 0:
                  _context323.next = 2;
                  return Promise.all(Object.values(this).filter(function (e) {
                    return yu(e);
                  }).map( /*#__PURE__*/function () {
                    var _ref139 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee317(e) {
                      return _regeneratorRuntime().wrap(function _callee317$(_context322) {
                        while (1) switch (_context322.prev = _context322.next) {
                          case 0:
                            _context322.next = 2;
                            return e.stop();
                          case 2:
                          case "end":
                            return _context322.stop();
                        }
                      }, _callee317);
                    }));
                    return function (_x335) {
                      return _ref139.apply(this, arguments);
                    };
                  }()));
                case 2:
                  this._started = !1;
                case 3:
                case "end":
                  return _context323.stop();
              }
            }, _callee318, this);
          }));
          function stop() {
            return _stop13.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "afterStop",
        value: function () {
          var _afterStop = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee320() {
            return _regeneratorRuntime().wrap(function _callee320$(_context325) {
              while (1) switch (_context325.prev = _context325.next) {
                case 0:
                  _context325.next = 2;
                  return Promise.all(Object.values(this).filter(function (e) {
                    return yu(e);
                  }).map( /*#__PURE__*/function () {
                    var _ref140 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee319(e) {
                      return _regeneratorRuntime().wrap(function _callee319$(_context324) {
                        while (1) switch (_context324.prev = _context324.next) {
                          case 0:
                            _context324.t0 = null != e.afterStop;
                            if (!_context324.t0) {
                              _context324.next = 4;
                              break;
                            }
                            _context324.next = 4;
                            return e.afterStop();
                          case 4:
                          case "end":
                            return _context324.stop();
                        }
                      }, _callee319);
                    }));
                    return function (_x336) {
                      return _ref140.apply(this, arguments);
                    };
                  }()));
                case 2:
                case "end":
                  return _context325.stop();
              }
            }, _callee320, this);
          }));
          function afterStop() {
            return _afterStop.apply(this, arguments);
          }
          return afterStop;
        }()
      }, {
        key: "peerId",
        get: function get() {
          if (null == this._peerId) throw Qt(new Error("peerId not set"), "ERR_SERVICE_MISSING");
          return this._peerId;
        },
        set: function set(e) {
          this._peerId = e;
        }
      }, {
        key: "addressManager",
        get: function get() {
          if (null == this._addressManager) throw Qt(new Error("addressManager not set"), "ERR_SERVICE_MISSING");
          return this._addressManager;
        },
        set: function set(e) {
          this._addressManager = e;
        }
      }, {
        key: "peerStore",
        get: function get() {
          if (null == this._peerStore) throw Qt(new Error("peerStore not set"), "ERR_SERVICE_MISSING");
          return this._peerStore;
        },
        set: function set(e) {
          this._peerStore = e;
        }
      }, {
        key: "upgrader",
        get: function get() {
          if (null == this._upgrader) throw Qt(new Error("upgrader not set"), "ERR_SERVICE_MISSING");
          return this._upgrader;
        },
        set: function set(e) {
          this._upgrader = e;
        }
      }, {
        key: "registrar",
        get: function get() {
          if (null == this._registrar) throw Qt(new Error("registrar not set"), "ERR_SERVICE_MISSING");
          return this._registrar;
        },
        set: function set(e) {
          this._registrar = e;
        }
      }, {
        key: "connectionManager",
        get: function get() {
          if (null == this._connectionManager) throw Qt(new Error("connectionManager not set"), "ERR_SERVICE_MISSING");
          return this._connectionManager;
        },
        set: function set(e) {
          this._connectionManager = e;
        }
      }, {
        key: "transportManager",
        get: function get() {
          if (null == this._transportManager) throw Qt(new Error("transportManager not set"), "ERR_SERVICE_MISSING");
          return this._transportManager;
        },
        set: function set(e) {
          this._transportManager = e;
        }
      }, {
        key: "connectionGater",
        get: function get() {
          if (null == this._connectionGater) throw Qt(new Error("connectionGater not set"), "ERR_SERVICE_MISSING");
          return this._connectionGater;
        },
        set: function set(e) {
          this._connectionGater = e;
        }
      }, {
        key: "contentRouting",
        get: function get() {
          if (null == this._contentRouting) throw Qt(new Error("contentRouting not set"), "ERR_SERVICE_MISSING");
          return this._contentRouting;
        },
        set: function set(e) {
          this._contentRouting = e;
        }
      }, {
        key: "peerRouting",
        get: function get() {
          if (null == this._peerRouting) throw Qt(new Error("peerRouting not set"), "ERR_SERVICE_MISSING");
          return this._peerRouting;
        },
        set: function set(e) {
          this._peerRouting = e;
        }
      }, {
        key: "datastore",
        get: function get() {
          if (null == this._datastore) throw Qt(new Error("datastore not set"), "ERR_SERVICE_MISSING");
          return this._datastore;
        },
        set: function set(e) {
          this._datastore = e;
        }
      }, {
        key: "connectionProtector",
        get: function get() {
          return this._connectionProtector;
        },
        set: function set(e) {
          this._connectionProtector = e;
        }
      }, {
        key: "dialer",
        get: function get() {
          if (null == this._dialer) throw Qt(new Error("dialer not set"), "ERR_SERVICE_MISSING");
          return this._dialer;
        },
        set: function set(e) {
          this._dialer = e;
        }
      }, {
        key: "metrics",
        get: function get() {
          return this._metrics;
        },
        set: function set(e) {
          this._metrics = e;
        }
      }, {
        key: "dht",
        get: function get() {
          return this._dht;
        },
        set: function set(e) {
          this._dht = e;
        }
      }, {
        key: "pubsub",
        get: function get() {
          return this._pubsub;
        },
        set: function set(e) {
          this._pubsub = e;
        }
      }]);
      return Jf;
    }();
    var ey = __webpack_require__(3692);
    function ty(e, t, r) {
      return "".concat(e, "?name=").concat(t, "&type=").concat(r);
    }
    function ry(_x337, _x338) {
      return _ry.apply(this, arguments);
    }
    function _ry() {
      _ry = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee421(e, t) {
        var r;
        return _regeneratorRuntime().wrap(function _callee421$(_context429) {
          while (1) switch (_context429.prev = _context429.next) {
            case 0:
              _context429.next = 2;
              return Vr(e, {
                headers: new Kr({
                  accept: "application/dns-json"
                }),
                signal: t
              });
            case 2:
              r = _context429.sent;
              _context429.next = 5;
              return r.json();
            case 5:
              return _context429.abrupt("return", _context429.sent);
            case 6:
            case "end":
              return _context429.stop();
          }
        }, _callee421);
      }));
      return _ry.apply(this, arguments);
    }
    function ny(e, t) {
      return "".concat(t, "_").concat(e);
    }
    var iy = Object.assign(L("dns-over-http-resolver"), {
        error: L("dns-over-http-resolver:error")
      }),
      _Lt = Lt("dnsaddr"),
      sy = _Lt.code,
      oy = {
        addresses: {
          listen: [],
          announce: [],
          noAnnounce: [],
          announceFilter: function announceFilter(e) {
            return e;
          }
        },
        connectionManager: {
          maxConnections: 300,
          minConnections: 50,
          autoDial: !0,
          autoDialInterval: 1e4,
          maxParallelDials: 100,
          maxDialsPerPeer: 4,
          dialTimeout: 3e4,
          inboundUpgradeTimeout: 3e4,
          resolvers: {
            dnsaddr: function () {
              var _dnsaddr = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee325(e) {
                var _e$stringTuples$find;
                var t,
                  r,
                  n,
                  _ref141,
                  _ref142,
                  i,
                  s,
                  _args333 = arguments;
                return _regeneratorRuntime().wrap(function _callee325$(_context333) {
                  while (1) switch (_context333.prev = _context333.next) {
                    case 0:
                      t = _args333.length > 1 && _args333[1] !== undefined ? _args333[1] : {};
                      r = new ( /*#__PURE__*/function () {
                        function _class26() {
                          var _e$maxCache, _e$maxCache2, _e$request;
                          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
                          _classCallCheck(this, _class26);
                          this._cache = new ey({
                            max: (_e$maxCache = e === null || e === void 0 ? void 0 : e.maxCache) !== null && _e$maxCache !== void 0 ? _e$maxCache : 100
                          }), this._TXTcache = new ey({
                            max: (_e$maxCache2 = e === null || e === void 0 ? void 0 : e.maxCache) !== null && _e$maxCache2 !== void 0 ? _e$maxCache2 : 100
                          }), this._servers = ["https://cloudflare-dns.com/dns-query", "https://dns.google/resolve"], this._request = (_e$request = e.request) !== null && _e$request !== void 0 ? _e$request : ry, this._abortControllers = [];
                        }
                        _createClass(_class26, [{
                          key: "cancel",
                          value: function cancel() {
                            this._abortControllers.forEach(function (e) {
                              return e.abort();
                            });
                          }
                        }, {
                          key: "getServers",
                          value: function getServers() {
                            return this._servers;
                          }
                        }, {
                          key: "_getShuffledServers",
                          value: function _getShuffledServers() {
                            var e = _toConsumableArray(this._servers);
                            for (var _t132 = e.length - 1; _t132 > 0; _t132--) {
                              var _r147 = Math.floor(Math.random() * _t132),
                                _n81 = e[_t132];
                              e[_t132] = e[_r147], e[_r147] = _n81;
                            }
                            return e;
                          }
                        }, {
                          key: "setServers",
                          value: function setServers(e) {
                            this._servers = e;
                          }
                        }, {
                          key: "resolve",
                          value: function () {
                            var _resolve2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee321(e) {
                              var t,
                                _args326 = arguments;
                              return _regeneratorRuntime().wrap(function _callee321$(_context326) {
                                while (1) switch (_context326.prev = _context326.next) {
                                  case 0:
                                    t = _args326.length > 1 && _args326[1] !== undefined ? _args326[1] : "A";
                                    _context326.t0 = t;
                                    _context326.next = _context326.t0 === "A" ? 4 : _context326.t0 === "AAAA" ? 7 : _context326.t0 === "TXT" ? 10 : 13;
                                    break;
                                  case 4:
                                    _context326.next = 6;
                                    return this.resolve4(e);
                                  case 6:
                                    return _context326.abrupt("return", _context326.sent);
                                  case 7:
                                    _context326.next = 9;
                                    return this.resolve6(e);
                                  case 9:
                                    return _context326.abrupt("return", _context326.sent);
                                  case 10:
                                    _context326.next = 12;
                                    return this.resolveTxt(e);
                                  case 12:
                                    return _context326.abrupt("return", _context326.sent);
                                  case 13:
                                    throw new Error("".concat(t, " is not supported"));
                                  case 14:
                                  case "end":
                                    return _context326.stop();
                                }
                              }, _callee321, this);
                            }));
                            function resolve(_x340) {
                              return _resolve2.apply(this, arguments);
                            }
                            return resolve;
                          }()
                        }, {
                          key: "resolve4",
                          value: function () {
                            var _resolve3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee322(e) {
                              var _this153 = this;
                              var t, r, n, _iterator114, _step114, _loop8, _ret6;
                              return _regeneratorRuntime().wrap(function _callee322$(_context328) {
                                while (1) switch (_context328.prev = _context328.next) {
                                  case 0:
                                    t = "A", r = this._cache.get(ny(e, t));
                                    if (!(null != r)) {
                                      _context328.next = 3;
                                      break;
                                    }
                                    return _context328.abrupt("return", r);
                                  case 3:
                                    n = !1;
                                    _iterator114 = _createForOfIteratorHelper(this._getShuffledServers());
                                    _context328.prev = 5;
                                    _loop8 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop8() {
                                      var r, i, _n82, _s34, _o23;
                                      return _regeneratorRuntime().wrap(function _loop8$(_context327) {
                                        while (1) switch (_context327.prev = _context327.next) {
                                          case 0:
                                            r = _step114.value;
                                            i = new AbortController();
                                            _this153._abortControllers.push(i);
                                            _context327.prev = 3;
                                            _context327.next = 6;
                                            return _this153._request(ty(r, e, t), i.signal);
                                          case 6:
                                            _n82 = _context327.sent;
                                            _s34 = _n82.Answer.map(function (e) {
                                              return e.data;
                                            });
                                            _o23 = Math.min.apply(Math, _toConsumableArray(_n82.Answer.map(function (e) {
                                              return e.TTL;
                                            })));
                                            return _context327.abrupt("return", {
                                              v: (_this153._cache.set(ny(e, t), _s34, {
                                                ttl: _o23
                                              }), _s34)
                                            });
                                          case 12:
                                            _context327.prev = 12;
                                            _context327.t0 = _context327["catch"](3);
                                            i.signal.aborted && (n = !0), iy.error("".concat(r, " could not resolve ").concat(e, " record ").concat(t));
                                          case 15:
                                            _context327.prev = 15;
                                            _this153._abortControllers = _this153._abortControllers.filter(function (e) {
                                              return e !== i;
                                            });
                                            return _context327.finish(15);
                                          case 18:
                                          case "end":
                                            return _context327.stop();
                                        }
                                      }, _loop8, null, [[3, 12, 15, 18]]);
                                    });
                                    _iterator114.s();
                                  case 8:
                                    if ((_step114 = _iterator114.n()).done) {
                                      _context328.next = 15;
                                      break;
                                    }
                                    return _context328.delegateYield(_loop8(), "t0", 10);
                                  case 10:
                                    _ret6 = _context328.t0;
                                    if (!(_typeof(_ret6) === "object")) {
                                      _context328.next = 13;
                                      break;
                                    }
                                    return _context328.abrupt("return", _ret6.v);
                                  case 13:
                                    _context328.next = 8;
                                    break;
                                  case 15:
                                    _context328.next = 20;
                                    break;
                                  case 17:
                                    _context328.prev = 17;
                                    _context328.t1 = _context328["catch"](5);
                                    _iterator114.e(_context328.t1);
                                  case 20:
                                    _context328.prev = 20;
                                    _iterator114.f();
                                    return _context328.finish(20);
                                  case 23:
                                    if (!n) {
                                      _context328.next = 25;
                                      break;
                                    }
                                    throw Object.assign(new Error("queryA ECANCELLED"), {
                                      code: "ECANCELLED"
                                    });
                                  case 25:
                                    throw new Error("Could not resolve ".concat(e, " record ").concat(t));
                                  case 26:
                                  case "end":
                                    return _context328.stop();
                                }
                              }, _callee322, this, [[5, 17, 20, 23]]);
                            }));
                            function resolve4(_x341) {
                              return _resolve3.apply(this, arguments);
                            }
                            return resolve4;
                          }()
                        }, {
                          key: "resolve6",
                          value: function () {
                            var _resolve4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee323(e) {
                              var _this154 = this;
                              var t, r, n, _iterator115, _step115, _loop9, _ret7;
                              return _regeneratorRuntime().wrap(function _callee323$(_context330) {
                                while (1) switch (_context330.prev = _context330.next) {
                                  case 0:
                                    t = "AAAA", r = this._cache.get(ny(e, t));
                                    if (!(null != r)) {
                                      _context330.next = 3;
                                      break;
                                    }
                                    return _context330.abrupt("return", r);
                                  case 3:
                                    n = !1;
                                    _iterator115 = _createForOfIteratorHelper(this._getShuffledServers());
                                    _context330.prev = 5;
                                    _loop9 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop9() {
                                      var r, i, _n83, _s35, _o24;
                                      return _regeneratorRuntime().wrap(function _loop9$(_context329) {
                                        while (1) switch (_context329.prev = _context329.next) {
                                          case 0:
                                            r = _step115.value;
                                            i = new AbortController();
                                            _this154._abortControllers.push(i);
                                            _context329.prev = 3;
                                            _context329.next = 6;
                                            return _this154._request(ty(r, e, t), i.signal);
                                          case 6:
                                            _n83 = _context329.sent;
                                            _s35 = _n83.Answer.map(function (e) {
                                              return e.data;
                                            });
                                            _o24 = Math.min.apply(Math, _toConsumableArray(_n83.Answer.map(function (e) {
                                              return e.TTL;
                                            })));
                                            return _context329.abrupt("return", {
                                              v: (_this154._cache.set(ny(e, t), _s35, {
                                                ttl: _o24
                                              }), _s35)
                                            });
                                          case 12:
                                            _context329.prev = 12;
                                            _context329.t0 = _context329["catch"](3);
                                            i.signal.aborted && (n = !0), iy.error("".concat(r, " could not resolve ").concat(e, " record ").concat(t));
                                          case 15:
                                            _context329.prev = 15;
                                            _this154._abortControllers = _this154._abortControllers.filter(function (e) {
                                              return e !== i;
                                            });
                                            return _context329.finish(15);
                                          case 18:
                                          case "end":
                                            return _context329.stop();
                                        }
                                      }, _loop9, null, [[3, 12, 15, 18]]);
                                    });
                                    _iterator115.s();
                                  case 8:
                                    if ((_step115 = _iterator115.n()).done) {
                                      _context330.next = 15;
                                      break;
                                    }
                                    return _context330.delegateYield(_loop9(), "t0", 10);
                                  case 10:
                                    _ret7 = _context330.t0;
                                    if (!(_typeof(_ret7) === "object")) {
                                      _context330.next = 13;
                                      break;
                                    }
                                    return _context330.abrupt("return", _ret7.v);
                                  case 13:
                                    _context330.next = 8;
                                    break;
                                  case 15:
                                    _context330.next = 20;
                                    break;
                                  case 17:
                                    _context330.prev = 17;
                                    _context330.t1 = _context330["catch"](5);
                                    _iterator115.e(_context330.t1);
                                  case 20:
                                    _context330.prev = 20;
                                    _iterator115.f();
                                    return _context330.finish(20);
                                  case 23:
                                    if (!n) {
                                      _context330.next = 25;
                                      break;
                                    }
                                    throw Object.assign(new Error("queryAaaa ECANCELLED"), {
                                      code: "ECANCELLED"
                                    });
                                  case 25:
                                    throw new Error("Could not resolve ".concat(e, " record ").concat(t));
                                  case 26:
                                  case "end":
                                    return _context330.stop();
                                }
                              }, _callee323, this, [[5, 17, 20, 23]]);
                            }));
                            function resolve6(_x342) {
                              return _resolve4.apply(this, arguments);
                            }
                            return resolve6;
                          }()
                        }, {
                          key: "resolveTxt",
                          value: function () {
                            var _resolveTxt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee324(e) {
                              var _this155 = this;
                              var t, r, n, _iterator116, _step116, _loop10, _ret8;
                              return _regeneratorRuntime().wrap(function _callee324$(_context332) {
                                while (1) switch (_context332.prev = _context332.next) {
                                  case 0:
                                    t = "TXT", r = this._TXTcache.get(ny(e, t));
                                    if (!(null != r)) {
                                      _context332.next = 3;
                                      break;
                                    }
                                    return _context332.abrupt("return", r);
                                  case 3:
                                    n = !1;
                                    _iterator116 = _createForOfIteratorHelper(this._getShuffledServers());
                                    _context332.prev = 5;
                                    _loop10 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop10() {
                                      var r, i, _n84, _s36, _o25;
                                      return _regeneratorRuntime().wrap(function _loop10$(_context331) {
                                        while (1) switch (_context331.prev = _context331.next) {
                                          case 0:
                                            r = _step116.value;
                                            i = new AbortController();
                                            _this155._abortControllers.push(i);
                                            _context331.prev = 3;
                                            _context331.next = 6;
                                            return _this155._request(ty(r, e, t), i.signal);
                                          case 6:
                                            _n84 = _context331.sent;
                                            _s36 = _n84.Answer.map(function (e) {
                                              return [e.data.replace(/['"]+/g, "")];
                                            });
                                            _o25 = Math.min.apply(Math, _toConsumableArray(_n84.Answer.map(function (e) {
                                              return e.TTL;
                                            })));
                                            return _context331.abrupt("return", {
                                              v: (_this155._TXTcache.set(ny(e, t), _s36, {
                                                ttl: _o25
                                              }), _s36)
                                            });
                                          case 12:
                                            _context331.prev = 12;
                                            _context331.t0 = _context331["catch"](3);
                                            i.signal.aborted && (n = !0), iy.error("".concat(r, " could not resolve ").concat(e, " record ").concat(t));
                                          case 15:
                                            _context331.prev = 15;
                                            _this155._abortControllers = _this155._abortControllers.filter(function (e) {
                                              return e !== i;
                                            });
                                            return _context331.finish(15);
                                          case 18:
                                          case "end":
                                            return _context331.stop();
                                        }
                                      }, _loop10, null, [[3, 12, 15, 18]]);
                                    });
                                    _iterator116.s();
                                  case 8:
                                    if ((_step116 = _iterator116.n()).done) {
                                      _context332.next = 15;
                                      break;
                                    }
                                    return _context332.delegateYield(_loop10(), "t0", 10);
                                  case 10:
                                    _ret8 = _context332.t0;
                                    if (!(_typeof(_ret8) === "object")) {
                                      _context332.next = 13;
                                      break;
                                    }
                                    return _context332.abrupt("return", _ret8.v);
                                  case 13:
                                    _context332.next = 8;
                                    break;
                                  case 15:
                                    _context332.next = 20;
                                    break;
                                  case 17:
                                    _context332.prev = 17;
                                    _context332.t1 = _context332["catch"](5);
                                    _iterator116.e(_context332.t1);
                                  case 20:
                                    _context332.prev = 20;
                                    _iterator116.f();
                                    return _context332.finish(20);
                                  case 23:
                                    if (!n) {
                                      _context332.next = 25;
                                      break;
                                    }
                                    throw Object.assign(new Error("queryTxt ECANCELLED"), {
                                      code: "ECANCELLED"
                                    });
                                  case 25:
                                    throw new Error("Could not resolve ".concat(e, " record ").concat(t));
                                  case 26:
                                  case "end":
                                    return _context332.stop();
                                }
                              }, _callee324, this, [[5, 17, 20, 23]]);
                            }));
                            function resolveTxt(_x343) {
                              return _resolveTxt.apply(this, arguments);
                            }
                            return resolveTxt;
                          }()
                        }, {
                          key: "clearCache",
                          value: function clearCache() {
                            this._cache.clear(), this._TXTcache.clear();
                          }
                        }]);
                        return _class26;
                      }())();
                      null != t.signal && t.signal.addEventListener("abort", function () {
                        r.cancel();
                      });
                      n = e.getPeerId(), _ref141 = (_e$stringTuples$find = e.stringTuples().find(function (_ref143) {
                        var _ref144 = _slicedToArray(_ref143, 1),
                          e = _ref144[0];
                        return e === sy;
                      })) !== null && _e$stringTuples$find !== void 0 ? _e$stringTuples$find : [], _ref142 = _slicedToArray(_ref141, 2), i = _ref142[1];
                      if (!(null == i)) {
                        _context333.next = 6;
                        break;
                      }
                      throw new Error("No hostname found in multiaddr");
                    case 6:
                      _context333.next = 8;
                      return r.resolveTxt("_dnsaddr.".concat(i));
                    case 8:
                      s = _context333.sent.flat().map(function (e) {
                        return e.split("=")[1];
                      });
                      return _context333.abrupt("return", (null != n && (s = s.filter(function (e) {
                        return e.includes(n);
                      })), s));
                    case 10:
                    case "end":
                      return _context333.stop();
                  }
                }, _callee325);
              }));
              function dnsaddr(_x339) {
                return _dnsaddr.apply(this, arguments);
              }
              return dnsaddr;
            }()
          },
          addressSorter: jh
        },
        connectionGater: {},
        transportManager: {
          faultTolerance: En.FATAL_ALL
        },
        peerRouting: {
          refreshManager: {
            enabled: !0,
            interval: 6e5,
            bootDelay: 1e4
          }
        },
        nat: {
          enabled: !0,
          ttl: 7200,
          keepAlive: !0
        },
        relay: {
          enabled: !0,
          advertise: {
            bootDelay: 9e5,
            enabled: !1,
            ttl: 18e5
          },
          hop: {
            enabled: !1,
            active: !1,
            timeout: 3e4
          },
          autoRelay: {
            enabled: !1,
            maxListeners: 2
          }
        },
        identify: {
          protocolPrefix: "ipfs",
          host: {
            agentVersion: Qd
          },
          timeout: 6e4,
          maxInboundStreams: 1,
          maxOutboundStreams: 1,
          maxPushIncomingStreams: 1,
          maxPushOutgoingStreams: 1
        },
        ping: {
          protocolPrefix: "ipfs",
          maxInboundStreams: 1,
          maxOutboundStreams: 1,
          timeout: 1e4
        },
        fetch: {
          protocolPrefix: "libp2p",
          maxInboundStreams: 1,
          maxOutboundStreams: 1,
          timeout: 1e4
        }
      };
    var ay;
    !function (e) {
      var t;
      e.codec = function () {
        return null == t && (t = Ji(function (e, t) {
          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          !1 !== r.lengthDelimited && t.fork(), (!0 === r.writeDefaults || null != e.id && e.id.byteLength > 0) && (t.uint32(10), t.bytes(e.id)), null != e.pubKey && (t.uint32(18), t.bytes(e.pubKey)), null != e.privKey && (t.uint32(26), t.bytes(e.privKey)), !1 !== r.lengthDelimited && t.ldelim();
        }, function (e, t) {
          var r = {
              id: new Uint8Array(0)
            },
            n = null == t ? e.len : e.pos + t;
          for (; e.pos < n;) {
            var _t133 = e.uint32();
            switch (_t133 >>> 3) {
              case 1:
                r.id = e.bytes();
                break;
              case 2:
                r.pubKey = e.bytes();
                break;
              case 3:
                r.privKey = e.bytes();
                break;
              default:
                e.skipType(7 & _t133);
            }
          }
          return r;
        })), t;
      }, e.encode = function (t) {
        return Hi(t, e.codec());
      }, e.decode = function (t) {
        return ji(t, e.codec());
      };
    }(ay || (ay = {}));
    var cy = /*#__PURE__*/function () {
      var _ref145 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee327() {
        var e, t;
        return _regeneratorRuntime().wrap(function _callee327$(_context335) {
          while (1) switch (_context335.prev = _context335.next) {
            case 0:
              _context335.next = 2;
              return Fa("Ed25519");
            case 2:
              e = _context335.sent;
              _context335.next = 5;
              return function () {
                var _ref146 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee326(e) {
                  var _r148;
                  var t, r;
                  return _regeneratorRuntime().wrap(function _callee326$(_context334) {
                    while (1) switch (_context334.prev = _context334.next) {
                      case 0:
                        _context334.next = 2;
                        return sc((t = e.public, Ka(r = ((_r148 = r) !== null && _r148 !== void 0 ? _r148 : "rsa").toLowerCase()), t.bytes), function (e, t) {
                          var _t134;
                          return Ka(t = ((_t134 = t) !== null && _t134 !== void 0 ? _t134 : "rsa").toLowerCase()), e.bytes;
                        }(e));
                      case 2:
                        return _context334.abrupt("return", _context334.sent);
                      case 3:
                      case "end":
                        return _context334.stop();
                    }
                  }, _callee326);
                }));
                return function (_x344) {
                  return _ref146.apply(this, arguments);
                };
              }()(e);
            case 5:
              t = _context335.sent;
              if (!("Ed25519" === t.type)) {
                _context335.next = 8;
                break;
              }
              return _context335.abrupt("return", t);
            case 8:
              throw new Error("Generated unexpected PeerId type \"".concat(t.type, "\""));
            case 9:
            case "end":
              return _context335.stop();
          }
        }, _callee327);
      }));
      return function cy() {
        return _ref145.apply(this, arguments);
      };
    }();
    var ly = /*#__PURE__*/function (_Wr11, _Symbol$toStringTag10) {
      _inherits(ly, _Wr11);
      var _super47 = _createSuper(ly);
      function ly() {
        _classCallCheck(this, ly);
        return _super47.apply(this, arguments);
      }
      _createClass(ly, [{
        key: du,
        get: function get() {
          return !0;
        }
      }, {
        key: _Symbol$toStringTag10,
        get: function get() {
          return "@libp2p/dummy-dht";
        }
      }, {
        key: "wan",
        get: function get() {
          throw Qt(new Error(Ru.DHT_DISABLED), ku.DHT_DISABLED);
        }
      }, {
        key: "lan",
        get: function get() {
          throw Qt(new Error(Ru.DHT_DISABLED), ku.DHT_DISABLED);
        }
      }, {
        key: "get",
        value: function get() {
          throw Qt(new Error(Ru.DHT_DISABLED), ku.DHT_DISABLED);
        }
      }, {
        key: "findProviders",
        value: function findProviders() {
          throw Qt(new Error(Ru.DHT_DISABLED), ku.DHT_DISABLED);
        }
      }, {
        key: "findPeer",
        value: function findPeer() {
          throw Qt(new Error(Ru.DHT_DISABLED), ku.DHT_DISABLED);
        }
      }, {
        key: "getClosestPeers",
        value: function getClosestPeers() {
          throw Qt(new Error(Ru.DHT_DISABLED), ku.DHT_DISABLED);
        }
      }, {
        key: "provide",
        value: function provide() {
          throw Qt(new Error(Ru.DHT_DISABLED), ku.DHT_DISABLED);
        }
      }, {
        key: "put",
        value: function put() {
          throw Qt(new Error(Ru.DHT_DISABLED), ku.DHT_DISABLED);
        }
      }, {
        key: "getMode",
        value: function () {
          var _getMode = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee328() {
            return _regeneratorRuntime().wrap(function _callee328$(_context336) {
              while (1) switch (_context336.prev = _context336.next) {
                case 0:
                  throw Qt(new Error(Ru.DHT_DISABLED), ku.DHT_DISABLED);
                case 1:
                case "end":
                  return _context336.stop();
              }
            }, _callee328);
          }));
          function getMode() {
            return _getMode.apply(this, arguments);
          }
          return getMode;
        }()
      }, {
        key: "setMode",
        value: function () {
          var _setMode = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee329() {
            return _regeneratorRuntime().wrap(function _callee329$(_context337) {
              while (1) switch (_context337.prev = _context337.next) {
                case 0:
                  throw Qt(new Error(Ru.DHT_DISABLED), ku.DHT_DISABLED);
                case 1:
                case "end":
                  return _context337.stop();
              }
            }, _callee329);
          }));
          function setMode() {
            return _setMode.apply(this, arguments);
          }
          return setMode;
        }()
      }, {
        key: "refreshRoutingTable",
        value: function () {
          var _refreshRoutingTable = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee330() {
            return _regeneratorRuntime().wrap(function _callee330$(_context338) {
              while (1) switch (_context338.prev = _context338.next) {
                case 0:
                  throw Qt(new Error(Ru.DHT_DISABLED), ku.DHT_DISABLED);
                case 1:
                case "end":
                  return _context338.stop();
              }
            }, _callee330);
          }));
          function refreshRoutingTable() {
            return _refreshRoutingTable.apply(this, arguments);
          }
          return refreshRoutingTable;
        }()
      }]);
      return ly;
    }(Wr, Symbol.toStringTag);
    var uy = /*#__PURE__*/function (_Wr12) {
      _inherits(uy, _Wr12);
      var _super48 = _createSuper(uy);
      function uy() {
        var _this156;
        _classCallCheck(this, uy);
        _this156 = _super48.apply(this, arguments), _this156.topicValidators = new Map();
        return _this156;
      }
      _createClass(uy, [{
        key: "isStarted",
        value: function isStarted() {
          return !1;
        }
      }, {
        key: "start",
        value: function start() {}
      }, {
        key: "stop",
        value: function stop() {}
      }, {
        key: "globalSignaturePolicy",
        get: function get() {
          throw Qt(new Error(Ru.PUBSUB_DISABLED), ku.ERR_PUBSUB_DISABLED);
        }
      }, {
        key: "multicodecs",
        get: function get() {
          throw Qt(new Error(Ru.PUBSUB_DISABLED), ku.ERR_PUBSUB_DISABLED);
        }
      }, {
        key: "getPeers",
        value: function getPeers() {
          throw Qt(new Error(Ru.PUBSUB_DISABLED), ku.ERR_PUBSUB_DISABLED);
        }
      }, {
        key: "getTopics",
        value: function getTopics() {
          throw Qt(new Error(Ru.PUBSUB_DISABLED), ku.ERR_PUBSUB_DISABLED);
        }
      }, {
        key: "subscribe",
        value: function subscribe() {
          throw Qt(new Error(Ru.PUBSUB_DISABLED), ku.ERR_PUBSUB_DISABLED);
        }
      }, {
        key: "unsubscribe",
        value: function unsubscribe() {
          throw Qt(new Error(Ru.PUBSUB_DISABLED), ku.ERR_PUBSUB_DISABLED);
        }
      }, {
        key: "getSubscribers",
        value: function getSubscribers() {
          throw Qt(new Error(Ru.PUBSUB_DISABLED), ku.ERR_PUBSUB_DISABLED);
        }
      }, {
        key: "publish",
        value: function () {
          var _publish = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee331() {
            return _regeneratorRuntime().wrap(function _callee331$(_context339) {
              while (1) switch (_context339.prev = _context339.next) {
                case 0:
                  throw Qt(new Error(Ru.PUBSUB_DISABLED), ku.ERR_PUBSUB_DISABLED);
                case 1:
                case "end":
                  return _context339.stop();
              }
            }, _callee331);
          }));
          function publish() {
            return _publish.apply(this, arguments);
          }
          return publish;
        }()
      }]);
      return uy;
    }(Wr);
    var hy = __webpack_require__(5103);
    var dy = ne("libp2p:dialer:dial-request");
    var py = /*#__PURE__*/function () {
      function py(e) {
        _classCallCheck(this, py);
        var t = e.addrs,
          r = e.dialAction,
          n = e.dialer;
        this.addrs = t, this.dialer = n, this.dialAction = r;
      }
      _createClass(py, [{
        key: "run",
        value: function () {
          var _run = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee333() {
            var _this157 = this;
            var e,
              t,
              r,
              _iterator117,
              _step117,
              _e147,
              n,
              _ref148,
              i,
              s,
              _args341 = arguments;
            return _regeneratorRuntime().wrap(function _callee333$(_context341) {
              while (1) switch (_context341.prev = _context341.next) {
                case 0:
                  e = _args341.length > 0 && _args341[0] !== undefined ? _args341[0] : {};
                  t = this.dialer.getTokens(this.addrs.length);
                  if (!(t.length < 1)) {
                    _context341.next = 4;
                    break;
                  }
                  throw Qt(new Error("No dial tokens available"), ku.ERR_NO_DIAL_TOKENS);
                case 4:
                  r = new hy();
                  _iterator117 = _createForOfIteratorHelper(t);
                  try {
                    for (_iterator117.s(); !(_step117 = _iterator117.n()).done;) {
                      _e147 = _step117.value;
                      r.push(_e147).catch(function (e) {
                        dy.error(e);
                      });
                    }
                  } catch (err) {
                    _iterator117.e(err);
                  } finally {
                    _iterator117.f();
                  }
                  n = this.addrs.map(function () {
                    var e = new AbortController();
                    try {
                      var _ref147;
                      (_ref147 = (0, xu.setMaxListeners)) === null || _ref147 === void 0 ? void 0 : _ref147(1 / 0, e.signal);
                    } catch (_unused21) {}
                    return e;
                  });
                  if (null != e.signal) try {
                    (_ref148 = (0, xu.setMaxListeners)) === null || _ref148 === void 0 ? void 0 : _ref148(1 / 0, e.signal);
                  } catch (_unused22) {}
                  i = 0, s = !1;
                  _context341.prev = 10;
                  _context341.next = 13;
                  return Promise.any(this.addrs.map( /*#__PURE__*/function () {
                    var _ref149 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee332(o, a) {
                      var c, l, u, _t135;
                      return _regeneratorRuntime().wrap(function _callee332$(_context340) {
                        while (1) switch (_context340.prev = _context340.next) {
                          case 0:
                            _context340.next = 2;
                            return r.shift();
                          case 2:
                            c = _context340.sent;
                            if (!s) {
                              _context340.next = 5;
                              break;
                            }
                            throw _this157.dialer.releaseToken(t.splice(t.indexOf(c), 1)[0]), Qt(new Error("dialAction already succeeded"), ku.ERR_ALREADY_SUCCEEDED);
                          case 5:
                            l = n[a];
                            if (!(null == l)) {
                              _context340.next = 8;
                              break;
                            }
                            throw Qt(new Error("dialAction did not come with an AbortController"), ku.ERR_INVALID_PARAMETERS);
                          case 8:
                            _context340.prev = 8;
                            _t135 = l.signal;
                            _context340.next = 12;
                            return _this157.dialAction(o, _objectSpread(_objectSpread({}, e), {}, {
                              signal: null != e.signal ? (0, Fn.anySignal)([_t135, e.signal]) : _t135
                            }));
                          case 12:
                            u = _context340.sent;
                            n[a] = void 0;
                          case 14:
                            _context340.prev = 14;
                            i++, _this157.addrs.length - i >= t.length ? r.push(c).catch(function (e) {
                              dy.error(e);
                            }) : _this157.dialer.releaseToken(t.splice(t.indexOf(c), 1)[0]);
                            return _context340.finish(14);
                          case 17:
                            if (!(null == u)) {
                              _context340.next = 19;
                              break;
                            }
                            throw Qt(new Error("dialAction led to empty object"), ku.ERR_TRANSPORT_DIAL_FAILED);
                          case 19:
                            return _context340.abrupt("return", (s = !0, u));
                          case 20:
                          case "end":
                            return _context340.stop();
                        }
                      }, _callee332, null, [[8,, 14, 17]]);
                    }));
                    return function (_x345, _x346) {
                      return _ref149.apply(this, arguments);
                    };
                  }()));
                case 13:
                  return _context341.abrupt("return", _context341.sent);
                case 14:
                  _context341.prev = 14;
                  n.forEach(function (e) {
                    void 0 !== e && e.abort();
                  }), t.forEach(function (e) {
                    return _this157.dialer.releaseToken(e);
                  });
                  return _context341.finish(14);
                case 17:
                case "end":
                  return _context341.stop();
              }
            }, _callee333, this, [[10,, 14, 17]]);
          }));
          function run() {
            return _run.apply(this, arguments);
          }
          return run;
        }()
      }]);
      return py;
    }();
    var fy = ne("libp2p:dialer");
    var yy = /*#__PURE__*/function () {
      function yy(e) {
        var _t$addressSorter2, _t$maxAddrsToDial, _t$dialTimeout2, _t$maxDialsPerPeer, _t$maxParallelDials;
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        _classCallCheck(this, yy);
        this.started = !1, this.addressSorter = (_t$addressSorter2 = t.addressSorter) !== null && _t$addressSorter2 !== void 0 ? _t$addressSorter2 : jh, this.maxAddrsToDial = (_t$maxAddrsToDial = t.maxAddrsToDial) !== null && _t$maxAddrsToDial !== void 0 ? _t$maxAddrsToDial : 25, this.timeout = (_t$dialTimeout2 = t.dialTimeout) !== null && _t$dialTimeout2 !== void 0 ? _t$dialTimeout2 : 3e4, this.maxDialsPerPeer = (_t$maxDialsPerPeer = t.maxDialsPerPeer) !== null && _t$maxDialsPerPeer !== void 0 ? _t$maxDialsPerPeer : 4, this.tokens = _toConsumableArray(new Array((_t$maxParallelDials = t.maxParallelDials) !== null && _t$maxParallelDials !== void 0 ? _t$maxParallelDials : 100)).map(function (e, t) {
          return t;
        }), this.components = e, this.pendingDials = Ed({
          name: "libp2p_dialler_pending_dials",
          metrics: e.metrics
        }), this.pendingDialTargets = Ed({
          name: "libp2p_dialler_pending_dial_targets",
          metrics: e.metrics
        });
        for (var _i50 = 0, _Object$entries3 = Object.entries((_t$resolvers = t.resolvers) !== null && _t$resolvers !== void 0 ? _t$resolvers : {}); _i50 < _Object$entries3.length; _i50++) {
          var _t$resolvers;
          var _Object$entries3$_i = _slicedToArray(_Object$entries3[_i50], 2),
            _e148 = _Object$entries3$_i[0],
            r = _Object$entries3$_i[1];
          or.set(_e148, r);
        }
      }
      _createClass(yy, [{
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "start",
        value: function () {
          var _start15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee334() {
            return _regeneratorRuntime().wrap(function _callee334$(_context342) {
              while (1) switch (_context342.prev = _context342.next) {
                case 0:
                  this.started = !0;
                case 1:
                case "end":
                  return _context342.stop();
              }
            }, _callee334, this);
          }));
          function start() {
            return _start15.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee335() {
            var _iterator118, _step118, _e149, _iterator119, _step119, _e150;
            return _regeneratorRuntime().wrap(function _callee335$(_context343) {
              while (1) switch (_context343.prev = _context343.next) {
                case 0:
                  this.started = !1;
                  _iterator118 = _createForOfIteratorHelper(this.pendingDials.values());
                  try {
                    for (_iterator118.s(); !(_step118 = _iterator118.n()).done;) {
                      _e149 = _step118.value;
                      try {
                        _e149.controller.abort();
                      } catch (e) {
                        fy.error(e);
                      }
                    }
                  } catch (err) {
                    _iterator118.e(err);
                  } finally {
                    _iterator118.f();
                  }
                  this.pendingDials.clear();
                  _iterator119 = _createForOfIteratorHelper(this.pendingDialTargets.values());
                  try {
                    for (_iterator119.s(); !(_step119 = _iterator119.n()).done;) {
                      _e150 = _step119.value;
                      _e150.abort();
                    }
                  } catch (err) {
                    _iterator119.e(err);
                  } finally {
                    _iterator119.f();
                  }
                  this.pendingDialTargets.clear();
                case 7:
                case "end":
                  return _context343.stop();
              }
            }, _callee335, this);
          }));
          function stop() {
            return _stop14.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "dial",
        value: function () {
          var _dial4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee336(e) {
            var _this$pendingDials$ge;
            var t,
              _eh2,
              r,
              n,
              i,
              s,
              o,
              a,
              c,
              _e151,
              _args344 = arguments;
            return _regeneratorRuntime().wrap(function _callee336$(_context344) {
              while (1) switch (_context344.prev = _context344.next) {
                case 0:
                  t = _args344.length > 1 && _args344[1] !== undefined ? _args344[1] : {};
                  _eh2 = eh(e), r = _eh2.peerId, n = _eh2.multiaddr;
                  if (!(null != r)) {
                    _context344.next = 14;
                    break;
                  }
                  if (!this.components.peerId.equals(r)) {
                    _context344.next = 5;
                    break;
                  }
                  throw Qt(new Error("Tried to dial self"), ku.ERR_DIALED_SELF);
                case 5:
                  _context344.t0 = null != n;
                  if (!_context344.t0) {
                    _context344.next = 10;
                    break;
                  }
                  fy("storing multiaddrs %p", r, n);
                  _context344.next = 10;
                  return this.components.peerStore.addressBook.add(r, [n]);
                case 10:
                  _context344.next = 12;
                  return this.components.connectionGater.denyDialPeer(r);
                case 12:
                  if (!_context344.sent) {
                    _context344.next = 14;
                    break;
                  }
                  throw Qt(new Error("The dial request is blocked by gater.allowDialPeer"), ku.ERR_PEER_DIAL_INTERCEPTED);
                case 14:
                  fy("creating dial target for %p", r);
                  i = new AbortController(), s = my();
                  this.pendingDialTargets.set(s, i);
                  a = i.signal;
                  null != t.signal && (a = (0, Fn.anySignal)([a, t.signal]));
                  _context344.prev = 19;
                  _context344.next = 22;
                  return this._createDialTarget({
                    peerId: r,
                    multiaddr: n
                  }, _objectSpread(_objectSpread({}, t), {}, {
                    signal: a
                  }));
                case 22:
                  o = _context344.sent;
                case 23:
                  _context344.prev = 23;
                  this.pendingDialTargets.delete(s);
                  return _context344.finish(23);
                case 26:
                  if (!(0 === o.addrs.length)) {
                    _context344.next = 28;
                    break;
                  }
                  throw Qt(new Error("The dial request has no valid addresses"), ku.ERR_NO_VALID_ADDRESSES);
                case 28:
                  c = (_this$pendingDials$ge = this.pendingDials.get(o.id)) !== null && _this$pendingDials$ge !== void 0 ? _this$pendingDials$ge : this._createPendingDial(o, t);
                  _context344.prev = 29;
                  _context344.next = 32;
                  return c.promise;
                case 32:
                  _e151 = _context344.sent;
                  return _context344.abrupt("return", (fy("dial succeeded to %s", o.id), _e151));
                case 36:
                  _context344.prev = 36;
                  _context344.t1 = _context344["catch"](29);
                  throw fy("dial failed to %s", o.id, _context344.t1), c.controller.signal.aborted && (_context344.t1.code = ku.ERR_TIMEOUT), fy.error(_context344.t1), _context344.t1;
                case 39:
                  _context344.prev = 39;
                  c.destroy();
                  return _context344.finish(39);
                case 42:
                case "end":
                  return _context344.stop();
              }
            }, _callee336, this, [[19,, 23, 26], [29, 36, 39, 42]]);
          }));
          function dial(_x347) {
            return _dial4.apply(this, arguments);
          }
          return dial;
        }()
      }, {
        key: "_createDialTarget",
        value: function () {
          var _createDialTarget2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee338(e, t) {
            var _r149,
              _this158 = this;
            var r, n, _e152;
            return _regeneratorRuntime().wrap(function _callee338$(_context346) {
              while (1) switch (_context346.prev = _context346.next) {
                case 0:
                  r = [];
                  lr(e.multiaddr) && r.push(e.multiaddr);
                  _context346.t0 = !lr(e.multiaddr) && $a(e.peerId);
                  if (!_context346.t0) {
                    _context346.next = 12;
                    break;
                  }
                  _context346.t1 = (_r149 = r).push;
                  _context346.t2 = _r149;
                  _context346.t3 = _toConsumableArray;
                  _context346.next = 9;
                  return this._loadAddresses(e.peerId);
                case 9:
                  _context346.t4 = _context346.sent;
                  _context346.t5 = (0, _context346.t3)(_context346.t4);
                  _context346.t1.apply.call(_context346.t1, _context346.t2, _context346.t5);
                case 12:
                  _context346.next = 14;
                  return Promise.all(r.map( /*#__PURE__*/function () {
                    var _ref150 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee337(e) {
                      return _regeneratorRuntime().wrap(function _callee337$(_context345) {
                        while (1) switch (_context345.prev = _context345.next) {
                          case 0:
                            _context345.next = 2;
                            return _this158._resolve(e, t);
                          case 2:
                            return _context345.abrupt("return", _context345.sent);
                          case 3:
                          case "end":
                            return _context345.stop();
                        }
                      }, _callee337);
                    }));
                    return function (_x350) {
                      return _ref150.apply(this, arguments);
                    };
                  }()));
                case 14:
                  r = _context346.sent.flat().filter(function (e) {
                    return Boolean(_this158.components.transportManager.transportForMultiaddr(e));
                  });
                  r = _toConsumableArray(new Set(r.map(function (e) {
                    return e.toString();
                  }))).map(function (e) {
                    return hr(e);
                  });
                  if (!(r.length > this.maxAddrsToDial)) {
                    _context346.next = 18;
                    break;
                  }
                  throw Qt(new Error("dial with more addresses than allowed"), ku.ERR_TOO_MANY_ADDRESSES);
                case 18:
                  n = $a(e.peerId) ? e.peerId : void 0;
                  if (null != n) {
                    _e152 = "/p2p/".concat(n.toString());
                    r = r.map(function (t) {
                      var r = t.getPeerId();
                      return null != r && n.equals(r) ? t : t.encapsulate(_e152);
                    });
                  }
                  return _context346.abrupt("return", {
                    id: null == n ? my() : n.toString(),
                    addrs: r
                  });
                case 21:
                case "end":
                  return _context346.stop();
              }
            }, _callee338, this);
          }));
          function _createDialTarget(_x348, _x349) {
            return _createDialTarget2.apply(this, arguments);
          }
          return _createDialTarget;
        }()
      }, {
        key: "_loadAddresses",
        value: function () {
          var _loadAddresses2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee340(e) {
            var _this159 = this;
            var t;
            return _regeneratorRuntime().wrap(function _callee340$(_context348) {
              while (1) switch (_context348.prev = _context348.next) {
                case 0:
                  _context348.next = 2;
                  return this.components.peerStore.addressBook.get(e);
                case 2:
                  t = _context348.sent;
                  _context348.next = 5;
                  return Promise.all(t.map( /*#__PURE__*/function () {
                    var _ref151 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee339(t) {
                      return _regeneratorRuntime().wrap(function _callee339$(_context347) {
                        while (1) switch (_context347.prev = _context347.next) {
                          case 0:
                            _context347.next = 2;
                            return _this159.components.connectionGater.denyDialMultiaddr(e, t.multiaddr);
                          case 2:
                            _context347.t0 = !_context347.sent;
                            if (!_context347.t0) {
                              _context347.next = 5;
                              break;
                            }
                            _context347.t0 = t;
                          case 5:
                            return _context347.abrupt("return", _context347.t0);
                          case 6:
                          case "end":
                            return _context347.stop();
                        }
                      }, _callee339);
                    }));
                    return function (_x352) {
                      return _ref151.apply(this, arguments);
                    };
                  }()));
                case 5:
                  return _context348.abrupt("return", _context348.sent.filter(gy).sort(this.addressSorter).map(function (e) {
                    return e.multiaddr;
                  }));
                case 6:
                case "end":
                  return _context348.stop();
              }
            }, _callee340, this);
          }));
          function _loadAddresses(_x351) {
            return _loadAddresses2.apply(this, arguments);
          }
          return _loadAddresses;
        }()
      }, {
        key: "_createPendingDial",
        value: function _createPendingDial(e) {
          var _this160 = this;
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
          var r = new py({
              addrs: e.addrs,
              dialAction: function () {
                var _dialAction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee341(e) {
                  var _t$signal4;
                  var t,
                    _args349 = arguments;
                  return _regeneratorRuntime().wrap(function _callee341$(_context349) {
                    while (1) switch (_context349.prev = _context349.next) {
                      case 0:
                        t = _args349.length > 1 && _args349[1] !== undefined ? _args349[1] : {};
                        if (!(!0 === ((_t$signal4 = t.signal) === null || _t$signal4 === void 0 ? void 0 : _t$signal4.aborted))) {
                          _context349.next = 3;
                          break;
                        }
                        throw Qt(new Error("already aborted"), ku.ERR_ALREADY_ABORTED);
                      case 3:
                        _context349.next = 5;
                        return _this160.components.transportManager.dial(e, t).catch(function (t) {
                          throw fy.error("dial to %s failed", e, t), t;
                        });
                      case 5:
                        return _context349.abrupt("return", _context349.sent);
                      case 6:
                      case "end":
                        return _context349.stop();
                    }
                  }, _callee341);
                }));
                function dialAction(_x353) {
                  return _dialAction.apply(this, arguments);
                }
                return dialAction;
              }(),
              dialer: this
            }),
            n = new Pu.TimeoutController(this.timeout),
            i = [n.signal];
          null != t.signal && i.push(t.signal);
          var s = (0, Fn.anySignal)(i);
          try {
            var _ref152;
            (_ref152 = (0, xu.setMaxListeners)) === null || _ref152 === void 0 ? void 0 : _ref152(1 / 0, s);
          } catch (_unused23) {}
          var o = {
            dialRequest: r,
            controller: n,
            promise: r.run(_objectSpread(_objectSpread({}, t), {}, {
              signal: s
            })),
            destroy: function destroy() {
              n.clear(), _this160.pendingDials.delete(e.id);
            }
          };
          return this.pendingDials.set(e.id, o), o;
        }
      }, {
        key: "getTokens",
        value: function getTokens(e) {
          var t = Math.min(e, this.maxDialsPerPeer, this.tokens.length),
            r = this.tokens.splice(0, t);
          return fy("%d tokens request, returning %d, %d remaining", e, t, this.tokens.length), r;
        }
      }, {
        key: "releaseToken",
        value: function releaseToken(e) {
          this.tokens.includes(e) || (fy("token %d released", e), this.tokens.push(e));
        }
      }, {
        key: "_resolve",
        value: function () {
          var _resolve5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee343(e, t) {
            var _this161 = this;
            var r;
            return _regeneratorRuntime().wrap(function _callee343$(_context351) {
              while (1) switch (_context351.prev = _context351.next) {
                case 0:
                  if (e.protoNames().includes("dnsaddr")) {
                    _context351.next = 2;
                    break;
                  }
                  return _context351.abrupt("return", [e]);
                case 2:
                  _context351.next = 4;
                  return this._resolveRecord(e, t);
                case 4:
                  r = _context351.sent;
                  _context351.next = 7;
                  return Promise.all(r.map( /*#__PURE__*/function () {
                    var _ref153 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee342(e) {
                      return _regeneratorRuntime().wrap(function _callee342$(_context350) {
                        while (1) switch (_context350.prev = _context350.next) {
                          case 0:
                            _context350.next = 2;
                            return _this161._resolve(e, t);
                          case 2:
                            return _context350.abrupt("return", _context350.sent);
                          case 3:
                          case "end":
                            return _context350.stop();
                        }
                      }, _callee342);
                    }));
                    return function (_x356) {
                      return _ref153.apply(this, arguments);
                    };
                  }()));
                case 7:
                  return _context351.abrupt("return", _context351.sent.flat().reduce(function (e, t) {
                    return null == e.find(function (e) {
                      return e.equals(t);
                    }) && e.push(t), e;
                  }, []));
                case 8:
                case "end":
                  return _context351.stop();
              }
            }, _callee343, this);
          }));
          function _resolve(_x354, _x355) {
            return _resolve5.apply(this, arguments);
          }
          return _resolve;
        }()
      }, {
        key: "_resolveRecord",
        value: function () {
          var _resolveRecord2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee344(e, t) {
            return _regeneratorRuntime().wrap(function _callee344$(_context352) {
              while (1) switch (_context352.prev = _context352.next) {
                case 0:
                  _context352.prev = 0;
                  e = hr(e.toString());
                  _context352.next = 4;
                  return e.resolve(t);
                case 4:
                  return _context352.abrupt("return", _context352.sent);
                case 7:
                  _context352.prev = 7;
                  _context352.t0 = _context352["catch"](0);
                  return _context352.abrupt("return", (fy.error("multiaddr ".concat(e.toString(), " could not be resolved"), _context352.t0), []));
                case 10:
                case "end":
                  return _context352.stop();
              }
            }, _callee344, null, [[0, 7]]);
          }));
          function _resolveRecord(_x357, _x358) {
            return _resolveRecord2.apply(this, arguments);
          }
          return _resolveRecord;
        }()
      }]);
      return yy;
    }();
    function gy(e) {
      return Boolean(e);
    }
    function my() {
      return "".concat(parseInt(String(1e9 * Math.random()), 10).toString()).concat(Date.now());
    }
    var wy = ne("libp2p");
    var Ey = /*#__PURE__*/function (_Wr13) {
      _inherits(Ey, _Wr13);
      var _super49 = _createSuper(Ey);
      function Ey(e) {
        var _e$datastore, _e$connectionEncrypti, _e$streamMuxers, _e$peerRouters, _e$contentRouters, _e$peerDiscovery;
        var _this162;
        _classCallCheck(this, Ey);
        _this162 = _super49.call(this), _this162.started = !1, _this162.peerId = e.peerId;
        var t = _this162.components = new Jf({
          peerId: e.peerId,
          datastore: (_e$datastore = e.datastore) !== null && _e$datastore !== void 0 ? _e$datastore : new Tu(),
          connectionGater: _objectSpread({
            denyDialPeer: function () {
              var _denyDialPeer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee345() {
                return _regeneratorRuntime().wrap(function _callee345$(_context353) {
                  while (1) switch (_context353.prev = _context353.next) {
                    case 0:
                      _context353.next = 2;
                      return Promise.resolve(!1);
                    case 2:
                      return _context353.abrupt("return", _context353.sent);
                    case 3:
                    case "end":
                      return _context353.stop();
                  }
                }, _callee345);
              }));
              function denyDialPeer() {
                return _denyDialPeer.apply(this, arguments);
              }
              return denyDialPeer;
            }(),
            denyDialMultiaddr: function () {
              var _denyDialMultiaddr = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee346() {
                return _regeneratorRuntime().wrap(function _callee346$(_context354) {
                  while (1) switch (_context354.prev = _context354.next) {
                    case 0:
                      _context354.next = 2;
                      return Promise.resolve(!1);
                    case 2:
                      return _context354.abrupt("return", _context354.sent);
                    case 3:
                    case "end":
                      return _context354.stop();
                  }
                }, _callee346);
              }));
              function denyDialMultiaddr() {
                return _denyDialMultiaddr.apply(this, arguments);
              }
              return denyDialMultiaddr;
            }(),
            denyInboundConnection: function () {
              var _denyInboundConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee347() {
                return _regeneratorRuntime().wrap(function _callee347$(_context355) {
                  while (1) switch (_context355.prev = _context355.next) {
                    case 0:
                      _context355.next = 2;
                      return Promise.resolve(!1);
                    case 2:
                      return _context355.abrupt("return", _context355.sent);
                    case 3:
                    case "end":
                      return _context355.stop();
                  }
                }, _callee347);
              }));
              function denyInboundConnection() {
                return _denyInboundConnection.apply(this, arguments);
              }
              return denyInboundConnection;
            }(),
            denyOutboundConnection: function () {
              var _denyOutboundConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee348() {
                return _regeneratorRuntime().wrap(function _callee348$(_context356) {
                  while (1) switch (_context356.prev = _context356.next) {
                    case 0:
                      _context356.next = 2;
                      return Promise.resolve(!1);
                    case 2:
                      return _context356.abrupt("return", _context356.sent);
                    case 3:
                    case "end":
                      return _context356.stop();
                  }
                }, _callee348);
              }));
              function denyOutboundConnection() {
                return _denyOutboundConnection.apply(this, arguments);
              }
              return denyOutboundConnection;
            }(),
            denyInboundEncryptedConnection: function () {
              var _denyInboundEncryptedConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee349() {
                return _regeneratorRuntime().wrap(function _callee349$(_context357) {
                  while (1) switch (_context357.prev = _context357.next) {
                    case 0:
                      _context357.next = 2;
                      return Promise.resolve(!1);
                    case 2:
                      return _context357.abrupt("return", _context357.sent);
                    case 3:
                    case "end":
                      return _context357.stop();
                  }
                }, _callee349);
              }));
              function denyInboundEncryptedConnection() {
                return _denyInboundEncryptedConnection.apply(this, arguments);
              }
              return denyInboundEncryptedConnection;
            }(),
            denyOutboundEncryptedConnection: function () {
              var _denyOutboundEncryptedConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee350() {
                return _regeneratorRuntime().wrap(function _callee350$(_context358) {
                  while (1) switch (_context358.prev = _context358.next) {
                    case 0:
                      _context358.next = 2;
                      return Promise.resolve(!1);
                    case 2:
                      return _context358.abrupt("return", _context358.sent);
                    case 3:
                    case "end":
                      return _context358.stop();
                  }
                }, _callee350);
              }));
              function denyOutboundEncryptedConnection() {
                return _denyOutboundEncryptedConnection.apply(this, arguments);
              }
              return denyOutboundEncryptedConnection;
            }(),
            denyInboundUpgradedConnection: function () {
              var _denyInboundUpgradedConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee351() {
                return _regeneratorRuntime().wrap(function _callee351$(_context359) {
                  while (1) switch (_context359.prev = _context359.next) {
                    case 0:
                      _context359.next = 2;
                      return Promise.resolve(!1);
                    case 2:
                      return _context359.abrupt("return", _context359.sent);
                    case 3:
                    case "end":
                      return _context359.stop();
                  }
                }, _callee351);
              }));
              function denyInboundUpgradedConnection() {
                return _denyInboundUpgradedConnection.apply(this, arguments);
              }
              return denyInboundUpgradedConnection;
            }(),
            denyOutboundUpgradedConnection: function () {
              var _denyOutboundUpgradedConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee352() {
                return _regeneratorRuntime().wrap(function _callee352$(_context360) {
                  while (1) switch (_context360.prev = _context360.next) {
                    case 0:
                      _context360.next = 2;
                      return Promise.resolve(!1);
                    case 2:
                      return _context360.abrupt("return", _context360.sent);
                    case 3:
                    case "end":
                      return _context360.stop();
                  }
                }, _callee352);
              }));
              function denyOutboundUpgradedConnection() {
                return _denyOutboundUpgradedConnection.apply(this, arguments);
              }
              return denyOutboundUpgradedConnection;
            }(),
            filterMultiaddrForPeer: function () {
              var _filterMultiaddrForPeer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee353() {
                return _regeneratorRuntime().wrap(function _callee353$(_context361) {
                  while (1) switch (_context361.prev = _context361.next) {
                    case 0:
                      _context361.next = 2;
                      return Promise.resolve(!0);
                    case 2:
                      return _context361.abrupt("return", _context361.sent);
                    case 3:
                    case "end":
                      return _context361.stop();
                  }
                }, _callee353);
              }));
              function filterMultiaddrForPeer() {
                return _filterMultiaddrForPeer.apply(this, arguments);
              }
              return filterMultiaddrForPeer;
            }()
          }, e.connectionGater)
        });
        t.peerStore = new Xf(t, _objectSpread({
          addressFilter: _this162.components.connectionGater.filterMultiaddrForPeer
        }, e.peerStore)), _this162.services = [t], null != e.metrics && (_this162.metrics = _this162.components.metrics = _this162.configureComponent(e.metrics(_this162.components))), _this162.peerStore = _this162.components.peerStore, _this162.peerStore.addEventListener("peer", function (e) {
          var t = e.detail;
          _this162.dispatchEvent(new Qr("peer:discovery", {
            detail: t
          }));
        }), null != e.connectionProtector && (_this162.components.connectionProtector = e.connectionProtector(t)), _this162.components.upgrader = new Fd(_this162.components, {
          connectionEncryption: ((_e$connectionEncrypti = e.connectionEncryption) !== null && _e$connectionEncrypti !== void 0 ? _e$connectionEncrypti : []).map(function (e) {
            return _this162.configureComponent(e(_this162.components));
          }),
          muxers: ((_e$streamMuxers = e.streamMuxers) !== null && _e$streamMuxers !== void 0 ? _e$streamMuxers : []).map(function (e) {
            return _this162.configureComponent(e(_this162.components));
          }),
          inboundUpgradeTimeout: e.connectionManager.inboundUpgradeTimeout
        }), _this162.components.dialer = new yy(_this162.components, e.connectionManager), _this162.connectionManager = _this162.components.connectionManager = new nh(_this162.components, e.connectionManager), _this162.components.connectionManager.addEventListener("peer:disconnect", function (e) {
          _this162.dispatchEvent(new Qr("peer:disconnect", {
            detail: e.detail
          }));
        }), _this162.components.connectionManager.addEventListener("peer:connect", function (e) {
          _this162.dispatchEvent(new Qr("peer:connect", {
            detail: e.detail
          }));
        }), _this162.registrar = _this162.components.registrar = new Md(_this162.components), _this162.components.transportManager = new vd(_this162.components, e.transportManager), _this162.components.addressManager = new Fu(_this162.components, e.addresses), _this162.configureComponent(new Ep(_this162.components)), _this162.configureComponent(new ch(_this162.components, {
          enabled: e.connectionManager.autoDial,
          minConnections: e.connectionManager.minConnections,
          autoDialInterval: e.connectionManager.autoDialInterval
        }));
        var r = dd.generateOptions();
        _this162.keychain = _this162.configureComponent(new dd(_this162.components, _objectSpread(_objectSpread({}, r), e.keychain))), _this162.services.push(new mp(_this162.components, e.nat)), e.transports.forEach(function (e) {
          _this162.components.transportManager.add(_this162.configureComponent(e(_this162.components)));
        }), _this162.identifyService = new Zd(_this162.components, _objectSpread({}, e.identify)), _this162.configureComponent(_this162.identifyService), null != e.dht ? _this162.dht = _this162.components.dht = e.dht(_this162.components) : _this162.dht = new ly(), null != e.pubsub ? _this162.pubsub = _this162.components.pubsub = e.pubsub(_this162.components) : _this162.pubsub = new uy();
        var n = ((_e$peerRouters = e.peerRouters) !== null && _e$peerRouters !== void 0 ? _e$peerRouters : []).map(function (e) {
          return _this162.configureComponent(e(_this162.components));
        });
        null != e.dht && (n.push(_this162.configureComponent(new bp(_this162.dht))), _this162.dht.addEventListener("peer", function (e) {
          _this162.onDiscoveryPeer(e);
        })), _this162.peerRouting = _this162.components.peerRouting = _this162.configureComponent(new Mu(_this162.components, _objectSpread(_objectSpread({}, e.peerRouting), {}, {
          routers: n
        })));
        var i = ((_e$contentRouters = e.contentRouters) !== null && _e$contentRouters !== void 0 ? _e$contentRouters : []).map(function (e) {
          return _this162.configureComponent(e(_this162.components));
        });
        null != e.dht && i.push(_this162.configureComponent(new Zf(_this162.dht))), _this162.contentRouting = _this162.components.contentRouting = _this162.configureComponent(new Vu(_this162.components, {
          routers: i
        })), e.relay.enabled && (_this162.components.transportManager.add(_this162.configureComponent(new bh(_this162.components, e.relay))), _this162.configureComponent(new Wh(_this162.components, _objectSpread({
          addressSorter: e.connectionManager.addressSorter
        }, e.relay)))), _this162.fetchService = _this162.configureComponent(new rp(_this162.components, _objectSpread({}, e.fetch))), _this162.pingService = _this162.configureComponent(new ip(_this162.components, _objectSpread({}, e.ping)));
        var _iterator120 = _createForOfIteratorHelper((_e$peerDiscovery = e.peerDiscovery) !== null && _e$peerDiscovery !== void 0 ? _e$peerDiscovery : []),
          _step120;
        try {
          for (_iterator120.s(); !(_step120 = _iterator120.n()).done;) {
            var _t136 = _step120.value;
            _this162.configureComponent(_t136(_this162.components)).addEventListener("peer", function (e) {
              _this162.onDiscoveryPeer(e);
            });
          }
        } catch (err) {
          _iterator120.e(err);
        } finally {
          _iterator120.f();
        }
        return _this162;
      }
      _createClass(Ey, [{
        key: "configureComponent",
        value: function configureComponent(e) {
          return yu(e) && this.services.push(e), e;
        }
      }, {
        key: "start",
        value: function () {
          var _start16 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee356() {
            return _regeneratorRuntime().wrap(function _callee356$(_context364) {
              while (1) switch (_context364.prev = _context364.next) {
                case 0:
                  if (this.started) {
                    _context364.next = 18;
                    break;
                  }
                  this.started = !0, wy("libp2p is starting");
                  _context364.prev = 2;
                  _context364.next = 5;
                  return Promise.all(this.services.map( /*#__PURE__*/function () {
                    var _ref154 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee354(e) {
                      return _regeneratorRuntime().wrap(function _callee354$(_context362) {
                        while (1) switch (_context362.prev = _context362.next) {
                          case 0:
                            _context362.t0 = null != e.beforeStart;
                            if (!_context362.t0) {
                              _context362.next = 4;
                              break;
                            }
                            _context362.next = 4;
                            return e.beforeStart();
                          case 4:
                          case "end":
                            return _context362.stop();
                        }
                      }, _callee354);
                    }));
                    return function (_x359) {
                      return _ref154.apply(this, arguments);
                    };
                  }()));
                case 5:
                  _context364.next = 7;
                  return Promise.all(this.services.map(function (e) {
                    return e.start();
                  }));
                case 7:
                  _context364.next = 9;
                  return Promise.all(this.services.map( /*#__PURE__*/function () {
                    var _ref155 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee355(e) {
                      return _regeneratorRuntime().wrap(function _callee355$(_context363) {
                        while (1) switch (_context363.prev = _context363.next) {
                          case 0:
                            _context363.t0 = null != e.afterStart;
                            if (!_context363.t0) {
                              _context363.next = 4;
                              break;
                            }
                            _context363.next = 4;
                            return e.afterStart();
                          case 4:
                          case "end":
                            return _context363.stop();
                        }
                      }, _callee355);
                    }));
                    return function (_x360) {
                      return _ref155.apply(this, arguments);
                    };
                  }()));
                case 9:
                  wy("libp2p has started");
                  _context364.next = 18;
                  break;
                case 12:
                  _context364.prev = 12;
                  _context364.t0 = _context364["catch"](2);
                  wy.error("An error occurred starting libp2p", _context364.t0);
                  _context364.next = 17;
                  return this.stop();
                case 17:
                  throw _context364.t0;
                case 18:
                case "end":
                  return _context364.stop();
              }
            }, _callee356, this, [[2, 12]]);
          }));
          function start() {
            return _start16.apply(this, arguments);
          }
          return start;
        }()
      }, {
        key: "stop",
        value: function () {
          var _stop15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee359() {
            return _regeneratorRuntime().wrap(function _callee359$(_context367) {
              while (1) switch (_context367.prev = _context367.next) {
                case 0:
                  _context367.t0 = this.started;
                  if (!_context367.t0) {
                    _context367.next = 11;
                    break;
                  }
                  wy("libp2p is stopping");
                  this.started = !1;
                  _context367.next = 6;
                  return Promise.all(this.services.map( /*#__PURE__*/function () {
                    var _ref156 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee357(e) {
                      return _regeneratorRuntime().wrap(function _callee357$(_context365) {
                        while (1) switch (_context365.prev = _context365.next) {
                          case 0:
                            _context365.t0 = null != e.beforeStop;
                            if (!_context365.t0) {
                              _context365.next = 4;
                              break;
                            }
                            _context365.next = 4;
                            return e.beforeStop();
                          case 4:
                          case "end":
                            return _context365.stop();
                        }
                      }, _callee357);
                    }));
                    return function (_x361) {
                      return _ref156.apply(this, arguments);
                    };
                  }()));
                case 6:
                  _context367.next = 8;
                  return Promise.all(this.services.map(function (e) {
                    return e.stop();
                  }));
                case 8:
                  _context367.next = 10;
                  return Promise.all(this.services.map( /*#__PURE__*/function () {
                    var _ref157 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee358(e) {
                      return _regeneratorRuntime().wrap(function _callee358$(_context366) {
                        while (1) switch (_context366.prev = _context366.next) {
                          case 0:
                            _context366.t0 = null != e.afterStop;
                            if (!_context366.t0) {
                              _context366.next = 4;
                              break;
                            }
                            _context366.next = 4;
                            return e.afterStop();
                          case 4:
                          case "end":
                            return _context366.stop();
                        }
                      }, _callee358);
                    }));
                    return function (_x362) {
                      return _ref157.apply(this, arguments);
                    };
                  }()));
                case 10:
                  wy("libp2p has stopped");
                case 11:
                case "end":
                  return _context367.stop();
              }
            }, _callee359, this);
          }));
          function stop() {
            return _stop15.apply(this, arguments);
          }
          return stop;
        }()
      }, {
        key: "isStarted",
        value: function isStarted() {
          return this.started;
        }
      }, {
        key: "getConnections",
        value: function getConnections(e) {
          return this.components.connectionManager.getConnections(e);
        }
      }, {
        key: "getPeers",
        value: function getPeers() {
          var e = new Zu();
          var _iterator121 = _createForOfIteratorHelper(this.components.connectionManager.getConnections()),
            _step121;
          try {
            for (_iterator121.s(); !(_step121 = _iterator121.n()).done;) {
              var t = _step121.value;
              e.add(t.remotePeer);
            }
          } catch (err) {
            _iterator121.e(err);
          } finally {
            _iterator121.f();
          }
          return Array.from(e);
        }
      }, {
        key: "dial",
        value: function () {
          var _dial5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee360(e) {
            var t,
              _args368 = arguments;
            return _regeneratorRuntime().wrap(function _callee360$(_context368) {
              while (1) switch (_context368.prev = _context368.next) {
                case 0:
                  t = _args368.length > 1 && _args368[1] !== undefined ? _args368[1] : {};
                  _context368.next = 3;
                  return this.components.connectionManager.openConnection(e, t);
                case 3:
                  return _context368.abrupt("return", _context368.sent);
                case 4:
                case "end":
                  return _context368.stop();
              }
            }, _callee360, this);
          }));
          function dial(_x363) {
            return _dial5.apply(this, arguments);
          }
          return dial;
        }()
      }, {
        key: "dialProtocol",
        value: function () {
          var _dialProtocol = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee361(e, t) {
            var r,
              n,
              _args369 = arguments;
            return _regeneratorRuntime().wrap(function _callee361$(_context369) {
              while (1) switch (_context369.prev = _context369.next) {
                case 0:
                  r = _args369.length > 2 && _args369[2] !== undefined ? _args369[2] : {};
                  if (!(null == t)) {
                    _context369.next = 3;
                    break;
                  }
                  throw Qt(new Error("no protocols were provided to open a stream"), ku.ERR_INVALID_PROTOCOLS_FOR_STREAM);
                case 3:
                  if (!(0 === (t = Array.isArray(t) ? t : [t]).length)) {
                    _context369.next = 5;
                    break;
                  }
                  throw Qt(new Error("no protocols were provided to open a stream"), ku.ERR_INVALID_PROTOCOLS_FOR_STREAM);
                case 5:
                  _context369.next = 7;
                  return this.dial(e, r);
                case 7:
                  n = _context369.sent;
                  _context369.next = 10;
                  return n.newStream(t, r);
                case 10:
                  return _context369.abrupt("return", _context369.sent);
                case 11:
                case "end":
                  return _context369.stop();
              }
            }, _callee361, this);
          }));
          function dialProtocol(_x364, _x365) {
            return _dialProtocol.apply(this, arguments);
          }
          return dialProtocol;
        }()
      }, {
        key: "getMultiaddrs",
        value: function getMultiaddrs() {
          return this.components.addressManager.getAddresses();
        }
      }, {
        key: "getProtocols",
        value: function getProtocols() {
          return this.components.registrar.getProtocols();
        }
      }, {
        key: "hangUp",
        value: function () {
          var _hangUp = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee362(e) {
            var _e$getPeerId;
            return _regeneratorRuntime().wrap(function _callee362$(_context370) {
              while (1) switch (_context370.prev = _context370.next) {
                case 0:
                  lr(e) && (e = nc((_e$getPeerId = e.getPeerId()) !== null && _e$getPeerId !== void 0 ? _e$getPeerId : ""));
                  _context370.next = 3;
                  return this.components.connectionManager.closeConnections(e);
                case 3:
                case "end":
                  return _context370.stop();
              }
            }, _callee362, this);
          }));
          function hangUp(_x366) {
            return _hangUp.apply(this, arguments);
          }
          return hangUp;
        }()
      }, {
        key: "getPublicKey",
        value: function () {
          var _getPublicKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee363(e) {
            var t,
              r,
              n,
              _iteratorAbruptCompletion31,
              _didIteratorError31,
              _iteratorError31,
              _iterator31,
              _step31,
              _r150,
              _t137,
              _args371 = arguments;
            return _regeneratorRuntime().wrap(function _callee363$(_context371) {
              while (1) switch (_context371.prev = _context371.next) {
                case 0:
                  t = _args371.length > 1 && _args371[1] !== undefined ? _args371[1] : {};
                  if (!(wy("getPublicKey %p", e), null != e.publicKey)) {
                    _context371.next = 3;
                    break;
                  }
                  return _context371.abrupt("return", e.publicKey);
                case 3:
                  _context371.next = 5;
                  return this.peerStore.get(e);
                case 5:
                  r = _context371.sent;
                  if (!(null != r.pubKey)) {
                    _context371.next = 8;
                    break;
                  }
                  return _context371.abrupt("return", r.pubKey);
                case 8:
                  if (!(null == this.dht)) {
                    _context371.next = 10;
                    break;
                  }
                  throw Qt(new Error("Public key was not in the peer store and the DHT is not enabled"), ku.ERR_NO_ROUTERS_AVAILABLE);
                case 10:
                  n = Bt([Pt("/pk/"), e.multihash.digest]);
                  _iteratorAbruptCompletion31 = false;
                  _didIteratorError31 = false;
                  _context371.prev = 13;
                  _iterator31 = _asyncIterator(this.dht.get(n, t));
                case 15:
                  _context371.next = 17;
                  return _iterator31.next();
                case 17:
                  if (!(_iteratorAbruptCompletion31 = !(_step31 = _context371.sent).done)) {
                    _context371.next = 27;
                    break;
                  }
                  _r150 = _step31.value;
                  if (!("VALUE" === _r150.name)) {
                    _context371.next = 24;
                    break;
                  }
                  _t137 = qa(_r150.value);
                  _context371.next = 23;
                  return this.peerStore.keyBook.set(e, _r150.value);
                case 23:
                  return _context371.abrupt("return", _t137.bytes);
                case 24:
                  _iteratorAbruptCompletion31 = false;
                  _context371.next = 15;
                  break;
                case 27:
                  _context371.next = 33;
                  break;
                case 29:
                  _context371.prev = 29;
                  _context371.t0 = _context371["catch"](13);
                  _didIteratorError31 = true;
                  _iteratorError31 = _context371.t0;
                case 33:
                  _context371.prev = 33;
                  _context371.prev = 34;
                  if (!(_iteratorAbruptCompletion31 && _iterator31.return != null)) {
                    _context371.next = 38;
                    break;
                  }
                  _context371.next = 38;
                  return _iterator31.return();
                case 38:
                  _context371.prev = 38;
                  if (!_didIteratorError31) {
                    _context371.next = 41;
                    break;
                  }
                  throw _iteratorError31;
                case 41:
                  return _context371.finish(38);
                case 42:
                  return _context371.finish(33);
                case 43:
                  throw Qt(new Error("Node not responding with its public key: ".concat(e.toString())), ku.ERR_INVALID_RECORD);
                case 44:
                case "end":
                  return _context371.stop();
              }
            }, _callee363, this, [[13, 29, 33, 43], [34,, 38, 42]]);
          }));
          function getPublicKey(_x367) {
            return _getPublicKey.apply(this, arguments);
          }
          return getPublicKey;
        }()
      }, {
        key: "fetch",
        value: function () {
          var _fetch2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee364(e, t) {
            var r,
              _e$getPeerId2,
              _t138,
              _args372 = arguments;
            return _regeneratorRuntime().wrap(function _callee364$(_context372) {
              while (1) switch (_context372.prev = _context372.next) {
                case 0:
                  r = _args372.length > 2 && _args372[2] !== undefined ? _args372[2] : {};
                  if (!lr(e)) {
                    _context372.next = 6;
                    break;
                  }
                  _t138 = nc((_e$getPeerId2 = e.getPeerId()) !== null && _e$getPeerId2 !== void 0 ? _e$getPeerId2 : "");
                  _context372.next = 5;
                  return this.components.peerStore.addressBook.add(_t138, [e]);
                case 5:
                  e = _t138;
                case 6:
                  _context372.next = 8;
                  return this.fetchService.fetch(e, t, r);
                case 8:
                  return _context372.abrupt("return", _context372.sent);
                case 9:
                case "end":
                  return _context372.stop();
              }
            }, _callee364, this);
          }));
          function fetch(_x368, _x369) {
            return _fetch2.apply(this, arguments);
          }
          return fetch;
        }()
      }, {
        key: "ping",
        value: function () {
          var _ping2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee365(e) {
            var t,
              _e$getPeerId3,
              _t139,
              _args373 = arguments;
            return _regeneratorRuntime().wrap(function _callee365$(_context373) {
              while (1) switch (_context373.prev = _context373.next) {
                case 0:
                  t = _args373.length > 1 && _args373[1] !== undefined ? _args373[1] : {};
                  if (!lr(e)) {
                    _context373.next = 6;
                    break;
                  }
                  _t139 = nc((_e$getPeerId3 = e.getPeerId()) !== null && _e$getPeerId3 !== void 0 ? _e$getPeerId3 : "");
                  _context373.next = 5;
                  return this.components.peerStore.addressBook.add(_t139, [e]);
                case 5:
                  e = _t139;
                case 6:
                  _context373.next = 8;
                  return this.pingService.ping(e, t);
                case 8:
                  return _context373.abrupt("return", _context373.sent);
                case 9:
                case "end":
                  return _context373.stop();
              }
            }, _callee365, this);
          }));
          function ping(_x370) {
            return _ping2.apply(this, arguments);
          }
          return ping;
        }()
      }, {
        key: "handle",
        value: function () {
          var _handle2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee367(e, t, r) {
            var _this163 = this;
            return _regeneratorRuntime().wrap(function _callee367$(_context375) {
              while (1) switch (_context375.prev = _context375.next) {
                case 0:
                  Array.isArray(e) || (e = [e]);
                  _context375.next = 3;
                  return Promise.all(e.map( /*#__PURE__*/function () {
                    var _ref158 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee366(e) {
                      return _regeneratorRuntime().wrap(function _callee366$(_context374) {
                        while (1) switch (_context374.prev = _context374.next) {
                          case 0:
                            _context374.next = 2;
                            return _this163.components.registrar.handle(e, t, r);
                          case 2:
                          case "end":
                            return _context374.stop();
                        }
                      }, _callee366);
                    }));
                    return function (_x374) {
                      return _ref158.apply(this, arguments);
                    };
                  }()));
                case 3:
                case "end":
                  return _context375.stop();
              }
            }, _callee367);
          }));
          function handle(_x371, _x372, _x373) {
            return _handle2.apply(this, arguments);
          }
          return handle;
        }()
      }, {
        key: "unhandle",
        value: function () {
          var _unhandle2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee369(e) {
            var _this164 = this;
            return _regeneratorRuntime().wrap(function _callee369$(_context377) {
              while (1) switch (_context377.prev = _context377.next) {
                case 0:
                  Array.isArray(e) || (e = [e]);
                  _context377.next = 3;
                  return Promise.all(e.map( /*#__PURE__*/function () {
                    var _ref159 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee368(e) {
                      return _regeneratorRuntime().wrap(function _callee368$(_context376) {
                        while (1) switch (_context376.prev = _context376.next) {
                          case 0:
                            _context376.next = 2;
                            return _this164.components.registrar.unhandle(e);
                          case 2:
                          case "end":
                            return _context376.stop();
                        }
                      }, _callee368);
                    }));
                    return function (_x376) {
                      return _ref159.apply(this, arguments);
                    };
                  }()));
                case 3:
                case "end":
                  return _context377.stop();
              }
            }, _callee369);
          }));
          function unhandle(_x375) {
            return _unhandle2.apply(this, arguments);
          }
          return unhandle;
        }()
      }, {
        key: "register",
        value: function () {
          var _register2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee370(e, t) {
            return _regeneratorRuntime().wrap(function _callee370$(_context378) {
              while (1) switch (_context378.prev = _context378.next) {
                case 0:
                  _context378.next = 2;
                  return this.registrar.register(e, t);
                case 2:
                  return _context378.abrupt("return", _context378.sent);
                case 3:
                case "end":
                  return _context378.stop();
              }
            }, _callee370, this);
          }));
          function register(_x377, _x378) {
            return _register2.apply(this, arguments);
          }
          return register;
        }()
      }, {
        key: "unregister",
        value: function unregister(e) {
          this.registrar.unregister(e);
        }
      }, {
        key: "onDiscoveryPeer",
        value: function onDiscoveryPeer(e) {
          var t = e.detail;
          t.id.toString() !== this.peerId.toString() ? (t.multiaddrs.length > 0 && this.components.peerStore.addressBook.add(t.id, t.multiaddrs).catch(function (e) {
            return wy.error(e);
          }), t.protocols.length > 0 && this.components.peerStore.protoBook.set(t.id, t.protocols).catch(function (e) {
            return wy.error(e);
          }), this.dispatchEvent(new Qr("peer:discovery", {
            detail: t
          }))) : wy.error(new Error(ku.ERR_DISCOVERED_SELF));
        }
      }]);
      return Ey;
    }(Wr);
    document.addEventListener("DOMContentLoaded", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee373() {
      var e, t, r, n, i;
      return _regeneratorRuntime().wrap(function _callee373$(_context381) {
        while (1) switch (_context381.prev = _context381.next) {
          case 0:
            i = function _i51(e) {
              console.info(e), n.textContent += "".concat(e.trim(), "\n");
            };
            _context381.next = 3;
            return function () {
              var _ref161 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee372(e) {
                var t;
                return _regeneratorRuntime().wrap(function _callee372$(_context380) {
                  while (1) switch (_context380.prev = _context380.next) {
                    case 0:
                      _context380.next = 2;
                      return function () {
                        var _ref162 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee371(e) {
                          var _t140, _e$keychain, _r151;
                          return _regeneratorRuntime().wrap(function _callee371$(_context379) {
                            while (1) switch (_context379.prev = _context379.next) {
                              case 0:
                                if (!(null == e.peerId)) {
                                  _context379.next = 14;
                                  break;
                                }
                                _t140 = e.datastore;
                                if (!(null != _t140)) {
                                  _context379.next = 14;
                                  break;
                                }
                                _context379.prev = 3;
                                _r151 = new dd({
                                  datastore: _t140
                                }, _objectSpread(_objectSpread({}, dd.generateOptions()), (_e$keychain = e.keychain) !== null && _e$keychain !== void 0 ? _e$keychain : {}));
                                _context379.next = 7;
                                return _r151.exportPeerId("self");
                              case 7:
                                e.peerId = _context379.sent;
                                _context379.next = 14;
                                break;
                              case 10:
                                _context379.prev = 10;
                                _context379.t0 = _context379["catch"](3);
                                if (!("ERR_NOT_FOUND" !== _context379.t0.code)) {
                                  _context379.next = 14;
                                  break;
                                }
                                throw _context379.t0;
                              case 14:
                                _context379.t1 = null == e.peerId;
                                if (!_context379.t1) {
                                  _context379.next = 19;
                                  break;
                                }
                                _context379.next = 18;
                                return cy();
                              case 18:
                                e.peerId = _context379.sent;
                              case 19:
                                return _context379.abrupt("return", new Ey(function (e) {
                                  var _globalThis$process3, _globalThis$process3$;
                                  var t = qu(oy, e);
                                  if (null == t.transports || t.transports.length < 1) throw Qt(new Error(Ru.ERR_TRANSPORTS_REQUIRED), ku.ERR_TRANSPORTS_REQUIRED);
                                  if (null == t.connectionEncryption || 0 === t.connectionEncryption.length) throw Qt(new Error(Ru.CONN_ENCRYPTION_REQUIRED), ku.CONN_ENCRYPTION_REQUIRED);
                                  if (null === t.connectionProtector && null != ((_globalThis$process3 = globalThis.process) === null || _globalThis$process3 === void 0 ? void 0 : (_globalThis$process3$ = _globalThis$process3.env) === null || _globalThis$process3$ === void 0 ? void 0 : _globalThis$process3$.LIBP2P_FORCE_PNET)) throw Qt(new Error(Ru.ERR_PROTECTOR_REQUIRED), ku.ERR_PROTECTOR_REQUIRED);
                                  return t.identify.host.agentVersion === Qd && (hp || lp ? t.identify.host.agentVersion += " UserAgent=".concat(globalThis.process.version) : (cp || dp || up || pp) && (t.identify.host.agentVersion += " UserAgent=".concat(globalThis.navigator.userAgent))), t;
                                }(e)));
                              case 20:
                              case "end":
                                return _context379.stop();
                            }
                          }, _callee371, null, [[3, 10]]);
                        }));
                        return function (_x380) {
                          return _ref162.apply(this, arguments);
                        };
                      }()(e);
                    case 2:
                      t = _context380.sent;
                      _context380.t0 = !1 !== e.start;
                      if (!_context380.t0) {
                        _context380.next = 7;
                        break;
                      }
                      _context380.next = 7;
                      return t.start();
                    case 7:
                      return _context380.abrupt("return", t);
                    case 8:
                    case "end":
                      return _context380.stop();
                  }
                }, _callee372);
              }));
              return function (_x379) {
                return _ref161.apply(this, arguments);
              };
            }()({
              transports: [_n()],
              streamMuxers: [Yn()],
              connectionEncryption: [_c()],
              peerDiscovery: [(t = {
                list: ["/ip4/127.0.0.1/tcp/9090/http/p2p-webrtc-direct/p2p/12D3KooWCuo3MdXfMgaqpLC5Houi1TRoFqgK9aoxok4NK5udMu8m"]
              }, function (e) {
                return new fu(e, t);
              })]
            });
          case 3:
            e = _context381.sent;
            r = document.getElementById("status"), n = document.getElementById("output");
            n.textContent = "", e.addEventListener("peer:discovery", function (t) {
              i("Found peer ".concat(t.detail.id.toString())), e.dial(t.detail.id).catch(function (e) {
                i("Could not dial ".concat(t.detail.id));
              });
            }), e.connectionManager.addEventListener("peer:connect", function (e) {
              i("Connected to ".concat(e.detail.remotePeer.toString()));
            }), e.connectionManager.addEventListener("peer:disconnect", function (e) {
              i("Disconnected from ".concat(e.detail.remotePeer.toString()));
            }), r.innerText = "libp2p started!", i("libp2p id is ".concat(e.peerId.toString()));
          case 6:
          case "end":
            return _context381.stop();
        }
      }, _callee373);
    })));
  })();
})();
},{"process":"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/node_modules/process/browser.js","buffer":"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/node_modules/buffer/index.js"}],"../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js":[function(require,module,exports) {
var global = arguments[3];
var OVERLAY_ID = '__parcel__error__overlay__';
var OldModule = module.bundle.Module;
function Module(moduleName) {
  OldModule.call(this, moduleName);
  this.hot = {
    data: module.bundle.hotData,
    _acceptCallbacks: [],
    _disposeCallbacks: [],
    accept: function (fn) {
      this._acceptCallbacks.push(fn || function () {});
    },
    dispose: function (fn) {
      this._disposeCallbacks.push(fn);
    }
  };
  module.bundle.hotData = null;
}
module.bundle.Module = Module;
var checkedAssets, assetsToAccept;
var parent = module.bundle.parent;
if ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {
  var hostname = "" || location.hostname;
  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';
  var ws = new WebSocket(protocol + '://' + hostname + ':' + "36651" + '/');
  ws.onmessage = function (event) {
    checkedAssets = {};
    assetsToAccept = [];
    var data = JSON.parse(event.data);
    if (data.type === 'update') {
      var handled = false;
      data.assets.forEach(function (asset) {
        if (!asset.isNew) {
          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);
          if (didAccept) {
            handled = true;
          }
        }
      });

      // Enable HMR for CSS by default.
      handled = handled || data.assets.every(function (asset) {
        return asset.type === 'css' && asset.generated.js;
      });
      if (handled) {
        console.clear();
        data.assets.forEach(function (asset) {
          hmrApply(global.parcelRequire, asset);
        });
        assetsToAccept.forEach(function (v) {
          hmrAcceptRun(v[0], v[1]);
        });
      } else if (location.reload) {
        // `location` global exists in a web worker context but lacks `.reload()` function.
        location.reload();
      }
    }
    if (data.type === 'reload') {
      ws.close();
      ws.onclose = function () {
        location.reload();
      };
    }
    if (data.type === 'error-resolved') {
      console.log('[parcel]  Error resolved');
      removeErrorOverlay();
    }
    if (data.type === 'error') {
      console.error('[parcel]   ' + data.error.message + '\n' + data.error.stack);
      removeErrorOverlay();
      var overlay = createErrorOverlay(data);
      document.body.appendChild(overlay);
    }
  };
}
function removeErrorOverlay() {
  var overlay = document.getElementById(OVERLAY_ID);
  if (overlay) {
    overlay.remove();
  }
}
function createErrorOverlay(data) {
  var overlay = document.createElement('div');
  overlay.id = OVERLAY_ID;

  // html encode message and stack trace
  var message = document.createElement('div');
  var stackTrace = document.createElement('pre');
  message.innerText = data.error.message;
  stackTrace.innerText = data.error.stack;
  overlay.innerHTML = '<div style="background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;">' + '<span style="background: red; padding: 2px 4px; border-radius: 2px;">ERROR</span>' + '<span style="top: 2px; margin-left: 5px; position: relative;"></span>' + '<div style="font-size: 18px; font-weight: bold; margin-top: 20px;">' + message.innerHTML + '</div>' + '<pre>' + stackTrace.innerHTML + '</pre>' + '</div>';
  return overlay;
}
function getParents(bundle, id) {
  var modules = bundle.modules;
  if (!modules) {
    return [];
  }
  var parents = [];
  var k, d, dep;
  for (k in modules) {
    for (d in modules[k][1]) {
      dep = modules[k][1][d];
      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {
        parents.push(k);
      }
    }
  }
  if (bundle.parent) {
    parents = parents.concat(getParents(bundle.parent, id));
  }
  return parents;
}
function hmrApply(bundle, asset) {
  var modules = bundle.modules;
  if (!modules) {
    return;
  }
  if (modules[asset.id] || !bundle.parent) {
    var fn = new Function('require', 'module', 'exports', asset.generated.js);
    asset.isNew = !modules[asset.id];
    modules[asset.id] = [fn, asset.deps];
  } else if (bundle.parent) {
    hmrApply(bundle.parent, asset);
  }
}
function hmrAcceptCheck(bundle, id) {
  var modules = bundle.modules;
  if (!modules) {
    return;
  }
  if (!modules[id] && bundle.parent) {
    return hmrAcceptCheck(bundle.parent, id);
  }
  if (checkedAssets[id]) {
    return;
  }
  checkedAssets[id] = true;
  var cached = bundle.cache[id];
  assetsToAccept.push([bundle, id]);
  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {
    return true;
  }
  return getParents(global.parcelRequire, id).some(function (id) {
    return hmrAcceptCheck(global.parcelRequire, id);
  });
}
function hmrAcceptRun(bundle, id) {
  var cached = bundle.cache[id];
  bundle.hotData = {};
  if (cached) {
    cached.hot.data = bundle.hotData;
  }
  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {
    cached.hot._disposeCallbacks.forEach(function (cb) {
      cb(bundle.hotData);
    });
  }
  delete bundle.cache[id];
  bundle(id);
  cached = bundle.cache[id];
  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {
    cached.hot._acceptCallbacks.forEach(function (cb) {
      cb();
    });
    return true;
  }
}
},{}]},{},["../../../.nvm/versions/node/v16.17.1/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js","dist/main.js"], null)
//# sourceMappingURL=/main.7cfef742.js.map